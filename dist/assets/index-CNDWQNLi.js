function Fp(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const h in i)if(h!=="default"&&!(h in t)){const m=Object.getOwnPropertyDescriptor(i,h);m&&Object.defineProperty(t,h,m.get?m:{enumerable:!0,get:()=>i[h]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))i(h);new MutationObserver(h=>{for(const m of h)if(m.type==="childList")for(const _ of m.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&i(_)}).observe(document,{childList:!0,subtree:!0});function n(h){const m={};return h.integrity&&(m.integrity=h.integrity),h.referrerPolicy&&(m.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?m.credentials="include":h.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function i(h){if(h.ep)return;h.ep=!0;const m=n(h);fetch(h.href,m)}})();function Bp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Up(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var h=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,h.get?h:{enumerable:!0,get:function(){return t[i]}})}),n}var ph={exports:{}},no={},gh={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ii=Symbol.for("react.element"),zp=Symbol.for("react.portal"),Wp=Symbol.for("react.fragment"),Hp=Symbol.for("react.strict_mode"),Vp=Symbol.for("react.profiler"),Xp=Symbol.for("react.provider"),Yp=Symbol.for("react.context"),Gp=Symbol.for("react.forward_ref"),$p=Symbol.for("react.suspense"),Kp=Symbol.for("react.memo"),qp=Symbol.for("react.lazy"),wc=Symbol.iterator;function Qp(t){return t===null||typeof t!="object"?null:(t=wc&&t[wc]||t["@@iterator"],typeof t=="function"?t:null)}var mh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vh=Object.assign,yh={};function Or(t,e,n){this.props=t,this.context=e,this.refs=yh,this.updater=n||mh}Or.prototype.isReactComponent={};Or.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Or.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function _h(){}_h.prototype=Or.prototype;function cl(t,e,n){this.props=t,this.context=e,this.refs=yh,this.updater=n||mh}var ul=cl.prototype=new _h;ul.constructor=cl;vh(ul,Or.prototype);ul.isPureReactComponent=!0;var Cc=Array.isArray,xh=Object.prototype.hasOwnProperty,hl={current:null},wh={key:!0,ref:!0,__self:!0,__source:!0};function Ch(t,e,n){var i,h={},m=null,_=null;if(e!=null)for(i in e.ref!==void 0&&(_=e.ref),e.key!==void 0&&(m=""+e.key),e)xh.call(e,i)&&!wh.hasOwnProperty(i)&&(h[i]=e[i]);var f=arguments.length-2;if(f===1)h.children=n;else if(1<f){for(var r=Array(f),u=0;u<f;u++)r[u]=arguments[u+2];h.children=r}if(t&&t.defaultProps)for(i in f=t.defaultProps,f)h[i]===void 0&&(h[i]=f[i]);return{$$typeof:Ii,type:t,key:m,ref:_,props:h,_owner:hl.current}}function Jp(t,e){return{$$typeof:Ii,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function fl(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ii}function Zp(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Sc=/\/+/g;function So(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Zp(""+t.key):e.toString(36)}function ls(t,e,n,i,h){var m=typeof t;(m==="undefined"||m==="boolean")&&(t=null);var _=!1;if(t===null)_=!0;else switch(m){case"string":case"number":_=!0;break;case"object":switch(t.$$typeof){case Ii:case zp:_=!0}}if(_)return _=t,h=h(_),t=i===""?"."+So(_,0):i,Cc(h)?(n="",t!=null&&(n=t.replace(Sc,"$&/")+"/"),ls(h,e,n,"",function(u){return u})):h!=null&&(fl(h)&&(h=Jp(h,n+(!h.key||_&&_.key===h.key?"":(""+h.key).replace(Sc,"$&/")+"/")+t)),e.push(h)),1;if(_=0,i=i===""?".":i+":",Cc(t))for(var f=0;f<t.length;f++){m=t[f];var r=i+So(m,f);_+=ls(m,e,n,r,h)}else if(r=Qp(t),typeof r=="function")for(t=r.call(t),f=0;!(m=t.next()).done;)m=m.value,r=i+So(m,f++),_+=ls(m,e,n,r,h);else if(m==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return _}function Vi(t,e,n){if(t==null)return t;var i=[],h=0;return ls(t,i,"","",function(m){return e.call(n,m,h++)}),i}function eg(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ge={current:null},cs={transition:null},tg={ReactCurrentDispatcher:Ge,ReactCurrentBatchConfig:cs,ReactCurrentOwner:hl};function Sh(){throw Error("act(...) is not supported in production builds of React.")}fe.Children={map:Vi,forEach:function(t,e,n){Vi(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Vi(t,function(){e++}),e},toArray:function(t){return Vi(t,function(e){return e})||[]},only:function(t){if(!fl(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};fe.Component=Or;fe.Fragment=Wp;fe.Profiler=Vp;fe.PureComponent=cl;fe.StrictMode=Hp;fe.Suspense=$p;fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tg;fe.act=Sh;fe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=vh({},t.props),h=t.key,m=t.ref,_=t._owner;if(e!=null){if(e.ref!==void 0&&(m=e.ref,_=hl.current),e.key!==void 0&&(h=""+e.key),t.type&&t.type.defaultProps)var f=t.type.defaultProps;for(r in e)xh.call(e,r)&&!wh.hasOwnProperty(r)&&(i[r]=e[r]===void 0&&f!==void 0?f[r]:e[r])}var r=arguments.length-2;if(r===1)i.children=n;else if(1<r){f=Array(r);for(var u=0;u<r;u++)f[u]=arguments[u+2];i.children=f}return{$$typeof:Ii,type:t.type,key:h,ref:m,props:i,_owner:_}};fe.createContext=function(t){return t={$$typeof:Yp,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Xp,_context:t},t.Consumer=t};fe.createElement=Ch;fe.createFactory=function(t){var e=Ch.bind(null,t);return e.type=t,e};fe.createRef=function(){return{current:null}};fe.forwardRef=function(t){return{$$typeof:Gp,render:t}};fe.isValidElement=fl;fe.lazy=function(t){return{$$typeof:qp,_payload:{_status:-1,_result:t},_init:eg}};fe.memo=function(t,e){return{$$typeof:Kp,type:t,compare:e===void 0?null:e}};fe.startTransition=function(t){var e=cs.transition;cs.transition={};try{t()}finally{cs.transition=e}};fe.unstable_act=Sh;fe.useCallback=function(t,e){return Ge.current.useCallback(t,e)};fe.useContext=function(t){return Ge.current.useContext(t)};fe.useDebugValue=function(){};fe.useDeferredValue=function(t){return Ge.current.useDeferredValue(t)};fe.useEffect=function(t,e){return Ge.current.useEffect(t,e)};fe.useId=function(){return Ge.current.useId()};fe.useImperativeHandle=function(t,e,n){return Ge.current.useImperativeHandle(t,e,n)};fe.useInsertionEffect=function(t,e){return Ge.current.useInsertionEffect(t,e)};fe.useLayoutEffect=function(t,e){return Ge.current.useLayoutEffect(t,e)};fe.useMemo=function(t,e){return Ge.current.useMemo(t,e)};fe.useReducer=function(t,e,n){return Ge.current.useReducer(t,e,n)};fe.useRef=function(t){return Ge.current.useRef(t)};fe.useState=function(t){return Ge.current.useState(t)};fe.useSyncExternalStore=function(t,e,n){return Ge.current.useSyncExternalStore(t,e,n)};fe.useTransition=function(){return Ge.current.useTransition()};fe.version="18.3.1";gh.exports=fe;var K=gh.exports;const Th=Bp(K),ng=Fp({__proto__:null,default:Th},[K]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rg=K,ig=Symbol.for("react.element"),sg=Symbol.for("react.fragment"),og=Object.prototype.hasOwnProperty,ag=rg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,lg={key:!0,ref:!0,__self:!0,__source:!0};function bh(t,e,n){var i,h={},m=null,_=null;n!==void 0&&(m=""+n),e.key!==void 0&&(m=""+e.key),e.ref!==void 0&&(_=e.ref);for(i in e)og.call(e,i)&&!lg.hasOwnProperty(i)&&(h[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)h[i]===void 0&&(h[i]=e[i]);return{$$typeof:ig,type:t,key:m,ref:_,props:h,_owner:ag.current}}no.Fragment=sg;no.jsx=bh;no.jsxs=bh;ph.exports=no;var C=ph.exports,ia={},kh={exports:{}},it={},Eh={exports:{}},Oh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,T){var O=B.length;B.push(T);e:for(;0<O;){var I=O-1>>>1,A=B[I];if(0<h(A,T))B[I]=T,B[O]=A,O=I;else break e}}function n(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var T=B[0],O=B.pop();if(O!==T){B[0]=O;e:for(var I=0,A=B.length,L=A>>>1;I<L;){var P=2*(I+1)-1,E=B[P],D=P+1,R=B[D];if(0>h(E,O))D<A&&0>h(R,E)?(B[I]=R,B[D]=O,I=D):(B[I]=E,B[P]=O,I=P);else if(D<A&&0>h(R,O))B[I]=R,B[D]=O,I=D;else break e}}return T}function h(B,T){var O=B.sortIndex-T.sortIndex;return O!==0?O:B.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var m=performance;t.unstable_now=function(){return m.now()}}else{var _=Date,f=_.now();t.unstable_now=function(){return _.now()-f}}var r=[],u=[],d=1,s=null,a=3,o=!1,c=!1,g=!1,l=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(B){for(var T=n(u);T!==null;){if(T.callback===null)i(u);else if(T.startTime<=B)i(u),T.sortIndex=T.expirationTime,e(r,T);else break;T=n(u)}}function x(B){if(g=!1,y(B),!c)if(n(r)!==null)c=!0,ie(w);else{var T=n(u);T!==null&&oe(x,T.startTime-B)}}function w(B,T){c=!1,g&&(g=!1,p(b),b=-1),o=!0;var O=a;try{for(y(T),s=n(r);s!==null&&(!(s.expirationTime>T)||B&&!W());){var I=s.callback;if(typeof I=="function"){s.callback=null,a=s.priorityLevel;var A=I(s.expirationTime<=T);T=t.unstable_now(),typeof A=="function"?s.callback=A:s===n(r)&&i(r),y(T)}else i(r);s=n(r)}if(s!==null)var L=!0;else{var P=n(u);P!==null&&oe(x,P.startTime-T),L=!1}return L}finally{s=null,a=O,o=!1}}var S=!1,k=null,b=-1,j=5,M=-1;function W(){return!(t.unstable_now()-M<j)}function ee(){if(k!==null){var B=t.unstable_now();M=B;var T=!0;try{T=k(!0,B)}finally{T?te():(S=!1,k=null)}}else S=!1}var te;if(typeof v=="function")te=function(){v(ee)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,Q=J.port2;J.port1.onmessage=ee,te=function(){Q.postMessage(null)}}else te=function(){l(ee,0)};function ie(B){k=B,S||(S=!0,te())}function oe(B,T){b=l(function(){B(t.unstable_now())},T)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){c||o||(c=!0,ie(w))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return a},t.unstable_getFirstCallbackNode=function(){return n(r)},t.unstable_next=function(B){switch(a){case 1:case 2:case 3:var T=3;break;default:T=a}var O=a;a=T;try{return B()}finally{a=O}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,T){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var O=a;a=B;try{return T()}finally{a=O}},t.unstable_scheduleCallback=function(B,T,O){var I=t.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?I+O:I):O=I,B){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=O+A,B={id:d++,callback:T,priorityLevel:B,startTime:O,expirationTime:A,sortIndex:-1},O>I?(B.sortIndex=O,e(u,B),n(r)===null&&B===n(u)&&(g?(p(b),b=-1):g=!0,oe(x,O-I))):(B.sortIndex=A,e(r,B),c||o||(c=!0,ie(w))),B},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(B){var T=a;return function(){var O=a;a=T;try{return B.apply(this,arguments)}finally{a=O}}}})(Oh);Eh.exports=Oh;var cg=Eh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ug=K,rt=cg;function Z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ph=new Set,si={};function Yn(t,e){_r(t,e),_r(t+"Capture",e)}function _r(t,e){for(si[t]=e,t=0;t<e.length;t++)Ph.add(e[t])}var Bt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sa=Object.prototype.hasOwnProperty,hg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Tc={},bc={};function fg(t){return sa.call(bc,t)?!0:sa.call(Tc,t)?!1:hg.test(t)?bc[t]=!0:(Tc[t]=!0,!1)}function dg(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function pg(t,e,n,i){if(e===null||typeof e>"u"||dg(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $e(t,e,n,i,h,m,_){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=h,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=m,this.removeEmptyString=_}var Fe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Fe[t]=new $e(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Fe[e]=new $e(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Fe[t]=new $e(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Fe[t]=new $e(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Fe[t]=new $e(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Fe[t]=new $e(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Fe[t]=new $e(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Fe[t]=new $e(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Fe[t]=new $e(t,5,!1,t.toLowerCase(),null,!1,!1)});var dl=/[\-:]([a-z])/g;function pl(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(dl,pl);Fe[e]=new $e(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(dl,pl);Fe[e]=new $e(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(dl,pl);Fe[e]=new $e(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Fe[t]=new $e(t,1,!1,t.toLowerCase(),null,!1,!1)});Fe.xlinkHref=new $e("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Fe[t]=new $e(t,1,!1,t.toLowerCase(),null,!0,!0)});function gl(t,e,n,i){var h=Fe.hasOwnProperty(e)?Fe[e]:null;(h!==null?h.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(pg(e,n,h,i)&&(n=null),i||h===null?fg(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):h.mustUseProperty?t[h.propertyName]=n===null?h.type===3?!1:"":n:(e=h.attributeName,i=h.attributeNamespace,n===null?t.removeAttribute(e):(h=h.type,n=h===3||h===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Xt=ug.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xi=Symbol.for("react.element"),qn=Symbol.for("react.portal"),Qn=Symbol.for("react.fragment"),ml=Symbol.for("react.strict_mode"),oa=Symbol.for("react.profiler"),Ih=Symbol.for("react.provider"),Ah=Symbol.for("react.context"),vl=Symbol.for("react.forward_ref"),aa=Symbol.for("react.suspense"),la=Symbol.for("react.suspense_list"),yl=Symbol.for("react.memo"),Qt=Symbol.for("react.lazy"),Dh=Symbol.for("react.offscreen"),kc=Symbol.iterator;function jr(t){return t===null||typeof t!="object"?null:(t=kc&&t[kc]||t["@@iterator"],typeof t=="function"?t:null)}var ke=Object.assign,To;function Hr(t){if(To===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);To=e&&e[1]||""}return`
`+To+t}var bo=!1;function ko(t,e){if(!t||bo)return"";bo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var h=u.stack.split(`
`),m=i.stack.split(`
`),_=h.length-1,f=m.length-1;1<=_&&0<=f&&h[_]!==m[f];)f--;for(;1<=_&&0<=f;_--,f--)if(h[_]!==m[f]){if(_!==1||f!==1)do if(_--,f--,0>f||h[_]!==m[f]){var r=`
`+h[_].replace(" at new "," at ");return t.displayName&&r.includes("<anonymous>")&&(r=r.replace("<anonymous>",t.displayName)),r}while(1<=_&&0<=f);break}}}finally{bo=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Hr(t):""}function gg(t){switch(t.tag){case 5:return Hr(t.type);case 16:return Hr("Lazy");case 13:return Hr("Suspense");case 19:return Hr("SuspenseList");case 0:case 2:case 15:return t=ko(t.type,!1),t;case 11:return t=ko(t.type.render,!1),t;case 1:return t=ko(t.type,!0),t;default:return""}}function ca(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Qn:return"Fragment";case qn:return"Portal";case oa:return"Profiler";case ml:return"StrictMode";case aa:return"Suspense";case la:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ah:return(t.displayName||"Context")+".Consumer";case Ih:return(t._context.displayName||"Context")+".Provider";case vl:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case yl:return e=t.displayName||null,e!==null?e:ca(t.type)||"Memo";case Qt:e=t._payload,t=t._init;try{return ca(t(e))}catch{}}return null}function mg(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ca(e);case 8:return e===ml?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function _n(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Mh(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vg(t){var e=Mh(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var h=n.get,m=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return h.call(this)},set:function(_){i=""+_,m.call(this,_)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(_){i=""+_},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Yi(t){t._valueTracker||(t._valueTracker=vg(t))}function jh(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Mh(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Ts(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ua(t,e){var n=e.checked;return ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ec(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=_n(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Rh(t,e){e=e.checked,e!=null&&gl(t,"checked",e,!1)}function ha(t,e){Rh(t,e);var n=_n(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?fa(t,e.type,n):e.hasOwnProperty("defaultValue")&&fa(t,e.type,_n(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Oc(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function fa(t,e,n){(e!=="number"||Ts(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Vr=Array.isArray;function lr(t,e,n,i){if(t=t.options,e){e={};for(var h=0;h<n.length;h++)e["$"+n[h]]=!0;for(n=0;n<t.length;n++)h=e.hasOwnProperty("$"+t[n].value),t[n].selected!==h&&(t[n].selected=h),h&&i&&(t[n].defaultSelected=!0)}else{for(n=""+_n(n),e=null,h=0;h<t.length;h++){if(t[h].value===n){t[h].selected=!0,i&&(t[h].defaultSelected=!0);return}e!==null||t[h].disabled||(e=t[h])}e!==null&&(e.selected=!0)}}function da(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Z(91));return ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Pc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Z(92));if(Vr(n)){if(1<n.length)throw Error(Z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:_n(n)}}function Nh(t,e){var n=_n(e.value),i=_n(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Ic(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Lh(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pa(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Lh(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Gi,Fh=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,h){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,h)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Gi=Gi||document.createElement("div"),Gi.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gi.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function oi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Kr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yg=["Webkit","ms","Moz","O"];Object.keys(Kr).forEach(function(t){yg.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Kr[e]=Kr[t]})});function Bh(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Kr.hasOwnProperty(t)&&Kr[t]?(""+e).trim():e+"px"}function Uh(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,h=Bh(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,h):t[n]=h}}var _g=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ga(t,e){if(e){if(_g[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Z(62))}}function ma(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var va=null;function _l(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ya=null,cr=null,ur=null;function Ac(t){if(t=Mi(t)){if(typeof ya!="function")throw Error(Z(280));var e=t.stateNode;e&&(e=ao(e),ya(t.stateNode,t.type,e))}}function zh(t){cr?ur?ur.push(t):ur=[t]:cr=t}function Wh(){if(cr){var t=cr,e=ur;if(ur=cr=null,Ac(t),e)for(t=0;t<e.length;t++)Ac(e[t])}}function Hh(t,e){return t(e)}function Vh(){}var Eo=!1;function Xh(t,e,n){if(Eo)return t(e,n);Eo=!0;try{return Hh(t,e,n)}finally{Eo=!1,(cr!==null||ur!==null)&&(Vh(),Wh())}}function ai(t,e){var n=t.stateNode;if(n===null)return null;var i=ao(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Z(231,e,typeof n));return n}var _a=!1;if(Bt)try{var Rr={};Object.defineProperty(Rr,"passive",{get:function(){_a=!0}}),window.addEventListener("test",Rr,Rr),window.removeEventListener("test",Rr,Rr)}catch{_a=!1}function xg(t,e,n,i,h,m,_,f,r){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var qr=!1,bs=null,ks=!1,xa=null,wg={onError:function(t){qr=!0,bs=t}};function Cg(t,e,n,i,h,m,_,f,r){qr=!1,bs=null,xg.apply(wg,arguments)}function Sg(t,e,n,i,h,m,_,f,r){if(Cg.apply(this,arguments),qr){if(qr){var u=bs;qr=!1,bs=null}else throw Error(Z(198));ks||(ks=!0,xa=u)}}function Gn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Yh(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Dc(t){if(Gn(t)!==t)throw Error(Z(188))}function Tg(t){var e=t.alternate;if(!e){if(e=Gn(t),e===null)throw Error(Z(188));return e!==t?null:t}for(var n=t,i=e;;){var h=n.return;if(h===null)break;var m=h.alternate;if(m===null){if(i=h.return,i!==null){n=i;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===n)return Dc(h),t;if(m===i)return Dc(h),e;m=m.sibling}throw Error(Z(188))}if(n.return!==i.return)n=h,i=m;else{for(var _=!1,f=h.child;f;){if(f===n){_=!0,n=h,i=m;break}if(f===i){_=!0,i=h,n=m;break}f=f.sibling}if(!_){for(f=m.child;f;){if(f===n){_=!0,n=m,i=h;break}if(f===i){_=!0,i=m,n=h;break}f=f.sibling}if(!_)throw Error(Z(189))}}if(n.alternate!==i)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?t:e}function Gh(t){return t=Tg(t),t!==null?$h(t):null}function $h(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=$h(t);if(e!==null)return e;t=t.sibling}return null}var Kh=rt.unstable_scheduleCallback,Mc=rt.unstable_cancelCallback,bg=rt.unstable_shouldYield,kg=rt.unstable_requestPaint,Oe=rt.unstable_now,Eg=rt.unstable_getCurrentPriorityLevel,xl=rt.unstable_ImmediatePriority,qh=rt.unstable_UserBlockingPriority,Es=rt.unstable_NormalPriority,Og=rt.unstable_LowPriority,Qh=rt.unstable_IdlePriority,ro=null,kt=null;function Pg(t){if(kt&&typeof kt.onCommitFiberRoot=="function")try{kt.onCommitFiberRoot(ro,t,void 0,(t.current.flags&128)===128)}catch{}}var yt=Math.clz32?Math.clz32:Dg,Ig=Math.log,Ag=Math.LN2;function Dg(t){return t>>>=0,t===0?32:31-(Ig(t)/Ag|0)|0}var $i=64,Ki=4194304;function Xr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Os(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,h=t.suspendedLanes,m=t.pingedLanes,_=n&268435455;if(_!==0){var f=_&~h;f!==0?i=Xr(f):(m&=_,m!==0&&(i=Xr(m)))}else _=n&~h,_!==0?i=Xr(_):m!==0&&(i=Xr(m));if(i===0)return 0;if(e!==0&&e!==i&&!(e&h)&&(h=i&-i,m=e&-e,h>=m||h===16&&(m&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-yt(e),h=1<<n,i|=t[n],e&=~h;return i}function Mg(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jg(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,h=t.expirationTimes,m=t.pendingLanes;0<m;){var _=31-yt(m),f=1<<_,r=h[_];r===-1?(!(f&n)||f&i)&&(h[_]=Mg(f,e)):r<=e&&(t.expiredLanes|=f),m&=~f}}function wa(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Jh(){var t=$i;return $i<<=1,!($i&4194240)&&($i=64),t}function Oo(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ai(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-yt(e),t[e]=n}function Rg(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var h=31-yt(n),m=1<<h;e[h]=0,i[h]=-1,t[h]=-1,n&=~m}}function wl(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-yt(n),h=1<<i;h&e|t[i]&e&&(t[i]|=e),n&=~h}}var me=0;function Zh(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ef,Cl,tf,nf,rf,Ca=!1,qi=[],ln=null,cn=null,un=null,li=new Map,ci=new Map,Zt=[],Ng="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jc(t,e){switch(t){case"focusin":case"focusout":ln=null;break;case"dragenter":case"dragleave":cn=null;break;case"mouseover":case"mouseout":un=null;break;case"pointerover":case"pointerout":li.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ci.delete(e.pointerId)}}function Nr(t,e,n,i,h,m){return t===null||t.nativeEvent!==m?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:m,targetContainers:[h]},e!==null&&(e=Mi(e),e!==null&&Cl(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,h!==null&&e.indexOf(h)===-1&&e.push(h),t)}function Lg(t,e,n,i,h){switch(e){case"focusin":return ln=Nr(ln,t,e,n,i,h),!0;case"dragenter":return cn=Nr(cn,t,e,n,i,h),!0;case"mouseover":return un=Nr(un,t,e,n,i,h),!0;case"pointerover":var m=h.pointerId;return li.set(m,Nr(li.get(m)||null,t,e,n,i,h)),!0;case"gotpointercapture":return m=h.pointerId,ci.set(m,Nr(ci.get(m)||null,t,e,n,i,h)),!0}return!1}function sf(t){var e=Mn(t.target);if(e!==null){var n=Gn(e);if(n!==null){if(e=n.tag,e===13){if(e=Yh(n),e!==null){t.blockedOn=e,rf(t.priority,function(){tf(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function us(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Sa(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);va=i,n.target.dispatchEvent(i),va=null}else return e=Mi(n),e!==null&&Cl(e),t.blockedOn=n,!1;e.shift()}return!0}function Rc(t,e,n){us(t)&&n.delete(e)}function Fg(){Ca=!1,ln!==null&&us(ln)&&(ln=null),cn!==null&&us(cn)&&(cn=null),un!==null&&us(un)&&(un=null),li.forEach(Rc),ci.forEach(Rc)}function Lr(t,e){t.blockedOn===e&&(t.blockedOn=null,Ca||(Ca=!0,rt.unstable_scheduleCallback(rt.unstable_NormalPriority,Fg)))}function ui(t){function e(h){return Lr(h,t)}if(0<qi.length){Lr(qi[0],t);for(var n=1;n<qi.length;n++){var i=qi[n];i.blockedOn===t&&(i.blockedOn=null)}}for(ln!==null&&Lr(ln,t),cn!==null&&Lr(cn,t),un!==null&&Lr(un,t),li.forEach(e),ci.forEach(e),n=0;n<Zt.length;n++)i=Zt[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Zt.length&&(n=Zt[0],n.blockedOn===null);)sf(n),n.blockedOn===null&&Zt.shift()}var hr=Xt.ReactCurrentBatchConfig,Ps=!0;function Bg(t,e,n,i){var h=me,m=hr.transition;hr.transition=null;try{me=1,Sl(t,e,n,i)}finally{me=h,hr.transition=m}}function Ug(t,e,n,i){var h=me,m=hr.transition;hr.transition=null;try{me=4,Sl(t,e,n,i)}finally{me=h,hr.transition=m}}function Sl(t,e,n,i){if(Ps){var h=Sa(t,e,n,i);if(h===null)Fo(t,e,i,Is,n),jc(t,i);else if(Lg(h,t,e,n,i))i.stopPropagation();else if(jc(t,i),e&4&&-1<Ng.indexOf(t)){for(;h!==null;){var m=Mi(h);if(m!==null&&ef(m),m=Sa(t,e,n,i),m===null&&Fo(t,e,i,Is,n),m===h)break;h=m}h!==null&&i.stopPropagation()}else Fo(t,e,i,null,n)}}var Is=null;function Sa(t,e,n,i){if(Is=null,t=_l(i),t=Mn(t),t!==null)if(e=Gn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Yh(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Is=t,null}function of(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Eg()){case xl:return 1;case qh:return 4;case Es:case Og:return 16;case Qh:return 536870912;default:return 16}default:return 16}}var sn=null,Tl=null,hs=null;function af(){if(hs)return hs;var t,e=Tl,n=e.length,i,h="value"in sn?sn.value:sn.textContent,m=h.length;for(t=0;t<n&&e[t]===h[t];t++);var _=n-t;for(i=1;i<=_&&e[n-i]===h[m-i];i++);return hs=h.slice(t,1<i?1-i:void 0)}function fs(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Qi(){return!0}function Nc(){return!1}function st(t){function e(n,i,h,m,_){this._reactName=n,this._targetInst=h,this.type=i,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var f in t)t.hasOwnProperty(f)&&(n=t[f],this[f]=n?n(m):m[f]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Qi:Nc,this.isPropagationStopped=Nc,this}return ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Qi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Qi)},persist:function(){},isPersistent:Qi}),e}var Pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bl=st(Pr),Di=ke({},Pr,{view:0,detail:0}),zg=st(Di),Po,Io,Fr,io=ke({},Di,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kl,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Fr&&(Fr&&t.type==="mousemove"?(Po=t.screenX-Fr.screenX,Io=t.screenY-Fr.screenY):Io=Po=0,Fr=t),Po)},movementY:function(t){return"movementY"in t?t.movementY:Io}}),Lc=st(io),Wg=ke({},io,{dataTransfer:0}),Hg=st(Wg),Vg=ke({},Di,{relatedTarget:0}),Ao=st(Vg),Xg=ke({},Pr,{animationName:0,elapsedTime:0,pseudoElement:0}),Yg=st(Xg),Gg=ke({},Pr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$g=st(Gg),Kg=ke({},Pr,{data:0}),Fc=st(Kg),qg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zg(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Jg[t])?!!e[t]:!1}function kl(){return Zg}var em=ke({},Di,{key:function(t){if(t.key){var e=qg[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=fs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Qg[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kl,charCode:function(t){return t.type==="keypress"?fs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),tm=st(em),nm=ke({},io,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bc=st(nm),rm=ke({},Di,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kl}),im=st(rm),sm=ke({},Pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),om=st(sm),am=ke({},io,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),lm=st(am),cm=[9,13,27,32],El=Bt&&"CompositionEvent"in window,Qr=null;Bt&&"documentMode"in document&&(Qr=document.documentMode);var um=Bt&&"TextEvent"in window&&!Qr,lf=Bt&&(!El||Qr&&8<Qr&&11>=Qr),Uc=" ",zc=!1;function cf(t,e){switch(t){case"keyup":return cm.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Jn=!1;function hm(t,e){switch(t){case"compositionend":return uf(e);case"keypress":return e.which!==32?null:(zc=!0,Uc);case"textInput":return t=e.data,t===Uc&&zc?null:t;default:return null}}function fm(t,e){if(Jn)return t==="compositionend"||!El&&cf(t,e)?(t=af(),hs=Tl=sn=null,Jn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return lf&&e.locale!=="ko"?null:e.data;default:return null}}var dm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!dm[t.type]:e==="textarea"}function hf(t,e,n,i){zh(i),e=As(e,"onChange"),0<e.length&&(n=new bl("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Jr=null,hi=null;function pm(t){Cf(t,0)}function so(t){var e=tr(t);if(jh(e))return t}function gm(t,e){if(t==="change")return e}var ff=!1;if(Bt){var Do;if(Bt){var Mo="oninput"in document;if(!Mo){var Hc=document.createElement("div");Hc.setAttribute("oninput","return;"),Mo=typeof Hc.oninput=="function"}Do=Mo}else Do=!1;ff=Do&&(!document.documentMode||9<document.documentMode)}function Vc(){Jr&&(Jr.detachEvent("onpropertychange",df),hi=Jr=null)}function df(t){if(t.propertyName==="value"&&so(hi)){var e=[];hf(e,hi,t,_l(t)),Xh(pm,e)}}function mm(t,e,n){t==="focusin"?(Vc(),Jr=e,hi=n,Jr.attachEvent("onpropertychange",df)):t==="focusout"&&Vc()}function vm(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return so(hi)}function ym(t,e){if(t==="click")return so(e)}function _m(t,e){if(t==="input"||t==="change")return so(e)}function xm(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wt=typeof Object.is=="function"?Object.is:xm;function fi(t,e){if(wt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var h=n[i];if(!sa.call(e,h)||!wt(t[h],e[h]))return!1}return!0}function Xc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yc(t,e){var n=Xc(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Xc(n)}}function pf(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?pf(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function gf(){for(var t=window,e=Ts();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ts(t.document)}return e}function Ol(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function wm(t){var e=gf(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&pf(n.ownerDocument.documentElement,n)){if(i!==null&&Ol(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var h=n.textContent.length,m=Math.min(i.start,h);i=i.end===void 0?m:Math.min(i.end,h),!t.extend&&m>i&&(h=i,i=m,m=h),h=Yc(n,m);var _=Yc(n,i);h&&_&&(t.rangeCount!==1||t.anchorNode!==h.node||t.anchorOffset!==h.offset||t.focusNode!==_.node||t.focusOffset!==_.offset)&&(e=e.createRange(),e.setStart(h.node,h.offset),t.removeAllRanges(),m>i?(t.addRange(e),t.extend(_.node,_.offset)):(e.setEnd(_.node,_.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Cm=Bt&&"documentMode"in document&&11>=document.documentMode,Zn=null,Ta=null,Zr=null,ba=!1;function Gc(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ba||Zn==null||Zn!==Ts(i)||(i=Zn,"selectionStart"in i&&Ol(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Zr&&fi(Zr,i)||(Zr=i,i=As(Ta,"onSelect"),0<i.length&&(e=new bl("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Zn)))}function Ji(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var er={animationend:Ji("Animation","AnimationEnd"),animationiteration:Ji("Animation","AnimationIteration"),animationstart:Ji("Animation","AnimationStart"),transitionend:Ji("Transition","TransitionEnd")},jo={},mf={};Bt&&(mf=document.createElement("div").style,"AnimationEvent"in window||(delete er.animationend.animation,delete er.animationiteration.animation,delete er.animationstart.animation),"TransitionEvent"in window||delete er.transitionend.transition);function oo(t){if(jo[t])return jo[t];if(!er[t])return t;var e=er[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in mf)return jo[t]=e[n];return t}var vf=oo("animationend"),yf=oo("animationiteration"),_f=oo("animationstart"),xf=oo("transitionend"),wf=new Map,$c="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wn(t,e){wf.set(t,e),Yn(e,[t])}for(var Ro=0;Ro<$c.length;Ro++){var No=$c[Ro],Sm=No.toLowerCase(),Tm=No[0].toUpperCase()+No.slice(1);wn(Sm,"on"+Tm)}wn(vf,"onAnimationEnd");wn(yf,"onAnimationIteration");wn(_f,"onAnimationStart");wn("dblclick","onDoubleClick");wn("focusin","onFocus");wn("focusout","onBlur");wn(xf,"onTransitionEnd");_r("onMouseEnter",["mouseout","mouseover"]);_r("onMouseLeave",["mouseout","mouseover"]);_r("onPointerEnter",["pointerout","pointerover"]);_r("onPointerLeave",["pointerout","pointerover"]);Yn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Yn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Yn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Yn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Yn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Yn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yr));function Kc(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,Sg(i,e,void 0,t),t.currentTarget=null}function Cf(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],h=i.event;i=i.listeners;e:{var m=void 0;if(e)for(var _=i.length-1;0<=_;_--){var f=i[_],r=f.instance,u=f.currentTarget;if(f=f.listener,r!==m&&h.isPropagationStopped())break e;Kc(h,f,u),m=r}else for(_=0;_<i.length;_++){if(f=i[_],r=f.instance,u=f.currentTarget,f=f.listener,r!==m&&h.isPropagationStopped())break e;Kc(h,f,u),m=r}}}if(ks)throw t=xa,ks=!1,xa=null,t}function _e(t,e){var n=e[Ia];n===void 0&&(n=e[Ia]=new Set);var i=t+"__bubble";n.has(i)||(Sf(e,t,2,!1),n.add(i))}function Lo(t,e,n){var i=0;e&&(i|=4),Sf(n,t,i,e)}var Zi="_reactListening"+Math.random().toString(36).slice(2);function di(t){if(!t[Zi]){t[Zi]=!0,Ph.forEach(function(n){n!=="selectionchange"&&(bm.has(n)||Lo(n,!1,t),Lo(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Zi]||(e[Zi]=!0,Lo("selectionchange",!1,e))}}function Sf(t,e,n,i){switch(of(e)){case 1:var h=Bg;break;case 4:h=Ug;break;default:h=Sl}n=h.bind(null,e,n,t),h=void 0,!_a||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(h=!0),i?h!==void 0?t.addEventListener(e,n,{capture:!0,passive:h}):t.addEventListener(e,n,!0):h!==void 0?t.addEventListener(e,n,{passive:h}):t.addEventListener(e,n,!1)}function Fo(t,e,n,i,h){var m=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var _=i.tag;if(_===3||_===4){var f=i.stateNode.containerInfo;if(f===h||f.nodeType===8&&f.parentNode===h)break;if(_===4)for(_=i.return;_!==null;){var r=_.tag;if((r===3||r===4)&&(r=_.stateNode.containerInfo,r===h||r.nodeType===8&&r.parentNode===h))return;_=_.return}for(;f!==null;){if(_=Mn(f),_===null)return;if(r=_.tag,r===5||r===6){i=m=_;continue e}f=f.parentNode}}i=i.return}Xh(function(){var u=m,d=_l(n),s=[];e:{var a=wf.get(t);if(a!==void 0){var o=bl,c=t;switch(t){case"keypress":if(fs(n)===0)break e;case"keydown":case"keyup":o=tm;break;case"focusin":c="focus",o=Ao;break;case"focusout":c="blur",o=Ao;break;case"beforeblur":case"afterblur":o=Ao;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":o=Lc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":o=Hg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":o=im;break;case vf:case yf:case _f:o=Yg;break;case xf:o=om;break;case"scroll":o=zg;break;case"wheel":o=lm;break;case"copy":case"cut":case"paste":o=$g;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":o=Bc}var g=(e&4)!==0,l=!g&&t==="scroll",p=g?a!==null?a+"Capture":null:a;g=[];for(var v=u,y;v!==null;){y=v;var x=y.stateNode;if(y.tag===5&&x!==null&&(y=x,p!==null&&(x=ai(v,p),x!=null&&g.push(pi(v,x,y)))),l)break;v=v.return}0<g.length&&(a=new o(a,c,null,n,d),s.push({event:a,listeners:g}))}}if(!(e&7)){e:{if(a=t==="mouseover"||t==="pointerover",o=t==="mouseout"||t==="pointerout",a&&n!==va&&(c=n.relatedTarget||n.fromElement)&&(Mn(c)||c[Ut]))break e;if((o||a)&&(a=d.window===d?d:(a=d.ownerDocument)?a.defaultView||a.parentWindow:window,o?(c=n.relatedTarget||n.toElement,o=u,c=c?Mn(c):null,c!==null&&(l=Gn(c),c!==l||c.tag!==5&&c.tag!==6)&&(c=null)):(o=null,c=u),o!==c)){if(g=Lc,x="onMouseLeave",p="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(g=Bc,x="onPointerLeave",p="onPointerEnter",v="pointer"),l=o==null?a:tr(o),y=c==null?a:tr(c),a=new g(x,v+"leave",o,n,d),a.target=l,a.relatedTarget=y,x=null,Mn(d)===u&&(g=new g(p,v+"enter",c,n,d),g.target=y,g.relatedTarget=l,x=g),l=x,o&&c)t:{for(g=o,p=c,v=0,y=g;y;y=Kn(y))v++;for(y=0,x=p;x;x=Kn(x))y++;for(;0<v-y;)g=Kn(g),v--;for(;0<y-v;)p=Kn(p),y--;for(;v--;){if(g===p||p!==null&&g===p.alternate)break t;g=Kn(g),p=Kn(p)}g=null}else g=null;o!==null&&qc(s,a,o,g,!1),c!==null&&l!==null&&qc(s,l,c,g,!0)}}e:{if(a=u?tr(u):window,o=a.nodeName&&a.nodeName.toLowerCase(),o==="select"||o==="input"&&a.type==="file")var w=gm;else if(Wc(a))if(ff)w=_m;else{w=vm;var S=mm}else(o=a.nodeName)&&o.toLowerCase()==="input"&&(a.type==="checkbox"||a.type==="radio")&&(w=ym);if(w&&(w=w(t,u))){hf(s,w,n,d);break e}S&&S(t,a,u),t==="focusout"&&(S=a._wrapperState)&&S.controlled&&a.type==="number"&&fa(a,"number",a.value)}switch(S=u?tr(u):window,t){case"focusin":(Wc(S)||S.contentEditable==="true")&&(Zn=S,Ta=u,Zr=null);break;case"focusout":Zr=Ta=Zn=null;break;case"mousedown":ba=!0;break;case"contextmenu":case"mouseup":case"dragend":ba=!1,Gc(s,n,d);break;case"selectionchange":if(Cm)break;case"keydown":case"keyup":Gc(s,n,d)}var k;if(El)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Jn?cf(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(lf&&n.locale!=="ko"&&(Jn||b!=="onCompositionStart"?b==="onCompositionEnd"&&Jn&&(k=af()):(sn=d,Tl="value"in sn?sn.value:sn.textContent,Jn=!0)),S=As(u,b),0<S.length&&(b=new Fc(b,t,null,n,d),s.push({event:b,listeners:S}),k?b.data=k:(k=uf(n),k!==null&&(b.data=k)))),(k=um?hm(t,n):fm(t,n))&&(u=As(u,"onBeforeInput"),0<u.length&&(d=new Fc("onBeforeInput","beforeinput",null,n,d),s.push({event:d,listeners:u}),d.data=k))}Cf(s,e)})}function pi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function As(t,e){for(var n=e+"Capture",i=[];t!==null;){var h=t,m=h.stateNode;h.tag===5&&m!==null&&(h=m,m=ai(t,n),m!=null&&i.unshift(pi(t,m,h)),m=ai(t,e),m!=null&&i.push(pi(t,m,h))),t=t.return}return i}function Kn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function qc(t,e,n,i,h){for(var m=e._reactName,_=[];n!==null&&n!==i;){var f=n,r=f.alternate,u=f.stateNode;if(r!==null&&r===i)break;f.tag===5&&u!==null&&(f=u,h?(r=ai(n,m),r!=null&&_.unshift(pi(n,r,f))):h||(r=ai(n,m),r!=null&&_.push(pi(n,r,f)))),n=n.return}_.length!==0&&t.push({event:e,listeners:_})}var km=/\r\n?/g,Em=/\u0000|\uFFFD/g;function Qc(t){return(typeof t=="string"?t:""+t).replace(km,`
`).replace(Em,"")}function es(t,e,n){if(e=Qc(e),Qc(t)!==e&&n)throw Error(Z(425))}function Ds(){}var ka=null,Ea=null;function Oa(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Pa=typeof setTimeout=="function"?setTimeout:void 0,Om=typeof clearTimeout=="function"?clearTimeout:void 0,Jc=typeof Promise=="function"?Promise:void 0,Pm=typeof queueMicrotask=="function"?queueMicrotask:typeof Jc<"u"?function(t){return Jc.resolve(null).then(t).catch(Im)}:Pa;function Im(t){setTimeout(function(){throw t})}function Bo(t,e){var n=e,i=0;do{var h=n.nextSibling;if(t.removeChild(n),h&&h.nodeType===8)if(n=h.data,n==="/$"){if(i===0){t.removeChild(h),ui(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=h}while(n);ui(e)}function hn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Zc(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ir=Math.random().toString(36).slice(2),bt="__reactFiber$"+Ir,gi="__reactProps$"+Ir,Ut="__reactContainer$"+Ir,Ia="__reactEvents$"+Ir,Am="__reactListeners$"+Ir,Dm="__reactHandles$"+Ir;function Mn(t){var e=t[bt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ut]||n[bt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Zc(t);t!==null;){if(n=t[bt])return n;t=Zc(t)}return e}t=n,n=t.parentNode}return null}function Mi(t){return t=t[bt]||t[Ut],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function tr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Z(33))}function ao(t){return t[gi]||null}var Aa=[],nr=-1;function Cn(t){return{current:t}}function xe(t){0>nr||(t.current=Aa[nr],Aa[nr]=null,nr--)}function ye(t,e){nr++,Aa[nr]=t.current,t.current=e}var xn={},We=Cn(xn),Qe=Cn(!1),Bn=xn;function xr(t,e){var n=t.type.contextTypes;if(!n)return xn;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var h={},m;for(m in n)h[m]=e[m];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=h),h}function Je(t){return t=t.childContextTypes,t!=null}function Ms(){xe(Qe),xe(We)}function eu(t,e,n){if(We.current!==xn)throw Error(Z(168));ye(We,e),ye(Qe,n)}function Tf(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var h in i)if(!(h in e))throw Error(Z(108,mg(t)||"Unknown",h));return ke({},n,i)}function js(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||xn,Bn=We.current,ye(We,t),ye(Qe,Qe.current),!0}function tu(t,e,n){var i=t.stateNode;if(!i)throw Error(Z(169));n?(t=Tf(t,e,Bn),i.__reactInternalMemoizedMergedChildContext=t,xe(Qe),xe(We),ye(We,t)):xe(Qe),ye(Qe,n)}var It=null,lo=!1,Uo=!1;function bf(t){It===null?It=[t]:It.push(t)}function Mm(t){lo=!0,bf(t)}function Sn(){if(!Uo&&It!==null){Uo=!0;var t=0,e=me;try{var n=It;for(me=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}It=null,lo=!1}catch(h){throw It!==null&&(It=It.slice(t+1)),Kh(xl,Sn),h}finally{me=e,Uo=!1}}return null}var rr=[],ir=0,Rs=null,Ns=0,ot=[],at=0,Un=null,Dt=1,Mt="";function In(t,e){rr[ir++]=Ns,rr[ir++]=Rs,Rs=t,Ns=e}function kf(t,e,n){ot[at++]=Dt,ot[at++]=Mt,ot[at++]=Un,Un=t;var i=Dt;t=Mt;var h=32-yt(i)-1;i&=~(1<<h),n+=1;var m=32-yt(e)+h;if(30<m){var _=h-h%5;m=(i&(1<<_)-1).toString(32),i>>=_,h-=_,Dt=1<<32-yt(e)+h|n<<h|i,Mt=m+t}else Dt=1<<m|n<<h|i,Mt=t}function Pl(t){t.return!==null&&(In(t,1),kf(t,1,0))}function Il(t){for(;t===Rs;)Rs=rr[--ir],rr[ir]=null,Ns=rr[--ir],rr[ir]=null;for(;t===Un;)Un=ot[--at],ot[at]=null,Mt=ot[--at],ot[at]=null,Dt=ot[--at],ot[at]=null}var nt=null,tt=null,Se=!1,mt=null;function Ef(t,e){var n=lt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function nu(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,nt=t,tt=hn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,nt=t,tt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Un!==null?{id:Dt,overflow:Mt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=lt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,nt=t,tt=null,!0):!1;default:return!1}}function Da(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ma(t){if(Se){var e=tt;if(e){var n=e;if(!nu(t,e)){if(Da(t))throw Error(Z(418));e=hn(n.nextSibling);var i=nt;e&&nu(t,e)?Ef(i,n):(t.flags=t.flags&-4097|2,Se=!1,nt=t)}}else{if(Da(t))throw Error(Z(418));t.flags=t.flags&-4097|2,Se=!1,nt=t}}}function ru(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;nt=t}function ts(t){if(t!==nt)return!1;if(!Se)return ru(t),Se=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Oa(t.type,t.memoizedProps)),e&&(e=tt)){if(Da(t))throw Of(),Error(Z(418));for(;e;)Ef(t,e),e=hn(e.nextSibling)}if(ru(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){tt=hn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}tt=null}}else tt=nt?hn(t.stateNode.nextSibling):null;return!0}function Of(){for(var t=tt;t;)t=hn(t.nextSibling)}function wr(){tt=nt=null,Se=!1}function Al(t){mt===null?mt=[t]:mt.push(t)}var jm=Xt.ReactCurrentBatchConfig;function Br(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Z(309));var i=n.stateNode}if(!i)throw Error(Z(147,t));var h=i,m=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===m?e.ref:(e=function(_){var f=h.refs;_===null?delete f[m]:f[m]=_},e._stringRef=m,e)}if(typeof t!="string")throw Error(Z(284));if(!n._owner)throw Error(Z(290,t))}return t}function ns(t,e){throw t=Object.prototype.toString.call(e),Error(Z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function iu(t){var e=t._init;return e(t._payload)}function Pf(t){function e(p,v){if(t){var y=p.deletions;y===null?(p.deletions=[v],p.flags|=16):y.push(v)}}function n(p,v){if(!t)return null;for(;v!==null;)e(p,v),v=v.sibling;return null}function i(p,v){for(p=new Map;v!==null;)v.key!==null?p.set(v.key,v):p.set(v.index,v),v=v.sibling;return p}function h(p,v){return p=gn(p,v),p.index=0,p.sibling=null,p}function m(p,v,y){return p.index=y,t?(y=p.alternate,y!==null?(y=y.index,y<v?(p.flags|=2,v):y):(p.flags|=2,v)):(p.flags|=1048576,v)}function _(p){return t&&p.alternate===null&&(p.flags|=2),p}function f(p,v,y,x){return v===null||v.tag!==6?(v=Go(y,p.mode,x),v.return=p,v):(v=h(v,y),v.return=p,v)}function r(p,v,y,x){var w=y.type;return w===Qn?d(p,v,y.props.children,x,y.key):v!==null&&(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Qt&&iu(w)===v.type)?(x=h(v,y.props),x.ref=Br(p,v,y),x.return=p,x):(x=_s(y.type,y.key,y.props,null,p.mode,x),x.ref=Br(p,v,y),x.return=p,x)}function u(p,v,y,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==y.containerInfo||v.stateNode.implementation!==y.implementation?(v=$o(y,p.mode,x),v.return=p,v):(v=h(v,y.children||[]),v.return=p,v)}function d(p,v,y,x,w){return v===null||v.tag!==7?(v=Fn(y,p.mode,x,w),v.return=p,v):(v=h(v,y),v.return=p,v)}function s(p,v,y){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Go(""+v,p.mode,y),v.return=p,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Xi:return y=_s(v.type,v.key,v.props,null,p.mode,y),y.ref=Br(p,null,v),y.return=p,y;case qn:return v=$o(v,p.mode,y),v.return=p,v;case Qt:var x=v._init;return s(p,x(v._payload),y)}if(Vr(v)||jr(v))return v=Fn(v,p.mode,y,null),v.return=p,v;ns(p,v)}return null}function a(p,v,y,x){var w=v!==null?v.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return w!==null?null:f(p,v,""+y,x);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Xi:return y.key===w?r(p,v,y,x):null;case qn:return y.key===w?u(p,v,y,x):null;case Qt:return w=y._init,a(p,v,w(y._payload),x)}if(Vr(y)||jr(y))return w!==null?null:d(p,v,y,x,null);ns(p,y)}return null}function o(p,v,y,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return p=p.get(y)||null,f(v,p,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Xi:return p=p.get(x.key===null?y:x.key)||null,r(v,p,x,w);case qn:return p=p.get(x.key===null?y:x.key)||null,u(v,p,x,w);case Qt:var S=x._init;return o(p,v,y,S(x._payload),w)}if(Vr(x)||jr(x))return p=p.get(y)||null,d(v,p,x,w,null);ns(v,x)}return null}function c(p,v,y,x){for(var w=null,S=null,k=v,b=v=0,j=null;k!==null&&b<y.length;b++){k.index>b?(j=k,k=null):j=k.sibling;var M=a(p,k,y[b],x);if(M===null){k===null&&(k=j);break}t&&k&&M.alternate===null&&e(p,k),v=m(M,v,b),S===null?w=M:S.sibling=M,S=M,k=j}if(b===y.length)return n(p,k),Se&&In(p,b),w;if(k===null){for(;b<y.length;b++)k=s(p,y[b],x),k!==null&&(v=m(k,v,b),S===null?w=k:S.sibling=k,S=k);return Se&&In(p,b),w}for(k=i(p,k);b<y.length;b++)j=o(k,p,b,y[b],x),j!==null&&(t&&j.alternate!==null&&k.delete(j.key===null?b:j.key),v=m(j,v,b),S===null?w=j:S.sibling=j,S=j);return t&&k.forEach(function(W){return e(p,W)}),Se&&In(p,b),w}function g(p,v,y,x){var w=jr(y);if(typeof w!="function")throw Error(Z(150));if(y=w.call(y),y==null)throw Error(Z(151));for(var S=w=null,k=v,b=v=0,j=null,M=y.next();k!==null&&!M.done;b++,M=y.next()){k.index>b?(j=k,k=null):j=k.sibling;var W=a(p,k,M.value,x);if(W===null){k===null&&(k=j);break}t&&k&&W.alternate===null&&e(p,k),v=m(W,v,b),S===null?w=W:S.sibling=W,S=W,k=j}if(M.done)return n(p,k),Se&&In(p,b),w;if(k===null){for(;!M.done;b++,M=y.next())M=s(p,M.value,x),M!==null&&(v=m(M,v,b),S===null?w=M:S.sibling=M,S=M);return Se&&In(p,b),w}for(k=i(p,k);!M.done;b++,M=y.next())M=o(k,p,b,M.value,x),M!==null&&(t&&M.alternate!==null&&k.delete(M.key===null?b:M.key),v=m(M,v,b),S===null?w=M:S.sibling=M,S=M);return t&&k.forEach(function(ee){return e(p,ee)}),Se&&In(p,b),w}function l(p,v,y,x){if(typeof y=="object"&&y!==null&&y.type===Qn&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Xi:e:{for(var w=y.key,S=v;S!==null;){if(S.key===w){if(w=y.type,w===Qn){if(S.tag===7){n(p,S.sibling),v=h(S,y.props.children),v.return=p,p=v;break e}}else if(S.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Qt&&iu(w)===S.type){n(p,S.sibling),v=h(S,y.props),v.ref=Br(p,S,y),v.return=p,p=v;break e}n(p,S);break}else e(p,S);S=S.sibling}y.type===Qn?(v=Fn(y.props.children,p.mode,x,y.key),v.return=p,p=v):(x=_s(y.type,y.key,y.props,null,p.mode,x),x.ref=Br(p,v,y),x.return=p,p=x)}return _(p);case qn:e:{for(S=y.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===y.containerInfo&&v.stateNode.implementation===y.implementation){n(p,v.sibling),v=h(v,y.children||[]),v.return=p,p=v;break e}else{n(p,v);break}else e(p,v);v=v.sibling}v=$o(y,p.mode,x),v.return=p,p=v}return _(p);case Qt:return S=y._init,l(p,v,S(y._payload),x)}if(Vr(y))return c(p,v,y,x);if(jr(y))return g(p,v,y,x);ns(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,v!==null&&v.tag===6?(n(p,v.sibling),v=h(v,y),v.return=p,p=v):(n(p,v),v=Go(y,p.mode,x),v.return=p,p=v),_(p)):n(p,v)}return l}var Cr=Pf(!0),If=Pf(!1),Ls=Cn(null),Fs=null,sr=null,Dl=null;function Ml(){Dl=sr=Fs=null}function jl(t){var e=Ls.current;xe(Ls),t._currentValue=e}function ja(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function fr(t,e){Fs=t,Dl=sr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(qe=!0),t.firstContext=null)}function ut(t){var e=t._currentValue;if(Dl!==t)if(t={context:t,memoizedValue:e,next:null},sr===null){if(Fs===null)throw Error(Z(308));sr=t,Fs.dependencies={lanes:0,firstContext:t}}else sr=sr.next=t;return e}var jn=null;function Rl(t){jn===null?jn=[t]:jn.push(t)}function Af(t,e,n,i){var h=e.interleaved;return h===null?(n.next=n,Rl(e)):(n.next=h.next,h.next=n),e.interleaved=n,zt(t,i)}function zt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Jt=!1;function Nl(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Df(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Lt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function fn(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,pe&2){var h=i.pending;return h===null?e.next=e:(e.next=h.next,h.next=e),i.pending=e,zt(t,n)}return h=i.interleaved,h===null?(e.next=e,Rl(i)):(e.next=h.next,h.next=e),i.interleaved=e,zt(t,n)}function ds(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,wl(t,n)}}function su(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var h=null,m=null;if(n=n.firstBaseUpdate,n!==null){do{var _={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};m===null?h=m=_:m=m.next=_,n=n.next}while(n!==null);m===null?h=m=e:m=m.next=e}else h=m=e;n={baseState:i.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Bs(t,e,n,i){var h=t.updateQueue;Jt=!1;var m=h.firstBaseUpdate,_=h.lastBaseUpdate,f=h.shared.pending;if(f!==null){h.shared.pending=null;var r=f,u=r.next;r.next=null,_===null?m=u:_.next=u,_=r;var d=t.alternate;d!==null&&(d=d.updateQueue,f=d.lastBaseUpdate,f!==_&&(f===null?d.firstBaseUpdate=u:f.next=u,d.lastBaseUpdate=r))}if(m!==null){var s=h.baseState;_=0,d=u=r=null,f=m;do{var a=f.lane,o=f.eventTime;if((i&a)===a){d!==null&&(d=d.next={eventTime:o,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,next:null});e:{var c=t,g=f;switch(a=e,o=n,g.tag){case 1:if(c=g.payload,typeof c=="function"){s=c.call(o,s,a);break e}s=c;break e;case 3:c.flags=c.flags&-65537|128;case 0:if(c=g.payload,a=typeof c=="function"?c.call(o,s,a):c,a==null)break e;s=ke({},s,a);break e;case 2:Jt=!0}}f.callback!==null&&f.lane!==0&&(t.flags|=64,a=h.effects,a===null?h.effects=[f]:a.push(f))}else o={eventTime:o,lane:a,tag:f.tag,payload:f.payload,callback:f.callback,next:null},d===null?(u=d=o,r=s):d=d.next=o,_|=a;if(f=f.next,f===null){if(f=h.shared.pending,f===null)break;a=f,f=a.next,a.next=null,h.lastBaseUpdate=a,h.shared.pending=null}}while(!0);if(d===null&&(r=s),h.baseState=r,h.firstBaseUpdate=u,h.lastBaseUpdate=d,e=h.shared.interleaved,e!==null){h=e;do _|=h.lane,h=h.next;while(h!==e)}else m===null&&(h.shared.lanes=0);Wn|=_,t.lanes=_,t.memoizedState=s}}function ou(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],h=i.callback;if(h!==null){if(i.callback=null,i=n,typeof h!="function")throw Error(Z(191,h));h.call(i)}}}var ji={},Et=Cn(ji),mi=Cn(ji),vi=Cn(ji);function Rn(t){if(t===ji)throw Error(Z(174));return t}function Ll(t,e){switch(ye(vi,e),ye(mi,t),ye(Et,ji),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:pa(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=pa(e,t)}xe(Et),ye(Et,e)}function Sr(){xe(Et),xe(mi),xe(vi)}function Mf(t){Rn(vi.current);var e=Rn(Et.current),n=pa(e,t.type);e!==n&&(ye(mi,t),ye(Et,n))}function Fl(t){mi.current===t&&(xe(Et),xe(mi))}var Te=Cn(0);function Us(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zo=[];function Bl(){for(var t=0;t<zo.length;t++)zo[t]._workInProgressVersionPrimary=null;zo.length=0}var ps=Xt.ReactCurrentDispatcher,Wo=Xt.ReactCurrentBatchConfig,zn=0,be=null,De=null,je=null,zs=!1,ei=!1,yi=0,Rm=0;function Be(){throw Error(Z(321))}function Ul(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!wt(t[n],e[n]))return!1;return!0}function zl(t,e,n,i,h,m){if(zn=m,be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ps.current=t===null||t.memoizedState===null?Bm:Um,t=n(i,h),ei){m=0;do{if(ei=!1,yi=0,25<=m)throw Error(Z(301));m+=1,je=De=null,e.updateQueue=null,ps.current=zm,t=n(i,h)}while(ei)}if(ps.current=Ws,e=De!==null&&De.next!==null,zn=0,je=De=be=null,zs=!1,e)throw Error(Z(300));return t}function Wl(){var t=yi!==0;return yi=0,t}function Tt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return je===null?be.memoizedState=je=t:je=je.next=t,je}function ht(){if(De===null){var t=be.alternate;t=t!==null?t.memoizedState:null}else t=De.next;var e=je===null?be.memoizedState:je.next;if(e!==null)je=e,De=t;else{if(t===null)throw Error(Z(310));De=t,t={memoizedState:De.memoizedState,baseState:De.baseState,baseQueue:De.baseQueue,queue:De.queue,next:null},je===null?be.memoizedState=je=t:je=je.next=t}return je}function _i(t,e){return typeof e=="function"?e(t):e}function Ho(t){var e=ht(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var i=De,h=i.baseQueue,m=n.pending;if(m!==null){if(h!==null){var _=h.next;h.next=m.next,m.next=_}i.baseQueue=h=m,n.pending=null}if(h!==null){m=h.next,i=i.baseState;var f=_=null,r=null,u=m;do{var d=u.lane;if((zn&d)===d)r!==null&&(r=r.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var s={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};r===null?(f=r=s,_=i):r=r.next=s,be.lanes|=d,Wn|=d}u=u.next}while(u!==null&&u!==m);r===null?_=i:r.next=f,wt(i,e.memoizedState)||(qe=!0),e.memoizedState=i,e.baseState=_,e.baseQueue=r,n.lastRenderedState=i}if(t=n.interleaved,t!==null){h=t;do m=h.lane,be.lanes|=m,Wn|=m,h=h.next;while(h!==t)}else h===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Vo(t){var e=ht(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var i=n.dispatch,h=n.pending,m=e.memoizedState;if(h!==null){n.pending=null;var _=h=h.next;do m=t(m,_.action),_=_.next;while(_!==h);wt(m,e.memoizedState)||(qe=!0),e.memoizedState=m,e.baseQueue===null&&(e.baseState=m),n.lastRenderedState=m}return[m,i]}function jf(){}function Rf(t,e){var n=be,i=ht(),h=e(),m=!wt(i.memoizedState,h);if(m&&(i.memoizedState=h,qe=!0),i=i.queue,Hl(Ff.bind(null,n,i,t),[t]),i.getSnapshot!==e||m||je!==null&&je.memoizedState.tag&1){if(n.flags|=2048,xi(9,Lf.bind(null,n,i,h,e),void 0,null),Re===null)throw Error(Z(349));zn&30||Nf(n,e,h)}return h}function Nf(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Lf(t,e,n,i){e.value=n,e.getSnapshot=i,Bf(e)&&Uf(t)}function Ff(t,e,n){return n(function(){Bf(e)&&Uf(t)})}function Bf(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wt(t,n)}catch{return!0}}function Uf(t){var e=zt(t,1);e!==null&&_t(e,t,1,-1)}function au(t){var e=Tt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:t},e.queue=t,t=t.dispatch=Fm.bind(null,be,t),[e.memoizedState,t]}function xi(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function zf(){return ht().memoizedState}function gs(t,e,n,i){var h=Tt();be.flags|=t,h.memoizedState=xi(1|e,n,void 0,i===void 0?null:i)}function co(t,e,n,i){var h=ht();i=i===void 0?null:i;var m=void 0;if(De!==null){var _=De.memoizedState;if(m=_.destroy,i!==null&&Ul(i,_.deps)){h.memoizedState=xi(e,n,m,i);return}}be.flags|=t,h.memoizedState=xi(1|e,n,m,i)}function lu(t,e){return gs(8390656,8,t,e)}function Hl(t,e){return co(2048,8,t,e)}function Wf(t,e){return co(4,2,t,e)}function Hf(t,e){return co(4,4,t,e)}function Vf(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Xf(t,e,n){return n=n!=null?n.concat([t]):null,co(4,4,Vf.bind(null,e,t),n)}function Vl(){}function Yf(t,e){var n=ht();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Ul(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Gf(t,e){var n=ht();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Ul(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function $f(t,e,n){return zn&21?(wt(n,e)||(n=Jh(),be.lanes|=n,Wn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,qe=!0),t.memoizedState=n)}function Nm(t,e){var n=me;me=n!==0&&4>n?n:4,t(!0);var i=Wo.transition;Wo.transition={};try{t(!1),e()}finally{me=n,Wo.transition=i}}function Kf(){return ht().memoizedState}function Lm(t,e,n){var i=pn(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},qf(t))Qf(e,n);else if(n=Af(t,e,n,i),n!==null){var h=Xe();_t(n,t,i,h),Jf(n,e,i)}}function Fm(t,e,n){var i=pn(t),h={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(qf(t))Qf(e,h);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=e.lastRenderedReducer,m!==null))try{var _=e.lastRenderedState,f=m(_,n);if(h.hasEagerState=!0,h.eagerState=f,wt(f,_)){var r=e.interleaved;r===null?(h.next=h,Rl(e)):(h.next=r.next,r.next=h),e.interleaved=h;return}}catch{}finally{}n=Af(t,e,h,i),n!==null&&(h=Xe(),_t(n,t,i,h),Jf(n,e,i))}}function qf(t){var e=t.alternate;return t===be||e!==null&&e===be}function Qf(t,e){ei=zs=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Jf(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,wl(t,n)}}var Ws={readContext:ut,useCallback:Be,useContext:Be,useEffect:Be,useImperativeHandle:Be,useInsertionEffect:Be,useLayoutEffect:Be,useMemo:Be,useReducer:Be,useRef:Be,useState:Be,useDebugValue:Be,useDeferredValue:Be,useTransition:Be,useMutableSource:Be,useSyncExternalStore:Be,useId:Be,unstable_isNewReconciler:!1},Bm={readContext:ut,useCallback:function(t,e){return Tt().memoizedState=[t,e===void 0?null:e],t},useContext:ut,useEffect:lu,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,gs(4194308,4,Vf.bind(null,e,t),n)},useLayoutEffect:function(t,e){return gs(4194308,4,t,e)},useInsertionEffect:function(t,e){return gs(4,2,t,e)},useMemo:function(t,e){var n=Tt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Tt();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Lm.bind(null,be,t),[i.memoizedState,t]},useRef:function(t){var e=Tt();return t={current:t},e.memoizedState=t},useState:au,useDebugValue:Vl,useDeferredValue:function(t){return Tt().memoizedState=t},useTransition:function(){var t=au(!1),e=t[0];return t=Nm.bind(null,t[1]),Tt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=be,h=Tt();if(Se){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=e(),Re===null)throw Error(Z(349));zn&30||Nf(i,e,n)}h.memoizedState=n;var m={value:n,getSnapshot:e};return h.queue=m,lu(Ff.bind(null,i,m,t),[t]),i.flags|=2048,xi(9,Lf.bind(null,i,m,n,e),void 0,null),n},useId:function(){var t=Tt(),e=Re.identifierPrefix;if(Se){var n=Mt,i=Dt;n=(i&~(1<<32-yt(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=yi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Rm++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Um={readContext:ut,useCallback:Yf,useContext:ut,useEffect:Hl,useImperativeHandle:Xf,useInsertionEffect:Wf,useLayoutEffect:Hf,useMemo:Gf,useReducer:Ho,useRef:zf,useState:function(){return Ho(_i)},useDebugValue:Vl,useDeferredValue:function(t){var e=ht();return $f(e,De.memoizedState,t)},useTransition:function(){var t=Ho(_i)[0],e=ht().memoizedState;return[t,e]},useMutableSource:jf,useSyncExternalStore:Rf,useId:Kf,unstable_isNewReconciler:!1},zm={readContext:ut,useCallback:Yf,useContext:ut,useEffect:Hl,useImperativeHandle:Xf,useInsertionEffect:Wf,useLayoutEffect:Hf,useMemo:Gf,useReducer:Vo,useRef:zf,useState:function(){return Vo(_i)},useDebugValue:Vl,useDeferredValue:function(t){var e=ht();return De===null?e.memoizedState=t:$f(e,De.memoizedState,t)},useTransition:function(){var t=Vo(_i)[0],e=ht().memoizedState;return[t,e]},useMutableSource:jf,useSyncExternalStore:Rf,useId:Kf,unstable_isNewReconciler:!1};function pt(t,e){if(t&&t.defaultProps){e=ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ra(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var uo={isMounted:function(t){return(t=t._reactInternals)?Gn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Xe(),h=pn(t),m=Lt(i,h);m.payload=e,n!=null&&(m.callback=n),e=fn(t,m,h),e!==null&&(_t(e,t,h,i),ds(e,t,h))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Xe(),h=pn(t),m=Lt(i,h);m.tag=1,m.payload=e,n!=null&&(m.callback=n),e=fn(t,m,h),e!==null&&(_t(e,t,h,i),ds(e,t,h))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Xe(),i=pn(t),h=Lt(n,i);h.tag=2,e!=null&&(h.callback=e),e=fn(t,h,i),e!==null&&(_t(e,t,i,n),ds(e,t,i))}};function cu(t,e,n,i,h,m,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,m,_):e.prototype&&e.prototype.isPureReactComponent?!fi(n,i)||!fi(h,m):!0}function Zf(t,e,n){var i=!1,h=xn,m=e.contextType;return typeof m=="object"&&m!==null?m=ut(m):(h=Je(e)?Bn:We.current,i=e.contextTypes,m=(i=i!=null)?xr(t,h):xn),e=new e(n,m),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=uo,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=h,t.__reactInternalMemoizedMaskedChildContext=m),e}function uu(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&uo.enqueueReplaceState(e,e.state,null)}function Na(t,e,n,i){var h=t.stateNode;h.props=n,h.state=t.memoizedState,h.refs={},Nl(t);var m=e.contextType;typeof m=="object"&&m!==null?h.context=ut(m):(m=Je(e)?Bn:We.current,h.context=xr(t,m)),h.state=t.memoizedState,m=e.getDerivedStateFromProps,typeof m=="function"&&(Ra(t,e,m,n),h.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(e=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),e!==h.state&&uo.enqueueReplaceState(h,h.state,null),Bs(t,n,h,i),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308)}function Tr(t,e){try{var n="",i=e;do n+=gg(i),i=i.return;while(i);var h=n}catch(m){h=`
Error generating stack: `+m.message+`
`+m.stack}return{value:t,source:e,stack:h,digest:null}}function Xo(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function La(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Wm=typeof WeakMap=="function"?WeakMap:Map;function ed(t,e,n){n=Lt(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Vs||(Vs=!0,Ga=i),La(t,e)},n}function td(t,e,n){n=Lt(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var h=e.value;n.payload=function(){return i(h)},n.callback=function(){La(t,e)}}var m=t.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(n.callback=function(){La(t,e),typeof i!="function"&&(dn===null?dn=new Set([this]):dn.add(this));var _=e.stack;this.componentDidCatch(e.value,{componentStack:_!==null?_:""})}),n}function hu(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new Wm;var h=new Set;i.set(e,h)}else h=i.get(e),h===void 0&&(h=new Set,i.set(e,h));h.has(n)||(h.add(n),t=nv.bind(null,t,e,n),e.then(t,t))}function fu(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function du(t,e,n,i,h){return t.mode&1?(t.flags|=65536,t.lanes=h,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Lt(-1,1),e.tag=2,fn(n,e,1))),n.lanes|=1),t)}var Hm=Xt.ReactCurrentOwner,qe=!1;function Ve(t,e,n,i){e.child=t===null?If(e,null,n,i):Cr(e,t.child,n,i)}function pu(t,e,n,i,h){n=n.render;var m=e.ref;return fr(e,h),i=zl(t,e,n,i,m,h),n=Wl(),t!==null&&!qe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~h,Wt(t,e,h)):(Se&&n&&Pl(e),e.flags|=1,Ve(t,e,i,h),e.child)}function gu(t,e,n,i,h){if(t===null){var m=n.type;return typeof m=="function"&&!Jl(m)&&m.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=m,nd(t,e,m,i,h)):(t=_s(n.type,null,i,e,e.mode,h),t.ref=e.ref,t.return=e,e.child=t)}if(m=t.child,!(t.lanes&h)){var _=m.memoizedProps;if(n=n.compare,n=n!==null?n:fi,n(_,i)&&t.ref===e.ref)return Wt(t,e,h)}return e.flags|=1,t=gn(m,i),t.ref=e.ref,t.return=e,e.child=t}function nd(t,e,n,i,h){if(t!==null){var m=t.memoizedProps;if(fi(m,i)&&t.ref===e.ref)if(qe=!1,e.pendingProps=i=m,(t.lanes&h)!==0)t.flags&131072&&(qe=!0);else return e.lanes=t.lanes,Wt(t,e,h)}return Fa(t,e,n,i,h)}function rd(t,e,n){var i=e.pendingProps,h=i.children,m=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(ar,et),et|=n;else{if(!(n&1073741824))return t=m!==null?m.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ye(ar,et),et|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=m!==null?m.baseLanes:n,ye(ar,et),et|=i}else m!==null?(i=m.baseLanes|n,e.memoizedState=null):i=n,ye(ar,et),et|=i;return Ve(t,e,h,n),e.child}function id(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Fa(t,e,n,i,h){var m=Je(n)?Bn:We.current;return m=xr(e,m),fr(e,h),n=zl(t,e,n,i,m,h),i=Wl(),t!==null&&!qe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~h,Wt(t,e,h)):(Se&&i&&Pl(e),e.flags|=1,Ve(t,e,n,h),e.child)}function mu(t,e,n,i,h){if(Je(n)){var m=!0;js(e)}else m=!1;if(fr(e,h),e.stateNode===null)ms(t,e),Zf(e,n,i),Na(e,n,i,h),i=!0;else if(t===null){var _=e.stateNode,f=e.memoizedProps;_.props=f;var r=_.context,u=n.contextType;typeof u=="object"&&u!==null?u=ut(u):(u=Je(n)?Bn:We.current,u=xr(e,u));var d=n.getDerivedStateFromProps,s=typeof d=="function"||typeof _.getSnapshotBeforeUpdate=="function";s||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(f!==i||r!==u)&&uu(e,_,i,u),Jt=!1;var a=e.memoizedState;_.state=a,Bs(e,i,_,h),r=e.memoizedState,f!==i||a!==r||Qe.current||Jt?(typeof d=="function"&&(Ra(e,n,d,i),r=e.memoizedState),(f=Jt||cu(e,n,f,i,a,r,u))?(s||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(e.flags|=4194308)):(typeof _.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=r),_.props=i,_.state=r,_.context=u,i=f):(typeof _.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{_=e.stateNode,Df(t,e),f=e.memoizedProps,u=e.type===e.elementType?f:pt(e.type,f),_.props=u,s=e.pendingProps,a=_.context,r=n.contextType,typeof r=="object"&&r!==null?r=ut(r):(r=Je(n)?Bn:We.current,r=xr(e,r));var o=n.getDerivedStateFromProps;(d=typeof o=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(f!==s||a!==r)&&uu(e,_,i,r),Jt=!1,a=e.memoizedState,_.state=a,Bs(e,i,_,h);var c=e.memoizedState;f!==s||a!==c||Qe.current||Jt?(typeof o=="function"&&(Ra(e,n,o,i),c=e.memoizedState),(u=Jt||cu(e,n,u,i,a,c,r)||!1)?(d||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(i,c,r),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(i,c,r)),typeof _.componentDidUpdate=="function"&&(e.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof _.componentDidUpdate!="function"||f===t.memoizedProps&&a===t.memoizedState||(e.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||f===t.memoizedProps&&a===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=c),_.props=i,_.state=c,_.context=r,i=u):(typeof _.componentDidUpdate!="function"||f===t.memoizedProps&&a===t.memoizedState||(e.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||f===t.memoizedProps&&a===t.memoizedState||(e.flags|=1024),i=!1)}return Ba(t,e,n,i,m,h)}function Ba(t,e,n,i,h,m){id(t,e);var _=(e.flags&128)!==0;if(!i&&!_)return h&&tu(e,n,!1),Wt(t,e,m);i=e.stateNode,Hm.current=e;var f=_&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&_?(e.child=Cr(e,t.child,null,m),e.child=Cr(e,null,f,m)):Ve(t,e,f,m),e.memoizedState=i.state,h&&tu(e,n,!0),e.child}function sd(t){var e=t.stateNode;e.pendingContext?eu(t,e.pendingContext,e.pendingContext!==e.context):e.context&&eu(t,e.context,!1),Ll(t,e.containerInfo)}function vu(t,e,n,i,h){return wr(),Al(h),e.flags|=256,Ve(t,e,n,i),e.child}var Ua={dehydrated:null,treeContext:null,retryLane:0};function za(t){return{baseLanes:t,cachePool:null,transitions:null}}function od(t,e,n){var i=e.pendingProps,h=Te.current,m=!1,_=(e.flags&128)!==0,f;if((f=_)||(f=t!==null&&t.memoizedState===null?!1:(h&2)!==0),f?(m=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(h|=1),ye(Te,h&1),t===null)return Ma(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(_=i.children,t=i.fallback,m?(i=e.mode,m=e.child,_={mode:"hidden",children:_},!(i&1)&&m!==null?(m.childLanes=0,m.pendingProps=_):m=po(_,i,0,null),t=Fn(t,i,n,null),m.return=e,t.return=e,m.sibling=t,e.child=m,e.child.memoizedState=za(n),e.memoizedState=Ua,t):Xl(e,_));if(h=t.memoizedState,h!==null&&(f=h.dehydrated,f!==null))return Vm(t,e,_,i,f,h,n);if(m){m=i.fallback,_=e.mode,h=t.child,f=h.sibling;var r={mode:"hidden",children:i.children};return!(_&1)&&e.child!==h?(i=e.child,i.childLanes=0,i.pendingProps=r,e.deletions=null):(i=gn(h,r),i.subtreeFlags=h.subtreeFlags&14680064),f!==null?m=gn(f,m):(m=Fn(m,_,n,null),m.flags|=2),m.return=e,i.return=e,i.sibling=m,e.child=i,i=m,m=e.child,_=t.child.memoizedState,_=_===null?za(n):{baseLanes:_.baseLanes|n,cachePool:null,transitions:_.transitions},m.memoizedState=_,m.childLanes=t.childLanes&~n,e.memoizedState=Ua,i}return m=t.child,t=m.sibling,i=gn(m,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Xl(t,e){return e=po({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function rs(t,e,n,i){return i!==null&&Al(i),Cr(e,t.child,null,n),t=Xl(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Vm(t,e,n,i,h,m,_){if(n)return e.flags&256?(e.flags&=-257,i=Xo(Error(Z(422))),rs(t,e,_,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(m=i.fallback,h=e.mode,i=po({mode:"visible",children:i.children},h,0,null),m=Fn(m,h,_,null),m.flags|=2,i.return=e,m.return=e,i.sibling=m,e.child=i,e.mode&1&&Cr(e,t.child,null,_),e.child.memoizedState=za(_),e.memoizedState=Ua,m);if(!(e.mode&1))return rs(t,e,_,null);if(h.data==="$!"){if(i=h.nextSibling&&h.nextSibling.dataset,i)var f=i.dgst;return i=f,m=Error(Z(419)),i=Xo(m,i,void 0),rs(t,e,_,i)}if(f=(_&t.childLanes)!==0,qe||f){if(i=Re,i!==null){switch(_&-_){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=h&(i.suspendedLanes|_)?0:h,h!==0&&h!==m.retryLane&&(m.retryLane=h,zt(t,h),_t(i,t,h,-1))}return Ql(),i=Xo(Error(Z(421))),rs(t,e,_,i)}return h.data==="$?"?(e.flags|=128,e.child=t.child,e=rv.bind(null,t),h._reactRetry=e,null):(t=m.treeContext,tt=hn(h.nextSibling),nt=e,Se=!0,mt=null,t!==null&&(ot[at++]=Dt,ot[at++]=Mt,ot[at++]=Un,Dt=t.id,Mt=t.overflow,Un=e),e=Xl(e,i.children),e.flags|=4096,e)}function yu(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),ja(t.return,e,n)}function Yo(t,e,n,i,h){var m=t.memoizedState;m===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:h}:(m.isBackwards=e,m.rendering=null,m.renderingStartTime=0,m.last=i,m.tail=n,m.tailMode=h)}function ad(t,e,n){var i=e.pendingProps,h=i.revealOrder,m=i.tail;if(Ve(t,e,i.children,n),i=Te.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&yu(t,n,e);else if(t.tag===19)yu(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(ye(Te,i),!(e.mode&1))e.memoizedState=null;else switch(h){case"forwards":for(n=e.child,h=null;n!==null;)t=n.alternate,t!==null&&Us(t)===null&&(h=n),n=n.sibling;n=h,n===null?(h=e.child,e.child=null):(h=n.sibling,n.sibling=null),Yo(e,!1,h,n,m);break;case"backwards":for(n=null,h=e.child,e.child=null;h!==null;){if(t=h.alternate,t!==null&&Us(t)===null){e.child=h;break}t=h.sibling,h.sibling=n,n=h,h=t}Yo(e,!0,n,null,m);break;case"together":Yo(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ms(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Wn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Z(153));if(e.child!==null){for(t=e.child,n=gn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=gn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Xm(t,e,n){switch(e.tag){case 3:sd(e),wr();break;case 5:Mf(e);break;case 1:Je(e.type)&&js(e);break;case 4:Ll(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,h=e.memoizedProps.value;ye(Ls,i._currentValue),i._currentValue=h;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ye(Te,Te.current&1),e.flags|=128,null):n&e.child.childLanes?od(t,e,n):(ye(Te,Te.current&1),t=Wt(t,e,n),t!==null?t.sibling:null);ye(Te,Te.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return ad(t,e,n);e.flags|=128}if(h=e.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ye(Te,Te.current),i)break;return null;case 22:case 23:return e.lanes=0,rd(t,e,n)}return Wt(t,e,n)}var ld,Wa,cd,ud;ld=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Wa=function(){};cd=function(t,e,n,i){var h=t.memoizedProps;if(h!==i){t=e.stateNode,Rn(Et.current);var m=null;switch(n){case"input":h=ua(t,h),i=ua(t,i),m=[];break;case"select":h=ke({},h,{value:void 0}),i=ke({},i,{value:void 0}),m=[];break;case"textarea":h=da(t,h),i=da(t,i),m=[];break;default:typeof h.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Ds)}ga(n,i);var _;n=null;for(u in h)if(!i.hasOwnProperty(u)&&h.hasOwnProperty(u)&&h[u]!=null)if(u==="style"){var f=h[u];for(_ in f)f.hasOwnProperty(_)&&(n||(n={}),n[_]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(si.hasOwnProperty(u)?m||(m=[]):(m=m||[]).push(u,null));for(u in i){var r=i[u];if(f=h!=null?h[u]:void 0,i.hasOwnProperty(u)&&r!==f&&(r!=null||f!=null))if(u==="style")if(f){for(_ in f)!f.hasOwnProperty(_)||r&&r.hasOwnProperty(_)||(n||(n={}),n[_]="");for(_ in r)r.hasOwnProperty(_)&&f[_]!==r[_]&&(n||(n={}),n[_]=r[_])}else n||(m||(m=[]),m.push(u,n)),n=r;else u==="dangerouslySetInnerHTML"?(r=r?r.__html:void 0,f=f?f.__html:void 0,r!=null&&f!==r&&(m=m||[]).push(u,r)):u==="children"?typeof r!="string"&&typeof r!="number"||(m=m||[]).push(u,""+r):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(si.hasOwnProperty(u)?(r!=null&&u==="onScroll"&&_e("scroll",t),m||f===r||(m=[])):(m=m||[]).push(u,r))}n&&(m=m||[]).push("style",n);var u=m;(e.updateQueue=u)&&(e.flags|=4)}};ud=function(t,e,n,i){n!==i&&(e.flags|=4)};function Ur(t,e){if(!Se)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ue(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var h=t.child;h!==null;)n|=h.lanes|h.childLanes,i|=h.subtreeFlags&14680064,i|=h.flags&14680064,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)n|=h.lanes|h.childLanes,i|=h.subtreeFlags,i|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Ym(t,e,n){var i=e.pendingProps;switch(Il(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ue(e),null;case 1:return Je(e.type)&&Ms(),Ue(e),null;case 3:return i=e.stateNode,Sr(),xe(Qe),xe(We),Bl(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(ts(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mt!==null&&(qa(mt),mt=null))),Wa(t,e),Ue(e),null;case 5:Fl(e);var h=Rn(vi.current);if(n=e.type,t!==null&&e.stateNode!=null)cd(t,e,n,i,h),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Z(166));return Ue(e),null}if(t=Rn(Et.current),ts(e)){i=e.stateNode,n=e.type;var m=e.memoizedProps;switch(i[bt]=e,i[gi]=m,t=(e.mode&1)!==0,n){case"dialog":_e("cancel",i),_e("close",i);break;case"iframe":case"object":case"embed":_e("load",i);break;case"video":case"audio":for(h=0;h<Yr.length;h++)_e(Yr[h],i);break;case"source":_e("error",i);break;case"img":case"image":case"link":_e("error",i),_e("load",i);break;case"details":_e("toggle",i);break;case"input":Ec(i,m),_e("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!m.multiple},_e("invalid",i);break;case"textarea":Pc(i,m),_e("invalid",i)}ga(n,m),h=null;for(var _ in m)if(m.hasOwnProperty(_)){var f=m[_];_==="children"?typeof f=="string"?i.textContent!==f&&(m.suppressHydrationWarning!==!0&&es(i.textContent,f,t),h=["children",f]):typeof f=="number"&&i.textContent!==""+f&&(m.suppressHydrationWarning!==!0&&es(i.textContent,f,t),h=["children",""+f]):si.hasOwnProperty(_)&&f!=null&&_==="onScroll"&&_e("scroll",i)}switch(n){case"input":Yi(i),Oc(i,m,!0);break;case"textarea":Yi(i),Ic(i);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(i.onclick=Ds)}i=h,e.updateQueue=i,i!==null&&(e.flags|=4)}else{_=h.nodeType===9?h:h.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Lh(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=_.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=_.createElement(n,{is:i.is}):(t=_.createElement(n),n==="select"&&(_=t,i.multiple?_.multiple=!0:i.size&&(_.size=i.size))):t=_.createElementNS(t,n),t[bt]=e,t[gi]=i,ld(t,e,!1,!1),e.stateNode=t;e:{switch(_=ma(n,i),n){case"dialog":_e("cancel",t),_e("close",t),h=i;break;case"iframe":case"object":case"embed":_e("load",t),h=i;break;case"video":case"audio":for(h=0;h<Yr.length;h++)_e(Yr[h],t);h=i;break;case"source":_e("error",t),h=i;break;case"img":case"image":case"link":_e("error",t),_e("load",t),h=i;break;case"details":_e("toggle",t),h=i;break;case"input":Ec(t,i),h=ua(t,i),_e("invalid",t);break;case"option":h=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},h=ke({},i,{value:void 0}),_e("invalid",t);break;case"textarea":Pc(t,i),h=da(t,i),_e("invalid",t);break;default:h=i}ga(n,h),f=h;for(m in f)if(f.hasOwnProperty(m)){var r=f[m];m==="style"?Uh(t,r):m==="dangerouslySetInnerHTML"?(r=r?r.__html:void 0,r!=null&&Fh(t,r)):m==="children"?typeof r=="string"?(n!=="textarea"||r!=="")&&oi(t,r):typeof r=="number"&&oi(t,""+r):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(si.hasOwnProperty(m)?r!=null&&m==="onScroll"&&_e("scroll",t):r!=null&&gl(t,m,r,_))}switch(n){case"input":Yi(t),Oc(t,i,!1);break;case"textarea":Yi(t),Ic(t);break;case"option":i.value!=null&&t.setAttribute("value",""+_n(i.value));break;case"select":t.multiple=!!i.multiple,m=i.value,m!=null?lr(t,!!i.multiple,m,!1):i.defaultValue!=null&&lr(t,!!i.multiple,i.defaultValue,!0);break;default:typeof h.onClick=="function"&&(t.onclick=Ds)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ue(e),null;case 6:if(t&&e.stateNode!=null)ud(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Z(166));if(n=Rn(vi.current),Rn(Et.current),ts(e)){if(i=e.stateNode,n=e.memoizedProps,i[bt]=e,(m=i.nodeValue!==n)&&(t=nt,t!==null))switch(t.tag){case 3:es(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&es(i.nodeValue,n,(t.mode&1)!==0)}m&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[bt]=e,e.stateNode=i}return Ue(e),null;case 13:if(xe(Te),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Se&&tt!==null&&e.mode&1&&!(e.flags&128))Of(),wr(),e.flags|=98560,m=!1;else if(m=ts(e),i!==null&&i.dehydrated!==null){if(t===null){if(!m)throw Error(Z(318));if(m=e.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(Z(317));m[bt]=e}else wr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ue(e),m=!1}else mt!==null&&(qa(mt),mt=null),m=!0;if(!m)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Te.current&1?Me===0&&(Me=3):Ql())),e.updateQueue!==null&&(e.flags|=4),Ue(e),null);case 4:return Sr(),Wa(t,e),t===null&&di(e.stateNode.containerInfo),Ue(e),null;case 10:return jl(e.type._context),Ue(e),null;case 17:return Je(e.type)&&Ms(),Ue(e),null;case 19:if(xe(Te),m=e.memoizedState,m===null)return Ue(e),null;if(i=(e.flags&128)!==0,_=m.rendering,_===null)if(i)Ur(m,!1);else{if(Me!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(_=Us(t),_!==null){for(e.flags|=128,Ur(m,!1),i=_.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)m=n,t=i,m.flags&=14680066,_=m.alternate,_===null?(m.childLanes=0,m.lanes=t,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=_.childLanes,m.lanes=_.lanes,m.child=_.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=_.memoizedProps,m.memoizedState=_.memoizedState,m.updateQueue=_.updateQueue,m.type=_.type,t=_.dependencies,m.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ye(Te,Te.current&1|2),e.child}t=t.sibling}m.tail!==null&&Oe()>br&&(e.flags|=128,i=!0,Ur(m,!1),e.lanes=4194304)}else{if(!i)if(t=Us(_),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ur(m,!0),m.tail===null&&m.tailMode==="hidden"&&!_.alternate&&!Se)return Ue(e),null}else 2*Oe()-m.renderingStartTime>br&&n!==1073741824&&(e.flags|=128,i=!0,Ur(m,!1),e.lanes=4194304);m.isBackwards?(_.sibling=e.child,e.child=_):(n=m.last,n!==null?n.sibling=_:e.child=_,m.last=_)}return m.tail!==null?(e=m.tail,m.rendering=e,m.tail=e.sibling,m.renderingStartTime=Oe(),e.sibling=null,n=Te.current,ye(Te,i?n&1|2:n&1),e):(Ue(e),null);case 22:case 23:return ql(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?et&1073741824&&(Ue(e),e.subtreeFlags&6&&(e.flags|=8192)):Ue(e),null;case 24:return null;case 25:return null}throw Error(Z(156,e.tag))}function Gm(t,e){switch(Il(e),e.tag){case 1:return Je(e.type)&&Ms(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Sr(),xe(Qe),xe(We),Bl(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Fl(e),null;case 13:if(xe(Te),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Z(340));wr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xe(Te),null;case 4:return Sr(),null;case 10:return jl(e.type._context),null;case 22:case 23:return ql(),null;case 24:return null;default:return null}}var is=!1,ze=!1,$m=typeof WeakSet=="function"?WeakSet:Set,se=null;function or(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Ee(t,e,i)}else n.current=null}function Ha(t,e,n){try{n()}catch(i){Ee(t,e,i)}}var _u=!1;function Km(t,e){if(ka=Ps,t=gf(),Ol(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var h=i.anchorOffset,m=i.focusNode;i=i.focusOffset;try{n.nodeType,m.nodeType}catch{n=null;break e}var _=0,f=-1,r=-1,u=0,d=0,s=t,a=null;t:for(;;){for(var o;s!==n||h!==0&&s.nodeType!==3||(f=_+h),s!==m||i!==0&&s.nodeType!==3||(r=_+i),s.nodeType===3&&(_+=s.nodeValue.length),(o=s.firstChild)!==null;)a=s,s=o;for(;;){if(s===t)break t;if(a===n&&++u===h&&(f=_),a===m&&++d===i&&(r=_),(o=s.nextSibling)!==null)break;s=a,a=s.parentNode}s=o}n=f===-1||r===-1?null:{start:f,end:r}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ea={focusedElem:t,selectionRange:n},Ps=!1,se=e;se!==null;)if(e=se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,se=t;else for(;se!==null;){e=se;try{var c=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(c!==null){var g=c.memoizedProps,l=c.memoizedState,p=e.stateNode,v=p.getSnapshotBeforeUpdate(e.elementType===e.type?g:pt(e.type,g),l);p.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(x){Ee(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}return c=_u,_u=!1,c}function ti(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var h=i=i.next;do{if((h.tag&t)===t){var m=h.destroy;h.destroy=void 0,m!==void 0&&Ha(e,n,m)}h=h.next}while(h!==i)}}function ho(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Va(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function hd(t){var e=t.alternate;e!==null&&(t.alternate=null,hd(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[bt],delete e[gi],delete e[Ia],delete e[Am],delete e[Dm])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function fd(t){return t.tag===5||t.tag===3||t.tag===4}function xu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||fd(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Xa(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ds));else if(i!==4&&(t=t.child,t!==null))for(Xa(t,e,n),t=t.sibling;t!==null;)Xa(t,e,n),t=t.sibling}function Ya(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Ya(t,e,n),t=t.sibling;t!==null;)Ya(t,e,n),t=t.sibling}var Ne=null,gt=!1;function Gt(t,e,n){for(n=n.child;n!==null;)dd(t,e,n),n=n.sibling}function dd(t,e,n){if(kt&&typeof kt.onCommitFiberUnmount=="function")try{kt.onCommitFiberUnmount(ro,n)}catch{}switch(n.tag){case 5:ze||or(n,e);case 6:var i=Ne,h=gt;Ne=null,Gt(t,e,n),Ne=i,gt=h,Ne!==null&&(gt?(t=Ne,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ne.removeChild(n.stateNode));break;case 18:Ne!==null&&(gt?(t=Ne,n=n.stateNode,t.nodeType===8?Bo(t.parentNode,n):t.nodeType===1&&Bo(t,n),ui(t)):Bo(Ne,n.stateNode));break;case 4:i=Ne,h=gt,Ne=n.stateNode.containerInfo,gt=!0,Gt(t,e,n),Ne=i,gt=h;break;case 0:case 11:case 14:case 15:if(!ze&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){h=i=i.next;do{var m=h,_=m.destroy;m=m.tag,_!==void 0&&(m&2||m&4)&&Ha(n,e,_),h=h.next}while(h!==i)}Gt(t,e,n);break;case 1:if(!ze&&(or(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(f){Ee(n,e,f)}Gt(t,e,n);break;case 21:Gt(t,e,n);break;case 22:n.mode&1?(ze=(i=ze)||n.memoizedState!==null,Gt(t,e,n),ze=i):Gt(t,e,n);break;default:Gt(t,e,n)}}function wu(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new $m),e.forEach(function(i){var h=iv.bind(null,t,i);n.has(i)||(n.add(i),i.then(h,h))})}}function dt(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var h=n[i];try{var m=t,_=e,f=_;e:for(;f!==null;){switch(f.tag){case 5:Ne=f.stateNode,gt=!1;break e;case 3:Ne=f.stateNode.containerInfo,gt=!0;break e;case 4:Ne=f.stateNode.containerInfo,gt=!0;break e}f=f.return}if(Ne===null)throw Error(Z(160));dd(m,_,h),Ne=null,gt=!1;var r=h.alternate;r!==null&&(r.return=null),h.return=null}catch(u){Ee(h,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)pd(e,t),e=e.sibling}function pd(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(dt(e,t),St(t),i&4){try{ti(3,t,t.return),ho(3,t)}catch(g){Ee(t,t.return,g)}try{ti(5,t,t.return)}catch(g){Ee(t,t.return,g)}}break;case 1:dt(e,t),St(t),i&512&&n!==null&&or(n,n.return);break;case 5:if(dt(e,t),St(t),i&512&&n!==null&&or(n,n.return),t.flags&32){var h=t.stateNode;try{oi(h,"")}catch(g){Ee(t,t.return,g)}}if(i&4&&(h=t.stateNode,h!=null)){var m=t.memoizedProps,_=n!==null?n.memoizedProps:m,f=t.type,r=t.updateQueue;if(t.updateQueue=null,r!==null)try{f==="input"&&m.type==="radio"&&m.name!=null&&Rh(h,m),ma(f,_);var u=ma(f,m);for(_=0;_<r.length;_+=2){var d=r[_],s=r[_+1];d==="style"?Uh(h,s):d==="dangerouslySetInnerHTML"?Fh(h,s):d==="children"?oi(h,s):gl(h,d,s,u)}switch(f){case"input":ha(h,m);break;case"textarea":Nh(h,m);break;case"select":var a=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!m.multiple;var o=m.value;o!=null?lr(h,!!m.multiple,o,!1):a!==!!m.multiple&&(m.defaultValue!=null?lr(h,!!m.multiple,m.defaultValue,!0):lr(h,!!m.multiple,m.multiple?[]:"",!1))}h[gi]=m}catch(g){Ee(t,t.return,g)}}break;case 6:if(dt(e,t),St(t),i&4){if(t.stateNode===null)throw Error(Z(162));h=t.stateNode,m=t.memoizedProps;try{h.nodeValue=m}catch(g){Ee(t,t.return,g)}}break;case 3:if(dt(e,t),St(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{ui(e.containerInfo)}catch(g){Ee(t,t.return,g)}break;case 4:dt(e,t),St(t);break;case 13:dt(e,t),St(t),h=t.child,h.flags&8192&&(m=h.memoizedState!==null,h.stateNode.isHidden=m,!m||h.alternate!==null&&h.alternate.memoizedState!==null||($l=Oe())),i&4&&wu(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(ze=(u=ze)||d,dt(e,t),ze=u):dt(e,t),St(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(se=t,d=t.child;d!==null;){for(s=se=d;se!==null;){switch(a=se,o=a.child,a.tag){case 0:case 11:case 14:case 15:ti(4,a,a.return);break;case 1:or(a,a.return);var c=a.stateNode;if(typeof c.componentWillUnmount=="function"){i=a,n=a.return;try{e=i,c.props=e.memoizedProps,c.state=e.memoizedState,c.componentWillUnmount()}catch(g){Ee(i,n,g)}}break;case 5:or(a,a.return);break;case 22:if(a.memoizedState!==null){Su(s);continue}}o!==null?(o.return=a,se=o):Su(s)}d=d.sibling}e:for(d=null,s=t;;){if(s.tag===5){if(d===null){d=s;try{h=s.stateNode,u?(m=h.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(f=s.stateNode,r=s.memoizedProps.style,_=r!=null&&r.hasOwnProperty("display")?r.display:null,f.style.display=Bh("display",_))}catch(g){Ee(t,t.return,g)}}}else if(s.tag===6){if(d===null)try{s.stateNode.nodeValue=u?"":s.memoizedProps}catch(g){Ee(t,t.return,g)}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;d===s&&(d=null),s=s.return}d===s&&(d=null),s.sibling.return=s.return,s=s.sibling}}break;case 19:dt(e,t),St(t),i&4&&wu(t);break;case 21:break;default:dt(e,t),St(t)}}function St(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(fd(n)){var i=n;break e}n=n.return}throw Error(Z(160))}switch(i.tag){case 5:var h=i.stateNode;i.flags&32&&(oi(h,""),i.flags&=-33);var m=xu(t);Ya(t,m,h);break;case 3:case 4:var _=i.stateNode.containerInfo,f=xu(t);Xa(t,f,_);break;default:throw Error(Z(161))}}catch(r){Ee(t,t.return,r)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function qm(t,e,n){se=t,gd(t)}function gd(t,e,n){for(var i=(t.mode&1)!==0;se!==null;){var h=se,m=h.child;if(h.tag===22&&i){var _=h.memoizedState!==null||is;if(!_){var f=h.alternate,r=f!==null&&f.memoizedState!==null||ze;f=is;var u=ze;if(is=_,(ze=r)&&!u)for(se=h;se!==null;)_=se,r=_.child,_.tag===22&&_.memoizedState!==null?Tu(h):r!==null?(r.return=_,se=r):Tu(h);for(;m!==null;)se=m,gd(m),m=m.sibling;se=h,is=f,ze=u}Cu(t)}else h.subtreeFlags&8772&&m!==null?(m.return=h,se=m):Cu(t)}}function Cu(t){for(;se!==null;){var e=se;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ze||ho(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!ze)if(n===null)i.componentDidMount();else{var h=e.elementType===e.type?n.memoizedProps:pt(e.type,n.memoizedProps);i.componentDidUpdate(h,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var m=e.updateQueue;m!==null&&ou(e,m,i);break;case 3:var _=e.updateQueue;if(_!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ou(e,_,n)}break;case 5:var f=e.stateNode;if(n===null&&e.flags&4){n=f;var r=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":r.autoFocus&&n.focus();break;case"img":r.src&&(n.src=r.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var s=d.dehydrated;s!==null&&ui(s)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}ze||e.flags&512&&Va(e)}catch(a){Ee(e,e.return,a)}}if(e===t){se=null;break}if(n=e.sibling,n!==null){n.return=e.return,se=n;break}se=e.return}}function Su(t){for(;se!==null;){var e=se;if(e===t){se=null;break}var n=e.sibling;if(n!==null){n.return=e.return,se=n;break}se=e.return}}function Tu(t){for(;se!==null;){var e=se;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ho(4,e)}catch(r){Ee(e,n,r)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var h=e.return;try{i.componentDidMount()}catch(r){Ee(e,h,r)}}var m=e.return;try{Va(e)}catch(r){Ee(e,m,r)}break;case 5:var _=e.return;try{Va(e)}catch(r){Ee(e,_,r)}}}catch(r){Ee(e,e.return,r)}if(e===t){se=null;break}var f=e.sibling;if(f!==null){f.return=e.return,se=f;break}se=e.return}}var Qm=Math.ceil,Hs=Xt.ReactCurrentDispatcher,Yl=Xt.ReactCurrentOwner,ct=Xt.ReactCurrentBatchConfig,pe=0,Re=null,Ie=null,Le=0,et=0,ar=Cn(0),Me=0,wi=null,Wn=0,fo=0,Gl=0,ni=null,Ke=null,$l=0,br=1/0,Pt=null,Vs=!1,Ga=null,dn=null,ss=!1,on=null,Xs=0,ri=0,$a=null,vs=-1,ys=0;function Xe(){return pe&6?Oe():vs!==-1?vs:vs=Oe()}function pn(t){return t.mode&1?pe&2&&Le!==0?Le&-Le:jm.transition!==null?(ys===0&&(ys=Jh()),ys):(t=me,t!==0||(t=window.event,t=t===void 0?16:of(t.type)),t):1}function _t(t,e,n,i){if(50<ri)throw ri=0,$a=null,Error(Z(185));Ai(t,n,i),(!(pe&2)||t!==Re)&&(t===Re&&(!(pe&2)&&(fo|=n),Me===4&&en(t,Le)),Ze(t,i),n===1&&pe===0&&!(e.mode&1)&&(br=Oe()+500,lo&&Sn()))}function Ze(t,e){var n=t.callbackNode;jg(t,e);var i=Os(t,t===Re?Le:0);if(i===0)n!==null&&Mc(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Mc(n),e===1)t.tag===0?Mm(bu.bind(null,t)):bf(bu.bind(null,t)),Pm(function(){!(pe&6)&&Sn()}),n=null;else{switch(Zh(i)){case 1:n=xl;break;case 4:n=qh;break;case 16:n=Es;break;case 536870912:n=Qh;break;default:n=Es}n=Sd(n,md.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function md(t,e){if(vs=-1,ys=0,pe&6)throw Error(Z(327));var n=t.callbackNode;if(dr()&&t.callbackNode!==n)return null;var i=Os(t,t===Re?Le:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Ys(t,i);else{e=i;var h=pe;pe|=2;var m=yd();(Re!==t||Le!==e)&&(Pt=null,br=Oe()+500,Ln(t,e));do try{ev();break}catch(f){vd(t,f)}while(!0);Ml(),Hs.current=m,pe=h,Ie!==null?e=0:(Re=null,Le=0,e=Me)}if(e!==0){if(e===2&&(h=wa(t),h!==0&&(i=h,e=Ka(t,h))),e===1)throw n=wi,Ln(t,0),en(t,i),Ze(t,Oe()),n;if(e===6)en(t,i);else{if(h=t.current.alternate,!(i&30)&&!Jm(h)&&(e=Ys(t,i),e===2&&(m=wa(t),m!==0&&(i=m,e=Ka(t,m))),e===1))throw n=wi,Ln(t,0),en(t,i),Ze(t,Oe()),n;switch(t.finishedWork=h,t.finishedLanes=i,e){case 0:case 1:throw Error(Z(345));case 2:An(t,Ke,Pt);break;case 3:if(en(t,i),(i&130023424)===i&&(e=$l+500-Oe(),10<e)){if(Os(t,0)!==0)break;if(h=t.suspendedLanes,(h&i)!==i){Xe(),t.pingedLanes|=t.suspendedLanes&h;break}t.timeoutHandle=Pa(An.bind(null,t,Ke,Pt),e);break}An(t,Ke,Pt);break;case 4:if(en(t,i),(i&4194240)===i)break;for(e=t.eventTimes,h=-1;0<i;){var _=31-yt(i);m=1<<_,_=e[_],_>h&&(h=_),i&=~m}if(i=h,i=Oe()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Qm(i/1960))-i,10<i){t.timeoutHandle=Pa(An.bind(null,t,Ke,Pt),i);break}An(t,Ke,Pt);break;case 5:An(t,Ke,Pt);break;default:throw Error(Z(329))}}}return Ze(t,Oe()),t.callbackNode===n?md.bind(null,t):null}function Ka(t,e){var n=ni;return t.current.memoizedState.isDehydrated&&(Ln(t,e).flags|=256),t=Ys(t,e),t!==2&&(e=Ke,Ke=n,e!==null&&qa(e)),t}function qa(t){Ke===null?Ke=t:Ke.push.apply(Ke,t)}function Jm(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var h=n[i],m=h.getSnapshot;h=h.value;try{if(!wt(m(),h))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function en(t,e){for(e&=~Gl,e&=~fo,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-yt(e),i=1<<n;t[n]=-1,e&=~i}}function bu(t){if(pe&6)throw Error(Z(327));dr();var e=Os(t,0);if(!(e&1))return Ze(t,Oe()),null;var n=Ys(t,e);if(t.tag!==0&&n===2){var i=wa(t);i!==0&&(e=i,n=Ka(t,i))}if(n===1)throw n=wi,Ln(t,0),en(t,e),Ze(t,Oe()),n;if(n===6)throw Error(Z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,An(t,Ke,Pt),Ze(t,Oe()),null}function Kl(t,e){var n=pe;pe|=1;try{return t(e)}finally{pe=n,pe===0&&(br=Oe()+500,lo&&Sn())}}function Hn(t){on!==null&&on.tag===0&&!(pe&6)&&dr();var e=pe;pe|=1;var n=ct.transition,i=me;try{if(ct.transition=null,me=1,t)return t()}finally{me=i,ct.transition=n,pe=e,!(pe&6)&&Sn()}}function ql(){et=ar.current,xe(ar)}function Ln(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Om(n)),Ie!==null)for(n=Ie.return;n!==null;){var i=n;switch(Il(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Ms();break;case 3:Sr(),xe(Qe),xe(We),Bl();break;case 5:Fl(i);break;case 4:Sr();break;case 13:xe(Te);break;case 19:xe(Te);break;case 10:jl(i.type._context);break;case 22:case 23:ql()}n=n.return}if(Re=t,Ie=t=gn(t.current,null),Le=et=e,Me=0,wi=null,Gl=fo=Wn=0,Ke=ni=null,jn!==null){for(e=0;e<jn.length;e++)if(n=jn[e],i=n.interleaved,i!==null){n.interleaved=null;var h=i.next,m=n.pending;if(m!==null){var _=m.next;m.next=h,i.next=_}n.pending=i}jn=null}return t}function vd(t,e){do{var n=Ie;try{if(Ml(),ps.current=Ws,zs){for(var i=be.memoizedState;i!==null;){var h=i.queue;h!==null&&(h.pending=null),i=i.next}zs=!1}if(zn=0,je=De=be=null,ei=!1,yi=0,Yl.current=null,n===null||n.return===null){Me=1,wi=e,Ie=null;break}e:{var m=t,_=n.return,f=n,r=e;if(e=Le,f.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){var u=r,d=f,s=d.tag;if(!(d.mode&1)&&(s===0||s===11||s===15)){var a=d.alternate;a?(d.updateQueue=a.updateQueue,d.memoizedState=a.memoizedState,d.lanes=a.lanes):(d.updateQueue=null,d.memoizedState=null)}var o=fu(_);if(o!==null){o.flags&=-257,du(o,_,f,m,e),o.mode&1&&hu(m,u,e),e=o,r=u;var c=e.updateQueue;if(c===null){var g=new Set;g.add(r),e.updateQueue=g}else c.add(r);break e}else{if(!(e&1)){hu(m,u,e),Ql();break e}r=Error(Z(426))}}else if(Se&&f.mode&1){var l=fu(_);if(l!==null){!(l.flags&65536)&&(l.flags|=256),du(l,_,f,m,e),Al(Tr(r,f));break e}}m=r=Tr(r,f),Me!==4&&(Me=2),ni===null?ni=[m]:ni.push(m),m=_;do{switch(m.tag){case 3:m.flags|=65536,e&=-e,m.lanes|=e;var p=ed(m,r,e);su(m,p);break e;case 1:f=r;var v=m.type,y=m.stateNode;if(!(m.flags&128)&&(typeof v.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(dn===null||!dn.has(y)))){m.flags|=65536,e&=-e,m.lanes|=e;var x=td(m,f,e);su(m,x);break e}}m=m.return}while(m!==null)}xd(n)}catch(w){e=w,Ie===n&&n!==null&&(Ie=n=n.return);continue}break}while(!0)}function yd(){var t=Hs.current;return Hs.current=Ws,t===null?Ws:t}function Ql(){(Me===0||Me===3||Me===2)&&(Me=4),Re===null||!(Wn&268435455)&&!(fo&268435455)||en(Re,Le)}function Ys(t,e){var n=pe;pe|=2;var i=yd();(Re!==t||Le!==e)&&(Pt=null,Ln(t,e));do try{Zm();break}catch(h){vd(t,h)}while(!0);if(Ml(),pe=n,Hs.current=i,Ie!==null)throw Error(Z(261));return Re=null,Le=0,Me}function Zm(){for(;Ie!==null;)_d(Ie)}function ev(){for(;Ie!==null&&!bg();)_d(Ie)}function _d(t){var e=Cd(t.alternate,t,et);t.memoizedProps=t.pendingProps,e===null?xd(t):Ie=e,Yl.current=null}function xd(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Gm(n,e),n!==null){n.flags&=32767,Ie=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Me=6,Ie=null;return}}else if(n=Ym(n,e,et),n!==null){Ie=n;return}if(e=e.sibling,e!==null){Ie=e;return}Ie=e=t}while(e!==null);Me===0&&(Me=5)}function An(t,e,n){var i=me,h=ct.transition;try{ct.transition=null,me=1,tv(t,e,n,i)}finally{ct.transition=h,me=i}return null}function tv(t,e,n,i){do dr();while(on!==null);if(pe&6)throw Error(Z(327));n=t.finishedWork;var h=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Z(177));t.callbackNode=null,t.callbackPriority=0;var m=n.lanes|n.childLanes;if(Rg(t,m),t===Re&&(Ie=Re=null,Le=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ss||(ss=!0,Sd(Es,function(){return dr(),null})),m=(n.flags&15990)!==0,n.subtreeFlags&15990||m){m=ct.transition,ct.transition=null;var _=me;me=1;var f=pe;pe|=4,Yl.current=null,Km(t,n),pd(n,t),wm(Ea),Ps=!!ka,Ea=ka=null,t.current=n,qm(n),kg(),pe=f,me=_,ct.transition=m}else t.current=n;if(ss&&(ss=!1,on=t,Xs=h),m=t.pendingLanes,m===0&&(dn=null),Pg(n.stateNode),Ze(t,Oe()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)h=e[n],i(h.value,{componentStack:h.stack,digest:h.digest});if(Vs)throw Vs=!1,t=Ga,Ga=null,t;return Xs&1&&t.tag!==0&&dr(),m=t.pendingLanes,m&1?t===$a?ri++:(ri=0,$a=t):ri=0,Sn(),null}function dr(){if(on!==null){var t=Zh(Xs),e=ct.transition,n=me;try{if(ct.transition=null,me=16>t?16:t,on===null)var i=!1;else{if(t=on,on=null,Xs=0,pe&6)throw Error(Z(331));var h=pe;for(pe|=4,se=t.current;se!==null;){var m=se,_=m.child;if(se.flags&16){var f=m.deletions;if(f!==null){for(var r=0;r<f.length;r++){var u=f[r];for(se=u;se!==null;){var d=se;switch(d.tag){case 0:case 11:case 15:ti(8,d,m)}var s=d.child;if(s!==null)s.return=d,se=s;else for(;se!==null;){d=se;var a=d.sibling,o=d.return;if(hd(d),d===u){se=null;break}if(a!==null){a.return=o,se=a;break}se=o}}}var c=m.alternate;if(c!==null){var g=c.child;if(g!==null){c.child=null;do{var l=g.sibling;g.sibling=null,g=l}while(g!==null)}}se=m}}if(m.subtreeFlags&2064&&_!==null)_.return=m,se=_;else e:for(;se!==null;){if(m=se,m.flags&2048)switch(m.tag){case 0:case 11:case 15:ti(9,m,m.return)}var p=m.sibling;if(p!==null){p.return=m.return,se=p;break e}se=m.return}}var v=t.current;for(se=v;se!==null;){_=se;var y=_.child;if(_.subtreeFlags&2064&&y!==null)y.return=_,se=y;else e:for(_=v;se!==null;){if(f=se,f.flags&2048)try{switch(f.tag){case 0:case 11:case 15:ho(9,f)}}catch(w){Ee(f,f.return,w)}if(f===_){se=null;break e}var x=f.sibling;if(x!==null){x.return=f.return,se=x;break e}se=f.return}}if(pe=h,Sn(),kt&&typeof kt.onPostCommitFiberRoot=="function")try{kt.onPostCommitFiberRoot(ro,t)}catch{}i=!0}return i}finally{me=n,ct.transition=e}}return!1}function ku(t,e,n){e=Tr(n,e),e=ed(t,e,1),t=fn(t,e,1),e=Xe(),t!==null&&(Ai(t,1,e),Ze(t,e))}function Ee(t,e,n){if(t.tag===3)ku(t,t,n);else for(;e!==null;){if(e.tag===3){ku(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(dn===null||!dn.has(i))){t=Tr(n,t),t=td(e,t,1),e=fn(e,t,1),t=Xe(),e!==null&&(Ai(e,1,t),Ze(e,t));break}}e=e.return}}function nv(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Xe(),t.pingedLanes|=t.suspendedLanes&n,Re===t&&(Le&n)===n&&(Me===4||Me===3&&(Le&130023424)===Le&&500>Oe()-$l?Ln(t,0):Gl|=n),Ze(t,e)}function wd(t,e){e===0&&(t.mode&1?(e=Ki,Ki<<=1,!(Ki&130023424)&&(Ki=4194304)):e=1);var n=Xe();t=zt(t,e),t!==null&&(Ai(t,e,n),Ze(t,n))}function rv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),wd(t,n)}function iv(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,h=t.memoizedState;h!==null&&(n=h.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Z(314))}i!==null&&i.delete(e),wd(t,n)}var Cd;Cd=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Qe.current)qe=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return qe=!1,Xm(t,e,n);qe=!!(t.flags&131072)}else qe=!1,Se&&e.flags&1048576&&kf(e,Ns,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;ms(t,e),t=e.pendingProps;var h=xr(e,We.current);fr(e,n),h=zl(null,e,i,t,h,n);var m=Wl();return e.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Je(i)?(m=!0,js(e)):m=!1,e.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Nl(e),h.updater=uo,e.stateNode=h,h._reactInternals=e,Na(e,i,t,n),e=Ba(null,e,i,!0,m,n)):(e.tag=0,Se&&m&&Pl(e),Ve(null,e,h,n),e=e.child),e;case 16:i=e.elementType;e:{switch(ms(t,e),t=e.pendingProps,h=i._init,i=h(i._payload),e.type=i,h=e.tag=ov(i),t=pt(i,t),h){case 0:e=Fa(null,e,i,t,n);break e;case 1:e=mu(null,e,i,t,n);break e;case 11:e=pu(null,e,i,t,n);break e;case 14:e=gu(null,e,i,pt(i.type,t),n);break e}throw Error(Z(306,i,""))}return e;case 0:return i=e.type,h=e.pendingProps,h=e.elementType===i?h:pt(i,h),Fa(t,e,i,h,n);case 1:return i=e.type,h=e.pendingProps,h=e.elementType===i?h:pt(i,h),mu(t,e,i,h,n);case 3:e:{if(sd(e),t===null)throw Error(Z(387));i=e.pendingProps,m=e.memoizedState,h=m.element,Df(t,e),Bs(e,i,null,n);var _=e.memoizedState;if(i=_.element,m.isDehydrated)if(m={element:i,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},e.updateQueue.baseState=m,e.memoizedState=m,e.flags&256){h=Tr(Error(Z(423)),e),e=vu(t,e,i,n,h);break e}else if(i!==h){h=Tr(Error(Z(424)),e),e=vu(t,e,i,n,h);break e}else for(tt=hn(e.stateNode.containerInfo.firstChild),nt=e,Se=!0,mt=null,n=If(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wr(),i===h){e=Wt(t,e,n);break e}Ve(t,e,i,n)}e=e.child}return e;case 5:return Mf(e),t===null&&Ma(e),i=e.type,h=e.pendingProps,m=t!==null?t.memoizedProps:null,_=h.children,Oa(i,h)?_=null:m!==null&&Oa(i,m)&&(e.flags|=32),id(t,e),Ve(t,e,_,n),e.child;case 6:return t===null&&Ma(e),null;case 13:return od(t,e,n);case 4:return Ll(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Cr(e,null,i,n):Ve(t,e,i,n),e.child;case 11:return i=e.type,h=e.pendingProps,h=e.elementType===i?h:pt(i,h),pu(t,e,i,h,n);case 7:return Ve(t,e,e.pendingProps,n),e.child;case 8:return Ve(t,e,e.pendingProps.children,n),e.child;case 12:return Ve(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,h=e.pendingProps,m=e.memoizedProps,_=h.value,ye(Ls,i._currentValue),i._currentValue=_,m!==null)if(wt(m.value,_)){if(m.children===h.children&&!Qe.current){e=Wt(t,e,n);break e}}else for(m=e.child,m!==null&&(m.return=e);m!==null;){var f=m.dependencies;if(f!==null){_=m.child;for(var r=f.firstContext;r!==null;){if(r.context===i){if(m.tag===1){r=Lt(-1,n&-n),r.tag=2;var u=m.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?r.next=r:(r.next=d.next,d.next=r),u.pending=r}}m.lanes|=n,r=m.alternate,r!==null&&(r.lanes|=n),ja(m.return,n,e),f.lanes|=n;break}r=r.next}}else if(m.tag===10)_=m.type===e.type?null:m.child;else if(m.tag===18){if(_=m.return,_===null)throw Error(Z(341));_.lanes|=n,f=_.alternate,f!==null&&(f.lanes|=n),ja(_,n,e),_=m.sibling}else _=m.child;if(_!==null)_.return=m;else for(_=m;_!==null;){if(_===e){_=null;break}if(m=_.sibling,m!==null){m.return=_.return,_=m;break}_=_.return}m=_}Ve(t,e,h.children,n),e=e.child}return e;case 9:return h=e.type,i=e.pendingProps.children,fr(e,n),h=ut(h),i=i(h),e.flags|=1,Ve(t,e,i,n),e.child;case 14:return i=e.type,h=pt(i,e.pendingProps),h=pt(i.type,h),gu(t,e,i,h,n);case 15:return nd(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,h=e.pendingProps,h=e.elementType===i?h:pt(i,h),ms(t,e),e.tag=1,Je(i)?(t=!0,js(e)):t=!1,fr(e,n),Zf(e,i,h),Na(e,i,h,n),Ba(null,e,i,!0,t,n);case 19:return ad(t,e,n);case 22:return rd(t,e,n)}throw Error(Z(156,e.tag))};function Sd(t,e){return Kh(t,e)}function sv(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lt(t,e,n,i){return new sv(t,e,n,i)}function Jl(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ov(t){if(typeof t=="function")return Jl(t)?1:0;if(t!=null){if(t=t.$$typeof,t===vl)return 11;if(t===yl)return 14}return 2}function gn(t,e){var n=t.alternate;return n===null?(n=lt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function _s(t,e,n,i,h,m){var _=2;if(i=t,typeof t=="function")Jl(t)&&(_=1);else if(typeof t=="string")_=5;else e:switch(t){case Qn:return Fn(n.children,h,m,e);case ml:_=8,h|=8;break;case oa:return t=lt(12,n,e,h|2),t.elementType=oa,t.lanes=m,t;case aa:return t=lt(13,n,e,h),t.elementType=aa,t.lanes=m,t;case la:return t=lt(19,n,e,h),t.elementType=la,t.lanes=m,t;case Dh:return po(n,h,m,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ih:_=10;break e;case Ah:_=9;break e;case vl:_=11;break e;case yl:_=14;break e;case Qt:_=16,i=null;break e}throw Error(Z(130,t==null?t:typeof t,""))}return e=lt(_,n,e,h),e.elementType=t,e.type=i,e.lanes=m,e}function Fn(t,e,n,i){return t=lt(7,t,i,e),t.lanes=n,t}function po(t,e,n,i){return t=lt(22,t,i,e),t.elementType=Dh,t.lanes=n,t.stateNode={isHidden:!1},t}function Go(t,e,n){return t=lt(6,t,null,e),t.lanes=n,t}function $o(t,e,n){return e=lt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function av(t,e,n,i,h){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Oo(0),this.expirationTimes=Oo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oo(0),this.identifierPrefix=i,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function Zl(t,e,n,i,h,m,_,f,r){return t=new av(t,e,n,f,r),e===1?(e=1,m===!0&&(e|=8)):e=0,m=lt(3,null,null,e),t.current=m,m.stateNode=t,m.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nl(m),t}function lv(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qn,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function Td(t){if(!t)return xn;t=t._reactInternals;e:{if(Gn(t)!==t||t.tag!==1)throw Error(Z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Je(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Z(171))}if(t.tag===1){var n=t.type;if(Je(n))return Tf(t,n,e)}return e}function bd(t,e,n,i,h,m,_,f,r){return t=Zl(n,i,!0,t,h,m,_,f,r),t.context=Td(null),n=t.current,i=Xe(),h=pn(n),m=Lt(i,h),m.callback=e??null,fn(n,m,h),t.current.lanes=h,Ai(t,h,i),Ze(t,i),t}function go(t,e,n,i){var h=e.current,m=Xe(),_=pn(h);return n=Td(n),e.context===null?e.context=n:e.pendingContext=n,e=Lt(m,_),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=fn(h,e,_),t!==null&&(_t(t,h,_,m),ds(t,h,_)),_}function Gs(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Eu(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ec(t,e){Eu(t,e),(t=t.alternate)&&Eu(t,e)}function cv(){return null}var kd=typeof reportError=="function"?reportError:function(t){console.error(t)};function tc(t){this._internalRoot=t}mo.prototype.render=tc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Z(409));go(t,e,null,null)};mo.prototype.unmount=tc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Hn(function(){go(null,t,null,null)}),e[Ut]=null}};function mo(t){this._internalRoot=t}mo.prototype.unstable_scheduleHydration=function(t){if(t){var e=nf();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Zt.length&&e!==0&&e<Zt[n].priority;n++);Zt.splice(n,0,t),n===0&&sf(t)}};function nc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ou(){}function uv(t,e,n,i,h){if(h){if(typeof i=="function"){var m=i;i=function(){var u=Gs(_);m.call(u)}}var _=bd(e,i,t,0,null,!1,!1,"",Ou);return t._reactRootContainer=_,t[Ut]=_.current,di(t.nodeType===8?t.parentNode:t),Hn(),_}for(;h=t.lastChild;)t.removeChild(h);if(typeof i=="function"){var f=i;i=function(){var u=Gs(r);f.call(u)}}var r=Zl(t,0,!1,null,null,!1,!1,"",Ou);return t._reactRootContainer=r,t[Ut]=r.current,di(t.nodeType===8?t.parentNode:t),Hn(function(){go(e,r,n,i)}),r}function yo(t,e,n,i,h){var m=n._reactRootContainer;if(m){var _=m;if(typeof h=="function"){var f=h;h=function(){var r=Gs(_);f.call(r)}}go(e,_,t,h)}else _=uv(n,e,t,h,i);return Gs(_)}ef=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Xr(e.pendingLanes);n!==0&&(wl(e,n|1),Ze(e,Oe()),!(pe&6)&&(br=Oe()+500,Sn()))}break;case 13:Hn(function(){var i=zt(t,1);if(i!==null){var h=Xe();_t(i,t,1,h)}}),ec(t,1)}};Cl=function(t){if(t.tag===13){var e=zt(t,134217728);if(e!==null){var n=Xe();_t(e,t,134217728,n)}ec(t,134217728)}};tf=function(t){if(t.tag===13){var e=pn(t),n=zt(t,e);if(n!==null){var i=Xe();_t(n,t,e,i)}ec(t,e)}};nf=function(){return me};rf=function(t,e){var n=me;try{return me=t,e()}finally{me=n}};ya=function(t,e,n){switch(e){case"input":if(ha(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var h=ao(i);if(!h)throw Error(Z(90));jh(i),ha(i,h)}}}break;case"textarea":Nh(t,n);break;case"select":e=n.value,e!=null&&lr(t,!!n.multiple,e,!1)}};Hh=Kl;Vh=Hn;var hv={usingClientEntryPoint:!1,Events:[Mi,tr,ao,zh,Wh,Kl]},zr={findFiberByHostInstance:Mn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fv={bundleType:zr.bundleType,version:zr.version,rendererPackageName:zr.rendererPackageName,rendererConfig:zr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Gh(t),t===null?null:t.stateNode},findFiberByHostInstance:zr.findFiberByHostInstance||cv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var os=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!os.isDisabled&&os.supportsFiber)try{ro=os.inject(fv),kt=os}catch{}}it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hv;it.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nc(e))throw Error(Z(200));return lv(t,e,null,n)};it.createRoot=function(t,e){if(!nc(t))throw Error(Z(299));var n=!1,i="",h=kd;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(h=e.onRecoverableError)),e=Zl(t,1,!1,null,null,n,!1,i,h),t[Ut]=e.current,di(t.nodeType===8?t.parentNode:t),new tc(e)};it.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Z(188)):(t=Object.keys(t).join(","),Error(Z(268,t)));return t=Gh(e),t=t===null?null:t.stateNode,t};it.flushSync=function(t){return Hn(t)};it.hydrate=function(t,e,n){if(!vo(e))throw Error(Z(200));return yo(null,t,e,!0,n)};it.hydrateRoot=function(t,e,n){if(!nc(t))throw Error(Z(405));var i=n!=null&&n.hydratedSources||null,h=!1,m="",_=kd;if(n!=null&&(n.unstable_strictMode===!0&&(h=!0),n.identifierPrefix!==void 0&&(m=n.identifierPrefix),n.onRecoverableError!==void 0&&(_=n.onRecoverableError)),e=bd(e,null,t,1,n??null,h,!1,m,_),t[Ut]=e.current,di(t),i)for(t=0;t<i.length;t++)n=i[t],h=n._getVersion,h=h(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,h]:e.mutableSourceEagerHydrationData.push(n,h);return new mo(e)};it.render=function(t,e,n){if(!vo(e))throw Error(Z(200));return yo(null,t,e,!1,n)};it.unmountComponentAtNode=function(t){if(!vo(t))throw Error(Z(40));return t._reactRootContainer?(Hn(function(){yo(null,null,t,!1,function(){t._reactRootContainer=null,t[Ut]=null})}),!0):!1};it.unstable_batchedUpdates=Kl;it.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!vo(n))throw Error(Z(200));if(t==null||t._reactInternals===void 0)throw Error(Z(38));return yo(t,e,n,!1,i)};it.version="18.3.1-next-f1338f8080-20240426";function Ed(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ed)}catch(t){console.error(t)}}Ed(),kh.exports=it;var dv=kh.exports,Pu=dv;ia.createRoot=Pu.createRoot,ia.hydrateRoot=Pu.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ci(){return Ci=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ci.apply(this,arguments)}var an;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(an||(an={}));const Iu="popstate";function pv(t){t===void 0&&(t={});function e(i,h){let{pathname:m,search:_,hash:f}=i.location;return Qa("",{pathname:m,search:_,hash:f},h.state&&h.state.usr||null,h.state&&h.state.key||"default")}function n(i,h){return typeof h=="string"?h:$s(h)}return mv(e,n,null,t)}function Ae(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Od(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gv(){return Math.random().toString(36).substr(2,8)}function Au(t,e){return{usr:t.state,key:t.key,idx:e}}function Qa(t,e,n,i){return n===void 0&&(n=null),Ci({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ar(e):e,{state:n,key:e&&e.key||i||gv()})}function $s(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Ar(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function mv(t,e,n,i){i===void 0&&(i={});let{window:h=document.defaultView,v5Compat:m=!1}=i,_=h.history,f=an.Pop,r=null,u=d();u==null&&(u=0,_.replaceState(Ci({},_.state,{idx:u}),""));function d(){return(_.state||{idx:null}).idx}function s(){f=an.Pop;let l=d(),p=l==null?null:l-u;u=l,r&&r({action:f,location:g.location,delta:p})}function a(l,p){f=an.Push;let v=Qa(g.location,l,p);u=d()+1;let y=Au(v,u),x=g.createHref(v);try{_.pushState(y,"",x)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;h.location.assign(x)}m&&r&&r({action:f,location:g.location,delta:1})}function o(l,p){f=an.Replace;let v=Qa(g.location,l,p);u=d();let y=Au(v,u),x=g.createHref(v);_.replaceState(y,"",x),m&&r&&r({action:f,location:g.location,delta:0})}function c(l){let p=h.location.origin!=="null"?h.location.origin:h.location.href,v=typeof l=="string"?l:$s(l);return v=v.replace(/ $/,"%20"),Ae(p,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,p)}let g={get action(){return f},get location(){return t(h,_)},listen(l){if(r)throw new Error("A history only accepts one active listener");return h.addEventListener(Iu,s),r=l,()=>{h.removeEventListener(Iu,s),r=null}},createHref(l){return e(h,l)},createURL:c,encodeLocation(l){let p=c(l);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:a,replace:o,go(l){return _.go(l)}};return g}var Du;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Du||(Du={}));function vv(t,e,n){return n===void 0&&(n="/"),yv(t,e,n)}function yv(t,e,n,i){let h=typeof e=="string"?Ar(e):e,m=rc(h.pathname||"/",n);if(m==null)return null;let _=Pd(t);_v(_);let f=null;for(let r=0;f==null&&r<_.length;++r){let u=Av(m);f=Ov(_[r],u)}return f}function Pd(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let h=(m,_,f)=>{let r={relativePath:f===void 0?m.path||"":f,caseSensitive:m.caseSensitive===!0,childrenIndex:_,route:m};r.relativePath.startsWith("/")&&(Ae(r.relativePath.startsWith(i),'Absolute route path "'+r.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),r.relativePath=r.relativePath.slice(i.length));let u=mn([i,r.relativePath]),d=n.concat(r);m.children&&m.children.length>0&&(Ae(m.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Pd(m.children,e,d,u)),!(m.path==null&&!m.index)&&e.push({path:u,score:kv(u,m.index),routesMeta:d})};return t.forEach((m,_)=>{var f;if(m.path===""||!((f=m.path)!=null&&f.includes("?")))h(m,_);else for(let r of Id(m.path))h(m,_,r)}),e}function Id(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,h=n.endsWith("?"),m=n.replace(/\?$/,"");if(i.length===0)return h?[m,""]:[m];let _=Id(i.join("/")),f=[];return f.push(..._.map(r=>r===""?m:[m,r].join("/"))),h&&f.push(..._),f.map(r=>t.startsWith("/")&&r===""?"/":r)}function _v(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Ev(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const xv=/^:[\w-]+$/,wv=3,Cv=2,Sv=1,Tv=10,bv=-2,Mu=t=>t==="*";function kv(t,e){let n=t.split("/"),i=n.length;return n.some(Mu)&&(i+=bv),e&&(i+=Cv),n.filter(h=>!Mu(h)).reduce((h,m)=>h+(xv.test(m)?wv:m===""?Sv:Tv),i)}function Ev(t,e){return t.length===e.length&&t.slice(0,-1).every((i,h)=>i===e[h])?t[t.length-1]-e[e.length-1]:0}function Ov(t,e,n){let{routesMeta:i}=t,h={},m="/",_=[];for(let f=0;f<i.length;++f){let r=i[f],u=f===i.length-1,d=m==="/"?e:e.slice(m.length)||"/",s=Pv({path:r.relativePath,caseSensitive:r.caseSensitive,end:u},d),a=r.route;if(!s)return null;Object.assign(h,s.params),_.push({params:h,pathname:mn([m,s.pathname]),pathnameBase:Rv(mn([m,s.pathnameBase])),route:a}),s.pathnameBase!=="/"&&(m=mn([m,s.pathnameBase]))}return _}function Pv(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=Iv(t.path,t.caseSensitive,t.end),h=e.match(n);if(!h)return null;let m=h[0],_=m.replace(/(.)\/+$/,"$1"),f=h.slice(1);return{params:i.reduce((u,d,s)=>{let{paramName:a,isOptional:o}=d;if(a==="*"){let g=f[s]||"";_=m.slice(0,m.length-g.length).replace(/(.)\/+$/,"$1")}const c=f[s];return o&&!c?u[a]=void 0:u[a]=(c||"").replace(/%2F/g,"/"),u},{}),pathname:m,pathnameBase:_,pattern:t}}function Iv(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Od(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],h="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(_,f,r)=>(i.push({paramName:f,isOptional:r!=null}),r?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),h+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?h+="\\/*$":t!==""&&t!=="/"&&(h+="(?:(?=\\/|$))"),[new RegExp(h,e?void 0:"i"),i]}function Av(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Od(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function rc(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function Dv(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:h=""}=typeof t=="string"?Ar(t):t;return{pathname:n?n.startsWith("/")?n:Mv(n,e):e,search:Nv(i),hash:Lv(h)}}function Mv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(h=>{h===".."?n.length>1&&n.pop():h!=="."&&n.push(h)}),n.length>1?n.join("/"):"/"}function Ko(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jv(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Ad(t,e){let n=jv(t);return e?n.map((i,h)=>h===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function Dd(t,e,n,i){i===void 0&&(i=!1);let h;typeof t=="string"?h=Ar(t):(h=Ci({},t),Ae(!h.pathname||!h.pathname.includes("?"),Ko("?","pathname","search",h)),Ae(!h.pathname||!h.pathname.includes("#"),Ko("#","pathname","hash",h)),Ae(!h.search||!h.search.includes("#"),Ko("#","search","hash",h)));let m=t===""||h.pathname==="",_=m?"/":h.pathname,f;if(_==null)f=n;else{let s=e.length-1;if(!i&&_.startsWith("..")){let a=_.split("/");for(;a[0]==="..";)a.shift(),s-=1;h.pathname=a.join("/")}f=s>=0?e[s]:"/"}let r=Dv(h,f),u=_&&_!=="/"&&_.endsWith("/"),d=(m||_===".")&&n.endsWith("/");return!r.pathname.endsWith("/")&&(u||d)&&(r.pathname+="/"),r}const mn=t=>t.join("/").replace(/\/\/+/g,"/"),Rv=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Nv=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Lv=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Fv(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Md=["post","put","patch","delete"];new Set(Md);const Bv=["get",...Md];new Set(Bv);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Si(){return Si=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Si.apply(this,arguments)}const ic=K.createContext(null),Uv=K.createContext(null),$n=K.createContext(null),_o=K.createContext(null),Tn=K.createContext({outlet:null,matches:[],isDataRoute:!1}),jd=K.createContext(null);function zv(t,e){let{relative:n}=e===void 0?{}:e;Ri()||Ae(!1);let{basename:i,navigator:h}=K.useContext($n),{hash:m,pathname:_,search:f}=Nd(t,{relative:n}),r=_;return i!=="/"&&(r=_==="/"?i:mn([i,_])),h.createHref({pathname:r,search:f,hash:m})}function Ri(){return K.useContext(_o)!=null}function Ni(){return Ri()||Ae(!1),K.useContext(_o).location}function Rd(t){K.useContext($n).static||K.useLayoutEffect(t)}function sc(){let{isDataRoute:t}=K.useContext(Tn);return t?ty():Wv()}function Wv(){Ri()||Ae(!1);let t=K.useContext(ic),{basename:e,future:n,navigator:i}=K.useContext($n),{matches:h}=K.useContext(Tn),{pathname:m}=Ni(),_=JSON.stringify(Ad(h,n.v7_relativeSplatPath)),f=K.useRef(!1);return Rd(()=>{f.current=!0}),K.useCallback(function(u,d){if(d===void 0&&(d={}),!f.current)return;if(typeof u=="number"){i.go(u);return}let s=Dd(u,JSON.parse(_),m,d.relative==="path");t==null&&e!=="/"&&(s.pathname=s.pathname==="/"?e:mn([e,s.pathname])),(d.replace?i.replace:i.push)(s,d.state,d)},[e,i,_,m,t])}function Hv(){let{matches:t}=K.useContext(Tn),e=t[t.length-1];return e?e.params:{}}function Nd(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=K.useContext($n),{matches:h}=K.useContext(Tn),{pathname:m}=Ni(),_=JSON.stringify(Ad(h,i.v7_relativeSplatPath));return K.useMemo(()=>Dd(t,JSON.parse(_),m,n==="path"),[t,_,m,n])}function Vv(t,e){return Xv(t,e)}function Xv(t,e,n,i){Ri()||Ae(!1);let{navigator:h}=K.useContext($n),{matches:m}=K.useContext(Tn),_=m[m.length-1],f=_?_.params:{};_&&_.pathname;let r=_?_.pathnameBase:"/";_&&_.route;let u=Ni(),d;if(e){var s;let l=typeof e=="string"?Ar(e):e;r==="/"||(s=l.pathname)!=null&&s.startsWith(r)||Ae(!1),d=l}else d=u;let a=d.pathname||"/",o=a;if(r!=="/"){let l=r.replace(/^\//,"").split("/");o="/"+a.replace(/^\//,"").split("/").slice(l.length).join("/")}let c=vv(t,{pathname:o}),g=qv(c&&c.map(l=>Object.assign({},l,{params:Object.assign({},f,l.params),pathname:mn([r,h.encodeLocation?h.encodeLocation(l.pathname).pathname:l.pathname]),pathnameBase:l.pathnameBase==="/"?r:mn([r,h.encodeLocation?h.encodeLocation(l.pathnameBase).pathname:l.pathnameBase])})),m,n,i);return e&&g?K.createElement(_o.Provider,{value:{location:Si({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:an.Pop}},g):g}function Yv(){let t=ey(),e=Fv(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,h={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},e),n?K.createElement("pre",{style:h},n):null,null)}const Gv=K.createElement(Yv,null);class $v extends K.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?K.createElement(Tn.Provider,{value:this.props.routeContext},K.createElement(jd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Kv(t){let{routeContext:e,match:n,children:i}=t,h=K.useContext(ic);return h&&h.static&&h.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(h.staticContext._deepestRenderedBoundaryId=n.route.id),K.createElement(Tn.Provider,{value:e},i)}function qv(t,e,n,i){var h;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var m;if(!n)return null;if(n.errors)t=n.matches;else if((m=i)!=null&&m.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let _=t,f=(h=n)==null?void 0:h.errors;if(f!=null){let d=_.findIndex(s=>s.route.id&&(f==null?void 0:f[s.route.id])!==void 0);d>=0||Ae(!1),_=_.slice(0,Math.min(_.length,d+1))}let r=!1,u=-1;if(n&&i&&i.v7_partialHydration)for(let d=0;d<_.length;d++){let s=_[d];if((s.route.HydrateFallback||s.route.hydrateFallbackElement)&&(u=d),s.route.id){let{loaderData:a,errors:o}=n,c=s.route.loader&&a[s.route.id]===void 0&&(!o||o[s.route.id]===void 0);if(s.route.lazy||c){r=!0,u>=0?_=_.slice(0,u+1):_=[_[0]];break}}}return _.reduceRight((d,s,a)=>{let o,c=!1,g=null,l=null;n&&(o=f&&s.route.id?f[s.route.id]:void 0,g=s.route.errorElement||Gv,r&&(u<0&&a===0?(ny("route-fallback"),c=!0,l=null):u===a&&(c=!0,l=s.route.hydrateFallbackElement||null)));let p=e.concat(_.slice(0,a+1)),v=()=>{let y;return o?y=g:c?y=l:s.route.Component?y=K.createElement(s.route.Component,null):s.route.element?y=s.route.element:y=d,K.createElement(Kv,{match:s,routeContext:{outlet:d,matches:p,isDataRoute:n!=null},children:y})};return n&&(s.route.ErrorBoundary||s.route.errorElement||a===0)?K.createElement($v,{location:n.location,revalidation:n.revalidation,component:g,error:o,children:v(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):v()},null)}var Ld=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Ld||{}),Fd=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Fd||{});function Qv(t){let e=K.useContext(ic);return e||Ae(!1),e}function Jv(t){let e=K.useContext(Uv);return e||Ae(!1),e}function Zv(t){let e=K.useContext(Tn);return e||Ae(!1),e}function Bd(t){let e=Zv(),n=e.matches[e.matches.length-1];return n.route.id||Ae(!1),n.route.id}function ey(){var t;let e=K.useContext(jd),n=Jv(),i=Bd();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function ty(){let{router:t}=Qv(Ld.UseNavigateStable),e=Bd(Fd.UseNavigateStable),n=K.useRef(!1);return Rd(()=>{n.current=!0}),K.useCallback(function(h,m){m===void 0&&(m={}),n.current&&(typeof h=="number"?t.navigate(h):t.navigate(h,Si({fromRouteId:e},m)))},[t,e])}const ju={};function ny(t,e,n){ju[t]||(ju[t]=!0)}function ry(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Kt(t){Ae(!1)}function iy(t){let{basename:e="/",children:n=null,location:i,navigationType:h=an.Pop,navigator:m,static:_=!1,future:f}=t;Ri()&&Ae(!1);let r=e.replace(/^\/*/,"/"),u=K.useMemo(()=>({basename:r,navigator:m,static:_,future:Si({v7_relativeSplatPath:!1},f)}),[r,f,m,_]);typeof i=="string"&&(i=Ar(i));let{pathname:d="/",search:s="",hash:a="",state:o=null,key:c="default"}=i,g=K.useMemo(()=>{let l=rc(d,r);return l==null?null:{location:{pathname:l,search:s,hash:a,state:o,key:c},navigationType:h}},[r,d,s,a,o,c,h]);return g==null?null:K.createElement($n.Provider,{value:u},K.createElement(_o.Provider,{children:n,value:g}))}function Ru(t){let{children:e,location:n}=t;return Vv(Ja(e),n)}new Promise(()=>{});function Ja(t,e){e===void 0&&(e=[]);let n=[];return K.Children.forEach(t,(i,h)=>{if(!K.isValidElement(i))return;let m=[...e,h];if(i.type===K.Fragment){n.push.apply(n,Ja(i.props.children,m));return}i.type!==Kt&&Ae(!1),!i.props.index||!i.props.children||Ae(!1);let _={id:i.props.id||m.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(_.children=Ja(i.props.children,m)),n.push(_)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Za(){return Za=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Za.apply(this,arguments)}function sy(t,e){if(t==null)return{};var n={},i=Object.keys(t),h,m;for(m=0;m<i.length;m++)h=i[m],!(e.indexOf(h)>=0)&&(n[h]=t[h]);return n}function oy(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ay(t,e){return t.button===0&&(!e||e==="_self")&&!oy(t)}const ly=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],cy="6";try{window.__reactRouterVersion=cy}catch{}const uy="startTransition",Nu=ng[uy];function hy(t){let{basename:e,children:n,future:i,window:h}=t,m=K.useRef();m.current==null&&(m.current=pv({window:h,v5Compat:!0}));let _=m.current,[f,r]=K.useState({action:_.action,location:_.location}),{v7_startTransition:u}=i||{},d=K.useCallback(s=>{u&&Nu?Nu(()=>r(s)):r(s)},[r,u]);return K.useLayoutEffect(()=>_.listen(d),[_,d]),K.useEffect(()=>ry(i),[i]),K.createElement(iy,{basename:e,children:n,location:f.location,navigationType:f.action,navigator:_,future:i})}const fy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",dy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pr=K.forwardRef(function(e,n){let{onClick:i,relative:h,reloadDocument:m,replace:_,state:f,target:r,to:u,preventScrollReset:d,viewTransition:s}=e,a=sy(e,ly),{basename:o}=K.useContext($n),c,g=!1;if(typeof u=="string"&&dy.test(u)&&(c=u,fy))try{let y=new URL(window.location.href),x=u.startsWith("//")?new URL(y.protocol+u):new URL(u),w=rc(x.pathname,o);x.origin===y.origin&&w!=null?u=w+x.search+x.hash:g=!0}catch{}let l=zv(u,{relative:h}),p=py(u,{replace:_,state:f,target:r,preventScrollReset:d,relative:h,viewTransition:s});function v(y){i&&i(y),y.defaultPrevented||p(y)}return K.createElement("a",Za({},a,{href:c||l,onClick:g||m?i:v,ref:n,target:r}))});var Lu;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Lu||(Lu={}));var Fu;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Fu||(Fu={}));function py(t,e){let{target:n,replace:i,state:h,preventScrollReset:m,relative:_,viewTransition:f}=e===void 0?{}:e,r=sc(),u=Ni(),d=Nd(t,{relative:_});return K.useCallback(s=>{if(ay(s,n)){s.preventDefault();let a=i!==void 0?i:$s(u)===$s(d);r(t,{replace:a,state:h,preventScrollReset:m,relative:_,viewTransition:f})}},[u,r,d,i,h,n,t,m,_,f])}var Bu={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let h=t.charCodeAt(i);h<128?e[n++]=h:h<2048?(e[n++]=h>>6|192,e[n++]=h&63|128):(h&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(h=65536+((h&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=h>>18|240,e[n++]=h>>12&63|128,e[n++]=h>>6&63|128,e[n++]=h&63|128):(e[n++]=h>>12|224,e[n++]=h>>6&63|128,e[n++]=h&63|128)}return e},gy=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const h=t[n++];if(h<128)e[i++]=String.fromCharCode(h);else if(h>191&&h<224){const m=t[n++];e[i++]=String.fromCharCode((h&31)<<6|m&63)}else if(h>239&&h<365){const m=t[n++],_=t[n++],f=t[n++],r=((h&7)<<18|(m&63)<<12|(_&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(r>>10)),e[i++]=String.fromCharCode(56320+(r&1023))}else{const m=t[n++],_=t[n++];e[i++]=String.fromCharCode((h&15)<<12|(m&63)<<6|_&63)}}return e.join("")},zd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let h=0;h<t.length;h+=3){const m=t[h],_=h+1<t.length,f=_?t[h+1]:0,r=h+2<t.length,u=r?t[h+2]:0,d=m>>2,s=(m&3)<<4|f>>4;let a=(f&15)<<2|u>>6,o=u&63;r||(o=64,_||(a=64)),i.push(n[d],n[s],n[a],n[o])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ud(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):gy(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let h=0;h<t.length;){const m=n[t.charAt(h++)],f=h<t.length?n[t.charAt(h)]:0;++h;const u=h<t.length?n[t.charAt(h)]:64;++h;const s=h<t.length?n[t.charAt(h)]:64;if(++h,m==null||f==null||u==null||s==null)throw new my;const a=m<<2|f>>4;if(i.push(a),u!==64){const o=f<<4&240|u>>2;if(i.push(o),s!==64){const c=u<<6&192|s;i.push(c)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class my extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const vy=function(t){const e=Ud(t);return zd.encodeByteArray(e,!0)},Wd=function(t){return vy(t).replace(/\./g,"")},Hd=function(t){try{return zd.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y=()=>yy().__FIREBASE_DEFAULTS__,xy=()=>{if(typeof process>"u"||typeof Bu>"u")return;const t=Bu.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},wy=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Hd(t[1]);return e&&JSON.parse(e)},oc=()=>{try{return _y()||xy()||wy()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Cy=t=>{var e,n;return(n=(e=oc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Vd=()=>{var t;return(t=oc())===null||t===void 0?void 0:t.config},Xd=t=>{var e;return(e=oc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ty(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ye())}function by(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ky(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Ey(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Oy(){const t=Ye();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Py(){try{return typeof indexedDB=="object"}catch{return!1}}function Iy(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",h=self.indexedDB.open(i);h.onsuccess=()=>{h.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},h.onupgradeneeded=()=>{n=!1},h.onerror=()=>{var m;e(((m=h.error)===null||m===void 0?void 0:m.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay="FirebaseError";class bn extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=Ay,Object.setPrototypeOf(this,bn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Li.prototype.create)}}class Li{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},h=`${this.service}/${e}`,m=this.errors[e],_=m?Dy(m,i):"Error",f=`${this.serviceName}: ${_} (${h}).`;return new bn(h,f,i)}}function Dy(t,e){return t.replace(My,(n,i)=>{const h=e[i];return h!=null?String(h):`<${i}?>`})}const My=/\{\$([^}]+)}/g;function jy(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ks(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const h of n){if(!i.includes(h))return!1;const m=t[h],_=e[h];if(Uu(m)&&Uu(_)){if(!Ks(m,_))return!1}else if(m!==_)return!1}for(const h of i)if(!n.includes(h))return!1;return!0}function Uu(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(h=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(h))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Gr(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[h,m]=i.split("=");e[decodeURIComponent(h)]=decodeURIComponent(m)}}),e}function $r(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Ry(t,e){const n=new Ny(t,e);return n.subscribe.bind(n)}class Ny{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let h;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");Ly(e,["next","error","complete"])?h=e:h={next:e,error:n,complete:i},h.next===void 0&&(h.next=qo),h.error===void 0&&(h.error=qo),h.complete===void 0&&(h.complete=qo);const m=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?h.error(this.finalError):h.complete()}catch{}}),this.observers.push(h),m}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ly(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function qo(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(t){return t&&t._delegate?t._delegate:t}class kr{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Sy;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const h=this.getOrInitializeService({instanceIdentifier:n});h&&i.resolve(h)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),h=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(m){if(h)return null;throw m}else{if(h)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Uy(e))try{this.getOrInitializeService({instanceIdentifier:Dn})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(n);try{const m=this.getOrInitializeService({instanceIdentifier:h});i.resolve(m)}catch{}}}}clearInstance(e=Dn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Dn){return this.instances.has(e)}getOptions(e=Dn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const h=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[m,_]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(m);i===f&&_.resolve(h)}return h}onInit(e,n){var i;const h=this.normalizeInstanceIdentifier(n),m=(i=this.onInitCallbacks.get(h))!==null&&i!==void 0?i:new Set;m.add(e),this.onInitCallbacks.set(h,m);const _=this.instances.get(h);return _&&e(_,h),()=>{m.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const h of i)try{h(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:By(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Dn){return this.component?this.component.multipleInstances?e:Dn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function By(t){return t===Dn?void 0:t}function Uy(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Fy(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ve||(ve={}));const Wy={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},Hy=ve.INFO,Vy={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},Xy=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),h=Vy[e];if(h)console[h](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Yd{constructor(e){this.name=e,this._logLevel=Hy,this._logHandler=Xy,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Wy[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}}const Yy=(t,e)=>e.some(n=>t instanceof n);let zu,Wu;function Gy(){return zu||(zu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $y(){return Wu||(Wu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Gd=new WeakMap,el=new WeakMap,$d=new WeakMap,Qo=new WeakMap,ac=new WeakMap;function Ky(t){const e=new Promise((n,i)=>{const h=()=>{t.removeEventListener("success",m),t.removeEventListener("error",_)},m=()=>{n(vn(t.result)),h()},_=()=>{i(t.error),h()};t.addEventListener("success",m),t.addEventListener("error",_)});return e.then(n=>{n instanceof IDBCursor&&Gd.set(n,t)}).catch(()=>{}),ac.set(e,t),e}function qy(t){if(el.has(t))return;const e=new Promise((n,i)=>{const h=()=>{t.removeEventListener("complete",m),t.removeEventListener("error",_),t.removeEventListener("abort",_)},m=()=>{n(),h()},_=()=>{i(t.error||new DOMException("AbortError","AbortError")),h()};t.addEventListener("complete",m),t.addEventListener("error",_),t.addEventListener("abort",_)});el.set(t,e)}let tl={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return el.get(t);if(e==="objectStoreNames")return t.objectStoreNames||$d.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Qy(t){tl=t(tl)}function Jy(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Jo(this),e,...n);return $d.set(i,e.sort?e.sort():[e]),vn(i)}:$y().includes(t)?function(...e){return t.apply(Jo(this),e),vn(Gd.get(this))}:function(...e){return vn(t.apply(Jo(this),e))}}function Zy(t){return typeof t=="function"?Jy(t):(t instanceof IDBTransaction&&qy(t),Yy(t,Gy())?new Proxy(t,tl):t)}function vn(t){if(t instanceof IDBRequest)return Ky(t);if(Qo.has(t))return Qo.get(t);const e=Zy(t);return e!==t&&(Qo.set(t,e),ac.set(e,t)),e}const Jo=t=>ac.get(t);function e0(t,e,{blocked:n,upgrade:i,blocking:h,terminated:m}={}){const _=indexedDB.open(t,e),f=vn(_);return i&&_.addEventListener("upgradeneeded",r=>{i(vn(_.result),r.oldVersion,r.newVersion,vn(_.transaction),r)}),n&&_.addEventListener("blocked",r=>n(r.oldVersion,r.newVersion,r)),f.then(r=>{m&&r.addEventListener("close",()=>m()),h&&r.addEventListener("versionchange",u=>h(u.oldVersion,u.newVersion,u))}).catch(()=>{}),f}const t0=["get","getKey","getAll","getAllKeys","count"],n0=["put","add","delete","clear"],Zo=new Map;function Hu(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Zo.get(e))return Zo.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,h=n0.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(h||t0.includes(n)))return;const m=async function(_,...f){const r=this.transaction(_,h?"readwrite":"readonly");let u=r.store;return i&&(u=u.index(f.shift())),(await Promise.all([u[n](...f),h&&r.done]))[0]};return Zo.set(e,m),m}Qy(t=>({...t,get:(e,n,i)=>Hu(e,n)||t.get(e,n,i),has:(e,n)=>!!Hu(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(i0(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function i0(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const nl="@firebase/app",Vu="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ht=new Yd("@firebase/app"),s0="@firebase/app-compat",o0="@firebase/analytics-compat",a0="@firebase/analytics",l0="@firebase/app-check-compat",c0="@firebase/app-check",u0="@firebase/auth",h0="@firebase/auth-compat",f0="@firebase/database",d0="@firebase/data-connect",p0="@firebase/database-compat",g0="@firebase/functions",m0="@firebase/functions-compat",v0="@firebase/installations",y0="@firebase/installations-compat",_0="@firebase/messaging",x0="@firebase/messaging-compat",w0="@firebase/performance",C0="@firebase/performance-compat",S0="@firebase/remote-config",T0="@firebase/remote-config-compat",b0="@firebase/storage",k0="@firebase/storage-compat",E0="@firebase/firestore",O0="@firebase/vertexai-preview",P0="@firebase/firestore-compat",I0="firebase",A0="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rl="[DEFAULT]",D0={[nl]:"fire-core",[s0]:"fire-core-compat",[a0]:"fire-analytics",[o0]:"fire-analytics-compat",[c0]:"fire-app-check",[l0]:"fire-app-check-compat",[u0]:"fire-auth",[h0]:"fire-auth-compat",[f0]:"fire-rtdb",[d0]:"fire-data-connect",[p0]:"fire-rtdb-compat",[g0]:"fire-fn",[m0]:"fire-fn-compat",[v0]:"fire-iid",[y0]:"fire-iid-compat",[_0]:"fire-fcm",[x0]:"fire-fcm-compat",[w0]:"fire-perf",[C0]:"fire-perf-compat",[S0]:"fire-rc",[T0]:"fire-rc-compat",[b0]:"fire-gcs",[k0]:"fire-gcs-compat",[E0]:"fire-fst",[P0]:"fire-fst-compat",[O0]:"fire-vertex","fire-js":"fire-js",[I0]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs=new Map,M0=new Map,il=new Map;function Xu(t,e){try{t.container.addComponent(e)}catch(n){Ht.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ti(t){const e=t.name;if(il.has(e))return Ht.debug(`There were multiple attempts to register component ${e}.`),!1;il.set(e,t);for(const n of qs.values())Xu(n,t);for(const n of M0.values())Xu(n,t);return!0}function Kd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function vt(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yn=new Li("app","Firebase",j0);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new kr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi=A0;function qd(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:rl,automaticDataCollectionEnabled:!1},e),h=i.name;if(typeof h!="string"||!h)throw yn.create("bad-app-name",{appName:String(h)});if(n||(n=Vd()),!n)throw yn.create("no-options");const m=qs.get(h);if(m){if(Ks(n,m.options)&&Ks(i,m.config))return m;throw yn.create("duplicate-app",{appName:h})}const _=new zy(h);for(const r of il.values())_.addComponent(r);const f=new R0(n,i,_);return qs.set(h,f),f}function N0(t=rl){const e=qs.get(t);if(!e&&t===rl&&Vd())return qd();if(!e)throw yn.create("no-app",{appName:t});return e}function gr(t,e,n){var i;let h=(i=D0[t])!==null&&i!==void 0?i:t;n&&(h+=`-${n}`);const m=h.match(/\s|\//),_=e.match(/\s|\//);if(m||_){const f=[`Unable to register library "${h}" with version "${e}":`];m&&f.push(`library name "${h}" contains illegal characters (whitespace or "/")`),m&&_&&f.push("and"),_&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ht.warn(f.join(" "));return}Ti(new kr(`${h}-version`,()=>({library:h,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0="firebase-heartbeat-database",F0=1,bi="firebase-heartbeat-store";let ea=null;function Qd(){return ea||(ea=e0(L0,F0,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(bi)}catch(n){console.warn(n)}}}}).catch(t=>{throw yn.create("idb-open",{originalErrorMessage:t.message})})),ea}async function B0(t){try{const n=(await Qd()).transaction(bi),i=await n.objectStore(bi).get(Jd(t));return await n.done,i}catch(e){if(e instanceof bn)Ht.warn(e.message);else{const n=yn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ht.warn(n.message)}}}async function Yu(t,e){try{const i=(await Qd()).transaction(bi,"readwrite");await i.objectStore(bi).put(e,Jd(t)),await i.done}catch(n){if(n instanceof bn)Ht.warn(n.message);else{const i=yn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ht.warn(i.message)}}}function Jd(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0=1024,z0=30*24*60*60*1e3;class W0{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new V0(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const h=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),m=Gu();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===m||this._heartbeatsCache.heartbeats.some(_=>_.date===m)?void 0:(this._heartbeatsCache.heartbeats.push({date:m,agent:h}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(_=>{const f=new Date(_.date).valueOf();return Date.now()-f<=z0}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Ht.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Gu(),{heartbeatsToSend:i,unsentEntries:h}=H0(this._heartbeatsCache.heartbeats),m=Wd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,h.length>0?(this._heartbeatsCache.heartbeats=h,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),m}catch(n){return Ht.warn(n),""}}}function Gu(){return new Date().toISOString().substring(0,10)}function H0(t,e=U0){const n=[];let i=t.slice();for(const h of t){const m=n.find(_=>_.agent===h.agent);if(m){if(m.dates.push(h.date),$u(n)>e){m.dates.pop();break}}else if(n.push({agent:h.agent,dates:[h.date]}),$u(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class V0{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Py()?Iy().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await B0(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const h=await this.read();return Yu(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:h.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const h=await this.read();return Yu(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:h.lastSentHeartbeatDate,heartbeats:[...h.heartbeats,...e.heartbeats]})}else return}}function $u(t){return Wd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(t){Ti(new kr("platform-logger",e=>new r0(e),"PRIVATE")),Ti(new kr("heartbeat",e=>new W0(e),"PRIVATE")),gr(nl,Vu,t),gr(nl,Vu,"esm2017"),gr("fire-js","")}X0("");function lc(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,i=Object.getOwnPropertySymbols(t);h<i.length;h++)e.indexOf(i[h])<0&&Object.prototype.propertyIsEnumerable.call(t,i[h])&&(n[i[h]]=t[i[h]]);return n}function Zd(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Y0=Zd,ep=new Li("auth","Firebase",Zd());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs=new Yd("@firebase/auth");function G0(t,...e){Qs.logLevel<=ve.WARN&&Qs.warn(`Auth (${Bi}): ${t}`,...e)}function xs(t,...e){Qs.logLevel<=ve.ERROR&&Qs.error(`Auth (${Bi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(t,...e){throw uc(t,...e)}function xt(t,...e){return uc(t,...e)}function cc(t,e,n){const i=Object.assign(Object.assign({},Y0()),{[e]:n});return new Li("auth","Firebase",i).create(e,{appName:t.name})}function Ft(t){return cc(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $0(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&ft(t,"argument-error"),cc(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function uc(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return ep.create(t,...e)}function ce(t,e,...n){if(!t)throw uc(e,...n)}function jt(t){const e="INTERNAL ASSERTION FAILED: "+t;throw xs(e),new Error(e)}function Vt(t,e){t||jt(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sl(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function K0(){return Ku()==="http:"||Ku()==="https:"}function Ku(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(K0()||ky()||"connection"in navigator)?navigator.onLine:!0}function Q0(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,n){this.shortDelay=e,this.longDelay=n,Vt(n>e,"Short delay should be less than long delay!"),this.isMobile=Ty()||Ey()}get(){return q0()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(t,e){Vt(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;jt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;jt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;jt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0=new Ui(3e4,6e4);function kn(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function En(t,e,n,i,h={}){return np(t,h,async()=>{let m={},_={};i&&(e==="GET"?_=i:m={body:JSON.stringify(i)});const f=Fi(Object.assign({key:t.config.apiKey},_)).slice(1),r=await t._getAdditionalHeaders();r["Content-Type"]="application/json",t.languageCode&&(r["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:r},m);return by()||(u.referrerPolicy="no-referrer"),tp.fetch()(rp(t,t.config.apiHost,n,f),u)})}async function np(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},J0),e);try{const h=new t_(t),m=await Promise.race([n(),h.promise]);h.clearNetworkTimeout();const _=await m.json();if("needConfirmation"in _)throw as(t,"account-exists-with-different-credential",_);if(m.ok&&!("errorMessage"in _))return _;{const f=m.ok?_.errorMessage:_.error.message,[r,u]=f.split(" : ");if(r==="FEDERATED_USER_ID_ALREADY_LINKED")throw as(t,"credential-already-in-use",_);if(r==="EMAIL_EXISTS")throw as(t,"email-already-in-use",_);if(r==="USER_DISABLED")throw as(t,"user-disabled",_);const d=i[r]||r.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw cc(t,d,u);ft(t,d)}}catch(h){if(h instanceof bn)throw h;ft(t,"network-request-failed",{message:String(h)})}}async function zi(t,e,n,i,h={}){const m=await En(t,e,n,i,h);return"mfaPendingCredential"in m&&ft(t,"multi-factor-auth-required",{_serverResponse:m}),m}function rp(t,e,n,i){const h=`${e}${n}?${i}`;return t.config.emulator?hc(t.config,h):`${t.config.apiScheme}://${h}`}function e_(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class t_{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(xt(this.auth,"network-request-failed")),Z0.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function as(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const h=xt(t,e,i);return h.customData._tokenResponse=n,h}function qu(t){return t!==void 0&&t.enterprise!==void 0}class n_{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return e_(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function r_(t,e){return En(t,"GET","/v2/recaptchaConfig",kn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i_(t,e){return En(t,"POST","/v1/accounts:delete",e)}async function ip(t,e){return En(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function s_(t,e=!1){const n=Yt(t),i=await n.getIdToken(e),h=fc(i);ce(h&&h.exp&&h.auth_time&&h.iat,n.auth,"internal-error");const m=typeof h.firebase=="object"?h.firebase:void 0,_=m==null?void 0:m.sign_in_provider;return{claims:h,token:i,authTime:ii(ta(h.auth_time)),issuedAtTime:ii(ta(h.iat)),expirationTime:ii(ta(h.exp)),signInProvider:_||null,signInSecondFactor:(m==null?void 0:m.sign_in_second_factor)||null}}function ta(t){return Number(t)*1e3}function fc(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return xs("JWT malformed, contained fewer than 3 sections"),null;try{const h=Hd(n);return h?JSON.parse(h):(xs("Failed to decode base64 JWT payload"),null)}catch(h){return xs("Caught error parsing JWT payload as JSON",h==null?void 0:h.toString()),null}}function Qu(t){const e=fc(t);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ki(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof bn&&o_(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function o_({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const h=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,h)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ii(this.lastLoginAt),this.creationTime=ii(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Js(t){var e;const n=t.auth,i=await t.getIdToken(),h=await ki(t,ip(n,{idToken:i}));ce(h==null?void 0:h.users.length,n,"internal-error");const m=h.users[0];t._notifyReloadListener(m);const _=!((e=m.providerUserInfo)===null||e===void 0)&&e.length?sp(m.providerUserInfo):[],f=c_(t.providerData,_),r=t.isAnonymous,u=!(t.email&&m.passwordHash)&&!(f!=null&&f.length),d=r?u:!1,s={uid:m.localId,displayName:m.displayName||null,photoURL:m.photoUrl||null,email:m.email||null,emailVerified:m.emailVerified||!1,phoneNumber:m.phoneNumber||null,tenantId:m.tenantId||null,providerData:f,metadata:new ol(m.createdAt,m.lastLoginAt),isAnonymous:d};Object.assign(t,s)}async function l_(t){const e=Yt(t);await Js(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function c_(t,e){return[...t.filter(i=>!e.some(h=>h.providerId===i.providerId)),...e]}function sp(t){return t.map(e=>{var{providerId:n}=e,i=lc(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u_(t,e){const n=await np(t,{},async()=>{const i=Fi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:h,apiKey:m}=t.config,_=rp(t,h,"/v1/token",`key=${m}`),f=await t._getAdditionalHeaders();return f["Content-Type"]="application/x-www-form-urlencoded",tp.fetch()(_,{method:"POST",headers:f,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function h_(t,e){return En(t,"POST","/v2/accounts:revokeToken",kn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Qu(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ce(e.length!==0,"internal-error");const n=Qu(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:h,expiresIn:m}=await u_(e,n);this.updateTokensAndExpiration(i,h,Number(m))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:h,expirationTime:m}=n,_=new mr;return i&&(ce(typeof i=="string","internal-error",{appName:e}),_.refreshToken=i),h&&(ce(typeof h=="string","internal-error",{appName:e}),_.accessToken=h),m&&(ce(typeof m=="number","internal-error",{appName:e}),_.expirationTime=m),_}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new mr,this.toJSON())}_performRefresh(){return jt("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(t,e){ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Rt{constructor(e){var{uid:n,auth:i,stsTokenManager:h}=e,m=lc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new a_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=h,this.accessToken=h.accessToken,this.displayName=m.displayName||null,this.email=m.email||null,this.emailVerified=m.emailVerified||!1,this.phoneNumber=m.phoneNumber||null,this.photoURL=m.photoURL||null,this.isAnonymous=m.isAnonymous||!1,this.tenantId=m.tenantId||null,this.providerData=m.providerData?[...m.providerData]:[],this.metadata=new ol(m.createdAt||void 0,m.lastLoginAt||void 0)}async getIdToken(e){const n=await ki(this,this.stsTokenManager.getToken(this.auth,e));return ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return s_(this,e)}reload(){return l_(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Rt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Js(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vt(this.auth.app))return Promise.reject(Ft(this.auth));const e=await this.getIdToken();return await ki(this,i_(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,h,m,_,f,r,u,d;const s=(i=n.displayName)!==null&&i!==void 0?i:void 0,a=(h=n.email)!==null&&h!==void 0?h:void 0,o=(m=n.phoneNumber)!==null&&m!==void 0?m:void 0,c=(_=n.photoURL)!==null&&_!==void 0?_:void 0,g=(f=n.tenantId)!==null&&f!==void 0?f:void 0,l=(r=n._redirectEventId)!==null&&r!==void 0?r:void 0,p=(u=n.createdAt)!==null&&u!==void 0?u:void 0,v=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:y,emailVerified:x,isAnonymous:w,providerData:S,stsTokenManager:k}=n;ce(y&&k,e,"internal-error");const b=mr.fromJSON(this.name,k);ce(typeof y=="string",e,"internal-error"),$t(s,e.name),$t(a,e.name),ce(typeof x=="boolean",e,"internal-error"),ce(typeof w=="boolean",e,"internal-error"),$t(o,e.name),$t(c,e.name),$t(g,e.name),$t(l,e.name),$t(p,e.name),$t(v,e.name);const j=new Rt({uid:y,auth:e,email:a,emailVerified:x,displayName:s,isAnonymous:w,photoURL:c,phoneNumber:o,tenantId:g,stsTokenManager:b,createdAt:p,lastLoginAt:v});return S&&Array.isArray(S)&&(j.providerData=S.map(M=>Object.assign({},M))),l&&(j._redirectEventId=l),j}static async _fromIdTokenResponse(e,n,i=!1){const h=new mr;h.updateFromServerResponse(n);const m=new Rt({uid:n.localId,auth:e,stsTokenManager:h,isAnonymous:i});return await Js(m),m}static async _fromGetAccountInfoResponse(e,n,i){const h=n.users[0];ce(h.localId!==void 0,"internal-error");const m=h.providerUserInfo!==void 0?sp(h.providerUserInfo):[],_=!(h.email&&h.passwordHash)&&!(m!=null&&m.length),f=new mr;f.updateFromIdToken(i);const r=new Rt({uid:h.localId,auth:e,stsTokenManager:f,isAnonymous:_}),u={uid:h.localId,displayName:h.displayName||null,photoURL:h.photoUrl||null,email:h.email||null,emailVerified:h.emailVerified||!1,phoneNumber:h.phoneNumber||null,tenantId:h.tenantId||null,providerData:m,metadata:new ol(h.createdAt,h.lastLoginAt),isAnonymous:!(h.email&&h.passwordHash)&&!(m!=null&&m.length)};return Object.assign(r,u),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju=new Map;function Nt(t){Vt(t instanceof Function,"Expected a class definition");let e=Ju.get(t);return e?(Vt(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ju.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}op.type="NONE";const Zu=op;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(t,e,n){return`firebase:${t}:${e}:${n}`}class vr{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:h,name:m}=this.auth;this.fullUserKey=ws(this.userKey,h.apiKey,m),this.fullPersistenceKey=ws("persistence",h.apiKey,m),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Rt._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new vr(Nt(Zu),e,i);const h=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let m=h[0]||Nt(Zu);const _=ws(i,e.config.apiKey,e.name);let f=null;for(const u of n)try{const d=await u._get(_);if(d){const s=Rt._fromJSON(e,d);u!==m&&(f=s),m=u;break}}catch{}const r=h.filter(u=>u._shouldAllowMigration);return!m._shouldAllowMigration||!r.length?new vr(m,e,i):(m=r[0],f&&await m._set(_,f.toJSON()),await Promise.all(n.map(async u=>{if(u!==m)try{await u._remove(_)}catch{}})),new vr(m,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eh(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(up(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ap(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fp(e))return"Blackberry";if(dp(e))return"Webos";if(lp(e))return"Safari";if((e.includes("chrome/")||cp(e))&&!e.includes("edge/"))return"Chrome";if(hp(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function ap(t=Ye()){return/firefox\//i.test(t)}function lp(t=Ye()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cp(t=Ye()){return/crios\//i.test(t)}function up(t=Ye()){return/iemobile/i.test(t)}function hp(t=Ye()){return/android/i.test(t)}function fp(t=Ye()){return/blackberry/i.test(t)}function dp(t=Ye()){return/webos/i.test(t)}function dc(t=Ye()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function f_(t=Ye()){var e;return dc(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function d_(){return Oy()&&document.documentMode===10}function pp(t=Ye()){return dc(t)||hp(t)||dp(t)||fp(t)||/windows phone/i.test(t)||up(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(t,e=[]){let n;switch(t){case"Browser":n=eh(Ye());break;case"Worker":n=`${eh(Ye())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Bi}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=m=>new Promise((_,f)=>{try{const r=e(m);_(r)}catch(r){f(r)}});i.onAbort=n,this.queue.push(i);const h=this.queue.length-1;return()=>{this.queue[h]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const h of n)try{h()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g_(t,e={}){return En(t,"GET","/v2/passwordPolicy",kn(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_=6;class v_{constructor(e){var n,i,h,m;const _=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=_.minPasswordLength)!==null&&n!==void 0?n:m_,_.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=_.maxPasswordLength),_.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=_.containsLowercaseCharacter),_.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=_.containsUppercaseCharacter),_.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=_.containsNumericCharacter),_.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=_.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(h=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&h!==void 0?h:"",this.forceUpgradeOnSignin=(m=e.forceUpgradeOnSignin)!==null&&m!==void 0?m:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,h,m,_,f;const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=(n=r.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),r.isValid&&(r.isValid=(i=r.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),r.isValid&&(r.isValid=(h=r.containsLowercaseLetter)!==null&&h!==void 0?h:!0),r.isValid&&(r.isValid=(m=r.containsUppercaseLetter)!==null&&m!==void 0?m:!0),r.isValid&&(r.isValid=(_=r.containsNumericCharacter)!==null&&_!==void 0?_:!0),r.isValid&&(r.isValid=(f=r.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),r}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,h=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),h&&(n.meetsMaxPasswordLength=e.length<=h)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let h=0;h<e.length;h++)i=e.charAt(h),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,h,m){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=h)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e,n,i,h){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=h,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new th(this),this.idTokenSubscription=new th(this),this.beforeStateQueue=new p_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ep,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=h.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Nt(n)),this._initializationPromise=this.queue(async()=>{var i,h;if(!this._deleted&&(this.persistenceManager=await vr.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((h=this.currentUser)===null||h===void 0?void 0:h.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ip(this,{idToken:e}),i=await Rt._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(vt(this.app)){const _=this.app.settings.authIdToken;return _?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(_).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let h=i,m=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const _=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,f=h==null?void 0:h._redirectEventId,r=await this.tryRedirectSignIn(e);(!_||_===f)&&(r!=null&&r.user)&&(h=r.user,m=!0)}if(!h)return this.directlySetCurrentUser(null);if(!h._redirectEventId){if(m)try{await this.beforeStateQueue.runMiddleware(h)}catch(_){h=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(_))}return h?this.reloadAndSetCurrentUserOrClear(h):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===h._redirectEventId?this.directlySetCurrentUser(h):this.reloadAndSetCurrentUserOrClear(h)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Js(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Q0()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vt(this.app))return Promise.reject(Ft(this));const n=e?Yt(e):null;return n&&ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vt(this.app)?Promise.reject(Ft(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vt(this.app)?Promise.reject(Ft(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Nt(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await g_(this),n=new v_(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Li("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await h_(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Nt(e)||this._popupRedirectResolver;ce(n,this,"argument-error"),this.redirectPersistenceManager=await vr.create(this,[Nt(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,h){if(this._deleted)return()=>{};const m=typeof n=="function"?n:n.next.bind(n);let _=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(f,this,"internal-error"),f.then(()=>{_||m(this.currentUser)}),typeof n=="function"){const r=e.addObserver(n,i,h);return()=>{_=!0,r()}}else{const r=e.addObserver(n);return()=>{_=!0,r()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gp(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const h=await this._getAppCheckToken();return h&&(n["X-Firebase-AppCheck"]=h),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&G0(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function On(t){return Yt(t)}class th{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ry(n=>this.observer=n)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xo={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function __(t){xo=t}function mp(t){return xo.loadJS(t)}function x_(){return xo.recaptchaEnterpriseScript}function w_(){return xo.gapiScript}function C_(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const S_="recaptcha-enterprise",T_="NO_RECAPTCHA";class b_{constructor(e){this.type=S_,this.auth=On(e)}async verify(e="verify",n=!1){async function i(m){if(!n){if(m.tenantId==null&&m._agentRecaptchaConfig!=null)return m._agentRecaptchaConfig.siteKey;if(m.tenantId!=null&&m._tenantRecaptchaConfigs[m.tenantId]!==void 0)return m._tenantRecaptchaConfigs[m.tenantId].siteKey}return new Promise(async(_,f)=>{r_(m,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(r.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const u=new n_(r);return m.tenantId==null?m._agentRecaptchaConfig=u:m._tenantRecaptchaConfigs[m.tenantId]=u,_(u.siteKey)}}).catch(r=>{f(r)})})}function h(m,_,f){const r=window.grecaptcha;qu(r)?r.enterprise.ready(()=>{r.enterprise.execute(m,{action:e}).then(u=>{_(u)}).catch(()=>{_(T_)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((m,_)=>{i(this.auth).then(f=>{if(!n&&qu(window.grecaptcha))h(f,m,_);else{if(typeof window>"u"){_(new Error("RecaptchaVerifier is only supported in browser"));return}let r=x_();r.length!==0&&(r+=f),mp(r).then(()=>{h(f,m,_)}).catch(u=>{_(u)})}}).catch(f=>{_(f)})})}}async function nh(t,e,n,i=!1){const h=new b_(t);let m;try{m=await h.verify(n)}catch{m=await h.verify(n,!0)}const _=Object.assign({},e);return i?Object.assign(_,{captchaResp:m}):Object.assign(_,{captchaResponse:m}),Object.assign(_,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(_,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),_}async function al(t,e,n,i){var h;if(!((h=t._getRecaptchaConfig())===null||h===void 0)&&h.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const m=await nh(t,e,n,n==="getOobCode");return i(t,m)}else return i(t,e).catch(async m=>{if(m.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const _=await nh(t,e,n,n==="getOobCode");return i(t,_)}else return Promise.reject(m)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(t,e){const n=Kd(t,"auth");if(n.isInitialized()){const h=n.getImmediate(),m=n.getOptions();if(Ks(m,e??{}))return h;ft(h,"already-initialized")}return n.initialize({options:e})}function E_(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Nt);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function O_(t,e,n){const i=On(t);ce(i._canInitEmulator,i,"emulator-config-failed"),ce(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const h=!1,m=vp(e),{host:_,port:f}=P_(e),r=f===null?"":`:${f}`;i.config.emulator={url:`${m}//${_}${r}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:_,port:f,protocol:m.replace(":",""),options:Object.freeze({disableWarnings:h})}),I_()}function vp(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function P_(t){const e=vp(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",h=/^(\[[^\]]+\])(:|$)/.exec(i);if(h){const m=h[1];return{host:m,port:rh(i.substr(m.length+1))}}else{const[m,_]=i.split(":");return{host:m,port:rh(_)}}}function rh(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function I_(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return jt("not implemented")}_getIdTokenResponse(e){return jt("not implemented")}_linkToIdToken(e,n){return jt("not implemented")}_getReauthenticationResolver(e){return jt("not implemented")}}async function A_(t,e){return En(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D_(t,e){return zi(t,"POST","/v1/accounts:signInWithPassword",kn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M_(t,e){return zi(t,"POST","/v1/accounts:signInWithEmailLink",kn(t,e))}async function j_(t,e){return zi(t,"POST","/v1/accounts:signInWithEmailLink",kn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends pc{constructor(e,n,i,h=null){super("password",i),this._email=e,this._password=n,this._tenantId=h}static _fromEmailAndPassword(e,n){return new Ei(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Ei(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return al(e,n,"signInWithPassword",D_);case"emailLink":return M_(e,{email:this._email,oobCode:this._password});default:ft(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return al(e,i,"signUpPassword",A_);case"emailLink":return j_(e,{idToken:n,email:this._email,oobCode:this._password});default:ft(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yr(t,e){return zi(t,"POST","/v1/accounts:signInWithIdp",kn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_="http://localhost";class Vn extends pc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Vn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ft("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:h}=n,m=lc(n,["providerId","signInMethod"]);if(!i||!h)return null;const _=new Vn(i,h);return _.idToken=m.idToken||void 0,_.accessToken=m.accessToken||void 0,_.secret=m.secret,_.nonce=m.nonce,_.pendingToken=m.pendingToken||null,_}_getIdTokenResponse(e){const n=this.buildRequest();return yr(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,yr(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,yr(e,n)}buildRequest(){const e={requestUri:R_,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Fi(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function L_(t){const e=Gr($r(t)).link,n=e?Gr($r(e)).deep_link_id:null,i=Gr($r(t)).deep_link_id;return(i?Gr($r(i)).link:null)||i||n||e||t}class gc{constructor(e){var n,i,h,m,_,f;const r=Gr($r(e)),u=(n=r.apiKey)!==null&&n!==void 0?n:null,d=(i=r.oobCode)!==null&&i!==void 0?i:null,s=N_((h=r.mode)!==null&&h!==void 0?h:null);ce(u&&d&&s,"argument-error"),this.apiKey=u,this.operation=s,this.code=d,this.continueUrl=(m=r.continueUrl)!==null&&m!==void 0?m:null,this.languageCode=(_=r.languageCode)!==null&&_!==void 0?_:null,this.tenantId=(f=r.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const n=L_(e);try{return new gc(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(){this.providerId=Dr.PROVIDER_ID}static credential(e,n){return Ei._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=gc.parseLink(n);return ce(i,"argument-error"),Ei._fromEmailAndCode(e,i.code,i.tenantId)}}Dr.PROVIDER_ID="password";Dr.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Dr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends mc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn extends Wi{constructor(){super("facebook.com")}static credential(e){return Vn._fromParams({providerId:tn.PROVIDER_ID,signInMethod:tn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tn.credentialFromTaggedObject(e)}static credentialFromError(e){return tn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tn.credential(e.oauthAccessToken)}catch{return null}}}tn.FACEBOOK_SIGN_IN_METHOD="facebook.com";tn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At extends Wi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Vn._fromParams({providerId:At.PROVIDER_ID,signInMethod:At.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return At.credentialFromTaggedObject(e)}static credentialFromError(e){return At.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return At.credential(n,i)}catch{return null}}}At.GOOGLE_SIGN_IN_METHOD="google.com";At.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn extends Wi{constructor(){super("github.com")}static credential(e){return Vn._fromParams({providerId:nn.PROVIDER_ID,signInMethod:nn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nn.credentialFromTaggedObject(e)}static credentialFromError(e){return nn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nn.credential(e.oauthAccessToken)}catch{return null}}}nn.GITHUB_SIGN_IN_METHOD="github.com";nn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn extends Wi{constructor(){super("twitter.com")}static credential(e,n){return Vn._fromParams({providerId:rn.PROVIDER_ID,signInMethod:rn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return rn.credentialFromTaggedObject(e)}static credentialFromError(e){return rn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return rn.credential(n,i)}catch{return null}}}rn.TWITTER_SIGN_IN_METHOD="twitter.com";rn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F_(t,e){return zi(t,"POST","/v1/accounts:signUp",kn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,h=!1){const m=await Rt._fromIdTokenResponse(e,i,h),_=ih(i);return new Xn({user:m,providerId:_,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const h=ih(i);return new Xn({user:e,providerId:h,_tokenResponse:i,operationType:n})}}function ih(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs extends bn{constructor(e,n,i,h){var m;super(n.code,n.message),this.operationType=i,this.user=h,Object.setPrototypeOf(this,Zs.prototype),this.customData={appName:e.name,tenantId:(m=e.tenantId)!==null&&m!==void 0?m:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,h){return new Zs(e,n,i,h)}}function yp(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(m=>{throw m.code==="auth/multi-factor-auth-required"?Zs._fromErrorAndOperation(t,m,e,i):m})}async function B_(t,e,n=!1){const i=await ki(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Xn._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U_(t,e,n=!1){const{auth:i}=t;if(vt(i.app))return Promise.reject(Ft(i));const h="reauthenticate";try{const m=await ki(t,yp(i,h,e,t),n);ce(m.idToken,i,"internal-error");const _=fc(m.idToken);ce(_,i,"internal-error");const{sub:f}=_;return ce(t.uid===f,i,"user-mismatch"),Xn._forOperation(t,h,m)}catch(m){throw(m==null?void 0:m.code)==="auth/user-not-found"&&ft(i,"user-mismatch"),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _p(t,e,n=!1){if(vt(t.app))return Promise.reject(Ft(t));const i="signIn",h=await yp(t,i,e),m=await Xn._fromIdTokenResponse(t,i,h);return n||await t._updateCurrentUser(m.user),m}async function z_(t,e){return _p(On(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xp(t){const e=On(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function W_(t,e,n){if(vt(t.app))return Promise.reject(Ft(t));const i=On(t),_=await al(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",F_).catch(r=>{throw r.code==="auth/password-does-not-meet-requirements"&&xp(t),r}),f=await Xn._fromIdTokenResponse(i,"signIn",_);return await i._updateCurrentUser(f.user),f}function H_(t,e,n){return vt(t.app)?Promise.reject(Ft(t)):z_(Yt(t),Dr.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&xp(t),i})}function V_(t,e,n,i){return Yt(t).onIdTokenChanged(e,n,i)}function X_(t,e,n){return Yt(t).beforeAuthStateChanged(e,n)}function Y_(t,e,n,i){return Yt(t).onAuthStateChanged(e,n,i)}function G_(t){return Yt(t).signOut()}const eo="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(eo,"1"),this.storage.removeItem(eo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_=1e3,K_=10;class Cp extends wp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pp(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),h=this.localCache[n];i!==h&&e(n,h,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((_,f,r)=>{this.notifyListeners(_,r)});return}const i=e.key;n?this.detachListener():this.stopPolling();const h=()=>{const _=this.storage.getItem(i);!n&&this.localCache[i]===_||this.notifyListeners(i,_)},m=this.storage.getItem(i);d_()&&m!==e.newValue&&e.newValue!==e.oldValue?setTimeout(h,K_):h()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const h of Array.from(i))h(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},$_)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Cp.type="LOCAL";const q_=Cp;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp extends wp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Sp.type="SESSION";const Tp=Sp;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(h=>h.isListeningto(e));if(n)return n;const i=new wo(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:h,data:m}=n.data,_=this.handlersMap[h];if(!(_!=null&&_.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:h});const f=Array.from(_).map(async u=>u(n.origin,m)),r=await Q_(f);n.ports[0].postMessage({status:"done",eventId:i,eventType:h,response:r})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wo.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vc(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const h=typeof MessageChannel<"u"?new MessageChannel:null;if(!h)throw new Error("connection_unavailable");let m,_;return new Promise((f,r)=>{const u=vc("",20);h.port1.start();const d=setTimeout(()=>{r(new Error("unsupported_event"))},i);_={messageChannel:h,onMessage(s){const a=s;if(a.data.eventId===u)switch(a.data.status){case"ack":clearTimeout(d),m=setTimeout(()=>{r(new Error("timeout"))},3e3);break;case"done":clearTimeout(m),f(a.data.response);break;default:clearTimeout(d),clearTimeout(m),r(new Error("invalid_response"));break}}},this.handlers.add(_),h.port1.addEventListener("message",_.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[h.port2])}).finally(()=>{_&&this.removeMessageHandler(_)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(){return window}function Z_(t){Ot().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(){return typeof Ot().WorkerGlobalScope<"u"&&typeof Ot().importScripts=="function"}async function ex(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function tx(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function nx(){return bp()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp="firebaseLocalStorageDb",rx=1,to="firebaseLocalStorage",Ep="fbase_key";class Hi{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Co(t,e){return t.transaction([to],e?"readwrite":"readonly").objectStore(to)}function ix(){const t=indexedDB.deleteDatabase(kp);return new Hi(t).toPromise()}function ll(){const t=indexedDB.open(kp,rx);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(to,{keyPath:Ep})}catch(h){n(h)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(to)?e(i):(i.close(),await ix(),e(await ll()))})})}async function sh(t,e,n){const i=Co(t,!0).put({[Ep]:e,value:n});return new Hi(i).toPromise()}async function sx(t,e){const n=Co(t,!1).get(e),i=await new Hi(n).toPromise();return i===void 0?null:i.value}function oh(t,e){const n=Co(t,!0).delete(e);return new Hi(n).toPromise()}const ox=800,ax=3;class Op{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ll(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>ax)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bp()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wo._getInstance(nx()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await ex(),!this.activeServiceWorker)return;this.sender=new J_(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||tx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ll();return await sh(e,eo,"1"),await oh(e,eo),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>sh(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>sx(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>oh(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(h=>{const m=Co(h,!1).getAll();return new Hi(m).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:h,value:m}of e)i.add(h),JSON.stringify(this.localCache[h])!==JSON.stringify(m)&&(this.notifyListeners(h,m),n.push(h));for(const h of Object.keys(this.localCache))this.localCache[h]&&!i.has(h)&&(this.notifyListeners(h,null),n.push(h));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const h of Array.from(i))h(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ox)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Op.type="LOCAL";const lx=Op;new Ui(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(t,e){return e?Nt(e):(ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc extends pc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return yr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return yr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function cx(t){return _p(t.auth,new yc(t),t.bypassAuthState)}function ux(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),U_(n,new yc(t),t.bypassAuthState)}async function hx(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),B_(n,new yc(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,n,i,h,m=!1){this.auth=e,this.resolver=i,this.user=h,this.bypassAuthState=m,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:h,tenantId:m,error:_,type:f}=e;if(_){this.reject(_);return}const r={auth:this.auth,requestUri:n,sessionId:i,tenantId:m||void 0,postBody:h||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(r))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cx;case"linkViaPopup":case"linkViaRedirect":return hx;case"reauthViaPopup":case"reauthViaRedirect":return ux;default:ft(this.auth,"internal-error")}}resolve(e){Vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx=new Ui(2e3,1e4);async function dx(t,e,n){if(vt(t.app))return Promise.reject(xt(t,"operation-not-supported-in-this-environment"));const i=On(t);$0(t,e,mc);const h=Pp(i,n);return new Nn(i,"signInViaPopup",e,h).executeNotNull()}class Nn extends Ip{constructor(e,n,i,h,m){super(e,n,h,m),this.provider=i,this.authWindow=null,this.pollId=null,Nn.currentPopupAction&&Nn.currentPopupAction.cancel(),Nn.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ce(e,this.auth,"internal-error"),e}async onExecution(){Vt(this.filter.length===1,"Popup operations only handle one event");const e=vc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(xt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(xt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Nn.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,fx.get())};e()}}Nn.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px="pendingRedirect",Cs=new Map;class gx extends Ip{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Cs.get(this.auth._key());if(!e){try{const i=await mx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Cs.set(this.auth._key(),e)}return this.bypassAuthState||Cs.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mx(t,e){const n=_x(e),i=yx(t);if(!await i._isAvailable())return!1;const h=await i._get(n)==="true";return await i._remove(n),h}function vx(t,e){Cs.set(t._key(),e)}function yx(t){return Nt(t._redirectPersistence)}function _x(t){return ws(px,t.config.apiKey,t.name)}async function xx(t,e,n=!1){if(vt(t.app))return Promise.reject(Ft(t));const i=On(t),h=Pp(i,e),_=await new gx(i,h,n).execute();return _&&!n&&(delete _.user._redirectEventId,await i._persistUserIfCurrent(_.user),await i._setRedirectUser(null,e)),_}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx=10*60*1e3;class Cx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Sx(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!Ap(e)){const h=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(xt(this.auth,h))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wx&&this.cachedEventUids.clear(),this.cachedEventUids.has(ah(e))}saveEventToCache(e){this.cachedEventUids.add(ah(e)),this.lastProcessedEventTime=Date.now()}}function ah(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Ap({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Sx(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ap(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tx(t,e={}){return En(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kx=/^https?/;async function Ex(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Tx(t);for(const n of e)try{if(Ox(n))return}catch{}ft(t,"unauthorized-domain")}function Ox(t){const e=sl(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const _=new URL(t);return _.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&_.hostname===i}if(!kx.test(n))return!1;if(bx.test(t))return i===t;const h=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+h+"|"+h+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=new Ui(3e4,6e4);function lh(){const t=Ot().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Ix(t){return new Promise((e,n)=>{var i,h,m;function _(){lh(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{lh(),n(xt(t,"network-request-failed"))},timeout:Px.get()})}if(!((h=(i=Ot().gapi)===null||i===void 0?void 0:i.iframes)===null||h===void 0)&&h.Iframe)e(gapi.iframes.getContext());else if(!((m=Ot().gapi)===null||m===void 0)&&m.load)_();else{const f=C_("iframefcb");return Ot()[f]=()=>{gapi.load?_():n(xt(t,"network-request-failed"))},mp(`${w_()}?onload=${f}`).catch(r=>n(r))}}).catch(e=>{throw Ss=null,e})}let Ss=null;function Ax(t){return Ss=Ss||Ix(t),Ss}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx=new Ui(5e3,15e3),Mx="__/auth/iframe",jx="emulator/auth/iframe",Rx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Nx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Lx(t){const e=t.config;ce(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?hc(e,jx):`https://${t.config.authDomain}/${Mx}`,i={apiKey:e.apiKey,appName:t.name,v:Bi},h=Nx.get(t.config.apiHost);h&&(i.eid=h);const m=t._getFrameworks();return m.length&&(i.fw=m.join(",")),`${n}?${Fi(i).slice(1)}`}async function Fx(t){const e=await Ax(t),n=Ot().gapi;return ce(n,t,"internal-error"),e.open({where:document.body,url:Lx(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Rx,dontclear:!0},i=>new Promise(async(h,m)=>{await i.restyle({setHideOnLeave:!1});const _=xt(t,"network-request-failed"),f=Ot().setTimeout(()=>{m(_)},Dx.get());function r(){Ot().clearTimeout(f),h(i)}i.ping(r).then(r,()=>{m(_)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ux=500,zx=600,Wx="_blank",Hx="http://localhost";class ch{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Vx(t,e,n,i=Ux,h=zx){const m=Math.max((window.screen.availHeight-h)/2,0).toString(),_=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const r=Object.assign(Object.assign({},Bx),{width:i.toString(),height:h.toString(),top:m,left:_}),u=Ye().toLowerCase();n&&(f=cp(u)?Wx:n),ap(u)&&(e=e||Hx,r.scrollbars="yes");const d=Object.entries(r).reduce((a,[o,c])=>`${a}${o}=${c},`,"");if(f_(u)&&f!=="_self")return Xx(e||"",f),new ch(null);const s=window.open(e||"",f,d);ce(s,t,"popup-blocked");try{s.focus()}catch{}return new ch(s)}function Xx(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="__/auth/handler",Gx="emulator/auth/handler",$x=encodeURIComponent("fac");async function uh(t,e,n,i,h,m){ce(t.config.authDomain,t,"auth-domain-config-required"),ce(t.config.apiKey,t,"invalid-api-key");const _={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Bi,eventId:h};if(e instanceof mc){e.setDefaultLanguage(t.languageCode),_.providerId=e.providerId||"",jy(e.getCustomParameters())||(_.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,s]of Object.entries({}))_[d]=s}if(e instanceof Wi){const d=e.getScopes().filter(s=>s!=="");d.length>0&&(_.scopes=d.join(","))}t.tenantId&&(_.tid=t.tenantId);const f=_;for(const d of Object.keys(f))f[d]===void 0&&delete f[d];const r=await t._getAppCheckToken(),u=r?`#${$x}=${encodeURIComponent(r)}`:"";return`${Kx(t)}?${Fi(f).slice(1)}${u}`}function Kx({config:t}){return t.emulator?hc(t,Gx):`https://${t.authDomain}/${Yx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="webStorageSupport";class qx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Tp,this._completeRedirectFn=xx,this._overrideRedirectResult=vx}async _openPopup(e,n,i,h){var m;Vt((m=this.eventManagers[e._key()])===null||m===void 0?void 0:m.manager,"_initialize() not called before _openPopup()");const _=await uh(e,n,i,sl(),h);return Vx(e,_,vc())}async _openRedirect(e,n,i,h){await this._originValidation(e);const m=await uh(e,n,i,sl(),h);return Z_(m),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:h,promise:m}=this.eventManagers[n];return h?Promise.resolve(h):(Vt(m,"If manager is not set, promise should be"),m)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await Fx(e),i=new Cx(e);return n.register("authEvent",h=>(ce(h==null?void 0:h.authEvent,e,"invalid-auth-event"),{status:i.onEvent(h.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(na,{type:na},h=>{var m;const _=(m=h==null?void 0:h[0])===null||m===void 0?void 0:m[na];_!==void 0&&n(!!_),ft(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Ex(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return pp()||lp()||dc()}}const Qx=qx;var hh="@firebase/auth",fh="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ew(t){Ti(new kr("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),h=e.getProvider("heartbeat"),m=e.getProvider("app-check-internal"),{apiKey:_,authDomain:f}=i.options;ce(_&&!_.includes(":"),"invalid-api-key",{appName:i.name});const r={apiKey:_,authDomain:f,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gp(t)},u=new y_(i,h,m,r);return E_(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Ti(new kr("auth-internal",e=>{const n=On(e.getProvider("auth").getImmediate());return(i=>new Jx(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),gr(hh,fh,Zx(t)),gr(hh,fh,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw=5*60,nw=Xd("authIdTokenMaxAge")||tw;let dh=null;const rw=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>nw)return;const h=n==null?void 0:n.token;dh!==h&&(dh=h,await fetch(t,{method:h?"POST":"DELETE",headers:h?{Authorization:`Bearer ${h}`}:{}}))};function iw(t=N0()){const e=Kd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=k_(t,{popupRedirectResolver:Qx,persistence:[lx,q_,Tp]}),i=Xd("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const m=new URL(i,location.origin);if(location.origin===m.origin){const _=rw(m.toString());X_(n,_,()=>_(n.currentUser)),V_(n,f=>_(f))}}const h=Cy("auth");return h&&O_(n,`http://${h}`),n}function sw(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}__({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=h=>{const m=xt("internal-error");m.customData=h,n(m)},i.type="text/javascript",i.charset="UTF-8",sw().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ew("Browser");var ow="firebase",aw="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gr(ow,aw,"app");const lw={apiKey:"AIzaSyDdHMBpX5z9NLDXHxhb5A1eE3XVHbxnegE",authDomain:"meesho-design-studio-mvp.firebaseapp.com",projectId:"meesho-design-studio-mvp",storageBucket:"meesho-design-studio-mvp.firebasestorage.app",messagingSenderId:"1075568988546",appId:"1:1075568988546:web:bee83bbab1ed439487bf9b"},cw=qd(lw),Wr=iw(cw),Dp=K.createContext(void 0);function _c(){const t=K.useContext(Dp);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function uw({children:t}){const[e,n]=K.useState(null),[i,h]=K.useState(!0);function m(d,s){return W_(Wr,d,s)}function _(d,s){return H_(Wr,d,s)}function f(){return G_(Wr)}function r(){const d=new At;return dx(Wr,d)}K.useEffect(()=>Y_(Wr,s=>{n(s),h(!1)}),[]);const u={currentUser:e,login:_,signup:m,logout:f,signInWithGoogle:r,loading:i};return C.jsx(Dp.Provider,{value:u,children:!i&&t})}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),we=(t,e)=>{const n=K.forwardRef(({color:i="currentColor",size:h=24,strokeWidth:m=2,absoluteStrokeWidth:_,className:f="",children:r,...u},d)=>K.createElement("svg",{ref:d,...hw,width:h,height:h,stroke:i,strokeWidth:_?Number(m)*24/Number(h):m,className:["lucide",`lucide-${fw(t)}`,f].join(" "),...u},[...e.map(([s,a])=>K.createElement(s,a)),...Array.isArray(r)?r:[r]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dw=we("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=we("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gw=we("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=we("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vw=we("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mp=we("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=we("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=we("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=we("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=we("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cw=we("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jp=we("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=we("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=we("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tw=we("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=we("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kw=we("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=we("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ew=we("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ow=we("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pw=we("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iw=we("Triangle",[["path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"14u9p9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=we("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aw=we("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dw=we("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);function Mw(){return C.jsxs("div",{className:"text-center",children:[C.jsxs("div",{className:"max-w-4xl mx-auto",children:[C.jsxs("div",{className:"mb-8",children:[C.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-meesho-primary to-meesho-secondary rounded-full mb-6",children:C.jsx(Er,{className:"w-10 h-10 text-white"})}),C.jsxs("h1",{className:"text-5xl font-bold text-meesho-dark mb-4",children:["Welcome to"," ",C.jsx("span",{className:"bg-gradient-to-r from-meesho-primary to-meesho-secondary bg-clip-text text-transparent",children:"Meesho Design Studio"})]}),C.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-2xl mx-auto",children:"Unleash your creativity and design stunning outfits! Sketch your ideas, generate AI-powered designs, and share them with the community."})]}),C.jsxs(pr,{to:"/sketch",className:"inline-flex items-center space-x-2 btn-primary text-lg px-8 py-4",children:[C.jsx(Oi,{className:"w-5 h-5"}),C.jsx("span",{children:"Start Designing"})]})]}),C.jsxs("div",{className:"mt-20 grid md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:[C.jsxs("div",{className:"card text-center",children:[C.jsx("div",{className:"w-12 h-12 bg-meesho-yellow rounded-lg flex items-center justify-center mx-auto mb-4",children:C.jsx(Er,{className:"w-6 h-6 text-meesho-dark"})}),C.jsx("h3",{className:"text-xl font-semibold text-meesho-dark mb-2",children:"Sketch & Design"}),C.jsx("p",{className:"text-gray-600",children:"Use our intuitive canvas to sketch your outfit ideas and bring them to life."})]}),C.jsxs("div",{className:"card text-center",children:[C.jsx("div",{className:"w-12 h-12 bg-meesho-purple rounded-lg flex items-center justify-center mx-auto mb-4",children:C.jsx(Oi,{className:"w-6 h-6 text-meesho-dark"})}),C.jsx("h3",{className:"text-xl font-semibold text-meesho-dark mb-2",children:"AI Generation"}),C.jsx("p",{className:"text-gray-600",children:"Transform your sketches into stunning AI-generated dress designs instantly."})]}),C.jsxs("div",{className:"card text-center",children:[C.jsx("div",{className:"w-12 h-12 bg-meesho-pink rounded-lg flex items-center justify-center mx-auto mb-4",children:C.jsx(Dw,{className:"w-6 h-6 text-meesho-dark"})}),C.jsx("h3",{className:"text-xl font-semibold text-meesho-dark mb-2",children:"Share & Connect"}),C.jsx("p",{className:"text-gray-600",children:"Share your designs with the community, get likes, comments, and earn rewards."})]})]}),C.jsxs("div",{className:"mt-16 bg-white rounded-2xl shadow-lg p-8 max-w-4xl mx-auto",children:[C.jsx("h2",{className:"text-2xl font-bold text-meesho-dark mb-6",children:"Community Stats"}),C.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[C.jsxs("div",{className:"text-center",children:[C.jsx("div",{className:"text-3xl font-bold text-meesho-primary",children:"1,234"}),C.jsx("div",{className:"text-gray-600",children:"Designs Created"})]}),C.jsxs("div",{className:"text-center",children:[C.jsx("div",{className:"text-3xl font-bold text-meesho-secondary",children:"567"}),C.jsx("div",{className:"text-gray-600",children:"Active Designers"})]}),C.jsxs("div",{className:"text-center",children:[C.jsx("div",{className:"text-3xl font-bold text-meesho-accent",children:"8,901"}),C.jsx("div",{className:"text-gray-600",children:"Total Likes"})]}),C.jsxs("div",{className:"text-center",children:[C.jsx("div",{className:"text-3xl font-bold text-meesho-yellow",children:"234"}),C.jsx("div",{className:"text-gray-600",children:"Comments"})]})]})]}),C.jsxs("div",{className:"mt-16",children:[C.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-6",children:[C.jsx(Pi,{className:"w-6 h-6 text-meesho-yellow"}),C.jsx("h2",{className:"text-2xl font-bold text-meesho-dark",children:"Top Designers"})]}),C.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 max-w-2xl mx-auto",children:[C.jsx("div",{className:"space-y-4",children:[{name:"Sarah Designer",points:1250,rank:1},{name:"Mike Creative",points:980,rank:2},{name:"Emma Style",points:756,rank:3}].map(t=>C.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[C.jsxs("div",{className:"flex items-center space-x-3",children:[C.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold ${t.rank===1?"bg-meesho-yellow":t.rank===2?"bg-gray-400":"bg-meesho-orange"}`,children:t.rank}),C.jsx("span",{className:"font-medium text-meesho-dark",children:t.name})]}),C.jsxs("div",{className:"text-meesho-primary font-semibold",children:[t.points," pts"]})]},t.rank))}),C.jsx(pr,{to:"/leaderboard",className:"block text-center mt-6 text-meesho-primary hover:text-meesho-primary/80 font-medium",children:"View Full Leaderboard →"})]})]})]})}var qt={};const jw={},Rw=Object.freeze(Object.defineProperty({__proto__:null,default:jw},Symbol.toStringTag,{value:"Module"})),ra=Up(Rw);(function(t){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var e=e||{version:"5.5.2"};if(t.fabric=e,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?e.document=document:e.document=document.implementation.createHTMLDocument(""),e.window=window;else{var n=ra,i=new n.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;e.document=i.document,e.jsdomImplForWrapper=ra.implForWrapper,e.nodeCanvas=ra.Canvas,e.window=i,DOMParser=e.window.DOMParser}e.isTouchSupported="ontouchstart"in e.window||"ontouchstart"in e.document||e.window&&e.window.navigator&&e.window.navigator.maxTouchPoints>0,e.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",e.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],e.DPI=96,e.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",e.commaWsp="(?:\\s+,?\\s*|,\\s*)",e.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,e.reNonWord=/[ \n\.,;!\?\-]/,e.fontPaths={},e.iMatrix=[1,0,0,1,0,0],e.svgNS="http://www.w3.org/2000/svg",e.perfLimitSizeTotal=2097152,e.maxCacheSideLimit=4096,e.minCacheSideLimit=256,e.charWidthsCache={},e.textureSize=2048,e.disableStyleCopyPaste=!1,e.enableGLFiltering=!0,e.devicePixelRatio=e.window.devicePixelRatio||e.window.webkitDevicePixelRatio||e.window.mozDevicePixelRatio||1,e.browserShadowBlurConstant=1,e.arcToSegmentsCache={},e.boundsOfCurveCache={},e.cachesBoundsOfCurve=!0,e.forceGLPutImageData=!1,e.initFilterBackend=function(){if(e.enableGLFiltering&&e.isWebglSupported&&e.isWebglSupported(e.textureSize))return console.log("max texture size: "+e.maxTextureSize),new e.WebglFilterBackend({tileSize:e.textureSize});if(e.Canvas2dFilterBackend)return new e.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=e),function(){function f(o,c){if(this.__eventListeners[o]){var g=this.__eventListeners[o];c?g[g.indexOf(c)]=!1:e.util.array.fill(g,!1)}}function r(o,c){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var g in o)this.on(g,o[g]);else this.__eventListeners[o]||(this.__eventListeners[o]=[]),this.__eventListeners[o].push(c);return this}function u(o,c){var g=(function(){c.apply(this,arguments),this.off(o,g)}).bind(this);this.on(o,g)}function d(o,c){if(arguments.length===1)for(var g in o)u.call(this,g,o[g]);else u.call(this,o,c);return this}function s(o,c){if(!this.__eventListeners)return this;if(arguments.length===0)for(o in this.__eventListeners)f.call(this,o);else if(arguments.length===1&&typeof arguments[0]=="object")for(var g in o)f.call(this,g,o[g]);else f.call(this,o,c);return this}function a(o,c){if(!this.__eventListeners)return this;var g=this.__eventListeners[o];if(!g)return this;for(var l=0,p=g.length;l<p;l++)g[l]&&g[l].call(this,c||{});return this.__eventListeners[o]=g.filter(function(v){return v!==!1}),this}e.Observable={fire:a,on:r,once:d,off:s}}(),e.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var f=0,r=arguments.length;f<r;f++)this._onObjectAdded(arguments[f]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(f,r,u){var d=this._objects;return u?d[r]=f:d.splice(r,0,f),this._onObjectAdded&&this._onObjectAdded(f),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var f=this._objects,r,u=!1,d=0,s=arguments.length;d<s;d++)r=f.indexOf(arguments[d]),r!==-1&&(u=!0,f.splice(r,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[d]));return this.renderOnAddRemove&&u&&this.requestRenderAll(),this},forEachObject:function(f,r){for(var u=this.getObjects(),d=0,s=u.length;d<s;d++)f.call(r,u[d],d,u);return this},getObjects:function(f){return typeof f>"u"?this._objects.concat():this._objects.filter(function(r){return r.type===f})},item:function(f){return this._objects[f]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(f,r){return this._objects.indexOf(f)>-1?!0:r?this._objects.some(function(u){return typeof u.contains=="function"&&u.contains(f,!0)}):!1},complexity:function(){return this._objects.reduce(function(f,r){return f+=r.complexity?r.complexity():0,f},0)}},e.CommonMethods={_setOptions:function(f){for(var r in f)this.set(r,f[r])},_initGradient:function(f,r){f&&f.colorStops&&!(f instanceof e.Gradient)&&this.set(r,new e.Gradient(f))},_initPattern:function(f,r,u){f&&f.source&&!(f instanceof e.Pattern)?this.set(r,new e.Pattern(f,u)):u&&u()},_setObject:function(f){for(var r in f)this._set(r,f[r])},set:function(f,r){return typeof f=="object"?this._setObject(f):this._set(f,r),this},_set:function(f,r){this[f]=r},toggle:function(f){var r=this.get(f);return typeof r=="boolean"&&this.set(f,!r),this},get:function(f){return this[f]}},function(f){var r=Math.sqrt,u=Math.atan2,d=Math.pow,s=Math.PI/180,a=Math.PI/2;e.util={cos:function(o){if(o===0)return 1;o<0&&(o=-o);var c=o/a;switch(c){case 1:case 3:return 0;case 2:return-1}return Math.cos(o)},sin:function(o){if(o===0)return 0;var c=o/a,g=1;switch(o<0&&(g=-1),c){case 1:return g;case 2:return 0;case 3:return-g}return Math.sin(o)},removeFromArray:function(o,c){var g=o.indexOf(c);return g!==-1&&o.splice(g,1),o},getRandomInt:function(o,c){return Math.floor(Math.random()*(c-o+1))+o},degreesToRadians:function(o){return o*s},radiansToDegrees:function(o){return o/s},rotatePoint:function(o,c,g){var l=new e.Point(o.x-c.x,o.y-c.y),p=e.util.rotateVector(l,g);return new e.Point(p.x,p.y).addEquals(c)},rotateVector:function(o,c){var g=e.util.sin(c),l=e.util.cos(c),p=o.x*l-o.y*g,v=o.x*g+o.y*l;return{x:p,y:v}},createVector:function(o,c){return new e.Point(c.x-o.x,c.y-o.y)},calcAngleBetweenVectors:function(o,c){return Math.acos((o.x*c.x+o.y*c.y)/(Math.hypot(o.x,o.y)*Math.hypot(c.x,c.y)))},getHatVector:function(o){return new e.Point(o.x,o.y).multiply(1/Math.hypot(o.x,o.y))},getBisector:function(o,c,g){var l=e.util.createVector(o,c),p=e.util.createVector(o,g),v=e.util.calcAngleBetweenVectors(l,p),y=e.util.calcAngleBetweenVectors(e.util.rotateVector(l,v),p),x=v*(y===0?1:-1)/2;return{vector:e.util.getHatVector(e.util.rotateVector(l,x)),angle:v}},projectStrokeOnPoints:function(o,c,g){var l=[],p=c.strokeWidth/2,v=c.strokeUniform?new e.Point(1/c.scaleX,1/c.scaleY):new e.Point(1,1),y=function(x){var w=p/Math.hypot(x.x,x.y);return new e.Point(x.x*w*v.x,x.y*w*v.y)};return o.length<=1||o.forEach(function(x,w){var S=new e.Point(x.x,x.y),k,b;w===0?(b=o[w+1],k=g?y(e.util.createVector(b,S)).addEquals(S):o[o.length-1]):w===o.length-1?(k=o[w-1],b=g?y(e.util.createVector(k,S)).addEquals(S):o[0]):(k=o[w-1],b=o[w+1]);var j=e.util.getBisector(S,k,b),M=j.vector,W=j.angle,ee,te;if(c.strokeLineJoin==="miter"&&(ee=-p/Math.sin(W/2),te=new e.Point(M.x*ee*v.x,M.y*ee*v.y),Math.hypot(te.x,te.y)/p<=c.strokeMiterLimit)){l.push(S.add(te)),l.push(S.subtract(te));return}ee=-p*Math.SQRT2,te=new e.Point(M.x*ee*v.x,M.y*ee*v.y),l.push(S.add(te)),l.push(S.subtract(te))}),l},transformPoint:function(o,c,g){return g?new e.Point(c[0]*o.x+c[2]*o.y,c[1]*o.x+c[3]*o.y):new e.Point(c[0]*o.x+c[2]*o.y+c[4],c[1]*o.x+c[3]*o.y+c[5])},makeBoundingBoxFromPoints:function(o,c){if(c)for(var g=0;g<o.length;g++)o[g]=e.util.transformPoint(o[g],c);var l=[o[0].x,o[1].x,o[2].x,o[3].x],p=e.util.array.min(l),v=e.util.array.max(l),y=v-p,x=[o[0].y,o[1].y,o[2].y,o[3].y],w=e.util.array.min(x),S=e.util.array.max(x),k=S-w;return{left:p,top:w,width:y,height:k}},invertTransform:function(o){var c=1/(o[0]*o[3]-o[1]*o[2]),g=[c*o[3],-c*o[1],-c*o[2],c*o[0]],l=e.util.transformPoint({x:o[4],y:o[5]},g,!0);return g[4]=-l.x,g[5]=-l.y,g},toFixed:function(o,c){return parseFloat(Number(o).toFixed(c))},parseUnit:function(o,c){var g=/\D{0,2}$/.exec(o),l=parseFloat(o);switch(c||(c=e.Text.DEFAULT_SVG_FONT_SIZE),g[0]){case"mm":return l*e.DPI/25.4;case"cm":return l*e.DPI/2.54;case"in":return l*e.DPI;case"pt":return l*e.DPI/72;case"pc":return l*e.DPI/72*12;case"em":return l*c;default:return l}},falseFunction:function(){return!1},getKlass:function(o,c){return o=e.util.string.camelize(o.charAt(0).toUpperCase()+o.slice(1)),e.util.resolveNamespace(c)[o]},getSvgAttributes:function(o){var c=["instantiated_by_use","style","id","class"];switch(o){case"linearGradient":c=c.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":c=c.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":c=c.concat(["offset","stop-color","stop-opacity"]);break}return c},resolveNamespace:function(o){if(!o)return e;var c=o.split("."),g=c.length,l,p=f||e.window;for(l=0;l<g;++l)p=p[c[l]];return p},loadImage:function(o,c,g,l){if(!o){c&&c.call(g,o);return}var p=e.util.createImage(),v=function(){c&&c.call(g,p,!1),p=p.onload=p.onerror=null};p.onload=v,p.onerror=function(){e.log("Error loading "+p.src),c&&c.call(g,null,!0),p=p.onload=p.onerror=null},o.indexOf("data")!==0&&l!==void 0&&l!==null&&(p.crossOrigin=l),o.substring(0,14)==="data:image/svg"&&(p.onload=null,e.util.loadImageInDom(p,v)),p.src=o},loadImageInDom:function(o,c){var g=e.document.createElement("div");g.style.width=g.style.height="1px",g.style.left=g.style.top="-100%",g.style.position="absolute",g.appendChild(o),e.document.querySelector("body").appendChild(g),o.onload=function(){c(),g.parentNode.removeChild(g),g=null}},enlivenObjects:function(o,c,g,l){o=o||[];var p=[],v=0,y=o.length;function x(){++v===y&&c&&c(p.filter(function(w){return w}))}if(!y){c&&c(p);return}o.forEach(function(w,S){if(!w||!w.type){x();return}var k=e.util.getKlass(w.type,g);k.fromObject(w,function(b,j){j||(p[S]=b),l&&l(w,b,j),x()})})},enlivenObjectEnlivables:function(o,c,g){var l=e.Object.ENLIVEN_PROPS.filter(function(p){return!!o[p]});e.util.enlivenObjects(l.map(function(p){return o[p]}),function(p){var v={};l.forEach(function(y,x){v[y]=p[x],c&&(c[y]=p[x])}),g&&g(v)})},enlivenPatterns:function(o,c){o=o||[];function g(){++p===v&&c&&c(l)}var l=[],p=0,v=o.length;if(!v){c&&c(l);return}o.forEach(function(y,x){y&&y.source?new e.Pattern(y,function(w){l[x]=w,g()}):(l[x]=y,g())})},groupSVGElements:function(o,c,g){var l;return o&&o.length===1?(typeof g<"u"&&(o[0].sourcePath=g),o[0]):(c&&(c.width&&c.height?c.centerPoint={x:c.width/2,y:c.height/2}:(delete c.width,delete c.height)),l=new e.Group(o,c),typeof g<"u"&&(l.sourcePath=g),l)},populateWithProperties:function(o,c,g){if(g&&Array.isArray(g))for(var l=0,p=g.length;l<p;l++)g[l]in o&&(c[g[l]]=o[g[l]])},createCanvasElement:function(){return e.document.createElement("canvas")},copyCanvasElement:function(o){var c=e.util.createCanvasElement();return c.width=o.width,c.height=o.height,c.getContext("2d").drawImage(o,0,0),c},toDataURL:function(o,c,g){return o.toDataURL("image/"+c,g)},createImage:function(){return e.document.createElement("img")},multiplyTransformMatrices:function(o,c,g){return[o[0]*c[0]+o[2]*c[1],o[1]*c[0]+o[3]*c[1],o[0]*c[2]+o[2]*c[3],o[1]*c[2]+o[3]*c[3],g?0:o[0]*c[4]+o[2]*c[5]+o[4],g?0:o[1]*c[4]+o[3]*c[5]+o[5]]},qrDecompose:function(o){var c=u(o[1],o[0]),g=d(o[0],2)+d(o[1],2),l=r(g),p=(o[0]*o[3]-o[2]*o[1])/l,v=u(o[0]*o[2]+o[1]*o[3],g);return{angle:c/s,scaleX:l,scaleY:p,skewX:v/s,skewY:0,translateX:o[4],translateY:o[5]}},calcRotateMatrix:function(o){if(!o.angle)return e.iMatrix.concat();var c=e.util.degreesToRadians(o.angle),g=e.util.cos(c),l=e.util.sin(c);return[g,l,-l,g,0,0]},calcDimensionsMatrix:function(o){var c=typeof o.scaleX>"u"?1:o.scaleX,g=typeof o.scaleY>"u"?1:o.scaleY,l=[o.flipX?-c:c,0,0,o.flipY?-g:g,0,0],p=e.util.multiplyTransformMatrices,v=e.util.degreesToRadians;return o.skewX&&(l=p(l,[1,0,Math.tan(v(o.skewX)),1],!0)),o.skewY&&(l=p(l,[1,Math.tan(v(o.skewY)),0,1],!0)),l},composeMatrix:function(o){var c=[1,0,0,1,o.translateX||0,o.translateY||0],g=e.util.multiplyTransformMatrices;return o.angle&&(c=g(c,e.util.calcRotateMatrix(o))),(o.scaleX!==1||o.scaleY!==1||o.skewX||o.skewY||o.flipX||o.flipY)&&(c=g(c,e.util.calcDimensionsMatrix(o))),c},resetObjectTransform:function(o){o.scaleX=1,o.scaleY=1,o.skewX=0,o.skewY=0,o.flipX=!1,o.flipY=!1,o.rotate(0)},saveObjectTransform:function(o){return{scaleX:o.scaleX,scaleY:o.scaleY,skewX:o.skewX,skewY:o.skewY,angle:o.angle,left:o.left,flipX:o.flipX,flipY:o.flipY,top:o.top}},isTransparent:function(o,c,g,l){l>0&&(c>l?c-=l:c=0,g>l?g-=l:g=0);var p=!0,v,y,x=o.getImageData(c,g,l*2||1,l*2||1),w=x.data.length;for(v=3;v<w&&(y=x.data[v],p=y<=0,p!==!1);v+=4);return x=null,p},parsePreserveAspectRatioAttribute:function(o){var c="meet",g="Mid",l="Mid",p=o.split(" "),v;return p&&p.length&&(c=p.pop(),c!=="meet"&&c!=="slice"?(v=c,c="meet"):p.length&&(v=p.pop())),g=v!=="none"?v.slice(1,4):"none",l=v!=="none"?v.slice(5,8):"none",{meetOrSlice:c,alignX:g,alignY:l}},clearFabricFontCache:function(o){o=(o||"").toLowerCase(),o?e.charWidthsCache[o]&&delete e.charWidthsCache[o]:e.charWidthsCache={}},limitDimsByArea:function(o,c){var g=Math.sqrt(c*o),l=Math.floor(c/g);return{x:Math.floor(g),y:l}},capValue:function(o,c,g){return Math.max(o,Math.min(c,g))},findScaleToFit:function(o,c){return Math.min(c.width/o.width,c.height/o.height)},findScaleToCover:function(o,c){return Math.max(c.width/o.width,c.height/o.height)},matrixToSVG:function(o){return"matrix("+o.map(function(c){return e.util.toFixed(c,e.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(o,c){var g=e.util.invertTransform(c),l=e.util.multiplyTransformMatrices(g,o.calcOwnMatrix());e.util.applyTransformToObject(o,l)},addTransformToObject:function(o,c){e.util.applyTransformToObject(o,e.util.multiplyTransformMatrices(c,o.calcOwnMatrix()))},applyTransformToObject:function(o,c){var g=e.util.qrDecompose(c),l=new e.Point(g.translateX,g.translateY);o.flipX=!1,o.flipY=!1,o.set("scaleX",g.scaleX),o.set("scaleY",g.scaleY),o.skewX=g.skewX,o.skewY=g.skewY,o.angle=g.angle,o.setPositionByOrigin(l,"center","center")},sizeAfterTransform:function(o,c,g){var l=o/2,p=c/2,v=[{x:-l,y:-p},{x:l,y:-p},{x:-l,y:p},{x:l,y:p}],y=e.util.calcDimensionsMatrix(g),x=e.util.makeBoundingBoxFromPoints(v,y);return{x:x.width,y:x.height}},mergeClipPaths:function(o,c){var g=o,l=c;g.inverted&&!l.inverted&&(g=c,l=o),e.util.applyTransformToObject(l,e.util.multiplyTransformMatrices(e.util.invertTransform(g.calcTransformMatrix()),l.calcTransformMatrix()));var p=g.inverted&&l.inverted;return p&&(g.inverted=l.inverted=!1),new e.Group([g],{clipPath:l,inverted:p})},hasStyleChanged:function(o,c,g){return g=g||!1,o.fill!==c.fill||o.stroke!==c.stroke||o.strokeWidth!==c.strokeWidth||o.fontSize!==c.fontSize||o.fontFamily!==c.fontFamily||o.fontWeight!==c.fontWeight||o.fontStyle!==c.fontStyle||o.textBackgroundColor!==c.textBackgroundColor||o.deltaY!==c.deltaY||g&&(o.overline!==c.overline||o.underline!==c.underline||o.linethrough!==c.linethrough)},stylesToArray:function(g,c){for(var g=e.util.object.clone(g,!0),l=c.split(`
`),p=-1,v={},y=[],x=0;x<l.length;x++){if(!g[x]){p+=l[x].length;continue}for(var w=0;w<l[x].length;w++){p++;var S=g[x][w];if(S&&Object.keys(S).length>0){var k=e.util.hasStyleChanged(v,S,!0);k?y.push({start:p,end:p+1,style:S}):y[y.length-1].end++}v=S||{}}}return y},stylesFromArray:function(o,c){if(!Array.isArray(o))return o;for(var g=c.split(`
`),l=-1,p=0,v={},y=0;y<g.length;y++)for(var x=0;x<g[y].length;x++)l++,o[p]&&o[p].start<=l&&l<o[p].end&&(v[y]=v[y]||{},v[y][x]=Object.assign({},o[p].style),l===o[p].end-1&&p++);return v}}}(t),function(){var f=Array.prototype.join,r={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},u={m:"l",M:"L"};function d(T,O,I,A,L,P,E,D,R,H,F){var G=e.util.cos(T),q=e.util.sin(T),ne=e.util.cos(O),U=e.util.sin(O),N=I*L*ne-A*P*U+E,X=A*L*ne+I*P*U+D,Y=H+R*(-I*L*q-A*P*G),z=F+R*(-A*L*q+I*P*G),$=N+R*(I*L*U+A*P*ne),re=X+R*(A*L*U-I*P*ne);return["C",Y,z,$,re,N,X]}function s(T,O,I,A,L,P,E){var D=Math.PI,R=E*D/180,H=e.util.sin(R),F=e.util.cos(R),G=0,q=0;I=Math.abs(I),A=Math.abs(A);var ne=-F*T*.5-H*O*.5,U=-F*O*.5+H*T*.5,N=I*I,X=A*A,Y=U*U,z=ne*ne,$=N*X-N*Y-X*z,re=0;if($<0){var ue=Math.sqrt(1-$/(N*X));I*=ue,A*=ue}else re=(L===P?-1:1)*Math.sqrt($/(N*Y+X*z));var ae=re*I*U/A,V=-re*A*ne/I,le=F*ae-H*V+T*.5,he=H*ae+F*V+O*.5,de=a(1,0,(ne-ae)/I,(U-V)/A),Ce=a((ne-ae)/I,(U-V)/A,(-ne-ae)/I,(-U-V)/A);P===0&&Ce>0?Ce-=2*D:P===1&&Ce<0&&(Ce+=2*D);for(var ge=Math.ceil(Math.abs(Ce/D*2)),He=[],Pe=Ce/ge,Pn=8/3*Math.sin(Pe/4)*Math.sin(Pe/4)/Math.sin(Pe/2),Mr=de+Pe,Ct=0;Ct<ge;Ct++)He[Ct]=d(de,Mr,F,H,I,A,le,he,Pn,G,q),G=He[Ct][5],q=He[Ct][6],de=Mr,Mr+=Pe;return He}function a(T,O,I,A){var L=Math.atan2(O,T),P=Math.atan2(A,I);return P>=L?P-L:2*Math.PI-(L-P)}function o(T,O,I,A,L,P,E,D){var R;if(e.cachesBoundsOfCurve&&(R=f.call(arguments),e.boundsOfCurveCache[R]))return e.boundsOfCurveCache[R];var H=Math.sqrt,F=Math.min,G=Math.max,q=Math.abs,ne=[],U=[[],[]],N,X,Y,z,$,re,ue,ae;X=6*T-12*I+6*L,N=-3*T+9*I-9*L+3*E,Y=3*I-3*T;for(var V=0;V<2;++V){if(V>0&&(X=6*O-12*A+6*P,N=-3*O+9*A-9*P+3*D,Y=3*A-3*O),q(N)<1e-12){if(q(X)<1e-12)continue;z=-Y/X,0<z&&z<1&&ne.push(z);continue}ue=X*X-4*Y*N,!(ue<0)&&(ae=H(ue),$=(-X+ae)/(2*N),0<$&&$<1&&ne.push($),re=(-X-ae)/(2*N),0<re&&re<1&&ne.push(re))}for(var le,he,de=ne.length,Ce=de,ge;de--;)z=ne[de],ge=1-z,le=ge*ge*ge*T+3*ge*ge*z*I+3*ge*z*z*L+z*z*z*E,U[0][de]=le,he=ge*ge*ge*O+3*ge*ge*z*A+3*ge*z*z*P+z*z*z*D,U[1][de]=he;U[0][Ce]=T,U[1][Ce]=O,U[0][Ce+1]=E,U[1][Ce+1]=D;var He=[{x:F.apply(null,U[0]),y:F.apply(null,U[1])},{x:G.apply(null,U[0]),y:G.apply(null,U[1])}];return e.cachesBoundsOfCurve&&(e.boundsOfCurveCache[R]=He),He}function c(T,O,I){for(var A=I[1],L=I[2],P=I[3],E=I[4],D=I[5],R=I[6],H=I[7],F=s(R-T,H-O,A,L,E,D,P),G=0,q=F.length;G<q;G++)F[G][1]+=T,F[G][2]+=O,F[G][3]+=T,F[G][4]+=O,F[G][5]+=T,F[G][6]+=O;return F}function g(T){var O=0,I=0,A=T.length,L=0,P=0,E,D,R,H=[],F,G,q;for(D=0;D<A;++D){switch(R=!1,E=T[D].slice(0),E[0]){case"l":E[0]="L",E[1]+=O,E[2]+=I;case"L":O=E[1],I=E[2];break;case"h":E[1]+=O;case"H":E[0]="L",E[2]=I,O=E[1];break;case"v":E[1]+=I;case"V":E[0]="L",I=E[1],E[1]=O,E[2]=I;break;case"m":E[0]="M",E[1]+=O,E[2]+=I;case"M":O=E[1],I=E[2],L=E[1],P=E[2];break;case"c":E[0]="C",E[1]+=O,E[2]+=I,E[3]+=O,E[4]+=I,E[5]+=O,E[6]+=I;case"C":G=E[3],q=E[4],O=E[5],I=E[6];break;case"s":E[0]="S",E[1]+=O,E[2]+=I,E[3]+=O,E[4]+=I;case"S":F==="C"?(G=2*O-G,q=2*I-q):(G=O,q=I),O=E[3],I=E[4],E[0]="C",E[5]=E[3],E[6]=E[4],E[3]=E[1],E[4]=E[2],E[1]=G,E[2]=q,G=E[3],q=E[4];break;case"q":E[0]="Q",E[1]+=O,E[2]+=I,E[3]+=O,E[4]+=I;case"Q":G=E[1],q=E[2],O=E[3],I=E[4];break;case"t":E[0]="T",E[1]+=O,E[2]+=I;case"T":F==="Q"?(G=2*O-G,q=2*I-q):(G=O,q=I),E[0]="Q",O=E[1],I=E[2],E[1]=G,E[2]=q,E[3]=O,E[4]=I;break;case"a":E[0]="A",E[6]+=O,E[7]+=I;case"A":R=!0,H=H.concat(c(O,I,E)),O=E[6],I=E[7];break;case"z":case"Z":O=L,I=P;break}R||H.push(E),F=E[0]}return H}function l(T,O,I,A){return Math.sqrt((I-T)*(I-T)+(A-O)*(A-O))}function p(T){return T*T*T}function v(T){return 3*T*T*(1-T)}function y(T){return 3*T*(1-T)*(1-T)}function x(T){return(1-T)*(1-T)*(1-T)}function w(T,O,I,A,L,P,E,D){return function(R){var H=p(R),F=v(R),G=y(R),q=x(R);return{x:E*H+L*F+I*G+T*q,y:D*H+P*F+A*G+O*q}}}function S(T,O,I,A,L,P,E,D){return function(R){var H=1-R,F=3*H*H*(I-T)+6*H*R*(L-I)+3*R*R*(E-L),G=3*H*H*(A-O)+6*H*R*(P-A)+3*R*R*(D-P);return Math.atan2(G,F)}}function k(T){return T*T}function b(T){return 2*T*(1-T)}function j(T){return(1-T)*(1-T)}function M(T,O,I,A,L,P){return function(E){var D=k(E),R=b(E),H=j(E);return{x:L*D+I*R+T*H,y:P*D+A*R+O*H}}}function W(T,O,I,A,L,P){return function(E){var D=1-E,R=2*D*(I-T)+2*E*(L-I),H=2*D*(A-O)+2*E*(P-A);return Math.atan2(H,R)}}function ee(T,O,I){var A={x:O,y:I},L,P=0,E;for(E=1;E<=100;E+=1)L=T(E/100),P+=l(A.x,A.y,L.x,L.y),A=L;return P}function te(T,O){for(var I=0,A=0,L=T.iterator,P={x:T.x,y:T.y},E,D,R=.01,H=T.angleFinder,F;A<O&&R>1e-4;)E=L(I),F=I,D=l(P.x,P.y,E.x,E.y),D+A>O?(I-=R,R/=2):(P=E,I+=R,A+=D);return E.angle=H(F),E}function J(T){for(var O=0,I=T.length,A,L=0,P=0,E=0,D=0,R=[],H,F,G,q=0;q<I;q++){switch(A=T[q],F={x:L,y:P,command:A[0]},A[0]){case"M":F.length=0,E=L=A[1],D=P=A[2];break;case"L":F.length=l(L,P,A[1],A[2]),L=A[1],P=A[2];break;case"C":H=w(L,P,A[1],A[2],A[3],A[4],A[5],A[6]),G=S(L,P,A[1],A[2],A[3],A[4],A[5],A[6]),F.iterator=H,F.angleFinder=G,F.length=ee(H,L,P),L=A[5],P=A[6];break;case"Q":H=M(L,P,A[1],A[2],A[3],A[4]),G=W(L,P,A[1],A[2],A[3],A[4]),F.iterator=H,F.angleFinder=G,F.length=ee(H,L,P),L=A[3],P=A[4];break;case"Z":case"z":F.destX=E,F.destY=D,F.length=l(L,P,E,D),L=E,P=D;break}O+=F.length,R.push(F)}return R.push({length:O,x:L,y:P}),R}function Q(T,O,I){I||(I=J(T));for(var A=0;O-I[A].length>0&&A<I.length-2;)O-=I[A].length,A++;var L=I[A],P=O/L.length,E=L.command,D=T[A],R;switch(E){case"M":return{x:L.x,y:L.y,angle:0};case"Z":case"z":return R=new e.Point(L.x,L.y).lerp(new e.Point(L.destX,L.destY),P),R.angle=Math.atan2(L.destY-L.y,L.destX-L.x),R;case"L":return R=new e.Point(L.x,L.y).lerp(new e.Point(D[1],D[2]),P),R.angle=Math.atan2(D[2]-L.y,D[1]-L.x),R;case"C":return te(L,O);case"Q":return te(L,O)}}function ie(T){var O=[],I=[],A,L,P=e.rePathCommand,E="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",D="("+E+")"+e.commaWsp,R="([01])"+e.commaWsp+"?",H=D+"?"+D+"?"+D+R+R+D+"?("+E+")",F=new RegExp(H,"g"),G,q,ne;if(!T||!T.match)return O;ne=T.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var U=0,N,X=ne.length;U<X;U++){A=ne[U],q=A.slice(1).trim(),I.length=0;var Y=A.charAt(0);if(N=[Y],Y.toLowerCase()==="a")for(var z;z=F.exec(q);)for(var $=1;$<z.length;$++)I.push(z[$]);else for(;G=P.exec(q);)I.push(G[0]);for(var $=0,re=I.length;$<re;$++)L=parseFloat(I[$]),isNaN(L)||N.push(L);var ue=r[Y.toLowerCase()],ae=u[Y]||Y;if(N.length-1>ue)for(var V=1,le=N.length;V<le;V+=ue)O.push([Y].concat(N.slice(V,V+ue))),Y=ae;else O.push(N)}return O}function oe(T,O){var I=[],A,L=new e.Point(T[0].x,T[0].y),P=new e.Point(T[1].x,T[1].y),E=T.length,D=1,R=0,H=E>2;for(O=O||0,H&&(D=T[2].x<P.x?-1:T[2].x===P.x?0:1,R=T[2].y<P.y?-1:T[2].y===P.y?0:1),I.push(["M",L.x-D*O,L.y-R*O]),A=1;A<E;A++){if(!L.eq(P)){var F=L.midPointFrom(P);I.push(["Q",L.x,L.y,F.x,F.y])}L=T[A],A+1<T.length&&(P=T[A+1])}return H&&(D=L.x>T[A-2].x?1:L.x===T[A-2].x?0:-1,R=L.y>T[A-2].y?1:L.y===T[A-2].y?0:-1),I.push(["L",L.x+D*O,L.y+R*O]),I}function B(T,O,I){return I&&(O=e.util.multiplyTransformMatrices(O,[1,0,0,1,-I.x,-I.y])),T.map(function(A){for(var L=A.slice(0),P={},E=1;E<A.length-1;E+=2)P.x=A[E],P.y=A[E+1],P=e.util.transformPoint(P,O),L[E]=P.x,L[E+1]=P.y;return L})}e.util.joinPath=function(T){return T.map(function(O){return O.join(" ")}).join(" ")},e.util.parsePath=ie,e.util.makePathSimpler=g,e.util.getSmoothPathFromPoints=oe,e.util.getPathSegmentsInfo=J,e.util.getBoundsOfCurve=o,e.util.getPointOnPath=Q,e.util.transformPath=B}(),function(){var f=Array.prototype.slice;function r(o,c){for(var g=f.call(arguments,2),l=[],p=0,v=o.length;p<v;p++)l[p]=g.length?o[p][c].apply(o[p],g):o[p][c].call(o[p]);return l}function u(o,c){return a(o,c,function(g,l){return g>=l})}function d(o,c){return a(o,c,function(g,l){return g<l})}function s(o,c){for(var g=o.length;g--;)o[g]=c;return o}function a(o,c,g){if(!(!o||o.length===0)){var l=o.length-1,p=c?o[l][c]:o[l];if(c)for(;l--;)g(o[l][c],p)&&(p=o[l][c]);else for(;l--;)g(o[l],p)&&(p=o[l]);return p}}e.util.array={fill:s,invoke:r,min:d,max:u}}(),function(){function f(u,d,s){if(s)if(!e.isLikelyNode&&d instanceof Element)u=d;else if(d instanceof Array){u=[];for(var a=0,o=d.length;a<o;a++)u[a]=f({},d[a],s)}else if(d&&typeof d=="object")for(var c in d)c==="canvas"||c==="group"?u[c]=null:d.hasOwnProperty(c)&&(u[c]=f({},d[c],s));else u=d;else for(var c in d)u[c]=d[c];return u}function r(u,d){return f({},u,d)}e.util.object={extend:f,clone:r},e.util.object.extend(e.util,e.Observable)}(),function(){function f(a){return a.replace(/-+(.)?/g,function(o,c){return c?c.toUpperCase():""})}function r(a,o){return a.charAt(0).toUpperCase()+(o?a.slice(1):a.slice(1).toLowerCase())}function u(a){return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function d(a){var o=0,c,g=[];for(o=0,c;o<a.length;o++)(c=s(a,o))!==!1&&g.push(c);return g}function s(a,o){var c=a.charCodeAt(o);if(isNaN(c))return"";if(c<55296||c>57343)return a.charAt(o);if(55296<=c&&c<=56319){if(a.length<=o+1)throw"High surrogate without following low surrogate";var g=a.charCodeAt(o+1);if(56320>g||g>57343)throw"High surrogate without following low surrogate";return a.charAt(o)+a.charAt(o+1)}if(o===0)throw"Low surrogate without preceding high surrogate";var l=a.charCodeAt(o-1);if(55296>l||l>56319)throw"Low surrogate without preceding high surrogate";return!1}e.util.string={camelize:f,capitalize:r,escapeXml:u,graphemeSplit:d}}(),function(){var f=Array.prototype.slice,r=function(){},u=function(){for(var c in{toString:1})if(c==="toString")return!1;return!0}(),d=function(c,g,l){for(var p in g)p in c.prototype&&typeof c.prototype[p]=="function"&&(g[p]+"").indexOf("callSuper")>-1?c.prototype[p]=function(v){return function(){var y=this.constructor.superclass;this.constructor.superclass=l;var x=g[v].apply(this,arguments);if(this.constructor.superclass=y,v!=="initialize")return x}}(p):c.prototype[p]=g[p],u&&(g.toString!==Object.prototype.toString&&(c.prototype.toString=g.toString),g.valueOf!==Object.prototype.valueOf&&(c.prototype.valueOf=g.valueOf))};function s(){}function a(c){for(var g=null,l=this;l.constructor.superclass;){var p=l.constructor.superclass.prototype[c];if(l[c]!==p){g=p;break}l=l.constructor.superclass.prototype}return g?arguments.length>1?g.apply(this,f.call(arguments,1)):g.call(this):console.log("tried to callSuper "+c+", method not found in prototype chain",this)}function o(){var c=null,g=f.call(arguments,0);typeof g[0]=="function"&&(c=g.shift());function l(){this.initialize.apply(this,arguments)}l.superclass=c,l.subclasses=[],c&&(s.prototype=c.prototype,l.prototype=new s,c.subclasses.push(l));for(var p=0,v=g.length;p<v;p++)d(l,g[p],c);return l.prototype.initialize||(l.prototype.initialize=r),l.prototype.constructor=l,l.prototype.callSuper=a,l}e.util.createClass=o}(),function(){var f=!!e.document.createElement("div").attachEvent,r=["touchstart","touchmove","touchend"];e.util.addListener=function(d,s,a,o){d&&d.addEventListener(s,a,f?!1:o)},e.util.removeListener=function(d,s,a,o){d&&d.removeEventListener(s,a,f?!1:o)};function u(d){var s=d.changedTouches;return s&&s[0]?s[0]:d}e.util.getPointer=function(d){var s=d.target,a=e.util.getScrollLeftTop(s),o=u(d);return{x:o.clientX+a.left,y:o.clientY+a.top}},e.util.isTouchEvent=function(d){return r.indexOf(d.type)>-1||d.pointerType==="touch"}}(),function(){function f(o,c){var g=o.style;if(!g)return o;if(typeof c=="string")return o.style.cssText+=";"+c,c.indexOf("opacity")>-1?a(o,c.match(/opacity:\s*(\d?\.?\d*)/)[1]):o;for(var l in c)if(l==="opacity")a(o,c[l]);else{var p=l==="float"||l==="cssFloat"?typeof g.styleFloat>"u"?"cssFloat":"styleFloat":l;g.setProperty(p,c[l])}return o}var r=e.document.createElement("div"),u=typeof r.style.opacity=="string",d=typeof r.style.filter=="string",s=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,a=function(o){return o};u?a=function(o,c){return o.style.opacity=c,o}:d&&(a=function(o,c){var g=o.style;return o.currentStyle&&!o.currentStyle.hasLayout&&(g.zoom=1),s.test(g.filter)?(c=c>=.9999?"":"alpha(opacity="+c*100+")",g.filter=g.filter.replace(s,c)):g.filter+=" alpha(opacity="+c*100+")",o}),e.util.setStyle=f}(),function(){var f=Array.prototype.slice;function r(x){return typeof x=="string"?e.document.getElementById(x):x}var u,d=function(x){return f.call(x,0)};try{u=d(e.document.childNodes)instanceof Array}catch{}u||(d=function(x){for(var w=new Array(x.length),S=x.length;S--;)w[S]=x[S];return w});function s(x,w){var S=e.document.createElement(x);for(var k in w)k==="class"?S.className=w[k]:k==="for"?S.htmlFor=w[k]:S.setAttribute(k,w[k]);return S}function a(x,w){x&&(" "+x.className+" ").indexOf(" "+w+" ")===-1&&(x.className+=(x.className?" ":"")+w)}function o(x,w,S){return typeof w=="string"&&(w=s(w,S)),x.parentNode&&x.parentNode.replaceChild(w,x),w.appendChild(x),w}function c(x){for(var w=0,S=0,k=e.document.documentElement,b=e.document.body||{scrollLeft:0,scrollTop:0};x&&(x.parentNode||x.host)&&(x=x.parentNode||x.host,x===e.document?(w=b.scrollLeft||k.scrollLeft||0,S=b.scrollTop||k.scrollTop||0):(w+=x.scrollLeft||0,S+=x.scrollTop||0),!(x.nodeType===1&&x.style.position==="fixed")););return{left:w,top:S}}function g(x){var w,S=x&&x.ownerDocument,k={left:0,top:0},b={left:0,top:0},j,M={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!S)return b;for(var W in M)b[M[W]]+=parseInt(l(x,W),10)||0;return w=S.documentElement,typeof x.getBoundingClientRect<"u"&&(k=x.getBoundingClientRect()),j=c(x),{left:k.left+j.left-(w.clientLeft||0)+b.left,top:k.top+j.top-(w.clientTop||0)+b.top}}var l;e.document.defaultView&&e.document.defaultView.getComputedStyle?l=function(x,w){var S=e.document.defaultView.getComputedStyle(x,null);return S?S[w]:void 0}:l=function(x,w){var S=x.style[w];return!S&&x.currentStyle&&(S=x.currentStyle[w]),S},function(){var x=e.document.documentElement.style,w="userSelect"in x?"userSelect":"MozUserSelect"in x?"MozUserSelect":"WebkitUserSelect"in x?"WebkitUserSelect":"KhtmlUserSelect"in x?"KhtmlUserSelect":"";function S(b){return typeof b.onselectstart<"u"&&(b.onselectstart=e.util.falseFunction),w?b.style[w]="none":typeof b.unselectable=="string"&&(b.unselectable="on"),b}function k(b){return typeof b.onselectstart<"u"&&(b.onselectstart=null),w?b.style[w]="":typeof b.unselectable=="string"&&(b.unselectable=""),b}e.util.makeElementUnselectable=S,e.util.makeElementSelectable=k}();function p(x){var w=e.jsdomImplForWrapper(x);return w._canvas||w._image}function v(x){if(e.isLikelyNode){var w=e.jsdomImplForWrapper(x);w&&(w._image=null,w._canvas=null,w._currentSrc=null,w._attributes=null,w._classList=null)}}function y(x,w){x.imageSmoothingEnabled=x.imageSmoothingEnabled||x.webkitImageSmoothingEnabled||x.mozImageSmoothingEnabled||x.msImageSmoothingEnabled||x.oImageSmoothingEnabled,x.imageSmoothingEnabled=w}e.util.setImageSmoothing=y,e.util.getById=r,e.util.toArray=d,e.util.addClass=a,e.util.makeElement=s,e.util.wrapElement=o,e.util.getScrollLeftTop=c,e.util.getElementOffset=g,e.util.getNodeCanvas=p,e.util.cleanUpJsdomNode=v}(),function(){function f(d,s){return d+(/\?/.test(d)?"&":"?")+s}function r(){}function u(d,s){s||(s={});var a=s.method?s.method.toUpperCase():"GET",o=s.onComplete||function(){},c=new e.window.XMLHttpRequest,g=s.body||s.parameters;return c.onreadystatechange=function(){c.readyState===4&&(o(c),c.onreadystatechange=r)},a==="GET"&&(g=null,typeof s.parameters=="string"&&(d=f(d,s.parameters))),c.open(a,d,!0),(a==="POST"||a==="PUT")&&c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.send(g),c}e.util.request=u}(),e.log=console.log,e.warn=console.warn,function(){var f=e.util.object.extend,r=e.util.object.clone,u=[];e.util.object.extend(u,{cancelAll:function(){var p=this.splice(0);return p.forEach(function(v){v.cancel()}),p},cancelByCanvas:function(p){if(!p)return[];var v=this.filter(function(y){return typeof y.target=="object"&&y.target.canvas===p});return v.forEach(function(y){y.cancel()}),v},cancelByTarget:function(p){var v=this.findAnimationsByTarget(p);return v.forEach(function(y){y.cancel()}),v},findAnimationIndex:function(p){return this.indexOf(this.findAnimation(p))},findAnimation:function(p){return this.find(function(v){return v.cancel===p})},findAnimationsByTarget:function(p){return p?this.filter(function(v){return v.target===p}):[]}});function d(){return!1}function s(p,v,y,x){return-y*Math.cos(p/x*(Math.PI/2))+y+v}function a(p){p||(p={});var v=!1,y,x=function(){var w=e.runningAnimations.indexOf(y);return w>-1&&e.runningAnimations.splice(w,1)[0]};return y=f(r(p),{cancel:function(){return v=!0,x()},currentValue:"startValue"in p?p.startValue:0,completionRate:0,durationRate:0}),e.runningAnimations.push(y),g(function(w){var S=w||+new Date,k=p.duration||500,b=S+k,j,M=p.onChange||d,W=p.abort||d,ee=p.onComplete||d,te=p.easing||s,J="startValue"in p?p.startValue.length>0:!1,Q="startValue"in p?p.startValue:0,ie="endValue"in p?p.endValue:100,oe=p.byValue||(J?Q.map(function(B,T){return ie[T]-Q[T]}):ie-Q);p.onStart&&p.onStart(),function B(T){j=T||+new Date;var O=j>b?k:j-S,I=O/k,A=J?Q.map(function(P,E){return te(O,Q[E],oe[E],k)}):te(O,Q,oe,k),L=Math.abs(J?(A[0]-Q[0])/oe[0]:(A-Q)/oe);if(y.currentValue=J?A.slice():A,y.completionRate=L,y.durationRate=I,!v){if(W(A,L,I)){x();return}if(j>b){y.currentValue=J?ie.slice():ie,y.completionRate=1,y.durationRate=1,M(J?ie.slice():ie,1,1),ee(ie,1,1),x();return}else M(A,L,I),g(B)}}(S)}),y.cancel}var o=e.window.requestAnimationFrame||e.window.webkitRequestAnimationFrame||e.window.mozRequestAnimationFrame||e.window.oRequestAnimationFrame||e.window.msRequestAnimationFrame||function(p){return e.window.setTimeout(p,1e3/60)},c=e.window.cancelAnimationFrame||e.window.clearTimeout;function g(){return o.apply(e.window,arguments)}function l(){return c.apply(e.window,arguments)}e.util.animate=a,e.util.requestAnimFrame=g,e.util.cancelAnimFrame=l,e.runningAnimations=u}(),function(){function f(u,d,s){var a="rgba("+parseInt(u[0]+s*(d[0]-u[0]),10)+","+parseInt(u[1]+s*(d[1]-u[1]),10)+","+parseInt(u[2]+s*(d[2]-u[2]),10);return a+=","+(u&&d?parseFloat(u[3]+s*(d[3]-u[3])):1),a+=")",a}function r(u,d,s,a){var o=new e.Color(u).getSource(),c=new e.Color(d).getSource(),g=a.onComplete,l=a.onChange;return a=a||{},e.util.animate(e.util.object.extend(a,{duration:s||500,startValue:o,endValue:c,byValue:c,easing:function(p,v,y,x){var w=a.colorEasing?a.colorEasing(p,x):1-Math.cos(p/x*(Math.PI/2));return f(v,y,w)},onComplete:function(p,v,y){if(g)return g(f(c,c,0),v,y)},onChange:function(p,v,y){if(l){if(Array.isArray(p))return l(f(p,p,0),v,y);l(p,v,y)}}}))}e.util.animateColor=r}(),function(){function f(T,O,I,A){return T<Math.abs(O)?(T=O,A=I/4):O===0&&T===0?A=I/(2*Math.PI)*Math.asin(1):A=I/(2*Math.PI)*Math.asin(O/T),{a:T,c:O,p:I,s:A}}function r(T,O,I){return T.a*Math.pow(2,10*(O-=1))*Math.sin((O*I-T.s)*(2*Math.PI)/T.p)}function u(T,O,I,A){return I*((T=T/A-1)*T*T+1)+O}function d(T,O,I,A){return T/=A/2,T<1?I/2*T*T*T+O:I/2*((T-=2)*T*T+2)+O}function s(T,O,I,A){return I*(T/=A)*T*T*T+O}function a(T,O,I,A){return-I*((T=T/A-1)*T*T*T-1)+O}function o(T,O,I,A){return T/=A/2,T<1?I/2*T*T*T*T+O:-I/2*((T-=2)*T*T*T-2)+O}function c(T,O,I,A){return I*(T/=A)*T*T*T*T+O}function g(T,O,I,A){return I*((T=T/A-1)*T*T*T*T+1)+O}function l(T,O,I,A){return T/=A/2,T<1?I/2*T*T*T*T*T+O:I/2*((T-=2)*T*T*T*T+2)+O}function p(T,O,I,A){return-I*Math.cos(T/A*(Math.PI/2))+I+O}function v(T,O,I,A){return I*Math.sin(T/A*(Math.PI/2))+O}function y(T,O,I,A){return-I/2*(Math.cos(Math.PI*T/A)-1)+O}function x(T,O,I,A){return T===0?O:I*Math.pow(2,10*(T/A-1))+O}function w(T,O,I,A){return T===A?O+I:I*(-Math.pow(2,-10*T/A)+1)+O}function S(T,O,I,A){return T===0?O:T===A?O+I:(T/=A/2,T<1?I/2*Math.pow(2,10*(T-1))+O:I/2*(-Math.pow(2,-10*--T)+2)+O)}function k(T,O,I,A){return-I*(Math.sqrt(1-(T/=A)*T)-1)+O}function b(T,O,I,A){return I*Math.sqrt(1-(T=T/A-1)*T)+O}function j(T,O,I,A){return T/=A/2,T<1?-I/2*(Math.sqrt(1-T*T)-1)+O:I/2*(Math.sqrt(1-(T-=2)*T)+1)+O}function M(T,O,I,A){var L=1.70158,P=0,E=I;if(T===0)return O;if(T/=A,T===1)return O+I;P||(P=A*.3);var D=f(E,I,P,L);return-r(D,T,A)+O}function W(T,O,I,A){var L=1.70158,P=0,E=I;if(T===0)return O;if(T/=A,T===1)return O+I;P||(P=A*.3);var D=f(E,I,P,L);return D.a*Math.pow(2,-10*T)*Math.sin((T*A-D.s)*(2*Math.PI)/D.p)+D.c+O}function ee(T,O,I,A){var L=1.70158,P=0,E=I;if(T===0)return O;if(T/=A/2,T===2)return O+I;P||(P=A*(.3*1.5));var D=f(E,I,P,L);return T<1?-.5*r(D,T,A)+O:D.a*Math.pow(2,-10*(T-=1))*Math.sin((T*A-D.s)*(2*Math.PI)/D.p)*.5+D.c+O}function te(T,O,I,A,L){return L===void 0&&(L=1.70158),I*(T/=A)*T*((L+1)*T-L)+O}function J(T,O,I,A,L){return L===void 0&&(L=1.70158),I*((T=T/A-1)*T*((L+1)*T+L)+1)+O}function Q(T,O,I,A,L){return L===void 0&&(L=1.70158),T/=A/2,T<1?I/2*(T*T*(((L*=1.525)+1)*T-L))+O:I/2*((T-=2)*T*(((L*=1.525)+1)*T+L)+2)+O}function ie(T,O,I,A){return I-oe(A-T,0,I,A)+O}function oe(T,O,I,A){return(T/=A)<1/2.75?I*(7.5625*T*T)+O:T<2/2.75?I*(7.5625*(T-=1.5/2.75)*T+.75)+O:T<2.5/2.75?I*(7.5625*(T-=2.25/2.75)*T+.9375)+O:I*(7.5625*(T-=2.625/2.75)*T+.984375)+O}function B(T,O,I,A){return T<A/2?ie(T*2,0,I,A)*.5+O:oe(T*2-A,0,I,A)*.5+I*.5+O}e.util.ease={easeInQuad:function(T,O,I,A){return I*(T/=A)*T+O},easeOutQuad:function(T,O,I,A){return-I*(T/=A)*(T-2)+O},easeInOutQuad:function(T,O,I,A){return T/=A/2,T<1?I/2*T*T+O:-I/2*(--T*(T-2)-1)+O},easeInCubic:function(T,O,I,A){return I*(T/=A)*T*T+O},easeOutCubic:u,easeInOutCubic:d,easeInQuart:s,easeOutQuart:a,easeInOutQuart:o,easeInQuint:c,easeOutQuint:g,easeInOutQuint:l,easeInSine:p,easeOutSine:v,easeInOutSine:y,easeInExpo:x,easeOutExpo:w,easeInOutExpo:S,easeInCirc:k,easeOutCirc:b,easeInOutCirc:j,easeInElastic:M,easeOutElastic:W,easeInOutElastic:ee,easeInBack:te,easeOutBack:J,easeInOutBack:Q,easeInBounce:ie,easeOutBounce:oe,easeInOutBounce:B}}(),function(f){var r=f.fabric||(f.fabric={}),u=r.util.object.extend,d=r.util.object.clone,s=r.util.toFixed,a=r.util.parseUnit,o=r.util.multiplyTransformMatrices,c=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],g=["symbol","image","marker","pattern","view","svg"],l=["pattern","defs","symbol","metadata","clipPath","mask","desc"],p=["symbol","g","a","svg","clipPath","defs"],v={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},y={stroke:"strokeOpacity",fill:"fillOpacity"},x="font-size",w="clip-path";r.svgValidTagNamesRegEx=b(c),r.svgViewBoxElementsRegEx=b(g),r.svgInvalidAncestorsRegEx=b(l),r.svgValidParentsRegEx=b(p),r.cssRules={},r.gradientDefs={},r.clipPaths={};function S(P){return P in v?v[P]:P}function k(P,E,D,R){var H=Array.isArray(E),F;if((P==="fill"||P==="stroke")&&E==="none")E="";else{if(P==="strokeUniform")return E==="non-scaling-stroke";if(P==="strokeDashArray")E==="none"?E=null:E=E.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(P==="transformMatrix")D&&D.transformMatrix?E=o(D.transformMatrix,r.parseTransformAttribute(E)):E=r.parseTransformAttribute(E);else if(P==="visible")E=E!=="none"&&E!=="hidden",D&&D.visible===!1&&(E=!1);else if(P==="opacity")E=parseFloat(E),D&&typeof D.opacity<"u"&&(E*=D.opacity);else if(P==="textAnchor")E=E==="start"?"left":E==="end"?"right":"center";else if(P==="charSpacing")F=a(E,R)/R*1e3;else if(P==="paintFirst"){var G=E.indexOf("fill"),q=E.indexOf("stroke"),E="fill";(G>-1&&q>-1&&q<G||G===-1&&q>-1)&&(E="stroke")}else{if(P==="href"||P==="xlink:href"||P==="font")return E;if(P==="imageSmoothing")return E==="optimizeQuality";F=H?E.map(a):a(E,R)}}return!H&&isNaN(F)?E:F}function b(P){return new RegExp("^("+P.join("|")+")\\b","i")}function j(P){for(var E in y)if(!(typeof P[y[E]]>"u"||P[E]==="")){if(typeof P[E]>"u"){if(!r.Object.prototype[E])continue;P[E]=r.Object.prototype[E]}if(P[E].indexOf("url(")!==0){var D=new r.Color(P[E]);P[E]=D.setAlpha(s(D.getAlpha()*P[y[E]],2)).toRgba()}}return P}function M(P,E){var D,R=[],H,F,G;for(F=0,G=E.length;F<G;F++)D=E[F],H=P.getElementsByTagName(D),R=R.concat(Array.prototype.slice.call(H));return R}r.parseTransformAttribute=function(){function P(V,le){var he=r.util.cos(le[0]),de=r.util.sin(le[0]),Ce=0,ge=0;le.length===3&&(Ce=le[1],ge=le[2]),V[0]=he,V[1]=de,V[2]=-de,V[3]=he,V[4]=Ce-(he*Ce-de*ge),V[5]=ge-(de*Ce+he*ge)}function E(V,le){var he=le[0],de=le.length===2?le[1]:le[0];V[0]=he,V[3]=de}function D(V,le,he){V[he]=Math.tan(r.util.degreesToRadians(le[0]))}function R(V,le){V[4]=le[0],le.length===2&&(V[5]=le[1])}var H=r.iMatrix,F=r.reNum,G=r.commaWsp,q="(?:(skewX)\\s*\\(\\s*("+F+")\\s*\\))",ne="(?:(skewY)\\s*\\(\\s*("+F+")\\s*\\))",U="(?:(rotate)\\s*\\(\\s*("+F+")(?:"+G+"("+F+")"+G+"("+F+"))?\\s*\\))",N="(?:(scale)\\s*\\(\\s*("+F+")(?:"+G+"("+F+"))?\\s*\\))",X="(?:(translate)\\s*\\(\\s*("+F+")(?:"+G+"("+F+"))?\\s*\\))",Y="(?:(matrix)\\s*\\(\\s*("+F+")"+G+"("+F+")"+G+"("+F+")"+G+"("+F+")"+G+"("+F+")"+G+"("+F+")\\s*\\))",z="(?:"+Y+"|"+X+"|"+N+"|"+U+"|"+q+"|"+ne+")",$="(?:"+z+"(?:"+G+"*"+z+")*)",re="^\\s*(?:"+$+"?)\\s*$",ue=new RegExp(re),ae=new RegExp(z,"g");return function(V){var le=H.concat(),he=[];if(!V||V&&!ue.test(V))return le;V.replace(ae,function(Ce){var ge=new RegExp(z).exec(Ce).filter(function(Pn){return!!Pn}),He=ge[1],Pe=ge.slice(2).map(parseFloat);switch(He){case"translate":R(le,Pe);break;case"rotate":Pe[0]=r.util.degreesToRadians(Pe[0]),P(le,Pe);break;case"scale":E(le,Pe);break;case"skewX":D(le,Pe,2);break;case"skewY":D(le,Pe,1);break;case"matrix":le=Pe;break}he.push(le.concat()),le=H.concat()});for(var de=he[0];he.length>1;)he.shift(),de=r.util.multiplyTransformMatrices(de,he[0]);return de}}();function W(P,E){var D,R;P.replace(/;\s*$/,"").split(";").forEach(function(H){var F=H.split(":");D=F[0].trim().toLowerCase(),R=F[1].trim(),E[D]=R})}function ee(P,E){var D,R;for(var H in P)typeof P[H]>"u"||(D=H.toLowerCase(),R=P[H],E[D]=R)}function te(P,E){var D={};for(var R in r.cssRules[E])if(J(P,R.split(" ")))for(var H in r.cssRules[E][R])D[H]=r.cssRules[E][R][H];return D}function J(P,E){var D,R=!0;return D=ie(P,E.pop()),D&&E.length&&(R=Q(P,E)),D&&R&&E.length===0}function Q(P,E){for(var D,R=!0;P.parentNode&&P.parentNode.nodeType===1&&E.length;)R&&(D=E.pop()),P=P.parentNode,R=ie(P,D);return E.length===0}function ie(P,E){var D=P.nodeName,R=P.getAttribute("class"),H=P.getAttribute("id"),F,G;if(F=new RegExp("^"+D,"i"),E=E.replace(F,""),H&&E.length&&(F=new RegExp("#"+H+"(?![a-zA-Z\\-]+)","i"),E=E.replace(F,"")),R&&E.length)for(R=R.split(" "),G=R.length;G--;)F=new RegExp("\\."+R[G]+"(?![a-zA-Z\\-]+)","i"),E=E.replace(F,"");return E.length===0}function oe(P,E){var D;if(P.getElementById&&(D=P.getElementById(E)),D)return D;var R,H,F,G=P.getElementsByTagName("*");for(H=0,F=G.length;H<F;H++)if(R=G[H],E===R.getAttribute("id"))return R}function B(P){for(var E=M(P,["use","svg:use"]),D=0;E.length&&D<E.length;){var R=E[D],H=R.getAttribute("xlink:href")||R.getAttribute("href");if(H===null)return;var F=H.slice(1),G=R.getAttribute("x")||0,q=R.getAttribute("y")||0,ne=oe(P,F).cloneNode(!0),U=(ne.getAttribute("transform")||"")+" translate("+G+", "+q+")",N,X=E.length,Y,z,$,re,ue=r.svgNS;if(O(ne),/^svg$/i.test(ne.nodeName)){var ae=ne.ownerDocument.createElementNS(ue,"g");for(z=0,$=ne.attributes,re=$.length;z<re;z++)Y=$.item(z),ae.setAttributeNS(ue,Y.nodeName,Y.nodeValue);for(;ne.firstChild;)ae.appendChild(ne.firstChild);ne=ae}for(z=0,$=R.attributes,re=$.length;z<re;z++)Y=$.item(z),!(Y.nodeName==="x"||Y.nodeName==="y"||Y.nodeName==="xlink:href"||Y.nodeName==="href")&&(Y.nodeName==="transform"?U=Y.nodeValue+" "+U:ne.setAttribute(Y.nodeName,Y.nodeValue));ne.setAttribute("transform",U),ne.setAttribute("instantiated_by_use","1"),ne.removeAttribute("id"),N=R.parentNode,N.replaceChild(ne,R),E.length===X&&D++}}var T=new RegExp("^\\s*("+r.reNum+"+)\\s*,?\\s*("+r.reNum+"+)\\s*,?\\s*("+r.reNum+"+)\\s*,?\\s*("+r.reNum+"+)\\s*$");function O(P){if(!r.svgViewBoxElementsRegEx.test(P.nodeName))return{};var E=P.getAttribute("viewBox"),D=1,R=1,H=0,F=0,G,q,ne,U,N=P.getAttribute("width"),X=P.getAttribute("height"),Y=P.getAttribute("x")||0,z=P.getAttribute("y")||0,$=P.getAttribute("preserveAspectRatio")||"",re=!E||!(E=E.match(T)),ue=!N||!X||N==="100%"||X==="100%",ae=re&&ue,V={},le="",he=0,de=0;if(V.width=0,V.height=0,V.toBeParsed=ae,re&&(Y||z)&&P.parentNode&&P.parentNode.nodeName!=="#document"&&(le=" translate("+a(Y)+" "+a(z)+") ",ne=(P.getAttribute("transform")||"")+le,P.setAttribute("transform",ne),P.removeAttribute("x"),P.removeAttribute("y")),ae)return V;if(re)return V.width=a(N),V.height=a(X),V;if(H=-parseFloat(E[1]),F=-parseFloat(E[2]),G=parseFloat(E[3]),q=parseFloat(E[4]),V.minX=H,V.minY=F,V.viewBoxWidth=G,V.viewBoxHeight=q,ue?(V.width=G,V.height=q):(V.width=a(N),V.height=a(X),D=V.width/G,R=V.height/q),$=r.util.parsePreserveAspectRatioAttribute($),$.alignX!=="none"&&($.meetOrSlice==="meet"&&(R=D=D>R?R:D),$.meetOrSlice==="slice"&&(R=D=D>R?D:R),he=V.width-G*D,de=V.height-q*D,$.alignX==="Mid"&&(he/=2),$.alignY==="Mid"&&(de/=2),$.alignX==="Min"&&(he=0),$.alignY==="Min"&&(de=0)),D===1&&R===1&&H===0&&F===0&&Y===0&&z===0)return V;if((Y||z)&&P.parentNode.nodeName!=="#document"&&(le=" translate("+a(Y)+" "+a(z)+") "),ne=le+" matrix("+D+" 0 0 "+R+" "+(H*D+he)+" "+(F*R+de)+") ",P.nodeName==="svg"){for(U=P.ownerDocument.createElementNS(r.svgNS,"g");P.firstChild;)U.appendChild(P.firstChild);P.appendChild(U)}else U=P,U.removeAttribute("x"),U.removeAttribute("y"),ne=U.getAttribute("transform")+ne;return U.setAttribute("transform",ne),V}function I(P,E){for(;P&&(P=P.parentNode);)if(P.nodeName&&E.test(P.nodeName.replace("svg:",""))&&!P.getAttribute("instantiated_by_use"))return!0;return!1}r.parseSVGDocument=function(P,E,D,R){if(P){B(P);var H=r.Object.__uid++,F,G,q=O(P),ne=r.util.toArray(P.getElementsByTagName("*"));if(q.crossOrigin=R&&R.crossOrigin,q.svgUid=H,ne.length===0&&r.isLikelyNode){ne=P.selectNodes('//*[name(.)!="svg"]');var U=[];for(F=0,G=ne.length;F<G;F++)U[F]=ne[F];ne=U}var N=ne.filter(function(Y){return O(Y),r.svgValidTagNamesRegEx.test(Y.nodeName.replace("svg:",""))&&!I(Y,r.svgInvalidAncestorsRegEx)});if(!N||N&&!N.length){E&&E([],{});return}var X={};ne.filter(function(Y){return Y.nodeName.replace("svg:","")==="clipPath"}).forEach(function(Y){var z=Y.getAttribute("id");X[z]=r.util.toArray(Y.getElementsByTagName("*")).filter(function($){return r.svgValidTagNamesRegEx.test($.nodeName.replace("svg:",""))})}),r.gradientDefs[H]=r.getGradientDefs(P),r.cssRules[H]=r.getCSSRules(P),r.clipPaths[H]=X,r.parseElements(N,function(Y,z){E&&(E(Y,q,z,ne),delete r.gradientDefs[H],delete r.cssRules[H],delete r.clipPaths[H])},d(q),D,R)}};function A(P,E){var D=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],R="xlink:href",H=E.getAttribute(R).slice(1),F=oe(P,H);if(F&&F.getAttribute(R)&&A(P,F),D.forEach(function(q){F&&!E.hasAttribute(q)&&F.hasAttribute(q)&&E.setAttribute(q,F.getAttribute(q))}),!E.children.length)for(var G=F.cloneNode(!0);G.firstChild;)E.appendChild(G.firstChild);E.removeAttribute(R)}var L=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+r.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+r.reNum+"))?\\s+(.*)");u(r,{parseFontDeclaration:function(P,E){var D=P.match(L);if(D){var R=D[1],H=D[3],F=D[4],G=D[5],q=D[6];R&&(E.fontStyle=R),H&&(E.fontWeight=isNaN(parseFloat(H))?H:parseFloat(H)),F&&(E.fontSize=a(F)),q&&(E.fontFamily=q),G&&(E.lineHeight=G==="normal"?1:G)}},getGradientDefs:function(P){var E=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],D=M(P,E),R,H=0,F={};for(H=D.length;H--;)R=D[H],R.getAttribute("xlink:href")&&A(P,R),F[R.getAttribute("id")]=R;return F},parseAttributes:function(P,E,D){if(P){var R,H={},F,G;typeof D>"u"&&(D=P.getAttribute("svgUid")),P.parentNode&&r.svgValidParentsRegEx.test(P.parentNode.nodeName)&&(H=r.parseAttributes(P.parentNode,E,D));var q=E.reduce(function($,re){return R=P.getAttribute(re),R&&($[re]=R),$},{}),ne=u(te(P,D),r.parseStyleAttribute(P));q=u(q,ne),ne[w]&&P.setAttribute(w,ne[w]),F=G=H.fontSize||r.Text.DEFAULT_SVG_FONT_SIZE,q[x]&&(q[x]=F=a(q[x],G));var U,N,X={};for(var Y in q)U=S(Y),N=k(U,q[Y],H,F),X[U]=N;X&&X.font&&r.parseFontDeclaration(X.font,X);var z=u(H,X);return r.svgValidParentsRegEx.test(P.nodeName)?z:j(z)}},parseElements:function(P,E,D,R,H){new r.ElementsParser(P,E,D,R,H).parse()},parseStyleAttribute:function(P){var E={},D=P.getAttribute("style");return D&&(typeof D=="string"?W(D,E):ee(D,E)),E},parsePointsAttribute:function(P){if(!P)return null;P=P.replace(/,/g," ").trim(),P=P.split(/\s+/);var E=[],D,R;for(D=0,R=P.length;D<R;D+=2)E.push({x:parseFloat(P[D]),y:parseFloat(P[D+1])});return E},getCSSRules:function(P){var E=P.getElementsByTagName("style"),D,R,H={},F;for(D=0,R=E.length;D<R;D++){var G=E[D].textContent;G=G.replace(/\/\*[\s\S]*?\*\//g,""),G.trim()!==""&&(F=G.split("}"),F=F.filter(function(q){return q.trim()}),F.forEach(function(q){var ne=q.split("{"),U={},N=ne[1].trim(),X=N.split(";").filter(function(re){return re.trim()});for(D=0,R=X.length;D<R;D++){var Y=X[D].split(":"),z=Y[0].trim(),$=Y[1].trim();U[z]=$}q=ne[0].trim(),q.split(",").forEach(function(re){re=re.replace(/^svg/i,"").trim(),re!==""&&(H[re]?r.util.object.extend(H[re],U):H[re]=r.util.object.clone(U))})}))}return H},loadSVGFromURL:function(P,E,D,R){P=P.replace(/^\n\s*/,"").trim(),new r.util.request(P,{method:"get",onComplete:H});function H(F){var G=F.responseXML;if(!G||!G.documentElement)return E&&E(null),!1;r.parseSVGDocument(G.documentElement,function(q,ne,U,N){E&&E(q,ne,U,N)},D,R)}},loadSVGFromString:function(P,E,D,R){var H=new r.window.DOMParser,F=H.parseFromString(P.trim(),"text/xml");r.parseSVGDocument(F.documentElement,function(G,q,ne,U){E(G,q,ne,U)},D,R)}})}(t),e.ElementsParser=function(f,r,u,d,s,a){this.elements=f,this.callback=r,this.options=u,this.reviver=d,this.svgUid=u&&u.svgUid||0,this.parsingOptions=s,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=a},function(f){f.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},f.createObjects=function(){var r=this;this.elements.forEach(function(u,d){u.setAttribute("svgUid",r.svgUid),r.createObject(u,d)})},f.findTag=function(r){return e[e.util.string.capitalize(r.tagName.replace("svg:",""))]},f.createObject=function(r,u){var d=this.findTag(r);if(d&&d.fromElement)try{d.fromElement(r,this.createCallback(u,r),this.options)}catch(s){e.log(s)}else this.checkIfDone()},f.createCallback=function(r,u){var d=this;return function(s){var a;d.resolveGradient(s,u,"fill"),d.resolveGradient(s,u,"stroke"),s instanceof e.Image&&s._originalElement&&(a=s.parsePreserveAspectRatioAttribute(u)),s._removeTransformMatrix(a),d.resolveClipPath(s,u),d.reviver&&d.reviver(u,s),d.instances[r]=s,d.checkIfDone()}},f.extractPropertyDefinition=function(r,u,d){var s=r[u],a=this.regexUrl;if(a.test(s)){a.lastIndex=0;var o=a.exec(s)[1];return a.lastIndex=0,e[d][this.svgUid][o]}},f.resolveGradient=function(r,u,d){var s=this.extractPropertyDefinition(r,d,"gradientDefs");if(s){var a=u.getAttribute(d+"-opacity"),o=e.Gradient.fromElement(s,r,a,this.options);r.set(d,o)}},f.createClipPathCallback=function(r,u){return function(d){d._removeTransformMatrix(),d.fillRule=d.clipRule,u.push(d)}},f.resolveClipPath=function(r,u){var d=this.extractPropertyDefinition(r,"clipPath","clipPaths"),s,a,o,c,g,l;if(d){c=[],o=e.util.invertTransform(r.calcTransformMatrix());for(var p=d[0].parentNode,v=u;v.parentNode&&v.getAttribute("clip-path")!==r.clipPath;)v=v.parentNode;v.parentNode.appendChild(p);for(var y=0;y<d.length;y++)s=d[y],a=this.findTag(s),a.fromElement(s,this.createClipPathCallback(r,c),this.options);c.length===1?d=c[0]:d=new e.Group(c),g=e.util.multiplyTransformMatrices(o,d.calcTransformMatrix()),d.clipPath&&this.resolveClipPath(d,v);var l=e.util.qrDecompose(g);d.flipX=!1,d.flipY=!1,d.set("scaleX",l.scaleX),d.set("scaleY",l.scaleY),d.angle=l.angle,d.skewX=l.skewX,d.skewY=0,d.setPositionByOrigin({x:l.translateX,y:l.translateY},"center","center"),r.clipPath=d}else delete r.clipPath},f.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(r){return r!=null}),this.callback(this.instances,this.elements))}}(e.ElementsParser.prototype),function(f){var r=f.fabric||(f.fabric={});if(r.Point){r.warn("fabric.Point is already defined");return}r.Point=u;function u(d,s){this.x=d,this.y=s}u.prototype={type:"point",constructor:u,add:function(d){return new u(this.x+d.x,this.y+d.y)},addEquals:function(d){return this.x+=d.x,this.y+=d.y,this},scalarAdd:function(d){return new u(this.x+d,this.y+d)},scalarAddEquals:function(d){return this.x+=d,this.y+=d,this},subtract:function(d){return new u(this.x-d.x,this.y-d.y)},subtractEquals:function(d){return this.x-=d.x,this.y-=d.y,this},scalarSubtract:function(d){return new u(this.x-d,this.y-d)},scalarSubtractEquals:function(d){return this.x-=d,this.y-=d,this},multiply:function(d){return new u(this.x*d,this.y*d)},multiplyEquals:function(d){return this.x*=d,this.y*=d,this},divide:function(d){return new u(this.x/d,this.y/d)},divideEquals:function(d){return this.x/=d,this.y/=d,this},eq:function(d){return this.x===d.x&&this.y===d.y},lt:function(d){return this.x<d.x&&this.y<d.y},lte:function(d){return this.x<=d.x&&this.y<=d.y},gt:function(d){return this.x>d.x&&this.y>d.y},gte:function(d){return this.x>=d.x&&this.y>=d.y},lerp:function(d,s){return typeof s>"u"&&(s=.5),s=Math.max(Math.min(1,s),0),new u(this.x+(d.x-this.x)*s,this.y+(d.y-this.y)*s)},distanceFrom:function(d){var s=this.x-d.x,a=this.y-d.y;return Math.sqrt(s*s+a*a)},midPointFrom:function(d){return this.lerp(d)},min:function(d){return new u(Math.min(this.x,d.x),Math.min(this.y,d.y))},max:function(d){return new u(Math.max(this.x,d.x),Math.max(this.y,d.y))},toString:function(){return this.x+","+this.y},setXY:function(d,s){return this.x=d,this.y=s,this},setX:function(d){return this.x=d,this},setY:function(d){return this.y=d,this},setFromPoint:function(d){return this.x=d.x,this.y=d.y,this},swap:function(d){var s=this.x,a=this.y;this.x=d.x,this.y=d.y,d.x=s,d.y=a},clone:function(){return new u(this.x,this.y)}}}(t),function(f){var r=f.fabric||(f.fabric={});if(r.Intersection){r.warn("fabric.Intersection is already defined");return}function u(d){this.status=d,this.points=[]}r.Intersection=u,r.Intersection.prototype={constructor:u,appendPoint:function(d){return this.points.push(d),this},appendPoints:function(d){return this.points=this.points.concat(d),this}},r.Intersection.intersectLineLine=function(d,s,a,o){var c,g=(o.x-a.x)*(d.y-a.y)-(o.y-a.y)*(d.x-a.x),l=(s.x-d.x)*(d.y-a.y)-(s.y-d.y)*(d.x-a.x),p=(o.y-a.y)*(s.x-d.x)-(o.x-a.x)*(s.y-d.y);if(p!==0){var v=g/p,y=l/p;0<=v&&v<=1&&0<=y&&y<=1?(c=new u("Intersection"),c.appendPoint(new r.Point(d.x+v*(s.x-d.x),d.y+v*(s.y-d.y)))):c=new u}else g===0||l===0?c=new u("Coincident"):c=new u("Parallel");return c},r.Intersection.intersectLinePolygon=function(d,s,a){var o=new u,c=a.length,g,l,p,v;for(v=0;v<c;v++)g=a[v],l=a[(v+1)%c],p=u.intersectLineLine(d,s,g,l),o.appendPoints(p.points);return o.points.length>0&&(o.status="Intersection"),o},r.Intersection.intersectPolygonPolygon=function(d,s){var a=new u,o=d.length,c;for(c=0;c<o;c++){var g=d[c],l=d[(c+1)%o],p=u.intersectLinePolygon(g,l,s);a.appendPoints(p.points)}return a.points.length>0&&(a.status="Intersection"),a},r.Intersection.intersectPolygonRectangle=function(d,s,a){var o=s.min(a),c=s.max(a),g=new r.Point(c.x,o.y),l=new r.Point(o.x,c.y),p=u.intersectLinePolygon(o,g,d),v=u.intersectLinePolygon(g,c,d),y=u.intersectLinePolygon(c,l,d),x=u.intersectLinePolygon(l,o,d),w=new u;return w.appendPoints(p.points),w.appendPoints(v.points),w.appendPoints(y.points),w.appendPoints(x.points),w.points.length>0&&(w.status="Intersection"),w}}(t),function(f){var r=f.fabric||(f.fabric={});if(r.Color){r.warn("fabric.Color is already defined.");return}function u(s){s?this._tryParsingColor(s):this.setSource([0,0,0,1])}r.Color=u,r.Color.prototype={_tryParsingColor:function(s){var a;s in u.colorNameMap&&(s=u.colorNameMap[s]),s==="transparent"&&(a=[255,255,255,0]),a||(a=u.sourceFromHex(s)),a||(a=u.sourceFromRgb(s)),a||(a=u.sourceFromHsl(s)),a||(a=[0,0,0,1]),a&&this.setSource(a)},_rgbToHsl:function(s,a,o){s/=255,a/=255,o/=255;var c,g,l,p=r.util.array.max([s,a,o]),v=r.util.array.min([s,a,o]);if(l=(p+v)/2,p===v)c=g=0;else{var y=p-v;switch(g=l>.5?y/(2-p-v):y/(p+v),p){case s:c=(a-o)/y+(a<o?6:0);break;case a:c=(o-s)/y+2;break;case o:c=(s-a)/y+4;break}c/=6}return[Math.round(c*360),Math.round(g*100),Math.round(l*100)]},getSource:function(){return this._source},setSource:function(s){this._source=s},toRgb:function(){var s=this.getSource();return"rgb("+s[0]+","+s[1]+","+s[2]+")"},toRgba:function(){var s=this.getSource();return"rgba("+s[0]+","+s[1]+","+s[2]+","+s[3]+")"},toHsl:function(){var s=this.getSource(),a=this._rgbToHsl(s[0],s[1],s[2]);return"hsl("+a[0]+","+a[1]+"%,"+a[2]+"%)"},toHsla:function(){var s=this.getSource(),a=this._rgbToHsl(s[0],s[1],s[2]);return"hsla("+a[0]+","+a[1]+"%,"+a[2]+"%,"+s[3]+")"},toHex:function(){var s=this.getSource(),a,o,c;return a=s[0].toString(16),a=a.length===1?"0"+a:a,o=s[1].toString(16),o=o.length===1?"0"+o:o,c=s[2].toString(16),c=c.length===1?"0"+c:c,a.toUpperCase()+o.toUpperCase()+c.toUpperCase()},toHexa:function(){var s=this.getSource(),a;return a=Math.round(s[3]*255),a=a.toString(16),a=a.length===1?"0"+a:a,this.toHex()+a.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(s){var a=this.getSource();return a[3]=s,this.setSource(a),this},toGrayscale:function(){var s=this.getSource(),a=parseInt((s[0]*.3+s[1]*.59+s[2]*.11).toFixed(0),10),o=s[3];return this.setSource([a,a,a,o]),this},toBlackWhite:function(s){var a=this.getSource(),o=(a[0]*.3+a[1]*.59+a[2]*.11).toFixed(0),c=a[3];return s=s||127,o=Number(o)<Number(s)?0:255,this.setSource([o,o,o,c]),this},overlayWith:function(s){s instanceof u||(s=new u(s));var a=[],o=this.getAlpha(),c=.5,g=this.getSource(),l=s.getSource(),p;for(p=0;p<3;p++)a.push(Math.round(g[p]*(1-c)+l[p]*c));return a[3]=o,this.setSource(a),this}},r.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,r.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,r.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,r.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function d(s,a,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?s+(a-s)*6*o:o<1/2?a:o<2/3?s+(a-s)*(2/3-o)*6:s}r.Color.fromRgb=function(s){return u.fromSource(u.sourceFromRgb(s))},r.Color.sourceFromRgb=function(s){var a=s.match(u.reRGBa);if(a){var o=parseInt(a[1],10)/(/%$/.test(a[1])?100:1)*(/%$/.test(a[1])?255:1),c=parseInt(a[2],10)/(/%$/.test(a[2])?100:1)*(/%$/.test(a[2])?255:1),g=parseInt(a[3],10)/(/%$/.test(a[3])?100:1)*(/%$/.test(a[3])?255:1);return[parseInt(o,10),parseInt(c,10),parseInt(g,10),a[4]?parseFloat(a[4]):1]}},r.Color.fromRgba=u.fromRgb,r.Color.fromHsl=function(s){return u.fromSource(u.sourceFromHsl(s))},r.Color.sourceFromHsl=function(s){var a=s.match(u.reHSLa);if(a){var o=(parseFloat(a[1])%360+360)%360/360,c=parseFloat(a[2])/(/%$/.test(a[2])?100:1),g=parseFloat(a[3])/(/%$/.test(a[3])?100:1),l,p,v;if(c===0)l=p=v=g;else{var y=g<=.5?g*(c+1):g+c-g*c,x=g*2-y;l=d(x,y,o+1/3),p=d(x,y,o),v=d(x,y,o-1/3)}return[Math.round(l*255),Math.round(p*255),Math.round(v*255),a[4]?parseFloat(a[4]):1]}},r.Color.fromHsla=u.fromHsl,r.Color.fromHex=function(s){return u.fromSource(u.sourceFromHex(s))},r.Color.sourceFromHex=function(s){if(s.match(u.reHex)){var a=s.slice(s.indexOf("#")+1),o=a.length===3||a.length===4,c=a.length===8||a.length===4,g=o?a.charAt(0)+a.charAt(0):a.substring(0,2),l=o?a.charAt(1)+a.charAt(1):a.substring(2,4),p=o?a.charAt(2)+a.charAt(2):a.substring(4,6),v=c?o?a.charAt(3)+a.charAt(3):a.substring(6,8):"FF";return[parseInt(g,16),parseInt(l,16),parseInt(p,16),parseFloat((parseInt(v,16)/255).toFixed(2))]}},r.Color.fromSource=function(s){var a=new u;return a.setSource(s),a}}(t),function(f){var r=f.fabric||(f.fabric={}),u=["e","se","s","sw","w","nw","n","ne","e"],d=["ns","nesw","ew","nwse"],s={},a="left",o="top",c="right",g="bottom",l="center",p={top:g,bottom:o,left:c,right:a,center:l},v=r.util.radiansToDegrees,y=Math.sign||function(U){return(U>0)-(U<0)||+U};function x(U,N){var X=U.angle+v(Math.atan2(N.y,N.x))+360;return Math.round(X%360/45)}function w(U,N){var X=N.transform.target,Y=X.canvas,z=r.util.object.clone(N);z.target=X,Y&&Y.fire("object:"+U,z),X.fire(U,N)}function S(U,N){var X=N.canvas,Y=X.uniScaleKey,z=U[Y];return X.uniformScaling&&!z||!X.uniformScaling&&z}function k(U){return U.originX===l&&U.originY===l}function b(U,N,X){var Y=U.lockScalingX,z=U.lockScalingY;return!!(Y&&z||!N&&(Y||z)&&X||Y&&N==="x"||z&&N==="y")}function j(U,N,X){var Y="not-allowed",z=S(U,X),$="";if(N.x!==0&&N.y===0?$="x":N.x===0&&N.y!==0&&($="y"),b(X,$,z))return Y;var re=x(X,N);return u[re]+"-resize"}function M(U,N,X){var Y="not-allowed";if(N.x!==0&&X.lockSkewingY||N.y!==0&&X.lockSkewingX)return Y;var z=x(X,N)%4;return d[z]+"-resize"}function W(U,N,X){return U[X.canvas.altActionKey]?s.skewCursorStyleHandler(U,N,X):s.scaleCursorStyleHandler(U,N,X)}function ee(U,N,X){var Y=U[X.canvas.altActionKey];if(N.x===0)return Y?"skewX":"scaleY";if(N.y===0)return Y?"skewY":"scaleX"}function te(U,N,X){return X.lockRotation?"not-allowed":N.cursorStyle}function J(U,N,X,Y){return{e:U,transform:N,pointer:{x:X,y:Y}}}function Q(U){return function(N,X,Y,z){var $=X.target,re=$.getCenterPoint(),ue=$.translateToOriginPoint(re,X.originX,X.originY),ae=U(N,X,Y,z);return $.setPositionByOrigin(ue,X.originX,X.originY),ae}}function ie(U,N){return function(X,Y,z,$){var re=N(X,Y,z,$);return re&&w(U,J(X,Y,z,$)),re}}function oe(U,N,X,Y,z){var $=U.target,re=$.controls[U.corner],ue=$.canvas.getZoom(),ae=$.padding/ue,V=$.toLocalPoint(new r.Point(Y,z),N,X);return V.x>=ae&&(V.x-=ae),V.x<=-ae&&(V.x+=ae),V.y>=ae&&(V.y-=ae),V.y<=ae&&(V.y+=ae),V.x-=re.offsetX,V.y-=re.offsetY,V}function B(U){return U.flipX!==U.flipY}function T(U,N,X,Y,z){if(U[N]!==0){var $=U._getTransformedDimensions()[Y],re=z/$*U[X];U.set(X,re)}}function O(U,N,X,Y){var z=N.target,$=z._getTransformedDimensions(0,z.skewY),re=oe(N,N.originX,N.originY,X,Y),ue=Math.abs(re.x*2)-$.x,ae=z.skewX,V;ue<2?V=0:(V=v(Math.atan2(ue/z.scaleX,$.y/z.scaleY)),N.originX===a&&N.originY===g&&(V=-V),N.originX===c&&N.originY===o&&(V=-V),B(z)&&(V=-V));var le=ae!==V;if(le){var he=z._getTransformedDimensions().y;z.set("skewX",V),T(z,"skewY","scaleY","y",he)}return le}function I(U,N,X,Y){var z=N.target,$=z._getTransformedDimensions(z.skewX,0),re=oe(N,N.originX,N.originY,X,Y),ue=Math.abs(re.y*2)-$.y,ae=z.skewY,V;ue<2?V=0:(V=v(Math.atan2(ue/z.scaleY,$.x/z.scaleX)),N.originX===a&&N.originY===g&&(V=-V),N.originX===c&&N.originY===o&&(V=-V),B(z)&&(V=-V));var le=ae!==V;if(le){var he=z._getTransformedDimensions().x;z.set("skewY",V),T(z,"skewX","scaleX","x",he)}return le}function A(U,N,X,Y){var z=N.target,$=z.skewX,re,ue=N.originY;if(z.lockSkewingX)return!1;if($===0){var ae=oe(N,l,l,X,Y);ae.x>0?re=a:re=c}else $>0&&(re=ue===o?a:c),$<0&&(re=ue===o?c:a),B(z)&&(re=re===a?c:a);N.originX=re;var V=ie("skewing",Q(O));return V(U,N,X,Y)}function L(U,N,X,Y){var z=N.target,$=z.skewY,re,ue=N.originX;if(z.lockSkewingY)return!1;if($===0){var ae=oe(N,l,l,X,Y);ae.y>0?re=o:re=g}else $>0&&(re=ue===a?o:g),$<0&&(re=ue===a?g:o),B(z)&&(re=re===o?g:o);N.originY=re;var V=ie("skewing",Q(I));return V(U,N,X,Y)}function P(U,N,X,Y){var z=N,$=z.target,re=$.translateToOriginPoint($.getCenterPoint(),z.originX,z.originY);if($.lockRotation)return!1;var ue=Math.atan2(z.ey-re.y,z.ex-re.x),ae=Math.atan2(Y-re.y,X-re.x),V=v(ae-ue+z.theta),le=!0;if($.snapAngle>0){var he=$.snapAngle,de=$.snapThreshold||he,Ce=Math.ceil(V/he)*he,ge=Math.floor(V/he)*he;Math.abs(V-ge)<de?V=ge:Math.abs(V-Ce)<de&&(V=Ce)}return V<0&&(V=360+V),V%=360,le=$.angle!==V,$.angle=V,le}function E(U,N,X,Y,z){z=z||{};var $=N.target,re=$.lockScalingX,ue=$.lockScalingY,ae=z.by,V,le,he,de,Ce=S(U,$),ge=b($,ae,Ce),He,Pe,Pn=N.gestureScale;if(ge)return!1;if(Pn)le=N.scaleX*Pn,he=N.scaleY*Pn;else{if(V=oe(N,N.originX,N.originY,X,Y),He=ae!=="y"?y(V.x):1,Pe=ae!=="x"?y(V.y):1,N.signX||(N.signX=He),N.signY||(N.signY=Pe),$.lockScalingFlip&&(N.signX!==He||N.signY!==Pe))return!1;if(de=$._getTransformedDimensions(),Ce&&!ae){var Mr=Math.abs(V.x)+Math.abs(V.y),Ct=N.original,Rp=Math.abs(de.x*Ct.scaleX/$.scaleX)+Math.abs(de.y*Ct.scaleY/$.scaleY),xc=Mr/Rp;le=Ct.scaleX*xc,he=Ct.scaleY*xc}else le=Math.abs(V.x*$.scaleX/de.x),he=Math.abs(V.y*$.scaleY/de.y);k(N)&&(le*=2,he*=2),N.signX!==He&&ae!=="y"&&(N.originX=p[N.originX],le*=-1,N.signX=He),N.signY!==Pe&&ae!=="x"&&(N.originY=p[N.originY],he*=-1,N.signY=Pe)}var Np=$.scaleX,Lp=$.scaleY;return ae?(ae==="x"&&$.set("scaleX",le),ae==="y"&&$.set("scaleY",he)):(!re&&$.set("scaleX",le),!ue&&$.set("scaleY",he)),Np!==$.scaleX||Lp!==$.scaleY}function D(U,N,X,Y){return E(U,N,X,Y)}function R(U,N,X,Y){return E(U,N,X,Y,{by:"x"})}function H(U,N,X,Y){return E(U,N,X,Y,{by:"y"})}function F(U,N,X,Y){return U[N.target.canvas.altActionKey]?s.skewHandlerX(U,N,X,Y):s.scalingY(U,N,X,Y)}function G(U,N,X,Y){return U[N.target.canvas.altActionKey]?s.skewHandlerY(U,N,X,Y):s.scalingX(U,N,X,Y)}function q(U,N,X,Y){var z=N.target,$=oe(N,N.originX,N.originY,X,Y),re=z.strokeWidth/(z.strokeUniform?z.scaleX:1),ue=k(N)?2:1,ae=z.width,V=Math.abs($.x*ue/z.scaleX)-re;return z.set("width",Math.max(V,0)),ae!==V}function ne(U,N,X,Y){var z=N.target,$=X-N.offsetX,re=Y-N.offsetY,ue=!z.get("lockMovementX")&&z.left!==$,ae=!z.get("lockMovementY")&&z.top!==re;return ue&&z.set("left",$),ae&&z.set("top",re),(ue||ae)&&w("moving",J(U,N,X,Y)),ue||ae}s.scaleCursorStyleHandler=j,s.skewCursorStyleHandler=M,s.scaleSkewCursorStyleHandler=W,s.rotationWithSnapping=ie("rotating",Q(P)),s.scalingEqually=ie("scaling",Q(D)),s.scalingX=ie("scaling",Q(R)),s.scalingY=ie("scaling",Q(H)),s.scalingYOrSkewingX=F,s.scalingXOrSkewingY=G,s.changeWidth=ie("resizing",Q(q)),s.skewHandlerX=A,s.skewHandlerY=L,s.dragHandler=ne,s.scaleOrSkewActionName=ee,s.rotationStyleHandler=te,s.fireEvent=w,s.wrapWithFixedAnchor=Q,s.wrapWithFireEvent=ie,s.getLocalPoint=oe,r.controlsUtils=s}(t),function(f){var r=f.fabric||(f.fabric={}),u=r.util.degreesToRadians,d=r.controlsUtils;function s(o,c,g,l,p){l=l||{};var v=this.sizeX||l.cornerSize||p.cornerSize,y=this.sizeY||l.cornerSize||p.cornerSize,x=typeof l.transparentCorners<"u"?l.transparentCorners:p.transparentCorners,w=x?"stroke":"fill",S=!x&&(l.cornerStrokeColor||p.cornerStrokeColor),k=c,b=g,j;o.save(),o.fillStyle=l.cornerColor||p.cornerColor,o.strokeStyle=l.cornerStrokeColor||p.cornerStrokeColor,v>y?(j=v,o.scale(1,y/v),b=g*v/y):y>v?(j=y,o.scale(v/y,1),k=c*y/v):j=v,o.lineWidth=1,o.beginPath(),o.arc(k,b,j/2,0,2*Math.PI,!1),o[w](),S&&o.stroke(),o.restore()}function a(o,c,g,l,p){l=l||{};var v=this.sizeX||l.cornerSize||p.cornerSize,y=this.sizeY||l.cornerSize||p.cornerSize,x=typeof l.transparentCorners<"u"?l.transparentCorners:p.transparentCorners,w=x?"stroke":"fill",S=!x&&(l.cornerStrokeColor||p.cornerStrokeColor),k=v/2,b=y/2;o.save(),o.fillStyle=l.cornerColor||p.cornerColor,o.strokeStyle=l.cornerStrokeColor||p.cornerStrokeColor,o.lineWidth=1,o.translate(c,g),o.rotate(u(p.angle)),o[w+"Rect"](-k,-b,v,y),S&&o.strokeRect(-k,-b,v,y),o.restore()}d.renderCircleControl=s,d.renderSquareControl=a}(t),function(f){var r=f.fabric||(f.fabric={});function u(d){for(var s in d)this[s]=d[s]}r.Control=u,r.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(d,s){return s.cursorStyle},getActionName:function(d,s){return s.actionName},getVisibility:function(d,s){var a=d._controlsVisibility;return a&&typeof a[s]<"u"?a[s]:this.visible},setVisibility:function(d){this.visible=d},positionHandler:function(d,s){var a=r.util.transformPoint({x:this.x*d.x+this.offsetX,y:this.y*d.y+this.offsetY},s);return a},calcCornerCoords:function(d,s,a,o,c){var g,l,p,v,y=c?this.touchSizeX:this.sizeX,x=c?this.touchSizeY:this.sizeY;if(y&&x&&y!==x){var w=Math.atan2(x,y),S=Math.sqrt(y*y+x*x)/2,k=w-r.util.degreesToRadians(d),b=Math.PI/2-w-r.util.degreesToRadians(d);g=S*r.util.cos(k),l=S*r.util.sin(k),p=S*r.util.cos(b),v=S*r.util.sin(b)}else{var j=y&&x?y:s;S=j*.7071067812;var k=r.util.degreesToRadians(45-d);g=p=S*r.util.cos(k),l=v=S*r.util.sin(k)}return{tl:{x:a-v,y:o-p},tr:{x:a+g,y:o-l},bl:{x:a-g,y:o+l},br:{x:a+v,y:o+p}}},render:function(d,s,a,o,c){switch(o=o||{},o.cornerStyle||c.cornerStyle){case"circle":r.controlsUtils.renderCircleControl.call(this,d,s,a,o,c);break;default:r.controlsUtils.renderSquareControl.call(this,d,s,a,o,c)}}}}(t),function(){function f(a,o){var c=a.getAttribute("style"),g=a.getAttribute("offset")||0,l,p,v,y;if(g=parseFloat(g)/(/%$/.test(g)?100:1),g=g<0?0:g>1?1:g,c){var x=c.split(/\s*;\s*/);for(x[x.length-1]===""&&x.pop(),y=x.length;y--;){var w=x[y].split(/\s*:\s*/),S=w[0].trim(),k=w[1].trim();S==="stop-color"?l=k:S==="stop-opacity"&&(v=k)}}return l||(l=a.getAttribute("stop-color")||"rgb(0,0,0)"),v||(v=a.getAttribute("stop-opacity")),l=new e.Color(l),p=l.getAlpha(),v=isNaN(parseFloat(v))?1:parseFloat(v),v*=p*o,{offset:g,color:l.toRgb(),opacity:v}}function r(a){return{x1:a.getAttribute("x1")||0,y1:a.getAttribute("y1")||0,x2:a.getAttribute("x2")||"100%",y2:a.getAttribute("y2")||0}}function u(a){return{x1:a.getAttribute("fx")||a.getAttribute("cx")||"50%",y1:a.getAttribute("fy")||a.getAttribute("cy")||"50%",r1:0,x2:a.getAttribute("cx")||"50%",y2:a.getAttribute("cy")||"50%",r2:a.getAttribute("r")||"50%"}}var d=e.util.object.clone;e.Gradient=e.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(a){a||(a={}),a.coords||(a.coords={});var o,c=this;Object.keys(a).forEach(function(g){c[g]=a[g]}),this.id?this.id+="_"+e.Object.__uid++:this.id=e.Object.__uid++,o={x1:a.coords.x1||0,y1:a.coords.y1||0,x2:a.coords.x2||0,y2:a.coords.y2||0},this.type==="radial"&&(o.r1=a.coords.r1||0,o.r2=a.coords.r2||0),this.coords=o,this.colorStops=a.colorStops.slice()},addColorStop:function(a){for(var o in a){var c=new e.Color(a[o]);this.colorStops.push({offset:parseFloat(o),color:c.toRgb(),opacity:c.getAlpha()})}return this},toObject:function(a){var o={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return e.util.populateWithProperties(this,o,a),o},toSVG:function(a,p){var c=d(this.coords,!0),g,l,p=p||{},v,y,x=d(this.colorStops,!0),w=c.r1>c.r2,S=this.gradientTransform?this.gradientTransform.concat():e.iMatrix.concat(),k=-this.offsetX,b=-this.offsetY,j=!!p.additionalTransform,M=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(x.sort(function(Q,ie){return Q.offset-ie.offset}),M==="objectBoundingBox"?(k/=a.width,b/=a.height):(k+=a.width/2,b+=a.height/2),a.type==="path"&&this.gradientUnits!=="percentage"&&(k-=a.pathOffset.x,b-=a.pathOffset.y),S[4]-=k,S[5]-=b,y='id="SVGID_'+this.id+'" gradientUnits="'+M+'"',y+=' gradientTransform="'+(j?p.additionalTransform+" ":"")+e.util.matrixToSVG(S)+'" ',this.type==="linear"?v=["<linearGradient ",y,' x1="',c.x1,'" y1="',c.y1,'" x2="',c.x2,'" y2="',c.y2,`">
`]:this.type==="radial"&&(v=["<radialGradient ",y,' cx="',w?c.x1:c.x2,'" cy="',w?c.y1:c.y2,'" r="',w?c.r1:c.r2,'" fx="',w?c.x2:c.x1,'" fy="',w?c.y2:c.y1,`">
`]),this.type==="radial"){if(w)for(x=x.concat(),x.reverse(),g=0,l=x.length;g<l;g++)x[g].offset=1-x[g].offset;var W=Math.min(c.r1,c.r2);if(W>0){var ee=Math.max(c.r1,c.r2),te=W/ee;for(g=0,l=x.length;g<l;g++)x[g].offset+=te*(1-x[g].offset)}}for(g=0,l=x.length;g<l;g++){var J=x[g];v.push("<stop ",'offset="',J.offset*100+"%",'" style="stop-color:',J.color,typeof J.opacity<"u"?";stop-opacity: "+J.opacity:";",`"/>
`)}return v.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),v.join("")},toLive:function(a){var o,c=e.util.object.clone(this.coords),g,l;if(this.type){for(this.type==="linear"?o=a.createLinearGradient(c.x1,c.y1,c.x2,c.y2):this.type==="radial"&&(o=a.createRadialGradient(c.x1,c.y1,c.r1,c.x2,c.y2,c.r2)),g=0,l=this.colorStops.length;g<l;g++){var p=this.colorStops[g].color,v=this.colorStops[g].opacity,y=this.colorStops[g].offset;typeof v<"u"&&(p=new e.Color(p).setAlpha(v).toRgba()),o.addColorStop(y,p)}return o}}}),e.util.object.extend(e.Gradient,{fromElement:function(a,o,c,g){var l=parseFloat(c)/(/%$/.test(c)?100:1);l=l<0?0:l>1?1:l,isNaN(l)&&(l=1);var p=a.getElementsByTagName("stop"),v,y=a.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",x=a.getAttribute("gradientTransform")||"",w=[],S,k,b=0,j=0,M;for(a.nodeName==="linearGradient"||a.nodeName==="LINEARGRADIENT"?(v="linear",S=r(a)):(v="radial",S=u(a)),k=p.length;k--;)w.push(f(p[k],l));M=e.parseTransformAttribute(x),s(o,S,g,y),y==="pixels"&&(b=-o.left,j=-o.top);var W=new e.Gradient({id:a.getAttribute("id"),type:v,coords:S,colorStops:w,gradientUnits:y,gradientTransform:M,offsetX:b,offsetY:j});return W}});function s(a,o,c,g){var l,p;Object.keys(o).forEach(function(v){l=o[v],l==="Infinity"?p=1:l==="-Infinity"?p=0:(p=parseFloat(o[v],10),typeof l=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(l)&&(p*=.01,g==="pixels"&&((v==="x1"||v==="x2"||v==="r2")&&(p*=c.viewBoxWidth||c.width),(v==="y1"||v==="y2")&&(p*=c.viewBoxHeight||c.height)))),o[v]=p})}}(),function(){var f=e.util.toFixed;e.Pattern=e.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(r,u){if(r||(r={}),this.id=e.Object.__uid++,this.setOptions(r),!r.source||r.source&&typeof r.source!="string"){u&&u(this);return}else{var d=this;this.source=e.util.createImage(),e.util.loadImage(r.source,function(s,a){d.source=s,u&&u(d,a)},null,this.crossOrigin)}},toObject:function(r){var u=e.Object.NUM_FRACTION_DIGITS,d,s;return typeof this.source.src=="string"?d=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(d=this.source.toDataURL()),s={type:"pattern",source:d,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:f(this.offsetX,u),offsetY:f(this.offsetY,u),patternTransform:this.patternTransform?this.patternTransform.concat():null},e.util.populateWithProperties(this,s,r),s},toSVG:function(r){var u=typeof this.source=="function"?this.source():this.source,d=u.width/r.width,s=u.height/r.height,a=this.offsetX/r.width,o=this.offsetY/r.height,c="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(s=1,o&&(s+=Math.abs(o))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(d=1,a&&(d+=Math.abs(a))),u.src?c=u.src:u.toDataURL&&(c=u.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+a+'" y="'+o+'" width="'+d+'" height="'+s+`">
<image x="0" y="0" width="`+u.width+'" height="'+u.height+'" xlink:href="'+c+`"></image>
</pattern>
`},setOptions:function(r){for(var u in r)this[u]=r[u]},toLive:function(r){var u=this.source;return!u||typeof u.src<"u"&&(!u.complete||u.naturalWidth===0||u.naturalHeight===0)?"":r.createPattern(u,this.repeat)}})}(),function(f){var r=f.fabric||(f.fabric={}),u=r.util.toFixed;if(r.Shadow){r.warn("fabric.Shadow is already defined.");return}r.Shadow=r.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(d){typeof d=="string"&&(d=this._parseShadow(d));for(var s in d)this[s]=d[s];this.id=r.Object.__uid++},_parseShadow:function(d){var s=d.trim(),a=r.Shadow.reOffsetsAndBlur.exec(s)||[],o=s.replace(r.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:o.trim(),offsetX:parseFloat(a[1],10)||0,offsetY:parseFloat(a[2],10)||0,blur:parseFloat(a[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(d){var s=40,a=40,o=r.Object.NUM_FRACTION_DIGITS,c=r.util.rotateVector({x:this.offsetX,y:this.offsetY},r.util.degreesToRadians(-d.angle)),g=20,l=new r.Color(this.color);return d.width&&d.height&&(s=u((Math.abs(c.x)+this.blur)/d.width,o)*100+g,a=u((Math.abs(c.y)+this.blur)/d.height,o)*100+g),d.flipX&&(c.x*=-1),d.flipY&&(c.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+a+'%" height="'+(100+2*a)+'%" x="-'+s+'%" width="'+(100+2*s)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+u(this.blur?this.blur/2:0,o)+`"></feGaussianBlur>
	<feOffset dx="`+u(c.x,o)+'" dy="'+u(c.y,o)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+l.toRgb()+'" flood-opacity="'+l.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var d={},s=r.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(a){this[a]!==s[a]&&(d[a]=this[a])},this),d}}),r.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(t),function(){if(e.StaticCanvas){e.warn("fabric.StaticCanvas is already defined.");return}var f=e.util.object.extend,r=e.util.getElementOffset,u=e.util.removeFromArray,d=e.util.toFixed,s=e.util.transformPoint,a=e.util.invertTransform,o=e.util.getNodeCanvas,c=e.util.createCanvasElement,g=new Error("Could not initialize `canvas` element");e.StaticCanvas=e.util.createClass(e.CommonMethods,{initialize:function(l,p){p||(p={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(l,p)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:e.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(l,p){var v=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(l),this._initOptions(p),this.interactive||this._initRetinaScaling(),p.overlayImage&&this.setOverlayImage(p.overlayImage,v),p.backgroundImage&&this.setBackgroundImage(p.backgroundImage,v),p.backgroundColor&&this.setBackgroundColor(p.backgroundColor,v),p.overlayColor&&this.setOverlayColor(p.overlayColor,v),this.calcOffset()},_isRetinaScaling:function(){return e.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,e.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var l=e.devicePixelRatio;this.__initRetinaScaling(l,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(l,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(l,p,v){p.setAttribute("width",this.width*l),p.setAttribute("height",this.height*l),v.scale(l,l)},calcOffset:function(){return this._offset=r(this.lowerCanvasEl),this},setOverlayImage:function(l,p,v){return this.__setBgOverlayImage("overlayImage",l,p,v)},setBackgroundImage:function(l,p,v){return this.__setBgOverlayImage("backgroundImage",l,p,v)},setOverlayColor:function(l,p){return this.__setBgOverlayColor("overlayColor",l,p)},setBackgroundColor:function(l,p){return this.__setBgOverlayColor("backgroundColor",l,p)},__setBgOverlayImage:function(l,p,v,y){return typeof p=="string"?e.util.loadImage(p,function(x,w){if(x){var S=new e.Image(x,y);this[l]=S,S.canvas=this}v&&v(x,w)},this,y&&y.crossOrigin):(y&&p.setOptions(y),this[l]=p,p&&(p.canvas=this),v&&v(p,!1)),this},__setBgOverlayColor:function(l,p,v){return this[l]=p,this._initGradient(p,l),this._initPattern(p,l,v),this},_createCanvasElement:function(){var l=c();if(!l||(l.style||(l.style={}),typeof l.getContext>"u"))throw g;return l},_initOptions:function(l){var p=this.lowerCanvasEl;this._setOptions(l),this.width=this.width||parseInt(p.width,10)||0,this.height=this.height||parseInt(p.height,10)||0,this.lowerCanvasEl.style&&(p.width=this.width,p.height=this.height,p.style.width=this.width+"px",p.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(l){l&&l.getContext?this.lowerCanvasEl=l:this.lowerCanvasEl=e.util.getById(l)||this._createCanvasElement(),e.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(l,p){return this.setDimensions({width:l},p)},setHeight:function(l,p){return this.setDimensions({height:l},p)},setDimensions:function(l,p){var v;p=p||{};for(var y in l)v=l[y],p.cssOnly||(this._setBackstoreDimension(y,l[y]),v+="px",this.hasLostContext=!0),p.backstoreOnly||this._setCssDimension(y,v);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),p.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(l,p){return this.lowerCanvasEl[l]=p,this.upperCanvasEl&&(this.upperCanvasEl[l]=p),this.cacheCanvasEl&&(this.cacheCanvasEl[l]=p),this[l]=p,this},_setCssDimension:function(l,p){return this.lowerCanvasEl.style[l]=p,this.upperCanvasEl&&(this.upperCanvasEl.style[l]=p),this.wrapperEl&&(this.wrapperEl.style[l]=p),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(l){var p=this._activeObject,v=this.backgroundImage,y=this.overlayImage,x,w,S;for(this.viewportTransform=l,w=0,S=this._objects.length;w<S;w++)x=this._objects[w],x.group||x.setCoords(!0);return p&&p.setCoords(),v&&v.setCoords(!0),y&&y.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(l,p){var v=l,y=this.viewportTransform.slice(0);l=s(l,a(this.viewportTransform)),y[0]=p,y[3]=p;var x=s(l,y);return y[4]+=v.x-x.x,y[5]+=v.y-x.y,this.setViewportTransform(y)},setZoom:function(l){return this.zoomToPoint(new e.Point(0,0),l),this},absolutePan:function(l){var p=this.viewportTransform.slice(0);return p[4]=-l.x,p[5]=-l.y,this.setViewportTransform(p)},relativePan:function(l){return this.absolutePan(new e.Point(-l.x-this.viewportTransform[4],-l.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(l){this.stateful&&l.setupState(),l._set("canvas",this),l.setCoords(),this.fire("object:added",{target:l}),l.fire("added")},_onObjectRemoved:function(l){this.fire("object:removed",{target:l}),l.fire("removed"),delete l.canvas},clearContext:function(l){return l.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var l=this.contextContainer;return this.renderCanvas(l,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=e.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var l={},p=this.width,v=this.height,y=a(this.viewportTransform);return l.tl=s({x:0,y:0},y),l.br=s({x:p,y:v},y),l.tr=new e.Point(l.br.x,l.tl.y),l.bl=new e.Point(l.tl.x,l.br.y),this.vptCoords=l,l},cancelRequestedRender:function(){this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(l,p){var v=this.viewportTransform,y=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(l),e.util.setImageSmoothing(l,this.imageSmoothingEnabled),this.fire("before:render",{ctx:l}),this._renderBackground(l),l.save(),l.transform(v[0],v[1],v[2],v[3],v[4],v[5]),this._renderObjects(l,p),l.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(l),y&&(y.canvas=this,y.shouldCache(),y._transformDone=!0,y.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(l)),this._renderOverlay(l),this.controlsAboveOverlay&&this.interactive&&this.drawControls(l),this.fire("after:render",{ctx:l})},drawClipPathOnCanvas:function(l){var p=this.viewportTransform,v=this.clipPath;l.save(),l.transform(p[0],p[1],p[2],p[3],p[4],p[5]),l.globalCompositeOperation="destination-in",v.transform(l),l.scale(1/v.zoomX,1/v.zoomY),l.drawImage(v._cacheCanvas,-v.cacheTranslationX,-v.cacheTranslationY),l.restore()},_renderObjects:function(l,p){var v,y;for(v=0,y=p.length;v<y;++v)p[v]&&p[v].render(l)},_renderBackgroundOrOverlay:function(l,p){var v=this[p+"Color"],y=this[p+"Image"],x=this.viewportTransform,w=this[p+"Vpt"];if(!(!v&&!y)){if(v){l.save(),l.beginPath(),l.moveTo(0,0),l.lineTo(this.width,0),l.lineTo(this.width,this.height),l.lineTo(0,this.height),l.closePath(),l.fillStyle=v.toLive?v.toLive(l,this):v,w&&l.transform(x[0],x[1],x[2],x[3],x[4],x[5]),l.transform(1,0,0,1,v.offsetX||0,v.offsetY||0);var S=v.gradientTransform||v.patternTransform;S&&l.transform(S[0],S[1],S[2],S[3],S[4],S[5]),l.fill(),l.restore()}if(y){l.save();var k=this.skipOffscreen;this.skipOffscreen=w,w&&l.transform(x[0],x[1],x[2],x[3],x[4],x[5]),y.render(l),this.skipOffscreen=k,l.restore()}}},_renderBackground:function(l){this._renderBackgroundOrOverlay(l,"background")},_renderOverlay:function(l){this._renderBackgroundOrOverlay(l,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new e.Point(this.width/2,this.height/2)},centerObjectH:function(l){return this._centerObject(l,new e.Point(this.getCenterPoint().x,l.getCenterPoint().y))},centerObjectV:function(l){return this._centerObject(l,new e.Point(l.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(l){var p=this.getCenterPoint();return this._centerObject(l,p)},viewportCenterObject:function(l){var p=this.getVpCenter();return this._centerObject(l,p)},viewportCenterObjectH:function(l){var p=this.getVpCenter();return this._centerObject(l,new e.Point(p.x,l.getCenterPoint().y)),this},viewportCenterObjectV:function(l){var p=this.getVpCenter();return this._centerObject(l,new e.Point(l.getCenterPoint().x,p.y))},getVpCenter:function(){var l=this.getCenterPoint(),p=a(this.viewportTransform);return s(l,p)},_centerObject:function(l,p){return l.setPositionByOrigin(p,"center","center"),l.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(l){return this.toDatalessObject(l)},toObject:function(l){return this._toObjectMethod("toObject",l)},toDatalessObject:function(l){return this._toObjectMethod("toDatalessObject",l)},_toObjectMethod:function(l,p){var v=this.clipPath,y={version:e.version,objects:this._toObjects(l,p)};return v&&!v.excludeFromExport&&(y.clipPath=this._toObject(this.clipPath,l,p)),f(y,this.__serializeBgOverlay(l,p)),e.util.populateWithProperties(this,y,p),y},_toObjects:function(l,p){return this._objects.filter(function(v){return!v.excludeFromExport}).map(function(v){return this._toObject(v,l,p)},this)},_toObject:function(l,p,v){var y;this.includeDefaultValues||(y=l.includeDefaultValues,l.includeDefaultValues=!1);var x=l[p](v);return this.includeDefaultValues||(l.includeDefaultValues=y),x},__serializeBgOverlay:function(l,p){var v={},y=this.backgroundImage,x=this.overlayImage,w=this.backgroundColor,S=this.overlayColor;return w&&w.toObject?w.excludeFromExport||(v.background=w.toObject(p)):w&&(v.background=w),S&&S.toObject?S.excludeFromExport||(v.overlay=S.toObject(p)):S&&(v.overlay=S),y&&!y.excludeFromExport&&(v.backgroundImage=this._toObject(y,l,p)),x&&!x.excludeFromExport&&(v.overlayImage=this._toObject(x,l,p)),v},svgViewportTransformation:!0,toSVG:function(l,p){l||(l={}),l.reviver=p;var v=[];return this._setSVGPreamble(v,l),this._setSVGHeader(v,l),this.clipPath&&v.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(v,"background"),this._setSVGBgOverlayImage(v,"backgroundImage",p),this._setSVGObjects(v,p),this.clipPath&&v.push(`</g>
`),this._setSVGBgOverlayColor(v,"overlay"),this._setSVGBgOverlayImage(v,"overlayImage",p),v.push("</svg>"),v.join("")},_setSVGPreamble:function(l,p){p.suppressPreamble||l.push('<?xml version="1.0" encoding="',p.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(l,p){var v=p.width||this.width,y=p.height||this.height,x,w='viewBox="0 0 '+this.width+" "+this.height+'" ',S=e.Object.NUM_FRACTION_DIGITS;p.viewBox?w='viewBox="'+p.viewBox.x+" "+p.viewBox.y+" "+p.viewBox.width+" "+p.viewBox.height+'" ':this.svgViewportTransformation&&(x=this.viewportTransform,w='viewBox="'+d(-x[4]/x[0],S)+" "+d(-x[5]/x[3],S)+" "+d(this.width/x[0],S)+" "+d(this.height/x[3],S)+'" '),l.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',v,'" ','height="',y,'" ',w,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",e.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(p),`</defs>
`)},createSVGClipPathMarkup:function(l){var p=this.clipPath;return p?(p.clipPathId="CLIPPATH_"+e.Object.__uid++,'<clipPath id="'+p.clipPathId+`" >
`+this.clipPath.toClipPathSVG(l.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var l=this,p=["background","overlay"].map(function(v){var y=l[v+"Color"];if(y&&y.toLive){var x=l[v+"Vpt"],w=l.viewportTransform,S={width:l.width/(x?w[0]:1),height:l.height/(x?w[3]:1)};return y.toSVG(S,{additionalTransform:x?e.util.matrixToSVG(w):""})}});return p.join("")},createSVGFontFacesMarkup:function(){var l="",p={},v,y,x,w,S,k,b,j,M,W=e.fontPaths,ee=[];for(this._objects.forEach(function J(Q){ee.push(Q),Q._objects&&Q._objects.forEach(J)}),j=0,M=ee.length;j<M;j++)if(v=ee[j],y=v.fontFamily,!(v.type.indexOf("text")===-1||p[y]||!W[y])&&(p[y]=!0,!!v.styles)){x=v.styles;for(S in x){w=x[S];for(b in w)k=w[b],y=k.fontFamily,!p[y]&&W[y]&&(p[y]=!0)}}for(var te in p)l+=[`		@font-face {
`,"			font-family: '",te,`';
`,"			src: url('",W[te],`');
`,`		}
`].join("");return l&&(l=['	<style type="text/css">',`<![CDATA[
`,l,"]]>",`</style>
`].join("")),l},_setSVGObjects:function(l,p){var v,y,x,w=this._objects;for(y=0,x=w.length;y<x;y++)v=w[y],!v.excludeFromExport&&this._setSVGObject(l,v,p)},_setSVGObject:function(l,p,v){l.push(p.toSVG(v))},_setSVGBgOverlayImage:function(l,p,v){this[p]&&!this[p].excludeFromExport&&this[p].toSVG&&l.push(this[p].toSVG(v))},_setSVGBgOverlayColor:function(l,p){var v=this[p+"Color"],y=this.viewportTransform,x=this.width,w=this.height;if(v)if(v.toLive){var S=v.repeat,k=e.util.invertTransform(y),b=this[p+"Vpt"],j=b?e.util.matrixToSVG(k):"";l.push('<rect transform="'+j+" translate(",x/2,",",w/2,')"',' x="',v.offsetX-x/2,'" y="',v.offsetY-w/2,'" ','width="',S==="repeat-y"||S==="no-repeat"?v.source.width:x,'" height="',S==="repeat-x"||S==="no-repeat"?v.source.height:w,'" fill="url(#SVGID_'+v.id+')"',`></rect>
`)}else l.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',v,'"',`></rect>
`)},sendToBack:function(l){if(!l)return this;var p=this._activeObject,v,y,x;if(l===p&&l.type==="activeSelection")for(x=p._objects,v=x.length;v--;)y=x[v],u(this._objects,y),this._objects.unshift(y);else u(this._objects,l),this._objects.unshift(l);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(l){if(!l)return this;var p=this._activeObject,v,y,x;if(l===p&&l.type==="activeSelection")for(x=p._objects,v=0;v<x.length;v++)y=x[v],u(this._objects,y),this._objects.push(y);else u(this._objects,l),this._objects.push(l);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(l,p){if(!l)return this;var v=this._activeObject,y,x,w,S,k,b=0;if(l===v&&l.type==="activeSelection")for(k=v._objects,y=0;y<k.length;y++)x=k[y],w=this._objects.indexOf(x),w>0+b&&(S=w-1,u(this._objects,x),this._objects.splice(S,0,x)),b++;else w=this._objects.indexOf(l),w!==0&&(S=this._findNewLowerIndex(l,w,p),u(this._objects,l),this._objects.splice(S,0,l));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(l,p,v){var y,x;if(v)for(y=p,x=p-1;x>=0;--x){var w=l.intersectsWithObject(this._objects[x])||l.isContainedWithinObject(this._objects[x])||this._objects[x].isContainedWithinObject(l);if(w){y=x;break}}else y=p-1;return y},bringForward:function(l,p){if(!l)return this;var v=this._activeObject,y,x,w,S,k,b=0;if(l===v&&l.type==="activeSelection")for(k=v._objects,y=k.length;y--;)x=k[y],w=this._objects.indexOf(x),w<this._objects.length-1-b&&(S=w+1,u(this._objects,x),this._objects.splice(S,0,x)),b++;else w=this._objects.indexOf(l),w!==this._objects.length-1&&(S=this._findNewUpperIndex(l,w,p),u(this._objects,l),this._objects.splice(S,0,l));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(l,p,v){var y,x,w;if(v)for(y=p,x=p+1,w=this._objects.length;x<w;++x){var S=l.intersectsWithObject(this._objects[x])||l.isContainedWithinObject(this._objects[x])||this._objects[x].isContainedWithinObject(l);if(S){y=x;break}}else y=p+1;return y},moveTo:function(l,p){return u(this._objects,l),this._objects.splice(p,0,l),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(l){l.dispose&&l.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),e.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),e.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),f(e.StaticCanvas.prototype,e.Observable),f(e.StaticCanvas.prototype,e.Collection),f(e.StaticCanvas.prototype,e.DataURLExporter),f(e.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(l){var p=c();if(!p||!p.getContext)return null;var v=p.getContext("2d");if(!v)return null;switch(l){case"setLineDash":return typeof v.setLineDash<"u";default:return null}}}),e.StaticCanvas.prototype.toJSON=e.StaticCanvas.prototype.toObject,e.isLikelyNode&&(e.StaticCanvas.prototype.createPNGStream=function(){var l=o(this.lowerCanvasEl);return l&&l.createPNGStream()},e.StaticCanvas.prototype.createJPEGStream=function(l){var p=o(this.lowerCanvasEl);return p&&p.createJPEGStream(l)})}(),e.BaseBrush=e.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(f){f.strokeStyle=this.color,f.lineWidth=this.width,f.lineCap=this.strokeLineCap,f.miterLimit=this.strokeMiterLimit,f.lineJoin=this.strokeLineJoin,f.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(f){var r=this.canvas.viewportTransform;f.save(),f.transform(r[0],r[1],r[2],r[3],r[4],r[5])},_setShadow:function(){if(this.shadow){var f=this.canvas,r=this.shadow,u=f.contextTop,d=f.getZoom();f&&f._isRetinaScaling()&&(d*=e.devicePixelRatio),u.shadowColor=r.color,u.shadowBlur=r.blur*d,u.shadowOffsetX=r.offsetX*d,u.shadowOffsetY=r.offsetY*d}},needsFullRender:function(){var f=new e.Color(this.color);return f.getAlpha()<1||!!this.shadow},_resetShadow:function(){var f=this.canvas.contextTop;f.shadowColor="",f.shadowBlur=f.shadowOffsetX=f.shadowOffsetY=0},_isOutSideCanvas:function(f){return f.x<0||f.x>this.canvas.getWidth()||f.y<0||f.y>this.canvas.getHeight()}}),function(){e.PencilBrush=e.util.createClass(e.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(f){this.canvas=f,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(f,r,u){var d=r.midPointFrom(u);return f.quadraticCurveTo(r.x,r.y,d.x,d.y),d},onMouseDown:function(f,r){this.canvas._isMainEvent(r.e)&&(this.drawStraightLine=r.e[this.straightLineKey],this._prepareForDrawing(f),this._captureDrawingPath(f),this._render())},onMouseMove:function(f,r){if(this.canvas._isMainEvent(r.e)&&(this.drawStraightLine=r.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(f))&&this._captureDrawingPath(f)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var u=this._points,d=u.length,s=this.canvas.contextTop;this._saveAndTransform(s),this.oldEnd&&(s.beginPath(),s.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(s,u[d-2],u[d-1],!0),s.stroke(),s.restore()}},onMouseUp:function(f){return this.canvas._isMainEvent(f.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(f){var r=new e.Point(f.x,f.y);this._reset(),this._addPoint(r),this.canvas.contextTop.moveTo(r.x,r.y)},_addPoint:function(f){return this._points.length>1&&f.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(f),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(f){var r=new e.Point(f.x,f.y);return this._addPoint(r)},_render:function(f){var r,u,d=this._points[0],s=this._points[1];if(f=f||this.canvas.contextTop,this._saveAndTransform(f),f.beginPath(),this._points.length===2&&d.x===s.x&&d.y===s.y){var a=this.width/1e3;d=new e.Point(d.x,d.y),s=new e.Point(s.x,s.y),d.x-=a,s.x+=a}for(f.moveTo(d.x,d.y),r=1,u=this._points.length;r<u;r++)this._drawSegment(f,d,s),d=this._points[r],s=this._points[r+1];f.lineTo(d.x,d.y),f.stroke(),f.restore()},convertPointsToSVGPath:function(f){var r=this.width/1e3;return e.util.getSmoothPathFromPoints(f,r)},_isEmptySVGPath:function(f){var r=e.util.joinPath(f);return r==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(f){var r=new e.Path(f,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,r.shadow=new e.Shadow(this.shadow)),r},decimatePoints:function(f,r){if(f.length<=2)return f;var u=this.canvas.getZoom(),d=Math.pow(r/u,2),s,a=f.length-1,o=f[0],c=[o],g;for(s=1;s<a-1;s++)g=Math.pow(o.x-f[s].x,2)+Math.pow(o.y-f[s].y,2),g>=d&&(o=f[s],c.push(o));return c.push(f[a]),c},_finalizeAndAddPath:function(){var f=this.canvas.contextTop;f.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var r=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(r)){this.canvas.requestRenderAll();return}var u=this.createPath(r);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:u}),this.canvas.add(u),this.canvas.requestRenderAll(),u.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:u})}})}(),e.CircleBrush=e.util.createClass(e.BaseBrush,{width:10,initialize:function(f){this.canvas=f,this.points=[]},drawDot:function(f){var r=this.addPoint(f),u=this.canvas.contextTop;this._saveAndTransform(u),this.dot(u,r),u.restore()},dot:function(f,r){f.fillStyle=r.fill,f.beginPath(),f.arc(r.x,r.y,r.radius,0,Math.PI*2,!1),f.closePath(),f.fill()},onMouseDown:function(f){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(f)},_render:function(){var f=this.canvas.contextTop,r,u,d=this.points;for(this._saveAndTransform(f),r=0,u=d.length;r<u;r++)this.dot(f,d[r]);f.restore()},onMouseMove:function(f){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(f)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(f),this._render()):this.drawDot(f))},onMouseUp:function(){var f=this.canvas.renderOnAddRemove,r,u;this.canvas.renderOnAddRemove=!1;var d=[];for(r=0,u=this.points.length;r<u;r++){var s=this.points[r],a=new e.Circle({radius:s.radius,left:s.x,top:s.y,originX:"center",originY:"center",fill:s.fill});this.shadow&&(a.shadow=new e.Shadow(this.shadow)),d.push(a)}var o=new e.Group(d);o.canvas=this.canvas,this.canvas.fire("before:path:created",{path:o}),this.canvas.add(o),this.canvas.fire("path:created",{path:o}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=f,this.canvas.requestRenderAll()},addPoint:function(f){var r=new e.Point(f.x,f.y),u=e.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,d=new e.Color(this.color).setAlpha(e.util.getRandomInt(0,100)/100).toRgba();return r.radius=u,r.fill=d,this.points.push(r),r}}),e.SprayBrush=e.util.createClass(e.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(f){this.canvas=f,this.sprayChunks=[]},onMouseDown:function(f){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(f),this.render(this.sprayChunkPoints)},onMouseMove:function(f){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(f)||(this.addSprayChunk(f),this.render(this.sprayChunkPoints))},onMouseUp:function(){var f=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var r=[],u=0,d=this.sprayChunks.length;u<d;u++)for(var s=this.sprayChunks[u],a=0,o=s.length;a<o;a++){var c=new e.Rect({width:s[a].width,height:s[a].width,left:s[a].x+1,top:s[a].y+1,originX:"center",originY:"center",fill:this.color});r.push(c)}this.optimizeOverlapping&&(r=this._getOptimizedRects(r));var g=new e.Group(r);this.shadow&&g.set("shadow",new e.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:g}),this.canvas.add(g),this.canvas.fire("path:created",{path:g}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=f,this.canvas.requestRenderAll()},_getOptimizedRects:function(f){var r={},u,d,s;for(d=0,s=f.length;d<s;d++)u=f[d].left+""+f[d].top,r[u]||(r[u]=f[d]);var a=[];for(u in r)a.push(r[u]);return a},render:function(f){var r=this.canvas.contextTop,u,d;for(r.fillStyle=this.color,this._saveAndTransform(r),u=0,d=f.length;u<d;u++){var s=f[u];typeof s.opacity<"u"&&(r.globalAlpha=s.opacity),r.fillRect(s.x,s.y,s.width,s.width)}r.restore()},_render:function(){var f=this.canvas.contextTop,r,u;for(f.fillStyle=this.color,this._saveAndTransform(f),r=0,u=this.sprayChunks.length;r<u;r++)this.render(this.sprayChunks[r]);f.restore()},addSprayChunk:function(f){this.sprayChunkPoints=[];var r,u,d,s=this.width/2,a;for(a=0;a<this.density;a++){r=e.util.getRandomInt(f.x-s,f.x+s),u=e.util.getRandomInt(f.y-s,f.y+s),this.dotWidthVariance?d=e.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):d=this.dotWidth;var o=new e.Point(r,u);o.width=d,this.randomOpacity&&(o.opacity=e.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(o)}this.sprayChunks.push(this.sprayChunkPoints)}}),e.PatternBrush=e.util.createClass(e.PencilBrush,{getPatternSrc:function(){var f=20,r=5,u=e.util.createCanvasElement(),d=u.getContext("2d");return u.width=u.height=f+r,d.fillStyle=this.color,d.beginPath(),d.arc(f/2,f/2,f/2,0,Math.PI*2,!1),d.closePath(),d.fill(),u},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(f){return f.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(f){this.callSuper("_setBrushStyles",f),f.strokeStyle=this.getPattern(f)},createPath:function(f){var r=this.callSuper("createPath",f),u=r._getLeftTopCoords().scalarAdd(r.strokeWidth/2);return r.stroke=new e.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-u.x,offsetY:-u.y}),r}}),function(){var f=e.util.getPointer,r=e.util.degreesToRadians,u=e.util.isTouchEvent;e.Canvas=e.util.createClass(e.StaticCanvas,{initialize:function(s,a){a||(a={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(s,a),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=e.PencilBrush&&new e.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var s=this.getActiveObjects(),a,o,c;if(s.length>0&&!this.preserveObjectStacking){o=[],c=[];for(var g=0,l=this._objects.length;g<l;g++)a=this._objects[g],s.indexOf(a)===-1?o.push(a):c.push(a);s.length>1&&(this._activeObject._objects=c),o.push.apply(o,c)}else o=this._objects;return o},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var s=this.contextContainer;return this.renderCanvas(s,this._chooseObjectsToRender()),this},renderTopLayer:function(s){s.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(s),this.contextTopDirty=!0),s.restore()},renderTop:function(){var s=this.contextTop;return this.clearContext(s),this.renderTopLayer(s),this.fire("after:render"),this},_normalizePointer:function(s,a){var o=s.calcTransformMatrix(),c=e.util.invertTransform(o),g=this.restorePointerVpt(a);return e.util.transformPoint(g,c)},isTargetTransparent:function(s,a,o){if(s.shouldCache()&&s._cacheCanvas&&s!==this._activeObject){var c=this._normalizePointer(s,{x:a,y:o}),g=Math.max(s.cacheTranslationX+c.x*s.zoomX,0),l=Math.max(s.cacheTranslationY+c.y*s.zoomY,0),x=e.util.isTransparent(s._cacheContext,Math.round(g),Math.round(l),this.targetFindTolerance);return x}var p=this.contextCache,v=s.selectionBackgroundColor,y=this.viewportTransform;s.selectionBackgroundColor="",this.clearContext(p),p.save(),p.transform(y[0],y[1],y[2],y[3],y[4],y[5]),s.render(p),p.restore(),s.selectionBackgroundColor=v;var x=e.util.isTransparent(p,a,o,this.targetFindTolerance);return x},_isSelectionKeyPressed:function(s){var a=!1;return Array.isArray(this.selectionKey)?a=!!this.selectionKey.find(function(o){return s[o]===!0}):a=s[this.selectionKey],a},_shouldClearSelection:function(s,a){var o=this.getActiveObjects(),c=this._activeObject;return!a||a&&c&&o.length>1&&o.indexOf(a)===-1&&c!==a&&!this._isSelectionKeyPressed(s)||a&&!a.evented||a&&!a.selectable&&c&&c!==a},_shouldCenterTransform:function(s,a,o){if(s){var c;return a==="scale"||a==="scaleX"||a==="scaleY"||a==="resizing"?c=this.centeredScaling||s.centeredScaling:a==="rotate"&&(c=this.centeredRotation||s.centeredRotation),c?!o:o}},_getOriginFromCorner:function(s,a){var o={x:s.originX,y:s.originY};return a==="ml"||a==="tl"||a==="bl"?o.x="right":(a==="mr"||a==="tr"||a==="br")&&(o.x="left"),a==="tl"||a==="mt"||a==="tr"?o.y="bottom":(a==="bl"||a==="mb"||a==="br")&&(o.y="top"),o},_getActionFromCorner:function(s,a,o,c){if(!a||!s)return"drag";var g=c.controls[a];return g.getActionName(o,g,c)},_setupCurrentTransform:function(s,a,o){if(a){var c=this.getPointer(s),g=a.__corner,l=a.controls[g],p=o&&g?l.getActionHandler(s,a,l):e.controlsUtils.dragHandler,v=this._getActionFromCorner(o,g,s,a),y=this._getOriginFromCorner(a,g),x=s[this.centeredKey],w={target:a,action:v,actionHandler:p,corner:g,scaleX:a.scaleX,scaleY:a.scaleY,skewX:a.skewX,skewY:a.skewY,offsetX:c.x-a.left,offsetY:c.y-a.top,originX:y.x,originY:y.y,ex:c.x,ey:c.y,lastX:c.x,lastY:c.y,theta:r(a.angle),width:a.width*a.scaleX,shiftKey:s.shiftKey,altKey:x,original:e.util.saveObjectTransform(a)};this._shouldCenterTransform(a,v,x)&&(w.originX="center",w.originY="center"),w.original.originX=y.x,w.original.originY=y.y,this._currentTransform=w,this._beforeTransform(s)}},setCursor:function(s){this.upperCanvasEl.style.cursor=s},_drawSelection:function(s){var a=this._groupSelector,o=new e.Point(a.ex,a.ey),c=e.util.transformPoint(o,this.viewportTransform),g=new e.Point(a.ex+a.left,a.ey+a.top),l=e.util.transformPoint(g,this.viewportTransform),p=Math.min(c.x,l.x),v=Math.min(c.y,l.y),y=Math.max(c.x,l.x),x=Math.max(c.y,l.y),w=this.selectionLineWidth/2;this.selectionColor&&(s.fillStyle=this.selectionColor,s.fillRect(p,v,y-p,x-v)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(s.lineWidth=this.selectionLineWidth,s.strokeStyle=this.selectionBorderColor,p+=w,v+=w,y-=w,x-=w,e.Object.prototype._setLineDash.call(this,s,this.selectionDashArray),s.strokeRect(p,v,y-p,x-v))},findTarget:function(s,a){if(!this.skipTargetFind){var o=!0,c=this.getPointer(s,o),g=this._activeObject,l=this.getActiveObjects(),p,v,y=u(s),x=l.length>1&&!a||l.length===1;if(this.targets=[],x&&g._findTargetCorner(c,y)||l.length>1&&!a&&g===this._searchPossibleTargets([g],c))return g;if(l.length===1&&g===this._searchPossibleTargets([g],c))if(this.preserveObjectStacking)p=g,v=this.targets,this.targets=[];else return g;var w=this._searchPossibleTargets(this._objects,c);return s[this.altSelectionKey]&&w&&p&&w!==p&&(w=p,this.targets=v),w}},_checkTarget:function(s,a,o){if(a&&a.visible&&a.evented&&a.containsPoint(s))if((this.perPixelTargetFind||a.perPixelTargetFind)&&!a.isEditing){var c=this.isTargetTransparent(a,o.x,o.y);if(!c)return!0}else return!0},_searchPossibleTargets:function(s,a){for(var o,c=s.length,g;c--;){var l=s[c],p=l.group?this._normalizePointer(l.group,a):a;if(this._checkTarget(p,l,a)){o=s[c],o.subTargetCheck&&o instanceof e.Group&&(g=this._searchPossibleTargets(o._objects,a),g&&this.targets.push(g));break}}return o},restorePointerVpt:function(s){return e.util.transformPoint(s,e.util.invertTransform(this.viewportTransform))},getPointer:function(s,a){if(this._absolutePointer&&!a)return this._absolutePointer;if(this._pointer&&a)return this._pointer;var o=f(s),c=this.upperCanvasEl,g=c.getBoundingClientRect(),l=g.width||0,p=g.height||0,v;(!l||!p)&&("top"in g&&"bottom"in g&&(p=Math.abs(g.top-g.bottom)),"right"in g&&"left"in g&&(l=Math.abs(g.right-g.left))),this.calcOffset(),o.x=o.x-this._offset.left,o.y=o.y-this._offset.top,a||(o=this.restorePointerVpt(o));var y=this.getRetinaScaling();return y!==1&&(o.x/=y,o.y/=y),l===0||p===0?v={width:1,height:1}:v={width:c.width/l,height:c.height/p},{x:o.x*v.width,y:o.y*v.height}},_createUpperCanvas:function(){var s=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),a=this.lowerCanvasEl,o=this.upperCanvasEl;o?o.className="":(o=this._createCanvasElement(),this.upperCanvasEl=o),e.util.addClass(o,"upper-canvas "+s),this.wrapperEl.appendChild(o),this._copyCanvasStyle(a,o),this._applyCanvasStyle(o),this.contextTop=o.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=e.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),e.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),e.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(s){var a=this.width||s.width,o=this.height||s.height;e.util.setStyle(s,{position:"absolute",width:a+"px",height:o+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),s.width=a,s.height=o,e.util.makeElementUnselectable(s)},_copyCanvasStyle:function(s,a){a.style.cssText=s.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var s=this._activeObject;return s?s.type==="activeSelection"&&s._objects?s._objects.slice(0):[s]:[]},_onObjectRemoved:function(s){s===this._activeObject&&(this.fire("before:selection:cleared",{target:s}),this._discardActiveObject(),this.fire("selection:cleared",{target:s}),s.fire("deselected")),s===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",s)},_fireSelectionEvents:function(s,a){var o=!1,c=this.getActiveObjects(),g=[],l=[];s.forEach(function(p){c.indexOf(p)===-1&&(o=!0,p.fire("deselected",{e:a,target:p}),l.push(p))}),c.forEach(function(p){s.indexOf(p)===-1&&(o=!0,p.fire("selected",{e:a,target:p}),g.push(p))}),s.length>0&&c.length>0?o&&this.fire("selection:updated",{e:a,selected:g,deselected:l}):c.length>0?this.fire("selection:created",{e:a,selected:g}):s.length>0&&this.fire("selection:cleared",{e:a,deselected:l})},setActiveObject:function(s,a){var o=this.getActiveObjects();return this._setActiveObject(s,a),this._fireSelectionEvents(o,a),this},_setActiveObject:function(s,a){return this._activeObject===s||!this._discardActiveObject(a,s)||s.onSelect({e:a})?!1:(this._activeObject=s,!0)},_discardActiveObject:function(s,a){var o=this._activeObject;if(o){if(o.onDeselect({e:s,object:a}))return!1;this._activeObject=null}return!0},discardActiveObject:function(s){var a=this.getActiveObjects(),o=this.getActiveObject();return a.length&&this.fire("before:selection:cleared",{target:o,e:s}),this._discardActiveObject(s),this._fireSelectionEvents(a,s),this},dispose:function(){var s=this.wrapperEl;return this.removeListeners(),s.removeChild(this.upperCanvasEl),s.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(a){e.util.cleanUpJsdomNode(this[a]),this[a]=void 0}).bind(this)),s.parentNode&&s.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,e.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(s){var a=this._activeObject;a&&a._renderControls(s)},_toObject:function(s,a,o){var c=this._realizeGroupTransformOnObject(s),g=this.callSuper("_toObject",s,a,o);return this._unwindGroupTransformOnObject(s,c),g},_realizeGroupTransformOnObject:function(s){if(s.group&&s.group.type==="activeSelection"&&this._activeObject===s.group){var a=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],o={};return a.forEach(function(c){o[c]=s[c]}),e.util.addTransformToObject(s,this._activeObject.calcOwnMatrix()),o}else return null},_unwindGroupTransformOnObject:function(s,a){a&&s.set(a)},_setSVGObject:function(s,a,o){var c=this._realizeGroupTransformOnObject(a);this.callSuper("_setSVGObject",s,a,o),this._unwindGroupTransformOnObject(a,c)},setViewportTransform:function(s){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),e.StaticCanvas.prototype.setViewportTransform.call(this,s)}});for(var d in e.StaticCanvas)d!=="prototype"&&(e.Canvas[d]=e.StaticCanvas[d])}(),function(){var f=e.util.addListener,r=e.util.removeListener,u=3,d=2,s=1,a={passive:!1};function o(c,g){return c.button&&c.button===g-1}e.util.object.extend(e.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(f,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(c,g){var l=this.upperCanvasEl,p=this._getEventPrefix();c(e.window,"resize",this._onResize),c(l,p+"down",this._onMouseDown),c(l,p+"move",this._onMouseMove,a),c(l,p+"out",this._onMouseOut),c(l,p+"enter",this._onMouseEnter),c(l,"wheel",this._onMouseWheel),c(l,"contextmenu",this._onContextMenu),c(l,"dblclick",this._onDoubleClick),c(l,"dragover",this._onDragOver),c(l,"dragenter",this._onDragEnter),c(l,"dragleave",this._onDragLeave),c(l,"drop",this._onDrop),this.enablePointerEvents||c(l,"touchstart",this._onTouchStart,a),typeof eventjs<"u"&&g in eventjs&&(eventjs[g](l,"gesture",this._onGesture),eventjs[g](l,"drag",this._onDrag),eventjs[g](l,"orientation",this._onOrientationChange),eventjs[g](l,"shake",this._onShake),eventjs[g](l,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(r,"remove");var c=this._getEventPrefix();r(e.document,c+"up",this._onMouseUp),r(e.document,"touchend",this._onTouchEnd,a),r(e.document,c+"move",this._onMouseMove,a),r(e.document,"touchmove",this._onMouseMove,a)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(c,g){this.__onTransformGesture&&this.__onTransformGesture(c,g)},_onDrag:function(c,g){this.__onDrag&&this.__onDrag(c,g)},_onMouseWheel:function(c){this.__onMouseWheel(c)},_onMouseOut:function(c){var g=this._hoveredTarget;this.fire("mouse:out",{target:g,e:c}),this._hoveredTarget=null,g&&g.fire("mouseout",{e:c});var l=this;this._hoveredTargets.forEach(function(p){l.fire("mouse:out",{target:p,e:c}),p&&p.fire("mouseout",{e:c})}),this._hoveredTargets=[]},_onMouseEnter:function(c){!this._currentTransform&&!this.findTarget(c)&&(this.fire("mouse:over",{target:null,e:c}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(c,g){this.__onOrientationChange&&this.__onOrientationChange(c,g)},_onShake:function(c,g){this.__onShake&&this.__onShake(c,g)},_onLongPress:function(c,g){this.__onLongPress&&this.__onLongPress(c,g)},_onDragOver:function(c){c.preventDefault();var g=this._simpleEventHandler("dragover",c);this._fireEnterLeaveEvents(g,c)},_onDrop:function(c){return this._simpleEventHandler("drop:before",c),this._simpleEventHandler("drop",c)},_onContextMenu:function(c){return this.stopContextMenu&&(c.stopPropagation(),c.preventDefault()),!1},_onDoubleClick:function(c){this._cacheTransformEventData(c),this._handleEvent(c,"dblclick"),this._resetTransformEventData(c)},getPointerId:function(c){var g=c.changedTouches;return g?g[0]&&g[0].identifier:this.enablePointerEvents?c.pointerId:-1},_isMainEvent:function(c){return c.isPrimary===!0?!0:c.isPrimary===!1?!1:c.type==="touchend"&&c.touches.length===0?!0:c.changedTouches?c.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(c){c.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(c)),this.__onMouseDown(c),this._resetTransformEventData();var g=this.upperCanvasEl,l=this._getEventPrefix();f(e.document,"touchend",this._onTouchEnd,a),f(e.document,"touchmove",this._onMouseMove,a),r(g,l+"down",this._onMouseDown)},_onMouseDown:function(c){this.__onMouseDown(c),this._resetTransformEventData();var g=this.upperCanvasEl,l=this._getEventPrefix();r(g,l+"move",this._onMouseMove,a),f(e.document,l+"up",this._onMouseUp),f(e.document,l+"move",this._onMouseMove,a)},_onTouchEnd:function(c){if(!(c.touches.length>0)){this.__onMouseUp(c),this._resetTransformEventData(),this.mainTouchId=null;var g=this._getEventPrefix();r(e.document,"touchend",this._onTouchEnd,a),r(e.document,"touchmove",this._onMouseMove,a);var l=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){f(l.upperCanvasEl,g+"down",l._onMouseDown),l._willAddMouseDown=0},400)}},_onMouseUp:function(c){this.__onMouseUp(c),this._resetTransformEventData();var g=this.upperCanvasEl,l=this._getEventPrefix();this._isMainEvent(c)&&(r(e.document,l+"up",this._onMouseUp),r(e.document,l+"move",this._onMouseMove,a),f(g,l+"move",this._onMouseMove,a))},_onMouseMove:function(c){!this.allowTouchScrolling&&c.preventDefault&&c.preventDefault(),this.__onMouseMove(c)},_onResize:function(){this.calcOffset()},_shouldRender:function(c){var g=this._activeObject;return!!g!=!!c||g&&c&&g!==c?!0:(g&&g.isEditing,!1)},__onMouseUp:function(c){var g,l=this._currentTransform,p=this._groupSelector,v=!1,y=!p||p.left===0&&p.top===0;if(this._cacheTransformEventData(c),g=this._target,this._handleEvent(c,"up:before"),o(c,u)){this.fireRightClick&&this._handleEvent(c,"up",u,y);return}if(o(c,d)){this.fireMiddleClick&&this._handleEvent(c,"up",d,y),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(c);return}if(this._isMainEvent(c)){if(l&&(this._finalizeCurrentTransform(c),v=l.actionPerformed),!y){var x=g===this._activeObject;this._maybeGroupObjects(c),v||(v=this._shouldRender(g)||!x&&g===this._activeObject)}var w,S;if(g){if(w=g._findTargetCorner(this.getPointer(c,!0),e.util.isTouchEvent(c)),g.selectable&&g!==this._activeObject&&g.activeOn==="up")this.setActiveObject(g,c),v=!0;else{var k=g.controls[w],b=k&&k.getMouseUpHandler(c,g,k);b&&(S=this.getPointer(c),b(c,l,S.x,S.y))}g.isMoving=!1}if(l&&(l.target!==g||l.corner!==w)){var j=l.target&&l.target.controls[l.corner],M=j&&j.getMouseUpHandler(c,g,k);S=S||this.getPointer(c),M&&M(c,l,S.x,S.y)}this._setCursorFromEvent(c,g),this._handleEvent(c,"up",s,y),this._groupSelector=null,this._currentTransform=null,g&&(g.__corner=0),v?this.requestRenderAll():y||this.renderTop()}},_simpleEventHandler:function(c,g){var l=this.findTarget(g),p=this.targets,v={e:g,target:l,subTargets:p};if(this.fire(c,v),l&&l.fire(c,v),!p)return l;for(var y=0;y<p.length;y++)p[y].fire(c,v);return l},_handleEvent:function(c,g,l,p){var v=this._target,y=this.targets||[],x={e:c,target:v,subTargets:y,button:l||s,isClick:p||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};g==="up"&&(x.currentTarget=this.findTarget(c),x.currentSubTargets=this.targets),this.fire("mouse:"+g,x),v&&v.fire("mouse"+g,x);for(var w=0;w<y.length;w++)y[w].fire("mouse"+g,x)},_finalizeCurrentTransform:function(c){var g=this._currentTransform,l=g.target,p={e:c,target:l,transform:g,action:g.action};l._scaling&&(l._scaling=!1),l.setCoords(),(g.actionPerformed||this.stateful&&l.hasStateChanged())&&this._fire("modified",p)},_onMouseDownInDrawingMode:function(c){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(c).requestRenderAll();var g=this.getPointer(c);this.freeDrawingBrush.onMouseDown(g,{e:c,pointer:g}),this._handleEvent(c,"down")},_onMouseMoveInDrawingMode:function(c){if(this._isCurrentlyDrawing){var g=this.getPointer(c);this.freeDrawingBrush.onMouseMove(g,{e:c,pointer:g})}this.setCursor(this.freeDrawingCursor),this._handleEvent(c,"move")},_onMouseUpInDrawingMode:function(c){var g=this.getPointer(c);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:c,pointer:g}),this._handleEvent(c,"up")},__onMouseDown:function(c){this._cacheTransformEventData(c),this._handleEvent(c,"down:before");var g=this._target;if(o(c,u)){this.fireRightClick&&this._handleEvent(c,"down",u);return}if(o(c,d)){this.fireMiddleClick&&this._handleEvent(c,"down",d);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(c);return}if(this._isMainEvent(c)&&!this._currentTransform){var l=this._pointer;this._previousPointer=l;var p=this._shouldRender(g),v=this._shouldGroup(c,g);if(this._shouldClearSelection(c,g)?this.discardActiveObject(c):v&&(this._handleGrouping(c,g),g=this._activeObject),this.selection&&(!g||!g.selectable&&!g.isEditing&&g!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),g){var y=g===this._activeObject;g.selectable&&g.activeOn==="down"&&this.setActiveObject(g,c);var x=g._findTargetCorner(this.getPointer(c,!0),e.util.isTouchEvent(c));if(g.__corner=x,g===this._activeObject&&(x||!v)){this._setupCurrentTransform(c,g,y);var w=g.controls[x],l=this.getPointer(c),S=w&&w.getMouseDownHandler(c,g,w);S&&S(c,this._currentTransform,l.x,l.y)}}this._handleEvent(c,"down"),(p||v)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(c){this._resetTransformEventData(),this._pointer=this.getPointer(c,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(c)||null},_beforeTransform:function(c){var g=this._currentTransform;this.stateful&&g.target.saveState(),this.fire("before:transform",{e:c,transform:g})},__onMouseMove:function(c){this._handleEvent(c,"move:before"),this._cacheTransformEventData(c);var g,l;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(c);return}if(this._isMainEvent(c)){var p=this._groupSelector;p?(l=this._absolutePointer,p.left=l.x-p.ex,p.top=l.y-p.ey,this.renderTop()):this._currentTransform?this._transformObject(c):(g=this.findTarget(c)||null,this._setCursorFromEvent(c,g),this._fireOverOutEvents(g,c)),this._handleEvent(c,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(c,g){var l=this._hoveredTarget,p=this._hoveredTargets,v=this.targets,y=Math.max(p.length,v.length);this.fireSyntheticInOutEvents(c,g,{oldTarget:l,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var x=0;x<y;x++)this.fireSyntheticInOutEvents(v[x],g,{oldTarget:p[x],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=c,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(c,g){var l=this._draggedoverTarget,p=this._hoveredTargets,v=this.targets,y=Math.max(p.length,v.length);this.fireSyntheticInOutEvents(c,g,{oldTarget:l,evtOut:"dragleave",evtIn:"dragenter"});for(var x=0;x<y;x++)this.fireSyntheticInOutEvents(v[x],g,{oldTarget:p[x],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=c},fireSyntheticInOutEvents:function(c,g,l){var p,v,y=l.oldTarget,x,w,S=y!==c,k=l.canvasEvtIn,b=l.canvasEvtOut;S&&(p={e:g,target:c,previousTarget:y},v={e:g,target:y,nextTarget:c}),w=c&&S,x=y&&S,x&&(b&&this.fire(b,v),y.fire(l.evtOut,v)),w&&(k&&this.fire(k,p),c.fire(l.evtIn,p))},__onMouseWheel:function(c){this._cacheTransformEventData(c),this._handleEvent(c,"wheel"),this._resetTransformEventData()},_transformObject:function(c){var g=this.getPointer(c),l=this._currentTransform;l.reset=!1,l.shiftKey=c.shiftKey,l.altKey=c[this.centeredKey],this._performTransformAction(c,l,g),l.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(c,g,l){var p=l.x,v=l.y,y=g.action,x=!1,w=g.actionHandler;w&&(x=w(c,g,p,v)),y==="drag"&&x&&(g.target.isMoving=!0,this.setCursor(g.target.moveCursor||this.moveCursor)),g.actionPerformed=g.actionPerformed||x},_fire:e.controlsUtils.fireEvent,_setCursorFromEvent:function(c,g){if(!g)return this.setCursor(this.defaultCursor),!1;var l=g.hoverCursor||this.hoverCursor,p=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,v=(!p||!p.contains(g))&&g._findTargetCorner(this.getPointer(c,!0));v?this.setCursor(this.getCornerCursor(v,g,c)):(g.subTargetCheck&&this.targets.concat().reverse().map(function(y){l=y.hoverCursor||l}),this.setCursor(l))},getCornerCursor:function(c,g,l){var p=g.controls[c];return p.cursorStyleHandler(l,p,g)}})}(),function(){var f=Math.min,r=Math.max;e.util.object.extend(e.Canvas.prototype,{_shouldGroup:function(u,d){var s=this._activeObject;return s&&this._isSelectionKeyPressed(u)&&d&&d.selectable&&this.selection&&(s!==d||s.type==="activeSelection")&&!d.onSelect({e:u})},_handleGrouping:function(u,d){var s=this._activeObject;s.__corner||d===s&&(d=this.findTarget(u,!0),!d||!d.selectable)||(s&&s.type==="activeSelection"?this._updateActiveSelection(d,u):this._createActiveSelection(d,u))},_updateActiveSelection:function(u,d){var s=this._activeObject,a=s._objects.slice(0);s.contains(u)?(s.removeWithUpdate(u),this._hoveredTarget=u,this._hoveredTargets=this.targets.concat(),s.size()===1&&this._setActiveObject(s.item(0),d)):(s.addWithUpdate(u),this._hoveredTarget=s,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(a,d)},_createActiveSelection:function(u,d){var s=this.getActiveObjects(),a=this._createGroup(u);this._hoveredTarget=a,this._setActiveObject(a,d),this._fireSelectionEvents(s,d)},_createGroup:function(u){var d=this._objects,s=d.indexOf(this._activeObject)<d.indexOf(u),a=s?[this._activeObject,u]:[u,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new e.ActiveSelection(a,{canvas:this})},_groupSelectedObjects:function(u){var d=this._collectObjects(u),s;d.length===1?this.setActiveObject(d[0],u):d.length>1&&(s=new e.ActiveSelection(d.reverse(),{canvas:this}),this.setActiveObject(s,u))},_collectObjects:function(u){for(var d=[],s,a=this._groupSelector.ex,o=this._groupSelector.ey,c=a+this._groupSelector.left,g=o+this._groupSelector.top,l=new e.Point(f(a,c),f(o,g)),p=new e.Point(r(a,c),r(o,g)),v=!this.selectionFullyContained,y=a===c&&o===g,x=this._objects.length;x--&&(s=this._objects[x],!(!(!s||!s.selectable||!s.visible)&&(v&&s.intersectsWithRect(l,p,!0)||s.isContainedWithinRect(l,p,!0)||v&&s.containsPoint(l,null,!0)||v&&s.containsPoint(p,null,!0))&&(d.push(s),y))););return d.length>1&&(d=d.filter(function(w){return!w.onSelect({e:u})})),d},_maybeGroupObjects:function(u){this.selection&&this._groupSelector&&this._groupSelectedObjects(u),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){e.util.object.extend(e.StaticCanvas.prototype,{toDataURL:function(f){f||(f={});var r=f.format||"png",u=f.quality||1,d=(f.multiplier||1)*(f.enableRetinaScaling?this.getRetinaScaling():1),s=this.toCanvasElement(d,f);return e.util.toDataURL(s,r,u)},toCanvasElement:function(f,r){f=f||1,r=r||{};var u=(r.width||this.width)*f,d=(r.height||this.height)*f,s=this.getZoom(),a=this.width,o=this.height,c=s*f,g=this.viewportTransform,l=(g[4]-(r.left||0))*f,p=(g[5]-(r.top||0))*f,v=this.interactive,y=[c,0,0,c,l,p],x=this.enableRetinaScaling,w=e.util.createCanvasElement(),S=this.contextTop;return w.width=u,w.height=d,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=y,this.width=u,this.height=d,this.calcViewportBoundaries(),this.renderCanvas(w.getContext("2d"),this._objects),this.viewportTransform=g,this.width=a,this.height=o,this.calcViewportBoundaries(),this.interactive=v,this.enableRetinaScaling=x,this.contextTop=S,w}})}(),e.util.object.extend(e.StaticCanvas.prototype,{loadFromJSON:function(f,r,u){if(f){var d=typeof f=="string"?JSON.parse(f):e.util.object.clone(f),s=this,a=d.clipPath,o=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete d.clipPath,this._enlivenObjects(d.objects,function(c){s.clear(),s._setBgOverlay(d,function(){a?s._enlivenObjects([a],function(g){s.clipPath=g[0],s.__setupCanvas.call(s,d,c,o,r)}):s.__setupCanvas.call(s,d,c,o,r)})},u),this}},__setupCanvas:function(f,r,u,d){var s=this;r.forEach(function(a,o){s.insertAt(a,o)}),this.renderOnAddRemove=u,delete f.objects,delete f.backgroundImage,delete f.overlayImage,delete f.background,delete f.overlay,this._setOptions(f),this.renderAll(),d&&d()},_setBgOverlay:function(f,r){var u={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!f.backgroundImage&&!f.overlayImage&&!f.background&&!f.overlay){r&&r();return}var d=function(){u.backgroundImage&&u.overlayImage&&u.backgroundColor&&u.overlayColor&&r&&r()};this.__setBgOverlay("backgroundImage",f.backgroundImage,u,d),this.__setBgOverlay("overlayImage",f.overlayImage,u,d),this.__setBgOverlay("backgroundColor",f.background,u,d),this.__setBgOverlay("overlayColor",f.overlay,u,d)},__setBgOverlay:function(f,r,u,d){var s=this;if(!r){u[f]=!0,d&&d();return}f==="backgroundImage"||f==="overlayImage"?e.util.enlivenObjects([r],function(a){s[f]=a[0],u[f]=!0,d&&d()}):this["set"+e.util.string.capitalize(f,!0)](r,function(){u[f]=!0,d&&d()})},_enlivenObjects:function(f,r,u){if(!f||f.length===0){r&&r([]);return}e.util.enlivenObjects(f,function(d){r&&r(d)},null,u)},_toDataURL:function(f,r){this.clone(function(u){r(u.toDataURL(f))})},_toDataURLWithMultiplier:function(f,r,u){this.clone(function(d){u(d.toDataURLWithMultiplier(f,r))})},clone:function(f,r){var u=JSON.stringify(this.toJSON(r));this.cloneWithoutData(function(d){d.loadFromJSON(u,function(){f&&f(d)})})},cloneWithoutData:function(f){var r=e.util.createCanvasElement();r.width=this.width,r.height=this.height;var u=new e.Canvas(r);this.backgroundImage?(u.setBackgroundImage(this.backgroundImage.src,function(){u.renderAll(),f&&f(u)}),u.backgroundImageOpacity=this.backgroundImageOpacity,u.backgroundImageStretch=this.backgroundImageStretch):f&&f(u)}}),function(f){var r=f.fabric||(f.fabric={}),u=r.util.object.extend,d=r.util.object.clone,s=r.util.toFixed,a=r.util.string.capitalize,o=r.util.degreesToRadians,c=!r.isLikelyNode,g=2;r.Object||(r.Object=r.util.createClass(r.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:c,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(l){l&&this.setOptions(l)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=r.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(l){var p=r.perfLimitSizeTotal,v=l.width,y=l.height,x=r.maxCacheSideLimit,w=r.minCacheSideLimit;if(v<=x&&y<=x&&v*y<=p)return v<w&&(l.width=w),y<w&&(l.height=w),l;var S=v/y,k=r.util.limitDimsByArea(S,p),b=r.util.capValue,j=b(w,k.x,x),M=b(w,k.y,x);return v>j&&(l.zoomX/=v/j,l.width=j,l.capped=!0),y>M&&(l.zoomY/=y/M,l.height=M,l.capped=!0),l},_getCacheCanvasDimensions:function(){var l=this.getTotalObjectScaling(),p=this._getTransformedDimensions(0,0),v=p.x*l.scaleX/this.scaleX,y=p.y*l.scaleY/this.scaleY;return{width:Math.ceil(v+g),height:Math.ceil(y+g),zoomX:l.scaleX,zoomY:l.scaleY,x:v,y}},_updateCacheCanvas:function(){var l=this.canvas;if(this.noScaleCache&&l&&l._currentTransform){var p=l._currentTransform.target,v=l._currentTransform.action;if(this===p&&v.slice&&v.slice(0,5)==="scale")return!1}var y=this._cacheCanvas,x=this._limitCacheSize(this._getCacheCanvasDimensions()),w=x.width,S=x.height,k,b,j=x.zoomX,M=x.zoomY,W=w!==this.cacheWidth||S!==this.cacheHeight,ee=this.zoomX!==j||this.zoomY!==M,te=W||ee;return te?(W?(y.width=w,y.height=S):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,y.width,y.height)),k=x.x/2,b=x.y/2,this.cacheTranslationX=Math.round(y.width/2-k)+k,this.cacheTranslationY=Math.round(y.height/2-b)+b,this.cacheWidth=w,this.cacheHeight=S,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(j,M),this.zoomX=j,this.zoomY=M,!0):!1},setOptions:function(l){this._setOptions(l),this._initGradient(l.fill,"fill"),this._initGradient(l.stroke,"stroke"),this._initPattern(l.fill,"fill"),this._initPattern(l.stroke,"stroke")},transform:function(l){var p=this.group&&!this.group._transformDone||this.group&&this.canvas&&l===this.canvas.contextTop,v=this.calcTransformMatrix(!p);l.transform(v[0],v[1],v[2],v[3],v[4],v[5])},toObject:function(l){var p=r.Object.NUM_FRACTION_DIGITS,v={type:this.type,version:r.version,originX:this.originX,originY:this.originY,left:s(this.left,p),top:s(this.top,p),width:s(this.width,p),height:s(this.height,p),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:s(this.strokeWidth,p),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:s(this.strokeMiterLimit,p),scaleX:s(this.scaleX,p),scaleY:s(this.scaleY,p),angle:s(this.angle,p),flipX:this.flipX,flipY:this.flipY,opacity:s(this.opacity,p),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:s(this.skewX,p),skewY:s(this.skewY,p)};return this.clipPath&&!this.clipPath.excludeFromExport&&(v.clipPath=this.clipPath.toObject(l),v.clipPath.inverted=this.clipPath.inverted,v.clipPath.absolutePositioned=this.clipPath.absolutePositioned),r.util.populateWithProperties(this,v,l),this.includeDefaultValues||(v=this._removeDefaultValues(v)),v},toDatalessObject:function(l){return this.toObject(l)},_removeDefaultValues:function(l){var p=r.util.getKlass(l.type).prototype,v=p.stateProperties;return v.forEach(function(y){y==="left"||y==="top"||(l[y]===p[y]&&delete l[y],Array.isArray(l[y])&&Array.isArray(p[y])&&l[y].length===0&&p[y].length===0&&delete l[y])}),l},toString:function(){return"#<fabric."+a(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var l=r.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(l.scaleX),scaleY:Math.abs(l.scaleY)}},getTotalObjectScaling:function(){var l=this.getObjectScaling(),p=l.scaleX,v=l.scaleY;if(this.canvas){var y=this.canvas.getZoom(),x=this.canvas.getRetinaScaling();p*=y*x,v*=y*x}return{scaleX:p,scaleY:v}},getObjectOpacity:function(){var l=this.opacity;return this.group&&(l*=this.group.getObjectOpacity()),l},_set:function(l,p){var v=l==="scaleX"||l==="scaleY",y=this[l]!==p,x=!1;return v&&(p=this._constrainScale(p)),l==="scaleX"&&p<0?(this.flipX=!this.flipX,p*=-1):l==="scaleY"&&p<0?(this.flipY=!this.flipY,p*=-1):l==="shadow"&&p&&!(p instanceof r.Shadow)?p=new r.Shadow(p):l==="dirty"&&this.group&&this.group.set("dirty",p),this[l]=p,y&&(x=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(l)>-1?(this.dirty=!0,x&&this.group.set("dirty",!0)):x&&this.stateProperties.indexOf(l)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:r.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(l){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(l.save(),this._setupCompositeOperation(l),this.drawSelectionBackground(l),this.transform(l),this._setOpacity(l),this._setShadow(l,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(l)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(l),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),l.restore())},renderCache:function(l){l=l||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,l.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(l,p){if(l.save(),p.inverted?l.globalCompositeOperation="destination-out":l.globalCompositeOperation="destination-in",p.absolutePositioned){var v=r.util.invertTransform(this.calcTransformMatrix());l.transform(v[0],v[1],v[2],v[3],v[4],v[5])}p.transform(l),l.scale(1/p.zoomX,1/p.zoomY),l.drawImage(p._cacheCanvas,-p.cacheTranslationX,-p.cacheTranslationY),l.restore()},drawObject:function(l,p){var v=this.fill,y=this.stroke;p?(this.fill="black",this.stroke="",this._setClippingProperties(l)):this._renderBackground(l),this._render(l),this._drawClipPath(l,this.clipPath),this.fill=v,this.stroke=y},_drawClipPath:function(l,p){p&&(p.canvas=this.canvas,p.shouldCache(),p._transformDone=!0,p.renderCache({forClipping:!0}),this.drawClipPathOnCache(l,p))},drawCacheOnCanvas:function(l){l.scale(1/this.zoomX,1/this.zoomY),l.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(l){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!l&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!l){var p=this.cacheWidth/this.zoomX,v=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-p/2,-v/2,p,v)}return!0}return!1},_renderBackground:function(l){if(this.backgroundColor){var p=this._getNonTransformedDimensions();l.fillStyle=this.backgroundColor,l.fillRect(-p.x/2,-p.y/2,p.x,p.y),this._removeShadow(l)}},_setOpacity:function(l){this.group&&!this.group._transformDone?l.globalAlpha=this.getObjectOpacity():l.globalAlpha*=this.opacity},_setStrokeStyles:function(l,p){var v=p.stroke;v&&(l.lineWidth=p.strokeWidth,l.lineCap=p.strokeLineCap,l.lineDashOffset=p.strokeDashOffset,l.lineJoin=p.strokeLineJoin,l.miterLimit=p.strokeMiterLimit,v.toLive?v.gradientUnits==="percentage"||v.gradientTransform||v.patternTransform?this._applyPatternForTransformedGradient(l,v):(l.strokeStyle=v.toLive(l,this),this._applyPatternGradientTransform(l,v)):l.strokeStyle=p.stroke)},_setFillStyles:function(l,p){var v=p.fill;v&&(v.toLive?(l.fillStyle=v.toLive(l,this),this._applyPatternGradientTransform(l,p.fill)):l.fillStyle=v)},_setClippingProperties:function(l){l.globalAlpha=1,l.strokeStyle="transparent",l.fillStyle="#000000"},_setLineDash:function(l,p){!p||p.length===0||(1&p.length&&p.push.apply(p,p),l.setLineDash(p))},_renderControls:function(l,p){var v=this.getViewportTransform(),y=this.calcTransformMatrix(),x,w,S;p=p||{},w=typeof p.hasBorders<"u"?p.hasBorders:this.hasBorders,S=typeof p.hasControls<"u"?p.hasControls:this.hasControls,y=r.util.multiplyTransformMatrices(v,y),x=r.util.qrDecompose(y),l.save(),l.translate(x.translateX,x.translateY),l.lineWidth=1*this.borderScaleFactor,this.group||(l.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(x.angle-=180),l.rotate(o(this.group?x.angle:this.angle)),p.forActiveSelection||this.group?w&&this.drawBordersInGroup(l,x,p):w&&this.drawBorders(l,p),S&&this.drawControls(l,p),l.restore()},_setShadow:function(l){if(this.shadow){var p=this.shadow,v=this.canvas,y,x=v&&v.viewportTransform[0]||1,w=v&&v.viewportTransform[3]||1;p.nonScaling?y={scaleX:1,scaleY:1}:y=this.getObjectScaling(),v&&v._isRetinaScaling()&&(x*=r.devicePixelRatio,w*=r.devicePixelRatio),l.shadowColor=p.color,l.shadowBlur=p.blur*r.browserShadowBlurConstant*(x+w)*(y.scaleX+y.scaleY)/4,l.shadowOffsetX=p.offsetX*x*y.scaleX,l.shadowOffsetY=p.offsetY*w*y.scaleY}},_removeShadow:function(l){this.shadow&&(l.shadowColor="",l.shadowBlur=l.shadowOffsetX=l.shadowOffsetY=0)},_applyPatternGradientTransform:function(l,p){if(!p||!p.toLive)return{offsetX:0,offsetY:0};var v=p.gradientTransform||p.patternTransform,y=-this.width/2+p.offsetX||0,x=-this.height/2+p.offsetY||0;return p.gradientUnits==="percentage"?l.transform(this.width,0,0,this.height,y,x):l.transform(1,0,0,1,y,x),v&&l.transform(v[0],v[1],v[2],v[3],v[4],v[5]),{offsetX:y,offsetY:x}},_renderPaintInOrder:function(l){this.paintFirst==="stroke"?(this._renderStroke(l),this._renderFill(l)):(this._renderFill(l),this._renderStroke(l))},_render:function(){},_renderFill:function(l){this.fill&&(l.save(),this._setFillStyles(l,this),this.fillRule==="evenodd"?l.fill("evenodd"):l.fill(),l.restore())},_renderStroke:function(l){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(l),l.save(),this.strokeUniform&&this.group){var p=this.getObjectScaling();l.scale(1/p.scaleX,1/p.scaleY)}else this.strokeUniform&&l.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(l,this.strokeDashArray),this._setStrokeStyles(l,this),l.stroke(),l.restore()}},_applyPatternForTransformedGradient:function(l,p){var v=this._limitCacheSize(this._getCacheCanvasDimensions()),y=r.util.createCanvasElement(),x,w=this.canvas.getRetinaScaling(),S=v.x/this.scaleX/w,k=v.y/this.scaleY/w;y.width=Math.ceil(S),y.height=Math.ceil(k),x=y.getContext("2d"),x.beginPath(),x.moveTo(0,0),x.lineTo(S,0),x.lineTo(S,k),x.lineTo(0,k),x.closePath(),x.translate(S/2,k/2),x.scale(v.zoomX/this.scaleX/w,v.zoomY/this.scaleY/w),this._applyPatternGradientTransform(x,p),x.fillStyle=p.toLive(l),x.fill(),l.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),l.scale(w*this.scaleX/v.zoomX,w*this.scaleY/v.zoomY),l.strokeStyle=x.createPattern(y,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var l=r.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",l.scaleX),this.set("scaleY",l.scaleY),this.angle=l.angle,this.skewX=l.skewX,this.skewY=0}},_removeTransformMatrix:function(l){var p=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),p=r.util.transformPoint(p,this.transformMatrix)),this.transformMatrix=null,l&&(this.scaleX*=l.scaleX,this.scaleY*=l.scaleY,this.cropX=l.cropX,this.cropY=l.cropY,p.x+=l.offsetLeft,p.y+=l.offsetTop,this.width=l.width,this.height=l.height),this.setPositionByOrigin(p,"center","center")},clone:function(l,p){var v=this.toObject(p);this.constructor.fromObject?this.constructor.fromObject(v,l):r.Object._fromObject("Object",v,l)},cloneAsImage:function(l,p){var v=this.toCanvasElement(p);return l&&l(new r.Image(v)),this},toCanvasElement:function(l){l||(l={});var p=r.util,v=p.saveObjectTransform(this),y=this.group,x=this.shadow,w=Math.abs,S=(l.multiplier||1)*(l.enableRetinaScaling?r.devicePixelRatio:1);delete this.group,l.withoutTransform&&p.resetObjectTransform(this),l.withoutShadow&&(this.shadow=null);var k=r.util.createCanvasElement(),b=this.getBoundingRect(!0,!0),j=this.shadow,M,W={x:0,y:0},ee,te,J;j&&(ee=j.blur,j.nonScaling?M={scaleX:1,scaleY:1}:M=this.getObjectScaling(),W.x=2*Math.round(w(j.offsetX)+ee)*w(M.scaleX),W.y=2*Math.round(w(j.offsetY)+ee)*w(M.scaleY)),te=b.width+W.x,J=b.height+W.y,k.width=Math.ceil(te),k.height=Math.ceil(J);var Q=new r.StaticCanvas(k,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});l.format==="jpeg"&&(Q.backgroundColor="#fff"),this.setPositionByOrigin(new r.Point(Q.width/2,Q.height/2),"center","center");var ie=this.canvas;Q.add(this);var oe=Q.toCanvasElement(S||1,l);return this.shadow=x,this.set("canvas",ie),y&&(this.group=y),this.set(v).setCoords(),Q._objects=[],Q.dispose(),Q=null,oe},toDataURL:function(l){return l||(l={}),r.util.toDataURL(this.toCanvasElement(l),l.format||"png",l.quality||1)},isType:function(l){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===l},complexity:function(){return 1},toJSON:function(l){return this.toObject(l)},rotate:function(l){var p=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return p&&this._setOriginToCenter(),this.set("angle",l),p&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(l,p){p=p||this.canvas.getPointer(l);var v=new r.Point(p.x,p.y),y=this._getLeftTopCoords();return this.angle&&(v=r.util.rotatePoint(v,y,o(-this.angle))),{x:v.x-y.x,y:v.y-y.y}},_setupCompositeOperation:function(l){this.globalCompositeOperation&&(l.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){r.runningAnimations&&r.runningAnimations.cancelByTarget(this)}}),r.util.createAccessors&&r.util.createAccessors(r.Object),u(r.Object.prototype,r.Observable),r.Object.NUM_FRACTION_DIGITS=2,r.Object.ENLIVEN_PROPS=["clipPath"],r.Object._fromObject=function(l,p,v,y){var x=r[l];p=d(p,!0),r.util.enlivenPatterns([p.fill,p.stroke],function(w){typeof w[0]<"u"&&(p.fill=w[0]),typeof w[1]<"u"&&(p.stroke=w[1]),r.util.enlivenObjectEnlivables(p,p,function(){var S=y?new x(p[y],p):new x(p);v&&v(S)})})},r.Object.__uid=0)}(t),function(){var f=e.util.degreesToRadians,r={left:-.5,center:0,right:.5},u={top:-.5,center:0,bottom:.5};e.util.object.extend(e.Object.prototype,{translateToGivenOrigin:function(d,s,a,o,c){var g=d.x,l=d.y,p,v,y;return typeof s=="string"?s=r[s]:s-=.5,typeof o=="string"?o=r[o]:o-=.5,p=o-s,typeof a=="string"?a=u[a]:a-=.5,typeof c=="string"?c=u[c]:c-=.5,v=c-a,(p||v)&&(y=this._getTransformedDimensions(),g=d.x+p*y.x,l=d.y+v*y.y),new e.Point(g,l)},translateToCenterPoint:function(d,s,a){var o=this.translateToGivenOrigin(d,s,a,"center","center");return this.angle?e.util.rotatePoint(o,d,f(this.angle)):o},translateToOriginPoint:function(d,s,a){var o=this.translateToGivenOrigin(d,"center","center",s,a);return this.angle?e.util.rotatePoint(o,d,f(this.angle)):o},getCenterPoint:function(){var d=new e.Point(this.left,this.top);return this.translateToCenterPoint(d,this.originX,this.originY)},getPointByOrigin:function(d,s){var a=this.getCenterPoint();return this.translateToOriginPoint(a,d,s)},toLocalPoint:function(d,s,a){var o=this.getCenterPoint(),c,g;return typeof s<"u"&&typeof a<"u"?c=this.translateToGivenOrigin(o,"center","center",s,a):c=new e.Point(this.left,this.top),g=new e.Point(d.x,d.y),this.angle&&(g=e.util.rotatePoint(g,o,-f(this.angle))),g.subtractEquals(c)},setPositionByOrigin:function(d,s,a){var o=this.translateToCenterPoint(d,s,a),c=this.translateToOriginPoint(o,this.originX,this.originY);this.set("left",c.x),this.set("top",c.y)},adjustPosition:function(d){var s=f(this.angle),a=this.getScaledWidth(),o=e.util.cos(s)*a,c=e.util.sin(s)*a,g,l;typeof this.originX=="string"?g=r[this.originX]:g=this.originX-.5,typeof d=="string"?l=r[d]:l=d-.5,this.left+=o*(l-g),this.top+=c*(l-g),this.setCoords(),this.originX=d},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var d=this.getCenterPoint();this.originX="center",this.originY="center",this.left=d.x,this.top=d.y},_resetOrigin:function(){var d=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=d.x,this.top=d.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function f(a){return[new e.Point(a.tl.x,a.tl.y),new e.Point(a.tr.x,a.tr.y),new e.Point(a.br.x,a.br.y),new e.Point(a.bl.x,a.bl.y)]}var r=e.util,u=r.degreesToRadians,d=r.multiplyTransformMatrices,s=r.transformPoint;r.object.extend(e.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(a,o){return o?a?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),a?this.aCoords:this.lineCoords)},getCoords:function(a,o){return f(this._getCoords(a,o))},intersectsWithRect:function(a,o,c,g){var l=this.getCoords(c,g),p=e.Intersection.intersectPolygonRectangle(l,a,o);return p.status==="Intersection"},intersectsWithObject:function(a,o,c){var g=e.Intersection.intersectPolygonPolygon(this.getCoords(o,c),a.getCoords(o,c));return g.status==="Intersection"||a.isContainedWithinObject(this,o,c)||this.isContainedWithinObject(a,o,c)},isContainedWithinObject:function(a,o,c){for(var g=this.getCoords(o,c),l=o?a.aCoords:a.lineCoords,p=0,v=a._getImageLines(l);p<4;p++)if(!a.containsPoint(g[p],v))return!1;return!0},isContainedWithinRect:function(a,o,c,g){var l=this.getBoundingRect(c,g);return l.left>=a.x&&l.left+l.width<=o.x&&l.top>=a.y&&l.top+l.height<=o.y},containsPoint:function(a,p,c,g){var l=this._getCoords(c,g),p=p||this._getImageLines(l),v=this._findCrossPoints(a,p);return v!==0&&v%2===1},isOnScreen:function(a){if(!this.canvas)return!1;var o=this.canvas.vptCoords.tl,c=this.canvas.vptCoords.br,g=this.getCoords(!0,a);return g.some(function(l){return l.x<=c.x&&l.x>=o.x&&l.y<=c.y&&l.y>=o.y})||this.intersectsWithRect(o,c,!0,a)?!0:this._containsCenterOfCanvas(o,c,a)},_containsCenterOfCanvas:function(a,o,c){var g={x:(a.x+o.x)/2,y:(a.y+o.y)/2};return!!this.containsPoint(g,null,!0,c)},isPartiallyOnScreen:function(a){if(!this.canvas)return!1;var o=this.canvas.vptCoords.tl,c=this.canvas.vptCoords.br;if(this.intersectsWithRect(o,c,!0,a))return!0;var g=this.getCoords(!0,a).every(function(l){return(l.x>=c.x||l.x<=o.x)&&(l.y>=c.y||l.y<=o.y)});return g&&this._containsCenterOfCanvas(o,c,a)},_getImageLines:function(a){var o={topline:{o:a.tl,d:a.tr},rightline:{o:a.tr,d:a.br},bottomline:{o:a.br,d:a.bl},leftline:{o:a.bl,d:a.tl}};return o},_findCrossPoints:function(a,o){var c,g,l,p,v,y=0,x;for(var w in o)if(x=o[w],!(x.o.y<a.y&&x.d.y<a.y)&&!(x.o.y>=a.y&&x.d.y>=a.y)&&(x.o.x===x.d.x&&x.o.x>=a.x?v=x.o.x:(c=0,g=(x.d.y-x.o.y)/(x.d.x-x.o.x),l=a.y-c*a.x,p=x.o.y-g*x.o.x,v=-(l-p)/(c-g)),v>=a.x&&(y+=1),y===2))break;return y},getBoundingRect:function(a,o){var c=this.getCoords(a,o);return r.makeBoundingBoxFromPoints(c)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(a){return Math.abs(a)<this.minScaleLimit?a<0?-this.minScaleLimit:this.minScaleLimit:a===0?1e-4:a},scale:function(a){return this._set("scaleX",a),this._set("scaleY",a),this.setCoords()},scaleToWidth:function(a,o){var c=this.getBoundingRect(o).width/this.getScaledWidth();return this.scale(a/this.width/c)},scaleToHeight:function(a,o){var c=this.getBoundingRect(o).height/this.getScaledHeight();return this.scale(a/this.height/c)},calcLineCoords:function(){var a=this.getViewportTransform(),o=this.padding,c=u(this.angle),g=r.cos(c),l=r.sin(c),p=g*o,v=l*o,y=p+v,x=p-v,w=this.calcACoords(),S={tl:s(w.tl,a),tr:s(w.tr,a),bl:s(w.bl,a),br:s(w.br,a)};return o&&(S.tl.x-=x,S.tl.y-=y,S.tr.x+=y,S.tr.y-=x,S.bl.x-=y,S.bl.y+=x,S.br.x+=x,S.br.y+=y),S},calcOCoords:function(){var a=this._calcRotateMatrix(),o=this._calcTranslateMatrix(),c=this.getViewportTransform(),g=d(c,o),l=d(g,a),l=d(l,[1/c[0],0,0,1/c[3],0,0]),p=this._calculateCurrentDimensions(),v={};return this.forEachControl(function(y,x,w){v[x]=y.positionHandler(p,l,w)}),v},calcACoords:function(){var a=this._calcRotateMatrix(),o=this._calcTranslateMatrix(),c=d(o,a),g=this._getTransformedDimensions(),l=g.x/2,p=g.y/2;return{tl:s({x:-l,y:-p},c),tr:s({x:l,y:-p},c),bl:s({x:-l,y:p},c),br:s({x:l,y:p},c)}},setCoords:function(a){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),a?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return r.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var a=this.getCenterPoint();return[1,0,0,1,a.x,a.y]},transformMatrixKey:function(a){var o="_",c="";return!a&&this.group&&(c=this.group.transformMatrixKey(a)+o),c+this.top+o+this.left+o+this.scaleX+o+this.scaleY+o+this.skewX+o+this.skewY+o+this.angle+o+this.originX+o+this.originY+o+this.width+o+this.height+o+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(a){var o=this.calcOwnMatrix();if(a||!this.group)return o;var c=this.transformMatrixKey(a),g=this.matrixCache||(this.matrixCache={});return g.key===c?g.value:(this.group&&(o=d(this.group.calcTransformMatrix(!1),o)),g.key=c,g.value=o,o)},calcOwnMatrix:function(){var a=this.transformMatrixKey(!0),o=this.ownMatrixCache||(this.ownMatrixCache={});if(o.key===a)return o.value;var c=this._calcTranslateMatrix(),g={angle:this.angle,translateX:c[4],translateY:c[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return o.key=a,o.value=r.composeMatrix(g),o.value},_getNonTransformedDimensions:function(){var a=this.strokeWidth,o=this.width+a,c=this.height+a;return{x:o,y:c}},_getTransformedDimensions:function(a,o){typeof a>"u"&&(a=this.skewX),typeof o>"u"&&(o=this.skewY);var c,g,l,p=a===0&&o===0;if(this.strokeUniform?(g=this.width,l=this.height):(c=this._getNonTransformedDimensions(),g=c.x,l=c.y),p)return this._finalizeDimensions(g*this.scaleX,l*this.scaleY);var v=r.sizeAfterTransform(g,l,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:a,skewY:o});return this._finalizeDimensions(v.x,v.y)},_finalizeDimensions:function(a,o){return this.strokeUniform?{x:a+this.strokeWidth,y:o+this.strokeWidth}:{x:a,y:o}},_calculateCurrentDimensions:function(){var a=this.getViewportTransform(),o=this._getTransformedDimensions(),c=s(o,a,!0);return c.scalarAdd(2*this.padding)}})}(),e.util.object.extend(e.Object.prototype,{sendToBack:function(){return this.group?e.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?e.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(f){return this.group?e.StaticCanvas.prototype.sendBackwards.call(this.group,this,f):this.canvas&&this.canvas.sendBackwards(this,f),this},bringForward:function(f){return this.group?e.StaticCanvas.prototype.bringForward.call(this.group,this,f):this.canvas&&this.canvas.bringForward(this,f),this},moveTo:function(f){return this.group&&this.group.type!=="activeSelection"?e.StaticCanvas.prototype.moveTo.call(this.group,this,f):this.canvas&&this.canvas.moveTo(this,f),this}}),function(){function f(u,d){if(d){if(d.toLive)return u+": url(#SVGID_"+d.id+"); ";var s=new e.Color(d),a=u+": "+s.toRgb()+"; ",o=s.getAlpha();return o!==1&&(a+=u+"-opacity: "+o.toString()+"; "),a}else return u+": none; "}var r=e.util.toFixed;e.util.object.extend(e.Object.prototype,{getSvgStyles:function(u){var d=this.fillRule?this.fillRule:"nonzero",s=this.strokeWidth?this.strokeWidth:"0",a=this.strokeDashArray?this.strokeDashArray.join(" "):"none",o=this.strokeDashOffset?this.strokeDashOffset:"0",c=this.strokeLineCap?this.strokeLineCap:"butt",g=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",p=typeof this.opacity<"u"?this.opacity:"1",v=this.visible?"":" visibility: hidden;",y=u?"":this.getSvgFilter(),x=f("fill",this.fill),w=f("stroke",this.stroke);return[w,"stroke-width: ",s,"; ","stroke-dasharray: ",a,"; ","stroke-linecap: ",c,"; ","stroke-dashoffset: ",o,"; ","stroke-linejoin: ",g,"; ","stroke-miterlimit: ",l,"; ",x,"fill-rule: ",d,"; ","opacity: ",p,";",y,v].join("")},getSvgSpanStyles:function(u,d){var s="; ",o=u.fontFamily?"font-family: "+(u.fontFamily.indexOf("'")===-1&&u.fontFamily.indexOf('"')===-1?"'"+u.fontFamily+"'":u.fontFamily)+s:"",a=u.strokeWidth?"stroke-width: "+u.strokeWidth+s:"",o=o,c=u.fontSize?"font-size: "+u.fontSize+"px"+s:"",g=u.fontStyle?"font-style: "+u.fontStyle+s:"",l=u.fontWeight?"font-weight: "+u.fontWeight+s:"",p=u.fill?f("fill",u.fill):"",v=u.stroke?f("stroke",u.stroke):"",y=this.getSvgTextDecoration(u),x=u.deltaY?"baseline-shift: "+-u.deltaY+"; ":"";return y&&(y="text-decoration: "+y+s),[v,a,o,c,g,l,y,p,x,d?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(u){return["overline","underline","line-through"].filter(function(d){return u[d.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(u,d){var s=u?this.calcTransformMatrix():this.calcOwnMatrix(),a='transform="'+e.util.matrixToSVG(s);return a+(d||"")+'" '},_setSVGBg:function(u){if(this.backgroundColor){var d=e.Object.NUM_FRACTION_DIGITS;u.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',r(-this.width/2,d),'" y="',r(-this.height/2,d),'" width="',r(this.width,d),'" height="',r(this.height,d),`"></rect>
`)}},toSVG:function(u){return this._createBaseSVGMarkup(this._toSVG(u),{reviver:u})},toClipPathSVG:function(u){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(u),{reviver:u})},_createBaseClipPathSVGMarkup:function(u,d){d=d||{};var s=d.reviver,a=d.additionalTransform||"",o=[this.getSvgTransform(!0,a),this.getSvgCommons()].join(""),c=u.indexOf("COMMON_PARTS");return u[c]=o,s?s(u.join("")):u.join("")},_createBaseSVGMarkup:function(u,d){d=d||{};var s=d.noStyle,a=d.reviver,o=s?"":'style="'+this.getSvgStyles()+'" ',c=d.withShadow?'style="'+this.getSvgFilter()+'" ':"",g=this.clipPath,l=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",p=g&&g.absolutePositioned,v=this.stroke,y=this.fill,x=this.shadow,w,S=[],k,b=u.indexOf("COMMON_PARTS"),j=d.additionalTransform;return g&&(g.clipPathId="CLIPPATH_"+e.Object.__uid++,k='<clipPath id="'+g.clipPathId+`" >
`+g.toClipPathSVG(a)+`</clipPath>
`),p&&S.push("<g ",c,this.getSvgCommons(),` >
`),S.push("<g ",this.getSvgTransform(!1),p?"":c+this.getSvgCommons(),` >
`),w=[o,l,s?"":this.addPaintOrder()," ",j?'transform="'+j+'" ':""].join(""),u[b]=w,y&&y.toLive&&S.push(y.toSVG(this)),v&&v.toLive&&S.push(v.toSVG(this)),x&&S.push(x.toSVG(this)),g&&S.push(k),S.push(u.join("")),S.push(`</g>
`),p&&S.push(`</g>
`),a?a(S.join("")):S.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var f=e.util.object.extend,r="stateProperties";function u(s,a,o){var c={},g=!0;o.forEach(function(l){c[l]=s[l]}),f(s[a],c,g)}function d(s,a,o){if(s===a)return!0;if(Array.isArray(s)){if(!Array.isArray(a)||s.length!==a.length)return!1;for(var c=0,g=s.length;c<g;c++)if(!d(s[c],a[c]))return!1;return!0}else if(s&&typeof s=="object"){var l=Object.keys(s),p;if(!a||typeof a!="object"||!o&&l.length!==Object.keys(a).length)return!1;for(var c=0,g=l.length;c<g;c++)if(p=l[c],!(p==="canvas"||p==="group")&&!d(s[p],a[p]))return!1;return!0}}e.util.object.extend(e.Object.prototype,{hasStateChanged:function(s){s=s||r;var a="_"+s;return Object.keys(this[a]).length<this[s].length?!0:!d(this[a],this,!0)},saveState:function(s){var a=s&&s.propertySet||r,o="_"+a;return this[o]?(u(this,o,this[a]),s&&s.stateProperties&&u(this,o,s.stateProperties),this):this.setupState(s)},setupState:function(s){s=s||{};var a=s.propertySet||r;return s.propertySet=a,this["_"+a]={},this.saveState(s),this}})}(),function(){var f=e.util.degreesToRadians;e.util.object.extend(e.Object.prototype,{_findTargetCorner:function(r,u){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var d=r.x,s=r.y,a,o,c=Object.keys(this.oCoords),g=c.length-1,l;for(this.__corner=0;g>=0;g--)if(l=c[g],!!this.isControlVisible(l)&&(o=this._getImageLines(u?this.oCoords[l].touchCorner:this.oCoords[l].corner),a=this._findCrossPoints({x:d,y:s},o),a!==0&&a%2===1))return this.__corner=l,l;return!1},forEachControl:function(r){for(var u in this.controls)r(this.controls[u],u,this)},_setCornerCoords:function(){var r=this.oCoords;for(var u in r){var d=this.controls[u];r[u].corner=d.calcCornerCoords(this.angle,this.cornerSize,r[u].x,r[u].y,!1),r[u].touchCorner=d.calcCornerCoords(this.angle,this.touchCornerSize,r[u].x,r[u].y,!0)}},drawSelectionBackground:function(r){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;r.save();var u=this.getCenterPoint(),d=this._calculateCurrentDimensions(),s=this.canvas.viewportTransform;return r.translate(u.x,u.y),r.scale(1/s[0],1/s[3]),r.rotate(f(this.angle)),r.fillStyle=this.selectionBackgroundColor,r.fillRect(-d.x/2,-d.y/2,d.x,d.y),r.restore(),this},drawBorders:function(r,u){u=u||{};var d=this._calculateCurrentDimensions(),s=this.borderScaleFactor,a=d.x+s,o=d.y+s,c=typeof u.hasControls<"u"?u.hasControls:this.hasControls,g=!1;return r.save(),r.strokeStyle=u.borderColor||this.borderColor,this._setLineDash(r,u.borderDashArray||this.borderDashArray),r.strokeRect(-a/2,-o/2,a,o),c&&(r.beginPath(),this.forEachControl(function(l,p,v){l.withConnection&&l.getVisibility(v,p)&&(g=!0,r.moveTo(l.x*a,l.y*o),r.lineTo(l.x*a+l.offsetX,l.y*o+l.offsetY))}),g&&r.stroke()),r.restore(),this},drawBordersInGroup:function(r,u,d){d=d||{};var s=e.util.sizeAfterTransform(this.width,this.height,u),a=this.strokeWidth,o=this.strokeUniform,c=this.borderScaleFactor,g=s.x+a*(o?this.canvas.getZoom():u.scaleX)+c,l=s.y+a*(o?this.canvas.getZoom():u.scaleY)+c;return r.save(),this._setLineDash(r,d.borderDashArray||this.borderDashArray),r.strokeStyle=d.borderColor||this.borderColor,r.strokeRect(-g/2,-l/2,g,l),r.restore(),this},drawControls:function(r,u){u=u||{},r.save();var d=1,s,a;return this.canvas&&(d=this.canvas.getRetinaScaling()),r.setTransform(d,0,0,d,0,0),r.strokeStyle=r.fillStyle=u.cornerColor||this.cornerColor,this.transparentCorners||(r.strokeStyle=u.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(r,u.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(s=this.group.calcTransformMatrix()),this.forEachControl(function(o,c,g){a=g.oCoords[c],o.getVisibility(g,c)&&(s&&(a=e.util.transformPoint(a,s)),o.render(r,a.x,a.y,u,g))}),r.restore(),this},isControlVisible:function(r){return this.controls[r]&&this.controls[r].getVisibility(this,r)},setControlVisible:function(r,u){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[r]=u,this},setControlsVisibility:function(r){r||(r={});for(var u in r)this.setControlVisible(u,r[u]);return this},onDeselect:function(){},onSelect:function(){}})}(),e.util.object.extend(e.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(f,r){r=r||{};var u=function(){},d=r.onComplete||u,s=r.onChange||u,a=this;return e.util.animate({target:this,startValue:f.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(o){f.set("left",o),a.requestRenderAll(),s()},onComplete:function(){f.setCoords(),d()}})},fxCenterObjectV:function(f,r){r=r||{};var u=function(){},d=r.onComplete||u,s=r.onChange||u,a=this;return e.util.animate({target:this,startValue:f.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(o){f.set("top",o),a.requestRenderAll(),s()},onComplete:function(){f.setCoords(),d()}})},fxRemove:function(f,r){r=r||{};var u=function(){},d=r.onComplete||u,s=r.onChange||u,a=this;return e.util.animate({target:this,startValue:f.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(o){f.set("opacity",o),a.requestRenderAll(),s()},onComplete:function(){a.remove(f),d()}})}}),e.util.object.extend(e.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var f=[],r,u,d=[];for(r in arguments[0])f.push(r);for(var s=0,a=f.length;s<a;s++)r=f[s],u=s!==a-1,d.push(this._animate(r,arguments[0][r],arguments[1],u));return d}else return this._animate.apply(this,arguments)},_animate:function(f,r,u,d){var s=this,a;r=r.toString(),u?u=e.util.object.clone(u):u={},~f.indexOf(".")&&(a=f.split("."));var o=s.colorProperties.indexOf(f)>-1||a&&s.colorProperties.indexOf(a[1])>-1,c=a?this.get(a[0])[a[1]]:this.get(f);"from"in u||(u.from=c),o||(~r.indexOf("=")?r=c+parseFloat(r.replace("=","")):r=parseFloat(r));var g={target:this,startValue:u.from,endValue:r,byValue:u.by,easing:u.easing,duration:u.duration,abort:u.abort&&function(l,p,v){return u.abort.call(s,l,p,v)},onChange:function(l,p,v){a?s[a[0]][a[1]]=l:s.set(f,l),!d&&u.onChange&&u.onChange(l,p,v)},onComplete:function(l,p,v){d||(s.setCoords(),u.onComplete&&u.onComplete(l,p,v))}};return o?e.util.animateColor(g.startValue,g.endValue,g.duration,g):e.util.animate(g)}}),function(f){var r=f.fabric||(f.fabric={}),u=r.util.object.extend,d=r.util.object.clone,s={x1:1,x2:1,y1:1,y2:1};if(r.Line){r.warn("fabric.Line is already defined");return}r.Line=r.util.createClass(r.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:r.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(o,c){o||(o=[0,0,0,0]),this.callSuper("initialize",c),this.set("x1",o[0]),this.set("y1",o[1]),this.set("x2",o[2]),this.set("y2",o[3]),this._setWidthHeight(c)},_setWidthHeight:function(o){o||(o={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in o?o.left:this._getLeftToOriginX(),this.top="top"in o?o.top:this._getTopToOriginY()},_set:function(o,c){return this.callSuper("_set",o,c),typeof s[o]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:a({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:a({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(o){o.beginPath();var c=this.calcLinePoints();o.moveTo(c.x1,c.y1),o.lineTo(c.x2,c.y2),o.lineWidth=this.strokeWidth;var g=o.strokeStyle;o.strokeStyle=this.stroke||o.fillStyle,this.stroke&&this._renderStroke(o),o.strokeStyle=g},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(o){return u(this.callSuper("toObject",o),this.calcLinePoints())},_getNonTransformedDimensions:function(){var o=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(o.y-=this.strokeWidth),this.height===0&&(o.x-=this.strokeWidth)),o},calcLinePoints:function(){var o=this.x1<=this.x2?-1:1,c=this.y1<=this.y2?-1:1,g=o*this.width*.5,l=c*this.height*.5,p=o*this.width*-.5,v=c*this.height*-.5;return{x1:g,x2:p,y1:l,y2:v}},_toSVG:function(){var o=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',o.x1,'" y1="',o.y1,'" x2="',o.x2,'" y2="',o.y2,`" />
`]}}),r.Line.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),r.Line.fromElement=function(o,c,g){g=g||{};var l=r.parseAttributes(o,r.Line.ATTRIBUTE_NAMES),p=[l.x1||0,l.y1||0,l.x2||0,l.y2||0];c(new r.Line(p,u(l,g)))},r.Line.fromObject=function(o,c){function g(p){delete p.points,c&&c(p)}var l=d(o,!0);l.points=[o.x1,o.y1,o.x2,o.y2],r.Object._fromObject("Line",l,g,"points")};function a(o,c){var g=o.origin,l=o.axis1,p=o.axis2,v=o.dimension,y=c.nearest,x=c.center,w=c.farthest;return function(){switch(this.get(g)){case y:return Math.min(this.get(l),this.get(p));case x:return Math.min(this.get(l),this.get(p))+.5*this.get(v);case w:return Math.max(this.get(l),this.get(p))}}}}(t),function(f){var r=f.fabric||(f.fabric={}),u=r.util.degreesToRadians;if(r.Circle){r.warn("fabric.Circle is already defined.");return}r.Circle=r.util.createClass(r.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:r.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(s,a){return this.callSuper("_set",s,a),s==="radius"&&this.setRadius(a),this},toObject:function(s){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(s))},_toSVG:function(){var s,a=0,o=0,c=(this.endAngle-this.startAngle)%360;if(c===0)s=["<circle ","COMMON_PARTS",'cx="'+a+'" cy="'+o+'" ','r="',this.radius,`" />
`];else{var g=u(this.startAngle),l=u(this.endAngle),p=this.radius,v=r.util.cos(g)*p,y=r.util.sin(g)*p,x=r.util.cos(l)*p,w=r.util.sin(l)*p,S=c>180?"1":"0";s=['<path d="M '+v+" "+y," A "+p+" "+p," 0 ",+S+" 1"," "+x+" "+w,'" ',"COMMON_PARTS",` />
`]}return s},_render:function(s){s.beginPath(),s.arc(0,0,this.radius,u(this.startAngle),u(this.endAngle),!1),this._renderPaintInOrder(s)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(s){return this.radius=s,this.set("width",s*2).set("height",s*2)}}),r.Circle.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),r.Circle.fromElement=function(s,a){var o=r.parseAttributes(s,r.Circle.ATTRIBUTE_NAMES);if(!d(o))throw new Error("value of `r` attribute is required and can not be negative");o.left=(o.left||0)-o.radius,o.top=(o.top||0)-o.radius,a(new r.Circle(o))};function d(s){return"radius"in s&&s.radius>=0}r.Circle.fromObject=function(s,a){r.Object._fromObject("Circle",s,a)}}(t),function(f){var r=f.fabric||(f.fabric={});if(r.Triangle){r.warn("fabric.Triangle is already defined");return}r.Triangle=r.util.createClass(r.Object,{type:"triangle",width:100,height:100,_render:function(u){var d=this.width/2,s=this.height/2;u.beginPath(),u.moveTo(-d,s),u.lineTo(0,-s),u.lineTo(d,s),u.closePath(),this._renderPaintInOrder(u)},_toSVG:function(){var u=this.width/2,d=this.height/2,s=[-u+" "+d,"0 "+-d,u+" "+d].join(",");return["<polygon ","COMMON_PARTS",'points="',s,'" />']}}),r.Triangle.fromObject=function(u,d){return r.Object._fromObject("Triangle",u,d)}}(t),function(f){var r=f.fabric||(f.fabric={}),u=Math.PI*2;if(r.Ellipse){r.warn("fabric.Ellipse is already defined.");return}r.Ellipse=r.util.createClass(r.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:r.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(d){this.callSuper("initialize",d),this.set("rx",d&&d.rx||0),this.set("ry",d&&d.ry||0)},_set:function(d,s){switch(this.callSuper("_set",d,s),d){case"rx":this.rx=s,this.set("width",s*2);break;case"ry":this.ry=s,this.set("height",s*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(d){return this.callSuper("toObject",["rx","ry"].concat(d))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(d){d.beginPath(),d.save(),d.transform(1,0,0,this.ry/this.rx,0,0),d.arc(0,0,this.rx,0,u,!1),d.restore(),this._renderPaintInOrder(d)}}),r.Ellipse.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),r.Ellipse.fromElement=function(d,s){var a=r.parseAttributes(d,r.Ellipse.ATTRIBUTE_NAMES);a.left=(a.left||0)-a.rx,a.top=(a.top||0)-a.ry,s(new r.Ellipse(a))},r.Ellipse.fromObject=function(d,s){r.Object._fromObject("Ellipse",d,s)}}(t),function(f){var r=f.fabric||(f.fabric={}),u=r.util.object.extend;if(r.Rect){r.warn("fabric.Rect is already defined");return}r.Rect=r.util.createClass(r.Object,{stateProperties:r.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:r.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(d){this.callSuper("initialize",d),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(d){var s=this.rx?Math.min(this.rx,this.width/2):0,a=this.ry?Math.min(this.ry,this.height/2):0,o=this.width,c=this.height,g=-this.width/2,l=-this.height/2,p=s!==0||a!==0,v=1-.5522847498;d.beginPath(),d.moveTo(g+s,l),d.lineTo(g+o-s,l),p&&d.bezierCurveTo(g+o-v*s,l,g+o,l+v*a,g+o,l+a),d.lineTo(g+o,l+c-a),p&&d.bezierCurveTo(g+o,l+c-v*a,g+o-v*s,l+c,g+o-s,l+c),d.lineTo(g+s,l+c),p&&d.bezierCurveTo(g+v*s,l+c,g,l+c-v*a,g,l+c-a),d.lineTo(g,l+a),p&&d.bezierCurveTo(g,l+v*a,g+v*s,l,g+s,l),d.closePath(),this._renderPaintInOrder(d)},toObject:function(d){return this.callSuper("toObject",["rx","ry"].concat(d))},_toSVG:function(){var d=-this.width/2,s=-this.height/2;return["<rect ","COMMON_PARTS",'x="',d,'" y="',s,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),r.Rect.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),r.Rect.fromElement=function(d,s,a){if(!d)return s(null);a=a||{};var o=r.parseAttributes(d,r.Rect.ATTRIBUTE_NAMES);o.left=o.left||0,o.top=o.top||0,o.height=o.height||0,o.width=o.width||0;var c=new r.Rect(u(a?r.util.object.clone(a):{},o));c.visible=c.visible&&c.width>0&&c.height>0,s(c)},r.Rect.fromObject=function(d,s){return r.Object._fromObject("Rect",d,s)}}(t),function(f){var r=f.fabric||(f.fabric={}),u=r.util.object.extend,d=r.util.array.min,s=r.util.array.max,a=r.util.toFixed,o=r.util.projectStrokeOnPoints;if(r.Polyline){r.warn("fabric.Polyline is already defined");return}r.Polyline=r.util.createClass(r.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:r.Object.prototype.cacheProperties.concat("points"),initialize:function(c,g){g=g||{},this.points=c||[],this.callSuper("initialize",g),this._setPositionDimensions(g)},_projectStrokeOnPoints:function(){return o(this.points,this,!0)},_setPositionDimensions:function(c){var g=this._calcDimensions(c),l,p=this.exactBoundingBox?this.strokeWidth:0;this.width=g.width-p,this.height=g.height-p,c.fromSVG||(l=this.translateToGivenOrigin({x:g.left-this.strokeWidth/2+p/2,y:g.top-this.strokeWidth/2+p/2},"left","top",this.originX,this.originY)),typeof c.left>"u"&&(this.left=c.fromSVG?g.left:l.x),typeof c.top>"u"&&(this.top=c.fromSVG?g.top:l.y),this.pathOffset={x:g.left+this.width/2+p/2,y:g.top+this.height/2+p/2}},_calcDimensions:function(){var c=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,g=d(c,"x")||0,l=d(c,"y")||0,p=s(c,"x")||0,v=s(c,"y")||0,y=p-g,x=v-l;return{left:g,top:l,width:y,height:x}},toObject:function(c){return u(this.callSuper("toObject",c),{points:this.points.concat()})},_toSVG:function(){for(var c=[],g=this.pathOffset.x,l=this.pathOffset.y,p=r.Object.NUM_FRACTION_DIGITS,v=0,y=this.points.length;v<y;v++)c.push(a(this.points[v].x-g,p),",",a(this.points[v].y-l,p)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',c.join(""),`" />
`]},commonRender:function(c){var g,l=this.points.length,p=this.pathOffset.x,v=this.pathOffset.y;if(!l||isNaN(this.points[l-1].y))return!1;c.beginPath(),c.moveTo(this.points[0].x-p,this.points[0].y-v);for(var y=0;y<l;y++)g=this.points[y],c.lineTo(g.x-p,g.y-v);return!0},_render:function(c){this.commonRender(c)&&this._renderPaintInOrder(c)},complexity:function(){return this.get("points").length}}),r.Polyline.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(),r.Polyline.fromElementGenerator=function(c){return function(g,l,p){if(!g)return l(null);p||(p={});var v=r.parsePointsAttribute(g.getAttribute("points")),y=r.parseAttributes(g,r[c].ATTRIBUTE_NAMES);y.fromSVG=!0,l(new r[c](v,u(y,p)))}},r.Polyline.fromElement=r.Polyline.fromElementGenerator("Polyline"),r.Polyline.fromObject=function(c,g){return r.Object._fromObject("Polyline",c,g,"points")}}(t),function(f){var r=f.fabric||(f.fabric={}),u=r.util.projectStrokeOnPoints;if(r.Polygon){r.warn("fabric.Polygon is already defined");return}r.Polygon=r.util.createClass(r.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return u(this.points,this)},_render:function(d){this.commonRender(d)&&(d.closePath(),this._renderPaintInOrder(d))}}),r.Polygon.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(),r.Polygon.fromElement=r.Polyline.fromElementGenerator("Polygon"),r.Polygon.fromObject=function(d,s){r.Object._fromObject("Polygon",d,s,"points")}}(t),function(f){var r=f.fabric||(f.fabric={}),u=r.util.array.min,d=r.util.array.max,s=r.util.object.extend,a=r.util.object.clone,o=r.util.toFixed;if(r.Path){r.warn("fabric.Path is already defined");return}r.Path=r.util.createClass(r.Object,{type:"path",path:null,cacheProperties:r.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:r.Object.prototype.stateProperties.concat("path"),initialize:function(c,g){g=a(g||{}),delete g.path,this.callSuper("initialize",g),this._setPath(c||[],g)},_setPath:function(c,g){this.path=r.util.makePathSimpler(Array.isArray(c)?c:r.util.parsePath(c)),r.Polyline.prototype._setPositionDimensions.call(this,g||{})},_renderPathCommands:function(c){var g,l=0,p=0,v=0,y=0,x=0,w=0,S=-this.pathOffset.x,k=-this.pathOffset.y;c.beginPath();for(var b=0,j=this.path.length;b<j;++b)switch(g=this.path[b],g[0]){case"L":v=g[1],y=g[2],c.lineTo(v+S,y+k);break;case"M":v=g[1],y=g[2],l=v,p=y,c.moveTo(v+S,y+k);break;case"C":v=g[5],y=g[6],x=g[3],w=g[4],c.bezierCurveTo(g[1]+S,g[2]+k,x+S,w+k,v+S,y+k);break;case"Q":c.quadraticCurveTo(g[1]+S,g[2]+k,g[3]+S,g[4]+k),v=g[3],y=g[4],x=g[1],w=g[2];break;case"z":case"Z":v=l,y=p,c.closePath();break}},_render:function(c){this._renderPathCommands(c),this._renderPaintInOrder(c)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(c){return s(this.callSuper("toObject",c),{path:this.path.map(function(g){return g.slice()})})},toDatalessObject:function(c){var g=this.toObject(["sourcePath"].concat(c));return g.sourcePath&&delete g.path,g},_toSVG:function(){var c=r.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',c,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var c=r.Object.NUM_FRACTION_DIGITS;return" translate("+o(-this.pathOffset.x,c)+", "+o(-this.pathOffset.y,c)+")"},toClipPathSVG:function(c){var g=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:c,additionalTransform:g})},toSVG:function(c){var g=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:c,additionalTransform:g})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var c=[],g=[],l,p=0,v=0,y=0,x=0,w,S=0,k=this.path.length;S<k;++S){switch(l=this.path[S],l[0]){case"L":y=l[1],x=l[2],w=[];break;case"M":y=l[1],x=l[2],p=y,v=x,w=[];break;case"C":w=r.util.getBoundsOfCurve(y,x,l[1],l[2],l[3],l[4],l[5],l[6]),y=l[5],x=l[6];break;case"Q":w=r.util.getBoundsOfCurve(y,x,l[1],l[2],l[1],l[2],l[3],l[4]),y=l[3],x=l[4];break;case"z":case"Z":y=p,x=v;break}w.forEach(function(J){c.push(J.x),g.push(J.y)}),c.push(y),g.push(x)}var b=u(c)||0,j=u(g)||0,M=d(c)||0,W=d(g)||0,ee=M-b,te=W-j;return{left:b,top:j,width:ee,height:te}}}),r.Path.fromObject=function(c,g){if(typeof c.sourcePath=="string"){var l=c.sourcePath;r.loadSVGFromURL(l,function(p){var v=p[0];v.setOptions(c),c.clipPath?r.util.enlivenObjects([c.clipPath],function(y){v.clipPath=y[0],g&&g(v)}):g&&g(v)})}else r.Object._fromObject("Path",c,g,"path")},r.Path.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(["d"]),r.Path.fromElement=function(c,g,l){var p=r.parseAttributes(c,r.Path.ATTRIBUTE_NAMES);p.fromSVG=!0,g(new r.Path(p.d,s(p,l)))}}(t),function(f){var r=f.fabric||(f.fabric={}),u=r.util.array.min,d=r.util.array.max;r.Group||(r.Group=r.util.createClass(r.Object,r.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(s,a,o){a=a||{},this._objects=[],o&&this.callSuper("initialize",a),this._objects=s||[];for(var c=this._objects.length;c--;)this._objects[c].group=this;if(o)this._updateObjectsACoords();else{var g=a&&a.centerPoint;a.originX!==void 0&&(this.originX=a.originX),a.originY!==void 0&&(this.originY=a.originY),g||this._calcBounds(),this._updateObjectsCoords(g),delete a.centerPoint,this.callSuper("initialize",a)}this.setCoords()},_updateObjectsACoords:function(){for(var s=!0,a=this._objects.length;a--;)this._objects[a].setCoords(s)},_updateObjectsCoords:function(a){for(var a=a||this.getCenterPoint(),o=this._objects.length;o--;)this._updateObjectCoords(this._objects[o],a)},_updateObjectCoords:function(s,a){var o=s.left,c=s.top,g=!0;s.set({left:o-a.x,top:c-a.y}),s.group=this,s.setCoords(g)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(s){var a=!!this.group;return this._restoreObjectsState(),r.util.resetObjectTransform(this),s&&(a&&r.util.removeTransformFromObject(s,this.group.calcTransformMatrix()),this._objects.push(s),s.group=this,s._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,a?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(s){return this._restoreObjectsState(),r.util.resetObjectTransform(this),this.remove(s),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(s){this.dirty=!0,s.group=this,s._set("canvas",this.canvas)},_onObjectRemoved:function(s){this.dirty=!0,delete s.group},_set:function(s,a){var o=this._objects.length;if(this.useSetOnGroup)for(;o--;)this._objects[o].setOnGroup(s,a);if(s==="canvas")for(;o--;)this._objects[o]._set(s,a);r.Object.prototype._set.call(this,s,a)},toObject:function(s){var a=this.includeDefaultValues,o=this._objects.filter(function(g){return!g.excludeFromExport}).map(function(g){var l=g.includeDefaultValues;g.includeDefaultValues=a;var p=g.toObject(s);return g.includeDefaultValues=l,p}),c=r.Object.prototype.toObject.call(this,s);return c.objects=o,c},toDatalessObject:function(s){var a,o=this.sourcePath;if(o)a=o;else{var c=this.includeDefaultValues;a=this._objects.map(function(l){var p=l.includeDefaultValues;l.includeDefaultValues=c;var v=l.toDatalessObject(s);return l.includeDefaultValues=p,v})}var g=r.Object.prototype.toDatalessObject.call(this,s);return g.objects=a,g},render:function(s){this._transformDone=!0,this.callSuper("render",s),this._transformDone=!1},shouldCache:function(){var s=r.Object.prototype.shouldCache.call(this);if(s){for(var a=0,o=this._objects.length;a<o;a++)if(this._objects[a].willDrawShadow())return this.ownCaching=!1,!1}return s},willDrawShadow:function(){if(r.Object.prototype.willDrawShadow.call(this))return!0;for(var s=0,a=this._objects.length;s<a;s++)if(this._objects[s].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(s){for(var a=0,o=this._objects.length;a<o;a++)this._objects[a].render(s);this._drawClipPath(s,this.clipPath)},isCacheDirty:function(s){if(this.callSuper("isCacheDirty",s))return!0;if(!this.statefullCache)return!1;for(var a=0,o=this._objects.length;a<o;a++)if(this._objects[a].isCacheDirty(!0)){if(this._cacheCanvas){var c=this.cacheWidth/this.zoomX,g=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-c/2,-g/2,c,g)}return!0}return!1},_restoreObjectsState:function(){var s=this.calcOwnMatrix();return this._objects.forEach(function(a){r.util.addTransformToObject(a,s),delete a.group,a.setCoords()}),this},destroy:function(){return this._objects.forEach(function(s){s.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(s){s.dispose&&s.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var s=this._objects,a=this.canvas;this._objects=[];var o=this.toObject();delete o.objects;var c=new r.ActiveSelection([]);return c.set(o),c.type="activeSelection",a.remove(this),s.forEach(function(g){g.group=c,g.dirty=!0,a.add(g)}),c.canvas=a,c._objects=s,a._activeObject=c,c.setCoords(),c}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var s=!0;return this.forEachObject(function(a){a.setCoords(s)}),this},_calcBounds:function(s){for(var a=[],o=[],c,g,l,p=["tr","br","bl","tl"],v=0,y=this._objects.length,x,w=p.length;v<y;++v){for(c=this._objects[v],l=c.calcACoords(),x=0;x<w;x++)g=p[x],a.push(l[g].x),o.push(l[g].y);c.aCoords=l}this._getBounds(a,o,s)},_getBounds:function(s,a,o){var c=new r.Point(u(s),u(a)),g=new r.Point(d(s),d(a)),l=c.y||0,p=c.x||0,v=g.x-c.x||0,y=g.y-c.y||0;this.width=v,this.height=y,o||this.setPositionByOrigin({x:p,y:l},"left","top")},_toSVG:function(s){for(var a=["<g ","COMMON_PARTS",` >
`],o=0,c=this._objects.length;o<c;o++)a.push("		",this._objects[o].toSVG(s));return a.push(`</g>
`),a},getSvgStyles:function(){var s=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",a=this.visible?"":" visibility: hidden;";return[s,this.getSvgFilter(),a].join("")},toClipPathSVG:function(s){for(var a=[],o=0,c=this._objects.length;o<c;o++)a.push("	",this._objects[o].toClipPathSVG(s));return this._createBaseClipPathSVGMarkup(a,{reviver:s})}}),r.Group.fromObject=function(s,a){var o=s.objects,c=r.util.object.clone(s,!0);if(delete c.objects,typeof o=="string"){r.loadSVGFromURL(o,function(g){var l=r.util.groupSVGElements(g,s,o),p=c.clipPath;delete c.clipPath,l.set(c),p?r.util.enlivenObjects([p],function(v){l.clipPath=v[0],a&&a(l)}):a&&a(l)});return}r.util.enlivenObjects(o,function(g){r.util.enlivenObjectEnlivables(s,c,function(){a&&a(new r.Group(g,c,!0))})})})}(t),function(f){var r=f.fabric||(f.fabric={});r.ActiveSelection||(r.ActiveSelection=r.util.createClass(r.Group,{type:"activeSelection",initialize:function(u,d){d=d||{},this._objects=u||[];for(var s=this._objects.length;s--;)this._objects[s].group=this;d.originX&&(this.originX=d.originX),d.originY&&(this.originY=d.originY),this._calcBounds(),this._updateObjectsCoords(),r.Object.prototype.initialize.call(this,d),this.setCoords()},toGroup:function(){var u=this._objects.concat();this._objects=[];var d=r.Object.prototype.toObject.call(this),s=new r.Group([]);if(delete d.type,s.set(d),u.forEach(function(o){o.canvas.remove(o),o.group=s}),s._objects=u,!this.canvas)return s;var a=this.canvas;return a.add(s),a._activeObject=s,s.setCoords(),s},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(u,d,s){u.save(),u.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,s=s||{},typeof s.hasControls>"u"&&(s.hasControls=!1),s.forActiveSelection=!0;for(var a=0,o=this._objects.length;a<o;a++)this._objects[a]._renderControls(u,s);this.callSuper("_renderControls",u,d),u.restore()}}),r.ActiveSelection.fromObject=function(u,d){r.util.enlivenObjects(u.objects,function(s){delete u.objects,d&&d(new r.ActiveSelection(s,u,!0))})})}(t),function(f){var r=e.util.object.extend;if(f.fabric||(f.fabric={}),f.fabric.Image){e.warn("fabric.Image is already defined.");return}e.Image=e.util.createClass(e.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:e.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:e.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(u,d){d||(d={}),this.filters=[],this.cacheKey="texture"+e.Object.__uid++,this.callSuper("initialize",d),this._initElement(u,d)},getElement:function(){return this._element||{}},setElement:function(u,d){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=u,this._originalElement=u,this._initConfig(d),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(u){var d=e.filterBackend;d&&d.evictCachesForKey&&d.evictCachesForKey(u)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(u){e.util.cleanUpJsdomNode(this[u]),this[u]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var u=this.getElement();return{width:u.naturalWidth||u.width,height:u.naturalHeight||u.height}},_stroke:function(u){if(!(!this.stroke||this.strokeWidth===0)){var d=this.width/2,s=this.height/2;u.beginPath(),u.moveTo(-d,-s),u.lineTo(d,-s),u.lineTo(d,s),u.lineTo(-d,s),u.lineTo(-d,-s),u.closePath()}},toObject:function(u){var d=[];this.filters.forEach(function(a){a&&d.push(a.toObject())});var s=r(this.callSuper("toObject",["cropX","cropY"].concat(u)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:d});return this.resizeFilter&&(s.resizeFilter=this.resizeFilter.toObject()),s},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var u=[],d=[],s,a=this._element,o=-this.width/2,c=-this.height/2,g="",l="";if(!a)return[];if(this.hasCrop()){var p=e.Object.__uid++;u.push('<clipPath id="imageCrop_'+p+`">
`,'	<rect x="'+o+'" y="'+c+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),g=' clip-path="url(#imageCrop_'+p+')" '}if(this.imageSmoothing||(l='" image-rendering="optimizeSpeed'),d.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',o-this.cropX,'" y="',c-this.cropY,'" width="',a.width||a.naturalWidth,'" height="',a.height||a.height,l,'"',g,`></image>
`),this.stroke||this.strokeDashArray){var v=this.fill;this.fill=null,s=["	<rect ",'x="',o,'" y="',c,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=v}return this.paintFirst!=="fill"?u=u.concat(s,d):u=u.concat(d,s),u},getSrc:function(u){var d=u?this._element:this._originalElement;return d?d.toDataURL?d.toDataURL():this.srcFromAttribute?d.getAttribute("src"):d.src:this.src||""},setSrc:function(u,d,s){return e.util.loadImage(u,function(a,o){this.setElement(a,s),this._setWidthHeight(),d&&d(this,o)},this,s&&s.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var u=this.resizeFilter,d=this.minimumScaleTrigger,s=this.getTotalObjectScaling(),a=s.scaleX,o=s.scaleY,c=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!u||a>d&&o>d){this._element=c,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=a,this._lastScaleY=o;return}e.filterBackend||(e.filterBackend=e.initFilterBackend());var g=e.util.createCanvasElement(),l=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,p=c.width,v=c.height;g.width=p,g.height=v,this._element=g,this._lastScaleX=u.scaleX=a,this._lastScaleY=u.scaleY=o,e.filterBackend.applyFilters([u],c,p,v,this._element,l),this._filterScalingX=g.width/this._originalElement.width,this._filterScalingY=g.height/this._originalElement.height},applyFilters:function(u){if(u=u||this.filters||[],u=u.filter(function(c){return c&&!c.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),u.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var d=this._originalElement,s=d.naturalWidth||d.width,a=d.naturalHeight||d.height;if(this._element===this._originalElement){var o=e.util.createCanvasElement();o.width=s,o.height=a,this._element=o,this._filteredEl=o}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,s,a),this._lastScaleX=1,this._lastScaleY=1;return e.filterBackend||(e.filterBackend=e.initFilterBackend()),e.filterBackend.applyFilters(u,this._originalElement,s,a,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(u){e.util.setImageSmoothing(u,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(u),this._renderPaintInOrder(u)},drawCacheOnCanvas:function(u){e.util.setImageSmoothing(u,this.imageSmoothing),e.Object.prototype.drawCacheOnCanvas.call(this,u)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(u){var d=this._element;if(d){var s=this._filterScalingX,a=this._filterScalingY,o=this.width,c=this.height,g=Math.min,l=Math.max,p=l(this.cropX,0),v=l(this.cropY,0),y=d.naturalWidth||d.width,x=d.naturalHeight||d.height,w=p*s,S=v*a,k=g(o*s,y-w),b=g(c*a,x-S),j=-o/2,M=-c/2,W=g(o,y/s-p),ee=g(c,x/a-v);d&&u.drawImage(d,w,S,k,b,j,M,W,ee)}},_needsResize:function(){var u=this.getTotalObjectScaling();return u.scaleX!==this._lastScaleX||u.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(u,d){this.setElement(e.util.getById(u),d),e.util.addClass(this.getElement(),e.Image.CSS_CANVAS)},_initConfig:function(u){u||(u={}),this.setOptions(u),this._setWidthHeight(u)},_initFilters:function(u,d){u&&u.length?e.util.enlivenObjects(u,function(s){d&&d(s)},"fabric.Image.filters"):d&&d()},_setWidthHeight:function(u){u||(u={});var d=this.getElement();this.width=u.width||d.naturalWidth||d.width||0,this.height=u.height||d.naturalHeight||d.height||0},parsePreserveAspectRatioAttribute:function(){var u=e.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),d=this._element.width,s=this._element.height,a=1,o=1,c=0,g=0,l=0,p=0,v,y=this.width,x=this.height,w={width:y,height:x};return u&&(u.alignX!=="none"||u.alignY!=="none")?(u.meetOrSlice==="meet"&&(a=o=e.util.findScaleToFit(this._element,w),v=(y-d*a)/2,u.alignX==="Min"&&(c=-v),u.alignX==="Max"&&(c=v),v=(x-s*o)/2,u.alignY==="Min"&&(g=-v),u.alignY==="Max"&&(g=v)),u.meetOrSlice==="slice"&&(a=o=e.util.findScaleToCover(this._element,w),v=d-y/a,u.alignX==="Mid"&&(l=v/2),u.alignX==="Max"&&(l=v),v=s-x/o,u.alignY==="Mid"&&(p=v/2),u.alignY==="Max"&&(p=v),d=y/a,s=x/o)):(a=y/d,o=x/s),{width:d,height:s,scaleX:a,scaleY:o,offsetLeft:c,offsetTop:g,cropX:l,cropY:p}}}),e.Image.CSS_CANVAS="canvas-img",e.Image.prototype.getSvgSrc=e.Image.prototype.getSrc,e.Image.fromObject=function(u,d){var s=e.util.object.clone(u);e.util.loadImage(s.src,function(a,o){if(o){d&&d(null,!0);return}e.Image.prototype._initFilters.call(s,s.filters,function(c){s.filters=c||[],e.Image.prototype._initFilters.call(s,[s.resizeFilter],function(g){s.resizeFilter=g[0],e.util.enlivenObjectEnlivables(s,s,function(){var l=new e.Image(a,s);d(l,!1)})})})},null,s.crossOrigin)},e.Image.fromURL=function(u,d,s){e.util.loadImage(u,function(a,o){d&&d(new e.Image(a,s),o)},null,s&&s.crossOrigin)},e.Image.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),e.Image.fromElement=function(u,d,s){var a=e.parseAttributes(u,e.Image.ATTRIBUTE_NAMES);e.Image.fromURL(a["xlink:href"],d,r(s?e.util.object.clone(s):{},a))}}(t),e.util.object.extend(e.Object.prototype,{_getAngleValueForStraighten:function(){var f=this.angle%360;return f>0?Math.round((f-1)/90)*90:Math.round(f/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(f){f=f||{};var r=function(){},u=f.onComplete||r,d=f.onChange||r,s=this;return e.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(a){s.rotate(a),d()},onComplete:function(){s.setCoords(),u()}})}}),e.util.object.extend(e.StaticCanvas.prototype,{straightenObject:function(f){return f.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(f){return f.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function f(u,d){var s="precision "+d+` float;
void main(){}`,a=u.createShader(u.FRAGMENT_SHADER);return u.shaderSource(a,s),u.compileShader(a),!!u.getShaderParameter(a,u.COMPILE_STATUS)}e.isWebglSupported=function(u){if(e.isLikelyNode)return!1;u=u||e.WebglFilterBackend.prototype.tileSize;var d=document.createElement("canvas"),s=d.getContext("webgl")||d.getContext("experimental-webgl"),a=!1;if(s){e.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),a=e.maxTextureSize>=u;for(var o=["highp","mediump","lowp"],c=0;c<3;c++)if(f(s,o[c])){e.webGlPrecision=o[c];break}}return this.isSupported=a,a},e.WebglFilterBackend=r;function r(u){u&&u.tileSize&&(this.tileSize=u.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}r.prototype={tileSize:2048,resources:{},setupGLContext:function(u,d){this.dispose(),this.createWebGLCanvas(u,d),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(u,d)},chooseFastestCopyGLTo2DMethod:function(u,d){var s=typeof window.performance<"u",a;try{new ImageData(1,1),a=!0}catch{a=!1}var o=typeof ArrayBuffer<"u",c=typeof Uint8ClampedArray<"u";if(s&&a&&o&&c){var g=e.util.createCanvasElement(),l=new ArrayBuffer(u*d*4);if(e.forceGLPutImageData){this.imageBuffer=l,this.copyGLTo2D=_;return}var p={imageBuffer:l,destinationWidth:u,destinationHeight:d,targetCanvas:g},v,y,x;g.width=u,g.height=d,v=window.performance.now(),m.call(p,this.gl,p),y=window.performance.now()-v,v=window.performance.now(),_.call(p,this.gl,p),x=window.performance.now()-v,y>x?(this.imageBuffer=l,this.copyGLTo2D=_):this.copyGLTo2D=m}},createWebGLCanvas:function(u,d){var s=e.util.createCanvasElement();s.width=u,s.height=d;var a={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},o=s.getContext("webgl",a);o||(o=s.getContext("experimental-webgl",a)),o&&(o.clearColor(0,0,0,0),this.canvas=s,this.gl=o)},applyFilters:function(u,d,s,a,o,c){var g=this.gl,l;c&&(l=this.getCachedTexture(c,d));var p={originalWidth:d.width||d.originalWidth,originalHeight:d.height||d.originalHeight,sourceWidth:s,sourceHeight:a,destinationWidth:s,destinationHeight:a,context:g,sourceTexture:this.createTexture(g,s,a,!l&&d),targetTexture:this.createTexture(g,s,a),originalTexture:l||this.createTexture(g,s,a,!l&&d),passes:u.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:o},v=g.createFramebuffer();return g.bindFramebuffer(g.FRAMEBUFFER,v),u.forEach(function(y){y&&y.applyTo(p)}),h(p),this.copyGLTo2D(g,p),g.bindTexture(g.TEXTURE_2D,null),g.deleteTexture(p.sourceTexture),g.deleteTexture(p.targetTexture),g.deleteFramebuffer(v),o.getContext("2d").setTransform(1,0,0,1,0,0),p},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(u,d,s,a,o){var c=u.createTexture();return u.bindTexture(u.TEXTURE_2D,c),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,o||u.NEAREST),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,o||u.NEAREST),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),a?u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,a):u.texImage2D(u.TEXTURE_2D,0,u.RGBA,d,s,0,u.RGBA,u.UNSIGNED_BYTE,null),c},getCachedTexture:function(u,d){if(this.textureCache[u])return this.textureCache[u];var s=this.createTexture(this.gl,d.width,d.height,d);return this.textureCache[u]=s,s},evictCachesForKey:function(u){this.textureCache[u]&&(this.gl.deleteTexture(this.textureCache[u]),delete this.textureCache[u])},copyGLTo2D:m,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var u=this.gl,d={renderer:"",vendor:""};if(!u)return d;var s=u.getExtension("WEBGL_debug_renderer_info");if(s){var a=u.getParameter(s.UNMASKED_RENDERER_WEBGL),o=u.getParameter(s.UNMASKED_VENDOR_WEBGL);a&&(d.renderer=a.toLowerCase()),o&&(d.vendor=o.toLowerCase())}return this.gpuInfo=d,d}}}();function h(f){var r=f.targetCanvas,u=r.width,d=r.height,s=f.destinationWidth,a=f.destinationHeight;(u!==s||d!==a)&&(r.width=s,r.height=a)}function m(f,r){var u=f.canvas,d=r.targetCanvas,s=d.getContext("2d");s.translate(0,d.height),s.scale(1,-1);var a=u.height-d.height;s.drawImage(u,0,a,d.width,d.height,0,0,d.width,d.height)}function _(f,r){var u=r.targetCanvas,d=u.getContext("2d"),s=r.destinationWidth,a=r.destinationHeight,o=s*a*4,c=new Uint8Array(this.imageBuffer,0,o),g=new Uint8ClampedArray(this.imageBuffer,0,o);f.readPixels(0,0,s,a,f.RGBA,f.UNSIGNED_BYTE,c);var l=new ImageData(g,s,a);d.putImageData(l,0,0)}(function(){var f=function(){};e.Canvas2dFilterBackend=r;function r(){}r.prototype={evictCachesForKey:f,dispose:f,clearWebGLCaches:f,resources:{},applyFilters:function(u,d,s,a,o){var c=o.getContext("2d");c.drawImage(d,0,0,s,a);var g=c.getImageData(0,0,s,a),l=c.getImageData(0,0,s,a),p={sourceWidth:s,sourceHeight:a,imageData:g,originalEl:d,originalImageData:l,canvasEl:o,ctx:c,filterBackend:this};return u.forEach(function(v){v.applyTo(p)}),(p.imageData.width!==s||p.imageData.height!==a)&&(o.width=p.imageData.width,o.height=p.imageData.height),c.putImageData(p.imageData,0,0),p}}})(),e.Image=e.Image||{},e.Image.filters=e.Image.filters||{},e.Image.filters.BaseFilter=e.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(f){f&&this.setOptions(f)},setOptions:function(f){for(var r in f)this[r]=f[r]},createProgram:function(f,r,u){r=r||this.fragmentSource,u=u||this.vertexSource,e.webGlPrecision!=="highp"&&(r=r.replace(/precision highp float/g,"precision "+e.webGlPrecision+" float"));var d=f.createShader(f.VERTEX_SHADER);if(f.shaderSource(d,u),f.compileShader(d),!f.getShaderParameter(d,f.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+f.getShaderInfoLog(d));var s=f.createShader(f.FRAGMENT_SHADER);if(f.shaderSource(s,r),f.compileShader(s),!f.getShaderParameter(s,f.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+f.getShaderInfoLog(s));var a=f.createProgram();if(f.attachShader(a,d),f.attachShader(a,s),f.linkProgram(a),!f.getProgramParameter(a,f.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+f.getProgramInfoLog(a));var o=this.getAttributeLocations(f,a),c=this.getUniformLocations(f,a)||{};return c.uStepW=f.getUniformLocation(a,"uStepW"),c.uStepH=f.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:o,uniformLocations:c}},getAttributeLocations:function(f,r){return{aPosition:f.getAttribLocation(r,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(f,r,u){var d=r.aPosition,s=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,s),f.enableVertexAttribArray(d),f.vertexAttribPointer(d,2,f.FLOAT,!1,0,0),f.bufferData(f.ARRAY_BUFFER,u,f.STATIC_DRAW)},_setupFrameBuffer:function(f){var r=f.context,u,d;f.passes>1?(u=f.destinationWidth,d=f.destinationHeight,(f.sourceWidth!==u||f.sourceHeight!==d)&&(r.deleteTexture(f.targetTexture),f.targetTexture=f.filterBackend.createTexture(r,u,d)),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,f.targetTexture,0)):(r.bindFramebuffer(r.FRAMEBUFFER,null),r.finish())},_swapTextures:function(f){f.passes--,f.pass++;var r=f.targetTexture;f.targetTexture=f.sourceTexture,f.sourceTexture=r},isNeutralState:function(){var f=this.mainParameter,r=e.Image.filters[this.type].prototype;if(f)if(Array.isArray(r[f])){for(var u=r[f].length;u--;)if(this[f][u]!==r[f][u])return!1;return!0}else return r[f]===this[f];else return!1},applyTo:function(f){f.webgl?(this._setupFrameBuffer(f),this.applyToWebGL(f),this._swapTextures(f)):this.applyTo2d(f)},retrieveShader:function(f){return f.programCache.hasOwnProperty(this.type)||(f.programCache[this.type]=this.createProgram(f.context)),f.programCache[this.type]},applyToWebGL:function(f){var r=f.context,u=this.retrieveShader(f);f.pass===0&&f.originalTexture?r.bindTexture(r.TEXTURE_2D,f.originalTexture):r.bindTexture(r.TEXTURE_2D,f.sourceTexture),r.useProgram(u.program),this.sendAttributeData(r,u.attributeLocations,f.aPosition),r.uniform1f(u.uniformLocations.uStepW,1/f.sourceWidth),r.uniform1f(u.uniformLocations.uStepH,1/f.sourceHeight),this.sendUniformData(r,u.uniformLocations),r.viewport(0,0,f.destinationWidth,f.destinationHeight),r.drawArrays(r.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(f,r,u){f.activeTexture(u),f.bindTexture(f.TEXTURE_2D,r),f.activeTexture(f.TEXTURE0)},unbindAdditionalTexture:function(f,r){f.activeTexture(r),f.bindTexture(f.TEXTURE_2D,null),f.activeTexture(f.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(f){this[this.mainParameter]=f},sendUniformData:function(){},createHelpLayer:function(f){if(!f.helpLayer){var r=document.createElement("canvas");r.width=f.sourceWidth,r.height=f.sourceHeight,f.helpLayer=r}},toObject:function(){var f={type:this.type},r=this.mainParameter;return r&&(f[r]=this[r]),f},toJSON:function(){return this.toObject()}}),e.Image.filters.BaseFilter.fromObject=function(f,r){var u=new e.Image.filters[f.type](f);return r&&r(u),u},function(f){var r=f.fabric||(f.fabric={}),u=r.Image.filters,d=r.util.createClass;u.ColorMatrix=d(u.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(s){this.callSuper("initialize",s),this.matrix=this.matrix.slice(0)},applyTo2d:function(s){var a=s.imageData,o=a.data,c=o.length,g=this.matrix,l,p,v,y,x,w=this.colorsOnly;for(x=0;x<c;x+=4)l=o[x],p=o[x+1],v=o[x+2],w?(o[x]=l*g[0]+p*g[1]+v*g[2]+g[4]*255,o[x+1]=l*g[5]+p*g[6]+v*g[7]+g[9]*255,o[x+2]=l*g[10]+p*g[11]+v*g[12]+g[14]*255):(y=o[x+3],o[x]=l*g[0]+p*g[1]+v*g[2]+y*g[3]+g[4]*255,o[x+1]=l*g[5]+p*g[6]+v*g[7]+y*g[8]+g[9]*255,o[x+2]=l*g[10]+p*g[11]+v*g[12]+y*g[13]+g[14]*255,o[x+3]=l*g[15]+p*g[16]+v*g[17]+y*g[18]+g[19]*255)},getUniformLocations:function(s,a){return{uColorMatrix:s.getUniformLocation(a,"uColorMatrix"),uConstants:s.getUniformLocation(a,"uConstants")}},sendUniformData:function(s,a){var o=this.matrix,c=[o[0],o[1],o[2],o[3],o[5],o[6],o[7],o[8],o[10],o[11],o[12],o[13],o[15],o[16],o[17],o[18]],g=[o[4],o[9],o[14],o[19]];s.uniformMatrix4fv(a.uColorMatrix,!1,c),s.uniform4fv(a.uConstants,g)}}),r.Image.filters.ColorMatrix.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(f){var r=f.fabric||(f.fabric={}),u=r.Image.filters,d=r.util.createClass;u.Brightness=d(u.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(s){if(this.brightness!==0){var a=s.imageData,o=a.data,c,g=o.length,l=Math.round(this.brightness*255);for(c=0;c<g;c+=4)o[c]=o[c]+l,o[c+1]=o[c+1]+l,o[c+2]=o[c+2]+l}},getUniformLocations:function(s,a){return{uBrightness:s.getUniformLocation(a,"uBrightness")}},sendUniformData:function(s,a){s.uniform1f(a.uBrightness,this.brightness)}}),r.Image.filters.Brightness.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(f){var r=f.fabric||(f.fabric={}),u=r.util.object.extend,d=r.Image.filters,s=r.util.createClass;d.Convolute=s(d.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(a){var o=Math.sqrt(this.matrix.length),c=this.type+"_"+o+"_"+(this.opaque?1:0),g=this.fragmentSource[c];return a.programCache.hasOwnProperty(c)||(a.programCache[c]=this.createProgram(a.context,g)),a.programCache[c]},applyTo2d:function(a){var o=a.imageData,c=o.data,g=this.matrix,l=Math.round(Math.sqrt(g.length)),p=Math.floor(l/2),v=o.width,y=o.height,x=a.ctx.createImageData(v,y),w=x.data,S=this.opaque?1:0,k,b,j,M,W,ee,te,J,Q,ie,oe,B,T;for(oe=0;oe<y;oe++)for(ie=0;ie<v;ie++){for(W=(oe*v+ie)*4,k=0,b=0,j=0,M=0,T=0;T<l;T++)for(B=0;B<l;B++)te=oe+T-p,ee=ie+B-p,!(te<0||te>=y||ee<0||ee>=v)&&(J=(te*v+ee)*4,Q=g[T*l+B],k+=c[J]*Q,b+=c[J+1]*Q,j+=c[J+2]*Q,S||(M+=c[J+3]*Q));w[W]=k,w[W+1]=b,w[W+2]=j,S?w[W+3]=c[W+3]:w[W+3]=M}a.imageData=x},getUniformLocations:function(a,o){return{uMatrix:a.getUniformLocation(o,"uMatrix"),uOpaque:a.getUniformLocation(o,"uOpaque"),uHalfSize:a.getUniformLocation(o,"uHalfSize"),uSize:a.getUniformLocation(o,"uSize")}},sendUniformData:function(a,o){a.uniform1fv(o.uMatrix,this.matrix)},toObject:function(){return u(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),r.Image.filters.Convolute.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(f){var r=f.fabric||(f.fabric={}),u=r.Image.filters,d=r.util.createClass;u.Grayscale=d(u.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(s){var a=s.imageData,o=a.data,c,g=o.length,l,p=this.mode;for(c=0;c<g;c+=4)p==="average"?l=(o[c]+o[c+1]+o[c+2])/3:p==="lightness"?l=(Math.min(o[c],o[c+1],o[c+2])+Math.max(o[c],o[c+1],o[c+2]))/2:p==="luminosity"&&(l=.21*o[c]+.72*o[c+1]+.07*o[c+2]),o[c]=l,o[c+1]=l,o[c+2]=l},retrieveShader:function(s){var a=this.type+"_"+this.mode;if(!s.programCache.hasOwnProperty(a)){var o=this.fragmentSource[this.mode];s.programCache[a]=this.createProgram(s.context,o)}return s.programCache[a]},getUniformLocations:function(s,a){return{uMode:s.getUniformLocation(a,"uMode")}},sendUniformData:function(s,a){var o=1;s.uniform1i(a.uMode,o)},isNeutralState:function(){return!1}}),r.Image.filters.Grayscale.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(f){var r=f.fabric||(f.fabric={}),u=r.Image.filters,d=r.util.createClass;u.Invert=d(u.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(s){var a=s.imageData,o=a.data,c,g=o.length;for(c=0;c<g;c+=4)o[c]=255-o[c],o[c+1]=255-o[c+1],o[c+2]=255-o[c+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(s,a){return{uInvert:s.getUniformLocation(a,"uInvert")}},sendUniformData:function(s,a){s.uniform1i(a.uInvert,this.invert)}}),r.Image.filters.Invert.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(f){var r=f.fabric||(f.fabric={}),u=r.util.object.extend,d=r.Image.filters,s=r.util.createClass;d.Noise=s(d.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(a){if(this.noise!==0){var o=a.imageData,c=o.data,g,l=c.length,p=this.noise,v;for(g=0,l=c.length;g<l;g+=4)v=(.5-Math.random())*p,c[g]+=v,c[g+1]+=v,c[g+2]+=v}},getUniformLocations:function(a,o){return{uNoise:a.getUniformLocation(o,"uNoise"),uSeed:a.getUniformLocation(o,"uSeed")}},sendUniformData:function(a,o){a.uniform1f(o.uNoise,this.noise/255),a.uniform1f(o.uSeed,Math.random())},toObject:function(){return u(this.callSuper("toObject"),{noise:this.noise})}}),r.Image.filters.Noise.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(f){var r=f.fabric||(f.fabric={}),u=r.Image.filters,d=r.util.createClass;u.Pixelate=d(u.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(s){var a=s.imageData,o=a.data,c=a.height,g=a.width,l,p,v,y,x,w,S,k,b,j,M;for(p=0;p<c;p+=this.blocksize)for(v=0;v<g;v+=this.blocksize)for(l=p*4*g+v*4,y=o[l],x=o[l+1],w=o[l+2],S=o[l+3],j=Math.min(p+this.blocksize,c),M=Math.min(v+this.blocksize,g),k=p;k<j;k++)for(b=v;b<M;b++)l=k*4*g+b*4,o[l]=y,o[l+1]=x,o[l+2]=w,o[l+3]=S},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(s,a){return{uBlocksize:s.getUniformLocation(a,"uBlocksize"),uStepW:s.getUniformLocation(a,"uStepW"),uStepH:s.getUniformLocation(a,"uStepH")}},sendUniformData:function(s,a){s.uniform1f(a.uBlocksize,this.blocksize)}}),r.Image.filters.Pixelate.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(f){var r=f.fabric||(f.fabric={}),u=r.util.object.extend,d=r.Image.filters,s=r.util.createClass;d.RemoveColor=s(d.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(a){var o=a.imageData,c=o.data,g,l=this.distance*255,p,v,y,x=new r.Color(this.color).getSource(),w=[x[0]-l,x[1]-l,x[2]-l],S=[x[0]+l,x[1]+l,x[2]+l];for(g=0;g<c.length;g+=4)p=c[g],v=c[g+1],y=c[g+2],p>w[0]&&v>w[1]&&y>w[2]&&p<S[0]&&v<S[1]&&y<S[2]&&(c[g+3]=0)},getUniformLocations:function(a,o){return{uLow:a.getUniformLocation(o,"uLow"),uHigh:a.getUniformLocation(o,"uHigh")}},sendUniformData:function(a,o){var c=new r.Color(this.color).getSource(),g=parseFloat(this.distance),l=[0+c[0]/255-g,0+c[1]/255-g,0+c[2]/255-g,1],p=[c[0]/255+g,c[1]/255+g,c[2]/255+g,1];a.uniform4fv(o.uLow,l),a.uniform4fv(o.uHigh,p)},toObject:function(){return u(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),r.Image.filters.RemoveColor.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(f){var r=f.fabric||(f.fabric={}),u=r.Image.filters,d=r.util.createClass,s={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var a in s)u[a]=d(u.ColorMatrix,{type:a,matrix:s[a],mainParameter:!1,colorsOnly:!0}),r.Image.filters[a].fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(f){var r=f.fabric,u=r.Image.filters,d=r.util.createClass;u.BlendColor=d(u.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(s){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[s]+`}
}`},retrieveShader:function(s){var a=this.type+"_"+this.mode,o;return s.programCache.hasOwnProperty(a)||(o=this.buildSource(this.mode),s.programCache[a]=this.createProgram(s.context,o)),s.programCache[a]},applyTo2d:function(s){var a=s.imageData,o=a.data,c=o.length,g,l,p,v,y,x,w,S=1-this.alpha;w=new r.Color(this.color).getSource(),g=w[0]*this.alpha,l=w[1]*this.alpha,p=w[2]*this.alpha;for(var k=0;k<c;k+=4)switch(v=o[k],y=o[k+1],x=o[k+2],this.mode){case"multiply":o[k]=v*g/255,o[k+1]=y*l/255,o[k+2]=x*p/255;break;case"screen":o[k]=255-(255-v)*(255-g)/255,o[k+1]=255-(255-y)*(255-l)/255,o[k+2]=255-(255-x)*(255-p)/255;break;case"add":o[k]=v+g,o[k+1]=y+l,o[k+2]=x+p;break;case"diff":case"difference":o[k]=Math.abs(v-g),o[k+1]=Math.abs(y-l),o[k+2]=Math.abs(x-p);break;case"subtract":o[k]=v-g,o[k+1]=y-l,o[k+2]=x-p;break;case"darken":o[k]=Math.min(v,g),o[k+1]=Math.min(y,l),o[k+2]=Math.min(x,p);break;case"lighten":o[k]=Math.max(v,g),o[k+1]=Math.max(y,l),o[k+2]=Math.max(x,p);break;case"overlay":o[k]=g<128?2*v*g/255:255-2*(255-v)*(255-g)/255,o[k+1]=l<128?2*y*l/255:255-2*(255-y)*(255-l)/255,o[k+2]=p<128?2*x*p/255:255-2*(255-x)*(255-p)/255;break;case"exclusion":o[k]=g+v-2*g*v/255,o[k+1]=l+y-2*l*y/255,o[k+2]=p+x-2*p*x/255;break;case"tint":o[k]=g+v*S,o[k+1]=l+y*S,o[k+2]=p+x*S}},getUniformLocations:function(s,a){return{uColor:s.getUniformLocation(a,"uColor")}},sendUniformData:function(s,a){var o=new r.Color(this.color).getSource();o[0]=this.alpha*o[0]/255,o[1]=this.alpha*o[1]/255,o[2]=this.alpha*o[2]/255,o[3]=this.alpha,s.uniform4fv(a.uColor,o)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),r.Image.filters.BlendColor.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(f){var r=f.fabric,u=r.Image.filters,d=r.util.createClass;u.BlendImage=d(u.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(s){var a=this.type+"_"+this.mode,o=this.fragmentSource[this.mode];return s.programCache.hasOwnProperty(a)||(s.programCache[a]=this.createProgram(s.context,o)),s.programCache[a]},applyToWebGL:function(s){var a=s.context,o=this.createTexture(s.filterBackend,this.image);this.bindAdditionalTexture(a,o,a.TEXTURE1),this.callSuper("applyToWebGL",s),this.unbindAdditionalTexture(a,a.TEXTURE1)},createTexture:function(s,a){return s.getCachedTexture(a.cacheKey,a._element)},calculateMatrix:function(){var s=this.image,a=s._element.width,o=s._element.height;return[1/s.scaleX,0,0,0,1/s.scaleY,0,-s.left/a,-s.top/o,1]},applyTo2d:function(s){var a=s.imageData,o=s.filterBackend.resources,c=a.data,g=c.length,l=a.width,p=a.height,v,y,x,w,S,k,b,j,M,W,ee=this.image,te;o.blendImage||(o.blendImage=r.util.createCanvasElement()),M=o.blendImage,W=M.getContext("2d"),M.width!==l||M.height!==p?(M.width=l,M.height=p):W.clearRect(0,0,l,p),W.setTransform(ee.scaleX,0,0,ee.scaleY,ee.left,ee.top),W.drawImage(ee._element,0,0,l,p),te=W.getImageData(0,0,l,p).data;for(var J=0;J<g;J+=4)switch(S=c[J],k=c[J+1],b=c[J+2],j=c[J+3],v=te[J],y=te[J+1],x=te[J+2],w=te[J+3],this.mode){case"multiply":c[J]=S*v/255,c[J+1]=k*y/255,c[J+2]=b*x/255,c[J+3]=j*w/255;break;case"mask":c[J+3]=w;break}},getUniformLocations:function(s,a){return{uTransformMatrix:s.getUniformLocation(a,"uTransformMatrix"),uImage:s.getUniformLocation(a,"uImage")}},sendUniformData:function(s,a){var o=this.calculateMatrix();s.uniform1i(a.uImage,1),s.uniformMatrix3fv(a.uTransformMatrix,!1,o)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),r.Image.filters.BlendImage.fromObject=function(s,a){r.Image.fromObject(s.image,function(o){var c=r.util.object.clone(s);c.image=o,a(new r.Image.filters.BlendImage(c))})}}(t),function(f){var r=f.fabric||(f.fabric={}),u=Math.pow,d=Math.floor,s=Math.sqrt,a=Math.abs,o=Math.round,c=Math.sin,g=Math.ceil,l=r.Image.filters,p=r.util.createClass;l.Resize=p(l.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(v,y){return{uDelta:v.getUniformLocation(y,"uDelta"),uTaps:v.getUniformLocation(y,"uTaps")}},sendUniformData:function(v,y){v.uniform2fv(y.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),v.uniform1fv(y.uTaps,this.taps)},retrieveShader:function(v){var y=this.getFilterWindow(),x=this.type+"_"+y;if(!v.programCache.hasOwnProperty(x)){var w=this.generateShader(y);v.programCache[x]=this.createProgram(v.context,w)}return v.programCache[x]},getFilterWindow:function(){var v=this.tempScale;return Math.ceil(this.lanczosLobes/v)},getTaps:function(){for(var v=this.lanczosCreate(this.lanczosLobes),y=this.tempScale,x=this.getFilterWindow(),w=new Array(x),S=1;S<=x;S++)w[S-1]=v(S*y);return w},generateShader:function(w){for(var y=new Array(w),x=this.fragmentSourceTOP,w,S=1;S<=w;S++)y[S-1]=S+".0 * uDelta";return x+="uniform float uTaps["+w+`];
`,x+=`void main() {
`,x+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,x+=`  float sum = 1.0;
`,y.forEach(function(k,b){x+="  color += texture2D(uTexture, vTexCoord + "+k+") * uTaps["+b+`];
`,x+="  color += texture2D(uTexture, vTexCoord - "+k+") * uTaps["+b+`];
`,x+="  sum += 2.0 * uTaps["+b+`];
`}),x+=`  gl_FragColor = color / sum;
`,x+="}",x},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(v){v.webgl?(v.passes++,this.width=v.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=v.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),v.destinationWidth=this.dW,this._setupFrameBuffer(v),this.applyToWebGL(v),this._swapTextures(v),v.sourceWidth=v.destinationWidth,this.height=v.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),v.destinationHeight=this.dH,this._setupFrameBuffer(v),this.applyToWebGL(v),this._swapTextures(v),v.sourceHeight=v.destinationHeight):this.applyTo2d(v)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(v){return function(y){if(y>=v||y<=-v)return 0;if(y<11920929e-14&&y>-11920929e-14)return 1;y*=Math.PI;var x=y/v;return c(y)/y*c(x)/x}},applyTo2d:function(v){var y=v.imageData,x=this.scaleX,w=this.scaleY;this.rcpScaleX=1/x,this.rcpScaleY=1/w;var S=y.width,k=y.height,b=o(S*x),j=o(k*w),M;this.resizeType==="sliceHack"?M=this.sliceByTwo(v,S,k,b,j):this.resizeType==="hermite"?M=this.hermiteFastResize(v,S,k,b,j):this.resizeType==="bilinear"?M=this.bilinearFiltering(v,S,k,b,j):this.resizeType==="lanczos"&&(M=this.lanczosResize(v,S,k,b,j)),v.imageData=M},sliceByTwo:function(v,y,x,w,S){var k=v.imageData,b=.5,j=!1,M=!1,W=y*b,ee=x*b,te=r.filterBackend.resources,J,Q,ie=0,oe=0,B=y,T=0;for(te.sliceByTwo||(te.sliceByTwo=document.createElement("canvas")),J=te.sliceByTwo,(J.width<y*1.5||J.height<x)&&(J.width=y*1.5,J.height=x),Q=J.getContext("2d"),Q.clearRect(0,0,y*1.5,x),Q.putImageData(k,0,0),w=d(w),S=d(S);!j||!M;)y=W,x=ee,w<d(W*b)?W=d(W*b):(W=w,j=!0),S<d(ee*b)?ee=d(ee*b):(ee=S,M=!0),Q.drawImage(J,ie,oe,y,x,B,T,W,ee),ie=B,oe=T,T+=ee;return Q.getImageData(ie,oe,w,S)},lanczosResize:function(v,y,x,w,S){function k(I){var A,L,P,E,D,R,H,F,G,q,ne;for(T.x=(I+.5)*ee,O.x=d(T.x),A=0;A<S;A++){for(T.y=(A+.5)*te,O.y=d(T.y),D=0,R=0,H=0,F=0,G=0,L=O.x-ie;L<=O.x+ie;L++)if(!(L<0||L>=y)){q=d(1e3*a(L-T.x)),B[q]||(B[q]={});for(var U=O.y-oe;U<=O.y+oe;U++)U<0||U>=x||(ne=d(1e3*a(U-T.y)),B[q][ne]||(B[q][ne]=W(s(u(q*J,2)+u(ne*Q,2))/1e3)),P=B[q][ne],P>0&&(E=(U*y+L)*4,D+=P,R+=P*b[E],H+=P*b[E+1],F+=P*b[E+2],G+=P*b[E+3]))}E=(A*w+I)*4,M[E]=R/D,M[E+1]=H/D,M[E+2]=F/D,M[E+3]=G/D}return++I<w?k(I):j}var b=v.imageData.data,j=v.ctx.createImageData(w,S),M=j.data,W=this.lanczosCreate(this.lanczosLobes),ee=this.rcpScaleX,te=this.rcpScaleY,J=2/this.rcpScaleX,Q=2/this.rcpScaleY,ie=g(ee*this.lanczosLobes/2),oe=g(te*this.lanczosLobes/2),B={},T={},O={};return k(0)},bilinearFiltering:function(v,y,x,w,S){var k,b,j,M,W,ee,te,J,Q,ie,oe,B,T=0,O,I=this.rcpScaleX,A=this.rcpScaleY,L=4*(y-1),P=v.imageData,E=P.data,D=v.ctx.createImageData(w,S),R=D.data;for(te=0;te<S;te++)for(J=0;J<w;J++)for(W=d(I*J),ee=d(A*te),Q=I*J-W,ie=A*te-ee,O=4*(ee*y+W),oe=0;oe<4;oe++)k=E[O+oe],b=E[O+4+oe],j=E[O+L+oe],M=E[O+L+4+oe],B=k*(1-Q)*(1-ie)+b*Q*(1-ie)+j*ie*(1-Q)+M*Q*ie,R[T++]=B;return D},hermiteFastResize:function(v,y,x,w,S){for(var k=this.rcpScaleX,b=this.rcpScaleY,j=g(k/2),M=g(b/2),W=v.imageData,ee=W.data,te=v.ctx.createImageData(w,S),J=te.data,Q=0;Q<S;Q++)for(var ie=0;ie<w;ie++){for(var oe=(ie+Q*w)*4,B=0,T=0,O=0,I=0,A=0,L=0,P=0,E=(Q+.5)*b,D=d(Q*b);D<(Q+1)*b;D++)for(var R=a(E-(D+.5))/M,H=(ie+.5)*k,F=R*R,G=d(ie*k);G<(ie+1)*k;G++){var q=a(H-(G+.5))/j,ne=s(F+q*q);ne>1&&ne<-1||(B=2*ne*ne*ne-3*ne*ne+1,B>0&&(q=4*(G+D*y),P+=B*ee[q+3],O+=B,ee[q+3]<255&&(B=B*ee[q+3]/250),I+=B*ee[q],A+=B*ee[q+1],L+=B*ee[q+2],T+=B))}J[oe]=I/T,J[oe+1]=A/T,J[oe+2]=L/T,J[oe+3]=P/O}return te},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),r.Image.filters.Resize.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(f){var r=f.fabric||(f.fabric={}),u=r.Image.filters,d=r.util.createClass;u.Contrast=d(u.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(s){if(this.contrast!==0){var a=s.imageData,o,g,c=a.data,g=c.length,l=Math.floor(this.contrast*255),p=259*(l+255)/(255*(259-l));for(o=0;o<g;o+=4)c[o]=p*(c[o]-128)+128,c[o+1]=p*(c[o+1]-128)+128,c[o+2]=p*(c[o+2]-128)+128}},getUniformLocations:function(s,a){return{uContrast:s.getUniformLocation(a,"uContrast")}},sendUniformData:function(s,a){s.uniform1f(a.uContrast,this.contrast)}}),r.Image.filters.Contrast.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(f){var r=f.fabric||(f.fabric={}),u=r.Image.filters,d=r.util.createClass;u.Saturation=d(u.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(s){if(this.saturation!==0){var a=s.imageData,o=a.data,c=o.length,g=-this.saturation,l,p;for(l=0;l<c;l+=4)p=Math.max(o[l],o[l+1],o[l+2]),o[l]+=p!==o[l]?(p-o[l])*g:0,o[l+1]+=p!==o[l+1]?(p-o[l+1])*g:0,o[l+2]+=p!==o[l+2]?(p-o[l+2])*g:0}},getUniformLocations:function(s,a){return{uSaturation:s.getUniformLocation(a,"uSaturation")}},sendUniformData:function(s,a){s.uniform1f(a.uSaturation,-this.saturation)}}),r.Image.filters.Saturation.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(f){var r=f.fabric||(f.fabric={}),u=r.Image.filters,d=r.util.createClass;u.Vibrance=d(u.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(s){if(this.vibrance!==0){var a=s.imageData,o=a.data,c=o.length,g=-this.vibrance,l,p,v,y;for(l=0;l<c;l+=4)p=Math.max(o[l],o[l+1],o[l+2]),v=(o[l]+o[l+1]+o[l+2])/3,y=Math.abs(p-v)*2/255*g,o[l]+=p!==o[l]?(p-o[l])*y:0,o[l+1]+=p!==o[l+1]?(p-o[l+1])*y:0,o[l+2]+=p!==o[l+2]?(p-o[l+2])*y:0}},getUniformLocations:function(s,a){return{uVibrance:s.getUniformLocation(a,"uVibrance")}},sendUniformData:function(s,a){s.uniform1f(a.uVibrance,-this.vibrance)}}),r.Image.filters.Vibrance.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(f){var r=f.fabric||(f.fabric={}),u=r.Image.filters,d=r.util.createClass;u.Blur=d(u.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(s){s.webgl?(this.aspectRatio=s.sourceWidth/s.sourceHeight,s.passes++,this._setupFrameBuffer(s),this.horizontal=!0,this.applyToWebGL(s),this._swapTextures(s),this._setupFrameBuffer(s),this.horizontal=!1,this.applyToWebGL(s),this._swapTextures(s)):this.applyTo2d(s)},applyTo2d:function(s){s.imageData=this.simpleBlur(s)},simpleBlur:function(s){var a=s.filterBackend.resources,o,c,g=s.imageData.width,l=s.imageData.height;a.blurLayer1||(a.blurLayer1=r.util.createCanvasElement(),a.blurLayer2=r.util.createCanvasElement()),o=a.blurLayer1,c=a.blurLayer2,(o.width!==g||o.height!==l)&&(c.width=o.width=g,c.height=o.height=l);var p=o.getContext("2d"),v=c.getContext("2d"),y=15,x,w,S,k,b=this.blur*.06*.5;for(p.putImageData(s.imageData,0,0),v.clearRect(0,0,g,l),k=-y;k<=y;k++)x=(Math.random()-.5)/4,w=k/y,S=b*w*g+x,v.globalAlpha=1-Math.abs(w),v.drawImage(o,S,x),p.drawImage(c,0,0),v.globalAlpha=1,v.clearRect(0,0,c.width,c.height);for(k=-y;k<=y;k++)x=(Math.random()-.5)/4,w=k/y,S=b*w*l+x,v.globalAlpha=1-Math.abs(w),v.drawImage(o,x,S),p.drawImage(c,0,0),v.globalAlpha=1,v.clearRect(0,0,c.width,c.height);s.ctx.drawImage(o,0,0);var j=s.ctx.getImageData(0,0,o.width,o.height);return p.globalAlpha=1,p.clearRect(0,0,o.width,o.height),j},getUniformLocations:function(s,a){return{delta:s.getUniformLocation(a,"uDelta")}},sendUniformData:function(s,a){var o=this.chooseRightDelta();s.uniform2fv(a.delta,o)},chooseRightDelta:function(){var s=1,a=[0,0],o;return this.horizontal?this.aspectRatio>1&&(s=1/this.aspectRatio):this.aspectRatio<1&&(s=this.aspectRatio),o=s*this.blur*.12,this.horizontal?a[0]=o:a[1]=o,a}}),u.Blur.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(f){var r=f.fabric||(f.fabric={}),u=r.Image.filters,d=r.util.createClass;u.Gamma=d(u.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(s){this.gamma=[1,1,1],u.BaseFilter.prototype.initialize.call(this,s)},applyTo2d:function(s){var a=s.imageData,o=a.data,c=this.gamma,g=o.length,l=1/c[0],p=1/c[1],v=1/c[2],y;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),y=0,g=256;y<g;y++)this.rVals[y]=Math.pow(y/255,l)*255,this.gVals[y]=Math.pow(y/255,p)*255,this.bVals[y]=Math.pow(y/255,v)*255;for(y=0,g=o.length;y<g;y+=4)o[y]=this.rVals[o[y]],o[y+1]=this.gVals[o[y+1]],o[y+2]=this.bVals[o[y+2]]},getUniformLocations:function(s,a){return{uGamma:s.getUniformLocation(a,"uGamma")}},sendUniformData:function(s,a){s.uniform3fv(a.uGamma,this.gamma)}}),r.Image.filters.Gamma.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(f){var r=f.fabric||(f.fabric={}),u=r.Image.filters,d=r.util.createClass;u.Composed=d(u.BaseFilter,{type:"Composed",subFilters:[],initialize:function(s){this.callSuper("initialize",s),this.subFilters=this.subFilters.slice(0)},applyTo:function(s){s.passes+=this.subFilters.length-1,this.subFilters.forEach(function(a){a.applyTo(s)})},toObject:function(){return r.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(s){return s.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(s){return!s.isNeutralState()})}}),r.Image.filters.Composed.fromObject=function(s,a){var o=s.subFilters||[],c=o.map(function(l){return new r.Image.filters[l.type](l)}),g=new r.Image.filters.Composed({subFilters:c});return a&&a(g),g}}(t),function(f){var r=f.fabric||(f.fabric={}),u=r.Image.filters,d=r.util.createClass;u.HueRotation=d(u.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var s=this.rotation*Math.PI,a=r.util.cos(s),o=r.util.sin(s),c=1/3,g=Math.sqrt(c)*o,l=1-a;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=a+l/3,this.matrix[1]=c*l-g,this.matrix[2]=c*l+g,this.matrix[5]=c*l+g,this.matrix[6]=a+c*l,this.matrix[7]=c*l-g,this.matrix[10]=c*l-g,this.matrix[11]=c*l+g,this.matrix[12]=a+c*l},isNeutralState:function(s){return this.calculateMatrix(),u.BaseFilter.prototype.isNeutralState.call(this,s)},applyTo:function(s){this.calculateMatrix(),u.BaseFilter.prototype.applyTo.call(this,s)}}),r.Image.filters.HueRotation.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(f){var r=f.fabric||(f.fabric={}),u=r.util.object.clone;if(r.Text){r.warn("fabric.Text is already defined");return}var d="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");r.Text=r.util.createClass(r.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:r.Object.prototype.stateProperties.concat(d),cacheProperties:r.Object.prototype.cacheProperties.concat(d),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(s,a){this.styles=a?a.styles||{}:{},this.text=s,this.__skipDimension=!0,this.callSuper("initialize",a),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var s=this.path;s&&(s.segmentsInfo=r.util.getPathSegmentsInfo(s.path))},getMeasuringContext:function(){return r._measuringContext||(r._measuringContext=this.canvas&&this.canvas.contextCache||r.util.createCanvasElement().getContext("2d")),r._measuringContext},_splitText:function(){var s=this._splitTextIntoLines(this.text);return this.textLines=s.lines,this._textLines=s.graphemeLines,this._unwrappedTextLines=s._unwrappedLines,this._text=s.graphemeText,s},initDimensions:function(){if(!this.__skipDimension){if(this._splitText(),this._clearCache(),this.path){var s=this.getHeightOfLine(0)*1.1;this.width=this.path.width+s,this.height=this.path.height+s}else this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight();this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"})}},enlargeSpaces:function(){for(var s,a,o,c,g,l,p,v=0,y=this._textLines.length;v<y;v++)if(!(this.textAlign!=="justify"&&(v===y-1||this.isEndOfWrapping(v)))&&(c=0,g=this._textLines[v],a=this.getLineWidth(v),a<this.width&&(p=this.textLines[v].match(this._reSpacesAndTabs)))){o=p.length,s=(this.width-a)/o;for(var x=0,w=g.length;x<=w;x++)l=this.__charBounds[v][x],this._reSpaceAndTab.test(g[x])?(l.width+=s,l.kernedWidth+=s,l.left+=c,c+=s):l.left+=c}},isEndOfWrapping:function(s){return s===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var s=this.callSuper("_getCacheCanvasDimensions"),a=this.fontSize;return s.width+=a*s.zoomX,s.height+=a*s.zoomY,s},_render:function(s){var a=this.path;a&&!a.isNotVisible()&&a._render(s),this._setTextStyles(s),this._renderTextLinesBackground(s),this._renderTextDecoration(s,"underline"),this._renderText(s),this._renderTextDecoration(s,"overline"),this._renderTextDecoration(s,"linethrough")},_renderText:function(s){this.paintFirst==="stroke"?(this._renderTextStroke(s),this._renderTextFill(s)):(this._renderTextFill(s),this._renderTextStroke(s))},_setTextStyles:function(s,a,o){if(s.textBaseline="alphabetic",this.path)switch(this.pathAlign){case"center":s.textBaseline="middle";break;case"ascender":s.textBaseline="top";break;case"descender":s.textBaseline="bottom";break}s.font=this._getFontDeclaration(a,o)},calcTextWidth:function(){for(var s=this.getLineWidth(0),a=1,o=this._textLines.length;a<o;a++){var c=this.getLineWidth(a);c>s&&(s=c)}return s},_renderTextLine:function(s,a,o,c,g,l){this._renderChars(s,a,o,c,g,l)},_renderTextLinesBackground:function(s){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var a,o,c=s.fillStyle,g,l,p=this._getLeftOffset(),v=this._getTopOffset(),y=0,x=0,w,S,k=this.path,b,j=0,M=this._textLines.length;j<M;j++){if(a=this.getHeightOfLine(j),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",j)){v+=a;continue}g=this._textLines[j],o=this._getLineLeftOffset(j),x=0,y=0,l=this.getValueOfPropertyAt(j,0,"textBackgroundColor");for(var W=0,ee=g.length;W<ee;W++)w=this.__charBounds[j][W],S=this.getValueOfPropertyAt(j,W,"textBackgroundColor"),k?(s.save(),s.translate(w.renderLeft,w.renderTop),s.rotate(w.angle),s.fillStyle=S,S&&s.fillRect(-w.width/2,-a/this.lineHeight*(1-this._fontSizeFraction),w.width,a/this.lineHeight),s.restore()):S!==l?(b=p+o+y,this.direction==="rtl"&&(b=this.width-b-x),s.fillStyle=l,l&&s.fillRect(b,v,x,a/this.lineHeight),y=w.left,x=w.width,l=S):x+=w.kernedWidth;S&&!k&&(b=p+o+y,this.direction==="rtl"&&(b=this.width-b-x),s.fillStyle=S,s.fillRect(b,v,x,a/this.lineHeight)),v+=a}s.fillStyle=c,this._removeShadow(s)}},getFontCache:function(s){var a=s.fontFamily.toLowerCase();r.charWidthsCache[a]||(r.charWidthsCache[a]={});var o=r.charWidthsCache[a],c=s.fontStyle.toLowerCase()+"_"+(s.fontWeight+"").toLowerCase();return o[c]||(o[c]={}),o[c]},_measureChar:function(s,a,o,c){var g=this.getFontCache(a),l=this._getFontDeclaration(a),p=this._getFontDeclaration(c),v=o+s,y=l===p,x,w,S,k=a.fontSize/this.CACHE_FONT_SIZE,b;if(o&&g[o]!==void 0&&(S=g[o]),g[s]!==void 0&&(b=x=g[s]),y&&g[v]!==void 0&&(w=g[v],b=w-S),x===void 0||S===void 0||w===void 0){var j=this.getMeasuringContext();this._setTextStyles(j,a,!0)}return x===void 0&&(b=x=j.measureText(s).width,g[s]=x),S===void 0&&y&&o&&(S=j.measureText(o).width,g[o]=S),y&&w===void 0&&(w=j.measureText(v).width,g[v]=w,b=w-S),{width:x*k,kernedWidth:b*k}},getHeightOfChar:function(s,a){return this.getValueOfPropertyAt(s,a,"fontSize")},measureLine:function(s){var a=this._measureLine(s);return this.charSpacing!==0&&(a.width-=this._getWidthOfCharSpacing()),a.width<0&&(a.width=0),a},_measureLine:function(s){var a=0,o,c,g=this._textLines[s],l,p,v=0,y=new Array(g.length),x=0,w,S,k=this.path,b=this.pathSide==="right";for(this.__charBounds[s]=y,o=0;o<g.length;o++)c=g[o],p=this._getGraphemeBox(c,s,o,l),y[o]=p,a+=p.kernedWidth,l=c;if(y[o]={left:p?p.left+p.width:0,width:0,kernedWidth:0,height:this.fontSize},k){switch(S=k.segmentsInfo[k.segmentsInfo.length-1].length,w=r.util.getPointOnPath(k.path,0,k.segmentsInfo),w.x+=k.pathOffset.x,w.y+=k.pathOffset.y,this.textAlign){case"left":x=b?S-a:0;break;case"center":x=(S-a)/2;break;case"right":x=b?0:S-a;break}for(x+=this.pathStartOffset*(b?-1:1),o=b?g.length-1:0;b?o>=0:o<g.length;b?o--:o++)p=y[o],x>S?x%=S:x<0&&(x+=S),this._setGraphemeOnPath(x,p,w),x+=p.kernedWidth}return{width:a,numOfSpaces:v}},_setGraphemeOnPath:function(s,a,o){var c=s+a.kernedWidth/2,g=this.path,l=r.util.getPointOnPath(g.path,c,g.segmentsInfo);a.renderLeft=l.x-o.x,a.renderTop=l.y-o.y,a.angle=l.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(s,a,o,c,g){var l=this.getCompleteStyleDeclaration(a,o),p=c?this.getCompleteStyleDeclaration(a,o-1):{},v=this._measureChar(s,l,c,p),y=v.kernedWidth,x=v.width,w;this.charSpacing!==0&&(w=this._getWidthOfCharSpacing(),x+=w,y+=w);var S={width:x,left:0,height:l.fontSize,kernedWidth:y,deltaY:l.deltaY};if(o>0&&!g){var k=this.__charBounds[a][o-1];S.left=k.left+k.width+v.kernedWidth-v.width}return S},getHeightOfLine:function(s){if(this.__lineHeights[s])return this.__lineHeights[s];for(var a=this._textLines[s],o=this.getHeightOfChar(s,0),c=1,g=a.length;c<g;c++)o=Math.max(this.getHeightOfChar(s,c),o);return this.__lineHeights[s]=o*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var s,a=0,o=0,c=this._textLines.length;o<c;o++)s=this.getHeightOfLine(o),a+=o===c-1?s/this.lineHeight:s;return a},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(s,a){s.save();for(var o=0,c=this._getLeftOffset(),g=this._getTopOffset(),l=0,p=this._textLines.length;l<p;l++){var v=this.getHeightOfLine(l),y=v/this.lineHeight,x=this._getLineLeftOffset(l);this._renderTextLine(a,s,this._textLines[l],c+x,g+o+y,l),o+=v}s.restore()},_renderTextFill:function(s){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(s,"fillText")},_renderTextStroke:function(s){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(s),s.save(),this._setLineDash(s,this.strokeDashArray),s.beginPath(),this._renderTextCommon(s,"strokeText"),s.closePath(),s.restore())},_renderChars:function(s,a,o,c,g,l){var p=this.getHeightOfLine(l),v=this.textAlign.indexOf("justify")!==-1,y,x,w="",S,k=0,b,j=this.path,M=!v&&this.charSpacing===0&&this.isEmptyStyles(l)&&!j,W=this.direction==="ltr",ee=this.direction==="ltr"?1:-1,te,J=a.canvas.getAttribute("dir");if(a.save(),J!==this.direction&&(a.canvas.setAttribute("dir",W?"ltr":"rtl"),a.direction=W?"ltr":"rtl",a.textAlign=W?"left":"right"),g-=p*this._fontSizeFraction/this.lineHeight,M){this._renderChar(s,a,l,0,o.join(""),c,g,p),a.restore();return}for(var Q=0,ie=o.length-1;Q<=ie;Q++)b=Q===ie||this.charSpacing||j,w+=o[Q],S=this.__charBounds[l][Q],k===0?(c+=ee*(S.kernedWidth-S.width),k+=S.width):k+=S.kernedWidth,v&&!b&&this._reSpaceAndTab.test(o[Q])&&(b=!0),b||(y=y||this.getCompleteStyleDeclaration(l,Q),x=this.getCompleteStyleDeclaration(l,Q+1),b=r.util.hasStyleChanged(y,x,!1)),b&&(j?(a.save(),a.translate(S.renderLeft,S.renderTop),a.rotate(S.angle),this._renderChar(s,a,l,Q,w,-k/2,0,p),a.restore()):(te=c,this._renderChar(s,a,l,Q,w,te,g,p)),w="",y=x,c+=ee*k,k=0);a.restore()},_applyPatternGradientTransformText:function(s){var a=r.util.createCanvasElement(),o,c=this.width+this.strokeWidth,g=this.height+this.strokeWidth;return a.width=c,a.height=g,o=a.getContext("2d"),o.beginPath(),o.moveTo(0,0),o.lineTo(c,0),o.lineTo(c,g),o.lineTo(0,g),o.closePath(),o.translate(c/2,g/2),o.fillStyle=s.toLive(o),this._applyPatternGradientTransform(o,s),o.fill(),o.createPattern(a,"no-repeat")},handleFiller:function(s,a,o){var c,g;return o.toLive?o.gradientUnits==="percentage"||o.gradientTransform||o.patternTransform?(c=-this.width/2,g=-this.height/2,s.translate(c,g),s[a]=this._applyPatternGradientTransformText(o),{offsetX:c,offsetY:g}):(s[a]=o.toLive(s,this),this._applyPatternGradientTransform(s,o)):(s[a]=o,{offsetX:0,offsetY:0})},_setStrokeStyles:function(s,a){return s.lineWidth=a.strokeWidth,s.lineCap=this.strokeLineCap,s.lineDashOffset=this.strokeDashOffset,s.lineJoin=this.strokeLineJoin,s.miterLimit=this.strokeMiterLimit,this.handleFiller(s,"strokeStyle",a.stroke)},_setFillStyles:function(s,a){return this.handleFiller(s,"fillStyle",a.fill)},_renderChar:function(s,a,o,c,g,l,p){var v=this._getStyleDeclaration(o,c),y=this.getCompleteStyleDeclaration(o,c),x=s==="fillText"&&y.fill,w=s==="strokeText"&&y.stroke&&y.strokeWidth,S,k;!w&&!x||(a.save(),x&&(S=this._setFillStyles(a,y)),w&&(k=this._setStrokeStyles(a,y)),a.font=this._getFontDeclaration(y),v&&v.textBackgroundColor&&this._removeShadow(a),v&&v.deltaY&&(p+=v.deltaY),x&&a.fillText(g,l-S.offsetX,p-S.offsetY),w&&a.strokeText(g,l-k.offsetX,p-k.offsetY),a.restore())},setSuperscript:function(s,a){return this._setScript(s,a,this.superscript)},setSubscript:function(s,a){return this._setScript(s,a,this.subscript)},_setScript:function(s,a,o){var c=this.get2DCursorLocation(s,!0),g=this.getValueOfPropertyAt(c.lineIndex,c.charIndex,"fontSize"),l=this.getValueOfPropertyAt(c.lineIndex,c.charIndex,"deltaY"),p={fontSize:g*o.size,deltaY:l+g*o.baseline};return this.setSelectionStyles(p,s,a),this},_getLineLeftOffset:function(s){var a=this.getLineWidth(s),o=this.width-a,c=this.textAlign,g=this.direction,p,l=0,p=this.isEndOfWrapping(s);return c==="justify"||c==="justify-center"&&!p||c==="justify-right"&&!p||c==="justify-left"&&!p?0:(c==="center"&&(l=o/2),c==="right"&&(l=o),c==="justify-center"&&(l=o/2),c==="justify-right"&&(l=o),g==="rtl"&&(l-=o),l)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var s=this._forceClearCache;return s||(s=this.hasStateChanged("_dimensionAffectingProps")),s&&(this.dirty=!0,this._forceClearCache=!1),s},getLineWidth:function(s){if(this.__lineWidths[s]!==void 0)return this.__lineWidths[s];var a=this.measureLine(s),o=a.width;return this.__lineWidths[s]=o,o},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(s,a,o){var c=this._getStyleDeclaration(s,a);return c&&typeof c[o]<"u"?c[o]:this[o]},_renderTextDecoration:function(s,a){if(!(!this[a]&&!this.styleHas(a))){s.save(),(a==="overline"||a==="linethrough")&&this._removeShadow(s);for(var o,c,g,l,p,v,y,x,w=this._getLeftOffset(),S=this._getTopOffset(),k,b,j,M,W,ee,te,J,Q=this.path,ie=this._getWidthOfCharSpacing(),oe=this.offsets[a],B=0,T=this._textLines.length;B<T;B++){if(o=this.getHeightOfLine(B),!this[a]&&!this.styleHas(a,B)){S+=o;continue}y=this._textLines[B],ee=o/this.lineHeight,l=this._getLineLeftOffset(B),b=0,j=0,x=this.getValueOfPropertyAt(B,0,a),J=this.getValueOfPropertyAt(B,0,"fill"),k=S+ee*(1-this._fontSizeFraction),c=this.getHeightOfChar(B,0),p=this.getValueOfPropertyAt(B,0,"deltaY");for(var O=0,I=y.length;O<I;O++)if(M=this.__charBounds[B][O],W=this.getValueOfPropertyAt(B,O,a),te=this.getValueOfPropertyAt(B,O,"fill"),g=this.getHeightOfChar(B,O),v=this.getValueOfPropertyAt(B,O,"deltaY"),Q&&W&&te)s.save(),s.fillStyle=J,s.translate(M.renderLeft,M.renderTop),s.rotate(M.angle),s.fillRect(-M.kernedWidth/2,oe*g+v,M.kernedWidth,this.fontSize/15),s.restore();else if((W!==x||te!==J||g!==c||v!==p)&&j>0){var A=w+l+b;this.direction==="rtl"&&(A=this.width-A-j),x&&J&&(s.fillStyle=J,s.fillRect(A,k+oe*c+p,j,this.fontSize/15)),b=M.left,j=M.width,x=W,J=te,c=g,p=v}else j+=M.kernedWidth;var A=w+l+b;this.direction==="rtl"&&(A=this.width-A-j),s.fillStyle=te,W&&te&&s.fillRect(A,k+oe*c+p,j-ie,this.fontSize/15),S+=o}s.restore()}},_getFontDeclaration:function(s,a){var o=s||this,c=this.fontFamily,g=r.Text.genericFonts.indexOf(c.toLowerCase())>-1,l=c===void 0||c.indexOf("'")>-1||c.indexOf(",")>-1||c.indexOf('"')>-1||g?o.fontFamily:'"'+o.fontFamily+'"';return[r.isLikelyNode?o.fontWeight:o.fontStyle,r.isLikelyNode?o.fontStyle:o.fontWeight,a?this.CACHE_FONT_SIZE+"px":o.fontSize+"px",l].join(" ")},render:function(s){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",s)))},_splitTextIntoLines:function(s){for(var a=s.split(this._reNewline),o=new Array(a.length),c=[`
`],g=[],l=0;l<a.length;l++)o[l]=r.util.string.graphemeSplit(a[l]),g=g.concat(o[l],c);return g.pop(),{_unwrappedLines:o,lines:a,graphemeText:g,graphemeLines:o}},toObject:function(s){var a=d.concat(s),o=this.callSuper("toObject",a);return o.styles=r.util.stylesToArray(this.styles,this.text),o.path&&(o.path=this.path.toObject()),o},set:function(s,a){this.callSuper("set",s,a);var o=!1,c=!1;if(typeof s=="object")for(var g in s)g==="path"&&this.setPathInfo(),o=o||this._dimensionAffectingProps.indexOf(g)!==-1,c=c||g==="path";else o=this._dimensionAffectingProps.indexOf(s)!==-1,c=s==="path";return c&&this.setPathInfo(),o&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),r.Text.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),r.Text.DEFAULT_SVG_FONT_SIZE=16,r.Text.fromElement=function(s,a,o){if(!s)return a(null);var c=r.parseAttributes(s,r.Text.ATTRIBUTE_NAMES),g=c.textAnchor||"left";if(o=r.util.object.extend(o?u(o):{},c),o.top=o.top||0,o.left=o.left||0,c.textDecoration){var l=c.textDecoration;l.indexOf("underline")!==-1&&(o.underline=!0),l.indexOf("overline")!==-1&&(o.overline=!0),l.indexOf("line-through")!==-1&&(o.linethrough=!0),delete o.textDecoration}"dx"in c&&(o.left+=c.dx),"dy"in c&&(o.top+=c.dy),"fontSize"in o||(o.fontSize=r.Text.DEFAULT_SVG_FONT_SIZE);var p="";"textContent"in s?p=s.textContent:"firstChild"in s&&s.firstChild!==null&&"data"in s.firstChild&&s.firstChild.data!==null&&(p=s.firstChild.data),p=p.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var v=o.strokeWidth;o.strokeWidth=0;var y=new r.Text(p,o),x=y.getScaledHeight()/y.height,w=(y.height+y.strokeWidth)*y.lineHeight-y.height,S=w*x,k=y.getScaledHeight()+S,b=0;g==="center"&&(b=y.getScaledWidth()/2),g==="right"&&(b=y.getScaledWidth()),y.set({left:y.left-b,top:y.top-(k-y.fontSize*(.07+y._fontSizeFraction))/y.lineHeight,strokeWidth:typeof v<"u"?v:1}),a(y)},r.Text.fromObject=function(s,a){var o=u(s),c=s.path;return delete o.path,r.Object._fromObject("Text",o,function(g){g.styles=r.util.stylesFromArray(s.styles,s.text),c?r.Object._fromObject("Path",c,function(l){g.set("path",l),a(g)},"path"):a(g)},"text")},r.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],r.util.createAccessors&&r.util.createAccessors(r.Text)}(t),function(){e.util.object.extend(e.Text.prototype,{isEmptyStyles:function(f){if(!this.styles||typeof f<"u"&&!this.styles[f])return!0;var r=typeof f>"u"?this.styles:{line:this.styles[f]};for(var u in r)for(var d in r[u])for(var s in r[u][d])return!1;return!0},styleHas:function(f,r){if(!this.styles||!f||f===""||typeof r<"u"&&!this.styles[r])return!1;var u=typeof r>"u"?this.styles:{0:this.styles[r]};for(var d in u)for(var s in u[d])if(typeof u[d][s][f]<"u")return!0;return!1},cleanStyle:function(f){if(!this.styles||!f||f==="")return!1;var r=this.styles,u=0,d,s,a=!0,o=0,c;for(var g in r){d=0;for(var l in r[g]){var c=r[g][l],p=c.hasOwnProperty(f);u++,p?(s?c[f]!==s&&(a=!1):s=c[f],c[f]===this[f]&&delete c[f]):a=!1,Object.keys(c).length!==0?d++:delete r[g][l]}d===0&&delete r[g]}for(var v=0;v<this._textLines.length;v++)o+=this._textLines[v].length;a&&u===o&&(this[f]=s,this.removeStyle(f))},removeStyle:function(f){if(!(!this.styles||!f||f==="")){var r=this.styles,u,d,s;for(d in r){u=r[d];for(s in u)delete u[s][f],Object.keys(u[s]).length===0&&delete u[s];Object.keys(u).length===0&&delete r[d]}}},_extendStyles:function(f,r){var u=this.get2DCursorLocation(f);this._getLineStyle(u.lineIndex)||this._setLineStyle(u.lineIndex),this._getStyleDeclaration(u.lineIndex,u.charIndex)||this._setStyleDeclaration(u.lineIndex,u.charIndex,{}),e.util.object.extend(this._getStyleDeclaration(u.lineIndex,u.charIndex),r)},get2DCursorLocation:function(f,r){typeof f>"u"&&(f=this.selectionStart);for(var u=r?this._unwrappedTextLines:this._textLines,d=u.length,s=0;s<d;s++){if(f<=u[s].length)return{lineIndex:s,charIndex:f};f-=u[s].length+this.missingNewlineOffset(s,r)}return{lineIndex:s-1,charIndex:u[s-1].length<f?u[s-1].length:f}},getSelectionStyles:function(f,r,u){typeof f>"u"&&(f=this.selectionStart||0),typeof r>"u"&&(r=this.selectionEnd||f);for(var d=[],s=f;s<r;s++)d.push(this.getStyleAtPosition(s,u));return d},getStyleAtPosition:function(f,r){var u=this.get2DCursorLocation(f),d=r?this.getCompleteStyleDeclaration(u.lineIndex,u.charIndex):this._getStyleDeclaration(u.lineIndex,u.charIndex);return d||{}},setSelectionStyles:function(f,r,u){typeof r>"u"&&(r=this.selectionStart||0),typeof u>"u"&&(u=this.selectionEnd||r);for(var d=r;d<u;d++)this._extendStyles(d,f);return this._forceClearCache=!0,this},_getStyleDeclaration:function(f,r){var u=this.styles&&this.styles[f];return u?u[r]:null},getCompleteStyleDeclaration:function(f,r){for(var u=this._getStyleDeclaration(f,r)||{},d={},s,a=0;a<this._styleProperties.length;a++)s=this._styleProperties[a],d[s]=typeof u[s]>"u"?this[s]:u[s];return d},_setStyleDeclaration:function(f,r,u){this.styles[f][r]=u},_deleteStyleDeclaration:function(f,r){delete this.styles[f][r]},_getLineStyle:function(f){return!!this.styles[f]},_setLineStyle:function(f){this.styles[f]={}},_deleteLineStyle:function(f){delete this.styles[f]}})}(),function(){function f(r){r.textDecoration&&(r.textDecoration.indexOf("underline")>-1&&(r.underline=!0),r.textDecoration.indexOf("line-through")>-1&&(r.linethrough=!0),r.textDecoration.indexOf("overline")>-1&&(r.overline=!0),delete r.textDecoration)}e.IText=e.util.createClass(e.Text,e.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(r,u){this.callSuper("initialize",r,u),this.initBehavior()},setSelectionStart:function(r){r=Math.max(r,0),this._updateAndFire("selectionStart",r)},setSelectionEnd:function(r){r=Math.min(r,this.text.length),this._updateAndFire("selectionEnd",r)},_updateAndFire:function(r,u){this[r]!==u&&(this._fireSelectionChanged(),this[r]=u),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(r){this.clearContextTop(),this.callSuper("render",r),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(r){this.callSuper("_render",r)},clearContextTop:function(r){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var u=this.canvas.contextTop,d=this.canvas.viewportTransform;u.save(),u.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this.transform(u),this._clearTextArea(u),r||u.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var r=this._getCursorBoundaries(),u=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(r,u):this.renderSelection(r,u),u.restore()}},_clearTextArea:function(r){var u=this.width+4,d=this.height+4;r.clearRect(-u/2,-d/2,u,d)},_getCursorBoundaries:function(r){typeof r>"u"&&(r=this.selectionStart);var u=this._getLeftOffset(),d=this._getTopOffset(),s=this._getCursorBoundariesOffsets(r);return{left:u,top:d,leftOffset:s.left,topOffset:s.top}},_getCursorBoundariesOffsets:function(r){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var u,d,s,a=0,o=0,c,g=this.get2DCursorLocation(r);s=g.charIndex,d=g.lineIndex;for(var l=0;l<d;l++)a+=this.getHeightOfLine(l);u=this._getLineLeftOffset(d);var p=this.__charBounds[d][s];return p&&(o=p.left),this.charSpacing!==0&&s===this._textLines[d].length&&(o-=this._getWidthOfCharSpacing()),c={top:a,left:u+(o>0?o:0)},this.direction==="rtl"&&(c.left*=-1),this.cursorOffsetCache=c,this.cursorOffsetCache},renderCursor:function(r,u){var d=this.get2DCursorLocation(),s=d.lineIndex,a=d.charIndex>0?d.charIndex-1:0,o=this.getValueOfPropertyAt(s,a,"fontSize"),c=this.scaleX*this.canvas.getZoom(),g=this.cursorWidth/c,l=r.topOffset,p=this.getValueOfPropertyAt(s,a,"deltaY");l+=(1-this._fontSizeFraction)*this.getHeightOfLine(s)/this.lineHeight-o*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(r,u),u.fillStyle=this.cursorColor||this.getValueOfPropertyAt(s,a,"fill"),u.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,u.fillRect(r.left+r.leftOffset-g/2,l+r.top+p,g,o)},renderSelection:function(r,u){for(var d=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,s=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,a=this.textAlign.indexOf("justify")!==-1,o=this.get2DCursorLocation(d),c=this.get2DCursorLocation(s),g=o.lineIndex,l=c.lineIndex,p=o.charIndex<0?0:o.charIndex,v=c.charIndex<0?0:c.charIndex,y=g;y<=l;y++){var x=this._getLineLeftOffset(y)||0,w=this.getHeightOfLine(y),S=0,k=0,b=0;if(y===g&&(k=this.__charBounds[g][p].left),y>=g&&y<l)b=a&&!this.isEndOfWrapping(y)?this.width:this.getLineWidth(y)||5;else if(y===l)if(v===0)b=this.__charBounds[l][v].left;else{var j=this._getWidthOfCharSpacing();b=this.__charBounds[l][v-1].left+this.__charBounds[l][v-1].width-j}S=w,(this.lineHeight<1||y===l&&this.lineHeight>1)&&(w/=this.lineHeight);var M=r.left+x+k,W=b-k,ee=w,te=0;this.inCompositionMode?(u.fillStyle=this.compositionColor||"black",ee=1,te=w):u.fillStyle=this.selectionColor,this.direction==="rtl"&&(M=this.width-M-W),u.fillRect(M,r.top+r.topOffset+te,W,ee),r.topOffset+=S}},getCurrentCharFontSize:function(){var r=this._getCurrentCharIndex();return this.getValueOfPropertyAt(r.l,r.c,"fontSize")},getCurrentCharColor:function(){var r=this._getCurrentCharIndex();return this.getValueOfPropertyAt(r.l,r.c,"fill")},_getCurrentCharIndex:function(){var r=this.get2DCursorLocation(this.selectionStart,!0),u=r.charIndex>0?r.charIndex-1:0;return{l:r.lineIndex,c:u}}}),e.IText.fromObject=function(r,u){var d=e.util.stylesFromArray(r.styles,r.text),s=Object.assign({},r,{styles:d});if(delete s.path,f(s),s.styles)for(var a in s.styles)for(var o in s.styles[a])f(s.styles[a][o]);e.Object._fromObject("IText",s,function(c){r.path?e.Object._fromObject("Path",r.path,function(g){c.set("path",g),u(c)},"path"):u(c)},"text")}}(),function(){var f=e.util.object.clone;e.util.object.extend(e.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var r=this;this.on("added",function(){var u=r.canvas;u&&(u._hasITextHandlers||(u._hasITextHandlers=!0,r._initCanvasHandlers(u)),u._iTextInstances=u._iTextInstances||[],u._iTextInstances.push(r))})},initRemovedHandler:function(){var r=this;this.on("removed",function(){var u=r.canvas;u&&(u._iTextInstances=u._iTextInstances||[],e.util.removeFromArray(u._iTextInstances,r),u._iTextInstances.length===0&&(u._hasITextHandlers=!1,r._removeCanvasHandlers(u)))})},_initCanvasHandlers:function(r){r._mouseUpITextHandler=function(){r._iTextInstances&&r._iTextInstances.forEach(function(u){u.__isMousedown=!1})},r.on("mouse:up",r._mouseUpITextHandler)},_removeCanvasHandlers:function(r){r.off("mouse:up",r._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(r,u,d,s){var a;return a={isAborted:!1,abort:function(){this.isAborted=!0}},r.animate("_currentCursorOpacity",u,{duration:d,onComplete:function(){a.isAborted||r[s]()},onChange:function(){r.canvas&&r.selectionStart===r.selectionEnd&&r.renderCursorOrSelection()},abort:function(){return a.isAborted}}),a},_onTickComplete:function(){var r=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){r._currentTickCompleteState=r._animateCursor(r,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(r){var u=this,d=r?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){u._tick()},d)},abortCursorAnimation:function(){var r=this._currentTickState||this._currentTickCompleteState,u=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,r&&u&&u.clearContext(u.contextTop||u.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(r){var u=0,d=r-1;if(this._reSpace.test(this._text[d]))for(;this._reSpace.test(this._text[d]);)u++,d--;for(;/\S/.test(this._text[d])&&d>-1;)u++,d--;return r-u},findWordBoundaryRight:function(r){var u=0,d=r;if(this._reSpace.test(this._text[d]))for(;this._reSpace.test(this._text[d]);)u++,d++;for(;/\S/.test(this._text[d])&&d<this._text.length;)u++,d++;return r+u},findLineBoundaryLeft:function(r){for(var u=0,d=r-1;!/\n/.test(this._text[d])&&d>-1;)u++,d--;return r-u},findLineBoundaryRight:function(r){for(var u=0,d=r;!/\n/.test(this._text[d])&&d<this._text.length;)u++,d++;return r+u},searchWordBoundary:function(r,u){for(var d=this._text,s=this._reSpace.test(d[r])?r-1:r,a=d[s],o=e.reNonWord;!o.test(a)&&s>0&&s<d.length;)s+=u,a=d[s];return o.test(a)&&(s+=u===1?0:1),s},selectWord:function(r){r=r||this.selectionStart;var u=this.searchWordBoundary(r,-1),d=this.searchWordBoundary(r,1);this.selectionStart=u,this.selectionEnd=d,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(r){r=r||this.selectionStart;var u=this.findLineBoundaryLeft(r),d=this.findLineBoundaryRight(r);return this.selectionStart=u,this.selectionEnd=d,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(r){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(r),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(r){r._iTextInstances&&r._iTextInstances.forEach(function(u){u.selected=!1,u.isEditing&&u.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(r){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var u=this.getSelectionStartFromPointer(r.e),d=this.selectionStart,s=this.selectionEnd;(u!==this.__selectionStartOnMouseDown||d===s)&&(d===u||s===u)||(u>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=u):(this.selectionStart=u,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==d||this.selectionEnd!==s)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(r,u,d){var s=d.slice(0,r),a=e.util.string.graphemeSplit(s).length;if(r===u)return{selectionStart:a,selectionEnd:a};var o=d.slice(r,u),c=e.util.string.graphemeSplit(o).length;return{selectionStart:a,selectionEnd:a+c}},fromGraphemeToStringSelection:function(r,u,d){var s=d.slice(0,r),a=s.join("").length;if(r===u)return{selectionStart:a,selectionEnd:a};var o=d.slice(r,u),c=o.join("").length;return{selectionStart:a,selectionEnd:a+c}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var r=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=r.selectionStart,this.hiddenTextarea.selectionEnd=r.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var r=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=r.selectionEnd,this.inCompositionMode||(this.selectionStart=r.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var r=this._calcTextareaPosition();this.hiddenTextarea.style.left=r.left,this.hiddenTextarea.style.top=r.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var r=this.inCompositionMode?this.compositionStart:this.selectionStart,u=this._getCursorBoundaries(r),d=this.get2DCursorLocation(r),s=d.lineIndex,a=d.charIndex,o=this.getValueOfPropertyAt(s,a,"fontSize")*this.lineHeight,c=u.leftOffset,g=this.calcTransformMatrix(),l={x:u.left+c,y:u.top+u.topOffset+o},p=this.canvas.getRetinaScaling(),v=this.canvas.upperCanvasEl,y=v.width/p,x=v.height/p,w=y-o,S=x-o,k=v.clientWidth/y,b=v.clientHeight/x;return l=e.util.transformPoint(l,g),l=e.util.transformPoint(l,this.canvas.viewportTransform),l.x*=k,l.y*=b,l.x<0&&(l.x=0),l.x>w&&(l.x=w),l.y<0&&(l.y=0),l.y>S&&(l.y=S),l.x+=this.canvas._offset.left,l.y+=this.canvas._offset.top,{left:l.x+"px",top:l.y+"px",fontSize:o+"px",charHeight:o}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var r=this._textBeforeEdit!==this.text,u=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,u&&(u.blur&&u.blur(),u.parentNode&&u.parentNode.removeChild(u)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),r&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),r&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var r in this.styles)this._textLines[r]||delete this.styles[r]},removeStyleFromTo:function(r,u){var d=this.get2DCursorLocation(r,!0),s=this.get2DCursorLocation(u,!0),a=d.lineIndex,o=d.charIndex,c=s.lineIndex,g=s.charIndex,l,p;if(a!==c){if(this.styles[a])for(l=o;l<this._unwrappedTextLines[a].length;l++)delete this.styles[a][l];if(this.styles[c])for(l=g;l<this._unwrappedTextLines[c].length;l++)p=this.styles[c][l],p&&(this.styles[a]||(this.styles[a]={}),this.styles[a][o+l-g]=p);for(l=a+1;l<=c;l++)delete this.styles[l];this.shiftLineStyles(c,a-c)}else if(this.styles[a]){p=this.styles[a];var v=g-o,y,x;for(l=o;l<g;l++)delete p[l];for(x in this.styles[a])y=parseInt(x,10),y>=g&&(p[y-v]=p[x],delete p[x])}},shiftLineStyles:function(r,u){var d=f(this.styles);for(var s in this.styles){var a=parseInt(s,10);a>r&&(this.styles[a+u]=d[a],d[a-u]||delete this.styles[a])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(r,u,d,s){var a,o={},c=!1,g=this._unwrappedTextLines[r].length,l=g===u;d||(d=1),this.shiftLineStyles(r,d),this.styles[r]&&(a=this.styles[r][u===0?u:u-1]);for(var p in this.styles[r]){var v=parseInt(p,10);v>=u&&(c=!0,o[v-u]=this.styles[r][p],l&&u===0||delete this.styles[r][p])}var y=!1;for(c&&!l&&(this.styles[r+d]=o,y=!0),(y||g>u)&&d--;d>0;)s&&s[d-1]?this.styles[r+d]={0:f(s[d-1])}:a?this.styles[r+d]={0:f(a)}:delete this.styles[r+d],d--;this._forceClearCache=!0},insertCharStyleObject:function(r,u,d,s){this.styles||(this.styles={});var a=this.styles[r],o=a?f(a):{};d||(d=1);for(var c in o){var g=parseInt(c,10);g>=u&&(a[g+d]=o[g],o[g-d]||delete a[g])}if(this._forceClearCache=!0,s){for(;d--;)Object.keys(s[d]).length&&(this.styles[r]||(this.styles[r]={}),this.styles[r][u+d]=f(s[d]));return}if(a)for(var l=a[u?u-1:1];l&&d--;)this.styles[r][u+d]=f(l)},insertNewStyleBlock:function(r,u,d){for(var s=this.get2DCursorLocation(u,!0),a=[0],o=0,c=0;c<r.length;c++)r[c]===`
`?(o++,a[o]=0):a[o]++;a[0]>0&&(this.insertCharStyleObject(s.lineIndex,s.charIndex,a[0],d),d=d&&d.slice(a[0]+1)),o&&this.insertNewlineStyleObject(s.lineIndex,s.charIndex+a[0],o);for(var c=1;c<o;c++)a[c]>0?this.insertCharStyleObject(s.lineIndex+c,0,a[c],d):d&&this.styles[s.lineIndex+c]&&d[0]&&(this.styles[s.lineIndex+c][0]=d[0]),d=d&&d.slice(a[c]+1);a[c]>0&&this.insertCharStyleObject(s.lineIndex+c,0,a[c],d)},setSelectionStartEndWithShift:function(r,u,d){d<=r?(u===r?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=r),this.selectionStart=d):d>r&&d<u?this._selectionDirection==="right"?this.selectionEnd=d:this.selectionStart=d:(u===r?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=u),this.selectionEnd=d)},setSelectionInBoundaries:function(){var r=this.text.length;this.selectionStart>r?this.selectionStart=r:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>r?this.selectionEnd=r:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),e.util.object.extend(e.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(f){if(this.canvas){this.__newClickTime=+new Date;var r=f.pointer;this.isTripleClick(r)&&(this.fire("tripleclick",f),this._stopEvent(f.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=r,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(f){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===f.x&&this.__lastPointer.y===f.y},_stopEvent:function(f){f.preventDefault&&f.preventDefault(),f.stopPropagation&&f.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(f){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(f.e))},tripleClickHandler:function(f){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(f.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(f){!this.canvas||!this.editable||f.e.button&&f.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(f.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(f){!this.canvas||!this.editable||f.e.button&&f.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(f){if(this.__isMousedown=!1,!(!this.editable||this.group||f.transform&&f.transform.actionPerformed||f.e.button&&f.e.button!==1)){if(this.canvas){var r=this.canvas._activeObject;if(r&&r!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(f.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(f){var r=this.getSelectionStartFromPointer(f),u=this.selectionStart,d=this.selectionEnd;f.shiftKey?this.setSelectionStartEndWithShift(u,d,r):(this.selectionStart=r,this.selectionEnd=r),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(f){for(var r=this.getLocalPointer(f),u=0,d=0,s=0,a=0,o=0,c,g,l=0,p=this._textLines.length;l<p&&s<=r.y;l++)s+=this.getHeightOfLine(l)*this.scaleY,o=l,l>0&&(a+=this._textLines[l-1].length+this.missingNewlineOffset(l-1));c=this._getLineLeftOffset(o),d=c*this.scaleX,g=this._textLines[o],this.direction==="rtl"&&(r.x=this.width*this.scaleX-r.x+d);for(var v=0,y=g.length;v<y&&(u=d,d+=this.__charBounds[o][v].kernedWidth*this.scaleX,d<=r.x);v++)a++;return this._getNewSelectionStartFromOffset(r,u,d,a,y)},_getNewSelectionStartFromOffset:function(f,r,u,d,s){var a=f.x-r,o=u-f.x,c=o>a||o<0?0:1,g=d+c;return this.flipX&&(g=s-g),g>this._text.length&&(g=this._text.length),g}}),e.util.object.extend(e.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=e.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var f=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+f.top+"; left: "+f.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+f.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):e.document.body.appendChild(this.hiddenTextarea),e.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),e.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),e.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),e.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(e.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(f){if(this.isEditing){var r=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(f.keyCode in r)this[r[f.keyCode]](f);else if(f.keyCode in this.ctrlKeysMapDown&&(f.ctrlKey||f.metaKey))this[this.ctrlKeysMapDown[f.keyCode]](f);else return;f.stopImmediatePropagation(),f.preventDefault(),f.keyCode>=33&&f.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(f){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(f.keyCode in this.ctrlKeysMapUp&&(f.ctrlKey||f.metaKey))this[this.ctrlKeysMapUp[f.keyCode]](f);else return;f.stopImmediatePropagation(),f.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(f){var r=this.fromPaste;if(this.fromPaste=!1,f&&f.stopPropagation(),!!this.isEditing){var u=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,d=this._text.length,s=u.length,a,o,c=s-d,g=this.selectionStart,l=this.selectionEnd,p=g!==l,v,y,x;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var w=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),S=g>w.selectionStart;p?(a=this._text.slice(g,l),c+=l-g):s<d&&(S?a=this._text.slice(l+c,l):a=this._text.slice(g,g-c)),o=u.slice(w.selectionEnd-c,w.selectionEnd),a&&a.length&&(o.length&&(v=this.getSelectionStyles(g,g+1,!1),v=o.map(function(){return v[0]})),p?(y=g,x=l):S?(y=l-a.length,x=l):(y=l,x=l+a.length),this.removeStyleFromTo(y,x)),o.length&&(r&&o.join("")===e.copiedText&&!e.disableStyleCopyPaste&&(v=e.copiedTextStyle),this.insertNewStyleBlock(o,g,v)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(f){this.compositionStart=f.target.selectionStart,this.compositionEnd=f.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(e.copiedText=this.getSelectedText(),e.disableStyleCopyPaste?e.copiedTextStyle=null:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(f){return f&&f.clipboardData||e.window.clipboardData},_getWidthBeforeCursor:function(f,r){var u=this._getLineLeftOffset(f),d;return r>0&&(d=this.__charBounds[f][r-1],u+=d.left+d.width),u},getDownCursorOffset:function(f,r){var u=this._getSelectionForOffset(f,r),d=this.get2DCursorLocation(u),s=d.lineIndex;if(s===this._textLines.length-1||f.metaKey||f.keyCode===34)return this._text.length-u;var a=d.charIndex,o=this._getWidthBeforeCursor(s,a),c=this._getIndexOnLine(s+1,o),g=this._textLines[s].slice(a);return g.length+c+1+this.missingNewlineOffset(s)},_getSelectionForOffset:function(f,r){return f.shiftKey&&this.selectionStart!==this.selectionEnd&&r?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(f,r){var u=this._getSelectionForOffset(f,r),d=this.get2DCursorLocation(u),s=d.lineIndex;if(s===0||f.metaKey||f.keyCode===33)return-u;var a=d.charIndex,o=this._getWidthBeforeCursor(s,a),c=this._getIndexOnLine(s-1,o),g=this._textLines[s].slice(0,a),l=this.missingNewlineOffset(s-1);return-this._textLines[s-1].length+c-g.length+(1-l)},_getIndexOnLine:function(f,r){for(var u=this._textLines[f],d=this._getLineLeftOffset(f),s=d,a=0,o,c,g=0,l=u.length;g<l;g++)if(o=this.__charBounds[f][g].width,s+=o,s>r){c=!0;var p=s-o,v=s,y=Math.abs(p-r),x=Math.abs(v-r);a=x<y?g:g-1;break}return c||(a=u.length-1),a},moveCursorDown:function(f){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",f)},moveCursorUp:function(f){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",f)},_moveCursorUpOrDown:function(f,r){var u="get"+f+"CursorOffset",d=this[u](r,this._selectionDirection==="right");r.shiftKey?this.moveCursorWithShift(d):this.moveCursorWithoutShift(d),d!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(f){var r=this._selectionDirection==="left"?this.selectionStart+f:this.selectionEnd+f;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,r),f!==0},moveCursorWithoutShift:function(f){return f<0?(this.selectionStart+=f,this.selectionEnd=this.selectionStart):(this.selectionEnd+=f,this.selectionStart=this.selectionEnd),f!==0},moveCursorLeft:function(f){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",f)},_move:function(f,r,u){var d;if(f.altKey)d=this["findWordBoundary"+u](this[r]);else if(f.metaKey||f.keyCode===35||f.keyCode===36)d=this["findLineBoundary"+u](this[r]);else return this[r]+=u==="Left"?-1:1,!0;if(typeof d<"u"&&this[r]!==d)return this[r]=d,!0},_moveLeft:function(f,r){return this._move(f,r,"Left")},_moveRight:function(f,r){return this._move(f,r,"Right")},moveCursorLeftWithoutShift:function(f){var r=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(r=this._moveLeft(f,"selectionStart")),this.selectionEnd=this.selectionStart,r},moveCursorLeftWithShift:function(f){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(f,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(f,"selectionStart")},moveCursorRight:function(f){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",f)},_moveCursorLeftOrRight:function(f,r){var u="moveCursor"+f+"With";this._currentCursorOpacity=1,r.shiftKey?u+="Shift":u+="outShift",this[u](r)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(f){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(f,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(f,"selectionEnd")},moveCursorRightWithoutShift:function(f){var r=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(r=this._moveRight(f,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,r},removeChars:function(f,r){typeof r>"u"&&(r=f+1),this.removeStyleFromTo(f,r),this._text.splice(f,r-f),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(f,r,u,d){typeof d>"u"&&(d=u),d>u&&this.removeStyleFromTo(u,d);var s=e.util.string.graphemeSplit(f);this.insertNewStyleBlock(s,u,r),this._text=[].concat(this._text.slice(0,u),s,this._text.slice(d)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var f=e.util.toFixed,r=e.util.radiansToDegrees,u=e.util.calcRotateMatrix,d=e.util.transformPoint,s=/  +/g;e.util.object.extend(e.Text.prototype,{_toSVG:function(){var a=this._getSVGLeftTopOffsets(),o=this._getSVGTextAndBg(a.textTop,a.textLeft);return this._wrapSVGTextAndBg(o)},toSVG:function(a){var o=this._createBaseSVGMarkup(this._toSVG(),{reviver:a,noStyle:!0,withShadow:!0}),c=this.path;return c?o+c._createBaseSVGMarkup(c._toSVG(),{reviver:a,withShadow:!0}):o},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(a){var o=!0,c=this.getSvgTextDecoration(this);return[a.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",c?'text-decoration="'+c+'" ':"",'style="',this.getSvgStyles(o),'"',this.addPaintOrder()," >",a.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(a,o){var c=[],g=[],l=a,p;this._setSVGBg(g);for(var v=0,y=this._textLines.length;v<y;v++)p=this._getLineLeftOffset(v),(this.textBackgroundColor||this.styleHas("textBackgroundColor",v))&&this._setSVGTextLineBg(g,v,o+p,l),this._setSVGTextLineText(c,v,o+p,l),l+=this.getHeightOfLine(v);return{textSpans:c,textBgRects:g}},_createTextCharSpan:function(a,o,c,g,l){var p=a!==a.trim()||a.match(s),v=this.getSvgSpanStyles(o,p),y=v?'style="'+v+'"':"",x=o.deltaY,w="",S=e.Object.NUM_FRACTION_DIGITS,k="";if(x&&(w=' dy="'+f(x,S)+'" '),l.renderLeft!==void 0){var b=l.angle;k=' rotate="'+f(r(b),e.Object.NUM_FRACTION_DIGITS)+'" ';var j=l.width/2,M=u({angle:r(b)});M[4]=l.renderLeft,M[5]=l.renderTop;var W=d({x:-j,y:0},M);c=W.x,g=W.y}return['<tspan x="',f(c,S),'" y="',f(g,S),'" ',w,y,k,">",e.util.string.escapeXml(a),"</tspan>"].join("")},_setSVGTextLineText:function(a,o,c,g){var l=this.getHeightOfLine(o),p=this.textAlign.indexOf("justify")!==-1,v,y,x="",w,S,k=0,b=this._textLines[o],j;g+=l*(1-this._fontSizeFraction)/this.lineHeight;for(var M=0,W=b.length-1;M<=W;M++)j=M===W||this.charSpacing||this.path,x+=b[M],w=this.__charBounds[o][M],k===0?(c+=w.kernedWidth-w.width,k+=w.width):k+=w.kernedWidth,p&&!j&&this._reSpaceAndTab.test(b[M])&&(j=!0),j||(v=v||this.getCompleteStyleDeclaration(o,M),y=this.getCompleteStyleDeclaration(o,M+1),j=e.util.hasStyleChanged(v,y,!0)),j&&(S=this._getStyleDeclaration(o,M)||{},a.push(this._createTextCharSpan(x,S,c,g,w)),x="",v=y,c+=k,k=0)},_pushTextBgRect:function(a,o,c,g,l,p){var v=e.Object.NUM_FRACTION_DIGITS;a.push("		<rect ",this._getFillAttributes(o),' x="',f(c,v),'" y="',f(g,v),'" width="',f(l,v),'" height="',f(p,v),`"></rect>
`)},_setSVGTextLineBg:function(a,o,c,g){for(var l=this._textLines[o],p=this.getHeightOfLine(o)/this.lineHeight,v=0,y=0,x,w,S=this.getValueOfPropertyAt(o,0,"textBackgroundColor"),k=0,b=l.length;k<b;k++)x=this.__charBounds[o][k],w=this.getValueOfPropertyAt(o,k,"textBackgroundColor"),w!==S?(S&&this._pushTextBgRect(a,S,c+y,g,v,p),y=x.left,v=x.width,S=w):v+=x.kernedWidth;w&&this._pushTextBgRect(a,w,c+y,g,v,p)},_getFillAttributes:function(a){var o=a&&typeof a=="string"?new e.Color(a):"";return!o||!o.getSource()||o.getAlpha()===1?'fill="'+a+'"':'opacity="'+o.getAlpha()+'" fill="'+o.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(a){for(var o=0,c=0,g=0;g<a;g++)o+=this.getHeightOfLine(g);return c=this.getHeightOfLine(g),{lineTop:o,offset:(this._fontSizeMult-this._fontSizeFraction)*c/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(a){var o=e.Object.prototype.getSvgStyles.call(this,a);return o+" white-space: pre;"}})}(),function(f){var r=f.fabric||(f.fabric={});r.Textbox=r.util.createClass(r.IText,r.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:r.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(u){for(var d=0,s=0,a=0,o={},c=0;c<u.graphemeLines.length;c++)u.graphemeText[a]===`
`&&c>0?(s=0,a++,d++):!this.splitByGrapheme&&this._reSpaceAndTab.test(u.graphemeText[a])&&c>0&&(s++,a++),o[c]={line:d,offset:s},a+=u.graphemeLines[c].length,s+=u.graphemeLines[c].length;return o},styleHas:function(u,d){if(this._styleMap&&!this.isWrapping){var s=this._styleMap[d];s&&(d=s.line)}return r.Text.prototype.styleHas.call(this,u,d)},isEmptyStyles:function(u){if(!this.styles)return!0;var d=0,s=u+1,a,o,c=!1,g=this._styleMap[u],l=this._styleMap[u+1];g&&(u=g.line,d=g.offset),l&&(s=l.line,c=s===u,a=l.offset),o=typeof u>"u"?this.styles:{line:this.styles[u]};for(var p in o)for(var v in o[p])if(v>=d&&(!c||v<a))for(var y in o[p][v])return!1;return!0},_getStyleDeclaration:function(u,d){if(this._styleMap&&!this.isWrapping){var s=this._styleMap[u];if(!s)return null;u=s.line,d=s.offset+d}return this.callSuper("_getStyleDeclaration",u,d)},_setStyleDeclaration:function(u,d,s){var a=this._styleMap[u];u=a.line,d=a.offset+d,this.styles[u][d]=s},_deleteStyleDeclaration:function(u,d){var s=this._styleMap[u];u=s.line,d=s.offset+d,delete this.styles[u][d]},_getLineStyle:function(u){var d=this._styleMap[u];return!!this.styles[d.line]},_setLineStyle:function(u){var d=this._styleMap[u];this.styles[d.line]={}},_wrapText:function(u,d){var s=[],a;for(this.isWrapping=!0,a=0;a<u.length;a++)s=s.concat(this._wrapLine(u[a],a,d));return this.isWrapping=!1,s},_measureWord:function(u,d,s){var a=0,o,c=!0;s=s||0;for(var g=0,l=u.length;g<l;g++){var p=this._getGraphemeBox(u[g],d,g+s,o,c);a+=p.kernedWidth,o=u[g]}return a},_wrapLine:function(u,d,s,M){var o=0,c=this.splitByGrapheme,g=[],l=[],p=c?r.util.string.graphemeSplit(u):u.split(this._wordJoiners),v="",y=0,x=c?"":" ",w=0,S=0,k=0,b=!0,j=this._getWidthOfCharSpacing(),M=M||0;p.length===0&&p.push([]),s-=M;for(var W=0;W<p.length;W++)v=c?p[W]:r.util.string.graphemeSplit(p[W]),w=this._measureWord(v,d,y),y+=v.length,o+=S+w-j,o>s&&!b?(g.push(l),l=[],o=w,b=!0):o+=j,!b&&!c&&l.push(x),l=l.concat(v),S=c?0:this._measureWord([x],d,y),y++,b=!1,w>k&&(k=w);return W&&g.push(l),k+M>this.dynamicMinWidth&&(this.dynamicMinWidth=k-j+M),g},isEndOfWrapping:function(u){return!this._styleMap[u+1]||this._styleMap[u+1].line!==this._styleMap[u].line},missingNewlineOffset:function(u,d){return this.splitByGrapheme&&!d?this.isEndOfWrapping(u)?1:0:1},_splitTextIntoLines:function(u){for(var d=r.Text.prototype._splitTextIntoLines.call(this,u),s=this._wrapText(d.lines,this.width),a=new Array(s.length),o=0;o<s.length;o++)a[o]=s[o].join("");return d.lines=a,d.graphemeLines=s,d},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var u={};for(var d in this._styleMap)this._textLines[d]&&(u[this._styleMap[d].line]=1);for(var d in this.styles)u[d]||delete this.styles[d]},toObject:function(u){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(u))}}),r.Textbox.fromObject=function(u,d){var s=r.util.stylesFromArray(u.styles,u.text),a=Object.assign({},u,{styles:s});return delete a.path,r.Object._fromObject("Textbox",a,function(o){u.path?r.Object._fromObject("Path",u.path,function(c){o.set("path",c),d(o)},"path"):d(o)},"text")}}(t),function(){var f=e.controlsUtils,r=f.scaleSkewCursorStyleHandler,u=f.scaleCursorStyleHandler,d=f.scalingEqually,s=f.scalingYOrSkewingX,a=f.scalingXOrSkewingY,o=f.scaleOrSkewActionName,c=e.Object.prototype.controls;if(c.ml=new e.Control({x:-.5,y:0,cursorStyleHandler:r,actionHandler:a,getActionName:o}),c.mr=new e.Control({x:.5,y:0,cursorStyleHandler:r,actionHandler:a,getActionName:o}),c.mb=new e.Control({x:0,y:.5,cursorStyleHandler:r,actionHandler:s,getActionName:o}),c.mt=new e.Control({x:0,y:-.5,cursorStyleHandler:r,actionHandler:s,getActionName:o}),c.tl=new e.Control({x:-.5,y:-.5,cursorStyleHandler:u,actionHandler:d}),c.tr=new e.Control({x:.5,y:-.5,cursorStyleHandler:u,actionHandler:d}),c.bl=new e.Control({x:-.5,y:.5,cursorStyleHandler:u,actionHandler:d}),c.br=new e.Control({x:.5,y:.5,cursorStyleHandler:u,actionHandler:d}),c.mtr=new e.Control({x:0,y:-.5,actionHandler:f.rotationWithSnapping,cursorStyleHandler:f.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),e.Textbox){var g=e.Textbox.prototype.controls={};g.mtr=c.mtr,g.tr=c.tr,g.br=c.br,g.tl=c.tl,g.bl=c.bl,g.mt=c.mt,g.mb=c.mb,g.mr=new e.Control({x:.5,y:0,actionHandler:f.changeWidth,cursorStyleHandler:r,actionName:"resizing"}),g.ml=new e.Control({x:-.5,y:0,actionHandler:f.changeWidth,cursorStyleHandler:r,actionName:"resizing"})}}()})(qt);const Nw=[{key:"freedraw",label:"Free Draw",icon:C.jsx(Tw,{className:"w-5 h-5"})},{key:"eraser",label:"Eraser",icon:C.jsx(vw,{className:"w-5 h-5"})},{key:"line",label:"Line",icon:C.jsx(Sw,{className:"w-5 h-5"})},{key:"rect",label:"Rectangle",icon:C.jsx(Ew,{className:"w-5 h-5"})},{key:"ellipse",label:"Ellipse",icon:C.jsx(gw,{className:"w-5 h-5"})},{key:"polygon",label:"Polygon",icon:C.jsx(Iw,{className:"w-5 h-5"})},{key:"curve",label:"Curve",icon:C.jsx(Oi,{className:"w-5 h-5"})}];function Lw(){const t=K.useRef(null),e=K.useRef(null),n=sc(),[i,h]=K.useState(!1),[m,_]=K.useState("freedraw"),[f,r]=K.useState("#000000"),[u,d]=K.useState("rgba(0,0,0,0)"),[s,a]=K.useState(5),[o,c]=K.useState(null),[g,l]=K.useState(""),p=()=>{c(null),e.current&&(e.current.isDrawingMode=!1,e.current.selection=!0,e.current.defaultCursor="default")};K.useEffect(()=>{if(!e.current)return;const b=e.current;p(),m==="freedraw"?(b.isDrawingMode=!0,b.freeDrawingBrush.width=s,b.freeDrawingBrush.color=f,b.selection=!1):m==="eraser"?(b.isDrawingMode=!0,b.freeDrawingBrush.width=s*2,b.freeDrawingBrush.color="#ffffff",b.selection=!1):(b.isDrawingMode=!1,b.selection=!1)},[m,f,s]),K.useEffect(()=>{if(t.current){const b=new qt.fabric.Canvas(t.current,{width:800,height:600,backgroundColor:"#ffffff",isDrawingMode:!0});e.current=b,b.freeDrawingBrush.width=s,b.freeDrawingBrush.color=f;let j=0,M=0,W=null,ee=[],te=null,J=!1;const Q=T=>{if(m==="rect"||m==="ellipse"||m==="line"||m==="curve"){J=!0;const O=b.getPointer(T.e);j=O.x,M=O.y,m==="rect"?(W=new qt.fabric.Rect({left:j,top:M,width:0,height:0,fill:u,stroke:f,strokeWidth:s,selectable:!1,evented:!1}),b.add(W)):m==="ellipse"?(W=new qt.fabric.Ellipse({left:j,top:M,rx:0,ry:0,fill:u,stroke:f,strokeWidth:s,selectable:!1,evented:!1}),b.add(W)):m==="line"?(W=new qt.fabric.Line([j,M,j,M],{stroke:f,strokeWidth:s,selectable:!1,evented:!1}),b.add(W)):m==="curve"&&(te=new qt.fabric.Path(`M ${j} ${M} Q ${j} ${M} ${j} ${M}`,{stroke:f,strokeWidth:s,fill:"rgba(0,0,0,0)",selectable:!1,evented:!1}),b.add(te))}else if(m==="polygon"){const O=b.getPointer(T.e);if(ee.push({x:O.x,y:O.y}),ee.length>1){o&&b.remove(o);const I=new qt.fabric.Polygon(ee,{fill:u,stroke:f,strokeWidth:s,selectable:!1,evented:!1});c(I),b.add(I)}}},ie=T=>{if(!J)return;const O=b.getPointer(T.e);if(m==="rect"&&W)W.set({width:Math.abs(O.x-j),height:Math.abs(O.y-M),left:Math.min(O.x,j),top:Math.min(O.y,M)}),b.renderAll();else if(m==="ellipse"&&W)W.set({rx:Math.abs(O.x-j)/2,ry:Math.abs(O.y-M)/2,left:Math.min(O.x,j),top:Math.min(O.y,M)}),b.renderAll();else if(m==="line"&&W)W.set({x2:O.x,y2:O.y}),b.renderAll();else if(m==="curve"&&te){const I=`M ${j} ${M} Q ${(j+O.x)/2} ${(M+O.y)/2} ${O.x} ${O.y}`;te.set({path:new qt.fabric.Path(I).path}),b.renderAll()}},oe=()=>{m==="rect"||m==="ellipse"||m==="line"?(J=!1,W&&W.set({selectable:!0,evented:!0}),W=null):m==="curve"&&(J=!1,te&&te.set({selectable:!0,evented:!0}),te=null)},B=()=>{m==="polygon"&&ee.length>2&&(o&&o.set({selectable:!0,evented:!0}),ee=[],c(null))};return b.on("mouse:down",Q),b.on("mouse:move",ie),b.on("mouse:up",oe),b.on("mouse:dblclick",B),()=>{b.off("mouse:down",Q),b.off("mouse:move",ie),b.off("mouse:up",oe),b.off("mouse:dblclick",B),b.dispose()}}},[]),K.useEffect(()=>{e.current&&(m==="freedraw"?(e.current.freeDrawingBrush.color=f,e.current.freeDrawingBrush.width=s):m==="eraser"&&(e.current.freeDrawingBrush.color="#ffffff",e.current.freeDrawingBrush.width=s*2))},[f,s,m]);const v=()=>{e.current&&(e.current.clear(),e.current.backgroundColor="#ffffff",e.current.renderAll())},y=()=>{if(e.current){const b=e.current.toDataURL({format:"png",quality:1});console.log("Sketch saved:",b),n("/design/demo-123")}},x=()=>{e.current&&(h(!0),setTimeout(()=>{h(!1),n("/design/demo-123")},2e3))},w=()=>{if(e.current){const b=e.current.toDataURL({format:"png",quality:1});localStorage.setItem("sketchImage",b),localStorage.setItem("prompt",g),n("/design/generated")}},S=()=>{const b="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNgYAAAAAMAASsJTYQAAAAASUVORK5CYII=",j="Lehenga with floral embroidery and pastel shades";localStorage.setItem("sketchImage",b),localStorage.setItem("prompt",j),localStorage.setItem("demoMode","true"),n("/design/generated")},k=["#000000","#FF6B6B","#4ECDC4","#45B7D1","#FFE66D","#A8E6CF","#FF8B94","#FFA07A"];return C.jsxs("div",{className:"max-w-6xl mx-auto",children:[C.jsxs("div",{className:"text-center mb-8",children:[C.jsx("h1",{className:"text-3xl font-bold text-meesho-dark mb-2",children:"Design Your Outfit"}),C.jsx("p",{className:"text-gray-600",children:"Sketch your ideas and let AI bring them to life!"})]}),C.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[C.jsx("div",{className:"lg:w-64 w-full flex flex-col gap-6",children:C.jsxs("div",{className:"card",children:[C.jsxs("h3",{className:"text-lg font-semibold text-meesho-dark mb-4 flex items-center",children:[C.jsx(Er,{className:"w-5 h-5 mr-2"}),"Tools"]}),C.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:Nw.map(b=>C.jsxs("button",{onClick:()=>_(b.key),className:`flex flex-col items-center justify-center w-14 h-14 rounded-lg border-2 transition-colors ${m===b.key?"border-meesho-primary bg-meesho-primary/10":"border-gray-200 bg-white hover:bg-gray-50"}`,title:b.label,children:[b.icon,C.jsx("span",{className:"text-xs mt-1",children:b.label})]},b.key))}),C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stroke Color"}),C.jsxs("div",{className:"flex gap-2 mb-2",children:[k.map(b=>C.jsx("button",{onClick:()=>r(b),className:"w-7 h-7 rounded-full border-2 border-gray-300 hover:border-meesho-primary transition-colors",style:{backgroundColor:b}},b)),C.jsx("input",{type:"color",value:f,onChange:b=>r(b.target.value),className:"w-7 h-7 p-0 border-none bg-transparent cursor-pointer",title:"Custom color"})]})]}),C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fill Color"}),C.jsxs("div",{className:"flex gap-2 mb-2",children:[k.map(b=>C.jsx("button",{onClick:()=>d(b),className:"w-7 h-7 rounded-full border-2 border-gray-300 hover:border-meesho-primary transition-colors",style:{backgroundColor:b}},b)),C.jsx("input",{type:"color",value:u.startsWith("rgba")?"#ffffff":u,onChange:b=>d(b.target.value),className:"w-7 h-7 p-0 border-none bg-transparent cursor-pointer",title:"Custom fill"}),C.jsx("button",{onClick:()=>d("rgba(0,0,0,0)"),className:"w-7 h-7 rounded-full border-2 border-gray-300 flex items-center justify-center text-xs text-gray-500",title:"No fill",children:"×"})]})]}),C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stroke Width"}),C.jsx("input",{type:"range",min:1,max:30,value:s,onChange:b=>a(Number(b.target.value)),className:"w-full"}),C.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"px"]})]}),C.jsxs("div",{className:"space-y-3",children:[C.jsxs("button",{onClick:v,className:"w-full flex items-center justify-center space-x-2 py-2 px-4 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:[C.jsx(Ow,{className:"w-4 h-4"}),C.jsx("span",{children:"Clear All"})]}),C.jsxs("button",{onClick:y,className:"w-full flex items-center justify-center space-x-2 py-2 px-4 bg-meesho-secondary hover:bg-meesho-secondary/90 text-white rounded-lg transition-colors",children:[C.jsx(bw,{className:"w-4 h-4"}),C.jsx("span",{children:"Save Sketch"})]}),C.jsx("button",{onClick:x,disabled:i,className:"w-full flex items-center justify-center space-x-2 py-2 px-4 btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:i?C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),C.jsx("span",{children:"Generating..."})]}):C.jsxs(C.Fragment,{children:[C.jsx(Oi,{className:"w-4 h-4"}),C.jsx("span",{children:"Generate AI Design"})]})}),C.jsxs("div",{className:"mb-2",children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Describe your outfit idea"}),C.jsx("textarea",{value:g,onChange:b=>l(b.target.value),placeholder:"e.g. Lehenga with floral embroidery and pastel shades",className:"w-full p-2 border border-gray-200 rounded-lg resize-none focus:ring-2 focus:ring-meesho-primary focus:border-transparent",rows:2})]}),C.jsxs("button",{onClick:w,className:"w-full flex items-center justify-center space-x-2 py-2 px-4 bg-meesho-primary text-white rounded-lg transition-colors mt-2",children:[C.jsx(Oi,{className:"w-4 h-4"}),C.jsx("span",{children:"Preview with AI"})]}),C.jsxs("button",{onClick:S,className:"w-full flex items-center justify-center space-x-2 py-2 px-4 bg-gray-300 text-gray-800 rounded-lg transition-colors mt-2",children:[C.jsx("span",{role:"img","aria-label":"Demo",children:"🎬"}),C.jsx("span",{children:"Demo Mode"})]})]})]})}),C.jsx("div",{className:"flex-1",children:C.jsx("div",{className:"card",children:C.jsx("div",{className:"flex justify-center",children:C.jsx("canvas",{ref:t,className:"border border-gray-200 rounded-lg shadow-sm"})})})})]}),C.jsxs("div",{className:"mt-8 card",children:[C.jsx("h3",{className:"text-lg font-semibold text-meesho-dark mb-3",children:"How to Use"}),C.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-sm text-gray-600",children:[C.jsxs("div",{children:[C.jsx("strong",{className:"text-meesho-dark",children:"1. Sketch Your Idea"}),C.jsx("p",{children:"Use the drawing tools to sketch your outfit design on the canvas."})]}),C.jsxs("div",{children:[C.jsx("strong",{className:"text-meesho-dark",children:"2. Customize"}),C.jsx("p",{children:"Choose different colors and brush sizes to create your perfect design."})]}),C.jsxs("div",{children:[C.jsx("strong",{className:"text-meesho-dark",children:"3. Generate AI Design"}),C.jsx("p",{children:'Click "Generate AI Design" to transform your sketch into a stunning dress.'})]})]})]})]})}function Fw(){const{id:t}=Hv(),[e,n]=K.useState(!1),[i,h]=K.useState(42),[m,_]=K.useState(!1),[f,r]=K.useState(""),[u,d]=K.useState([{id:"1",user:"Sarah Designer",text:"This is absolutely stunning! Love the color combination.",timestamp:"2 hours ago"},{id:"2",user:"Mike Creative",text:"The AI really captured the essence of your sketch perfectly!",timestamp:"1 hour ago"}]),[s,a]=K.useState(!0),[o,c]=K.useState(null),[g,l]=K.useState(null),[p,v]=K.useState(null),[y,x]=K.useState(null),w="https://your-static-image-url.com/sample-ai-output.png",S="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNgYAAAAAMAASsJTYQAAAAASUVORK5CYII=",k="Lehenga with floral embroidery and pastel shades";K.useEffect(()=>{if(localStorage.getItem("demoMode")==="true"){x(k),v(S),c(w),a(!1),l(null);return}const W=localStorage.getItem("sketchImage"),ee=localStorage.getItem("prompt")||"Convert this sketch into a fashion outfit";x(ee),v(W),a(!0),l(null),c(null),W?(async()=>{try{const J=await fetch("/api/generate-design",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:ee,sketchImage:W})}),Q=await J.json();if(!J.ok||Q.error){l("Failed to generate design"),a(!1);return}if(Q.urls&&Q.urls.get){let ie=Q.status,oe=Q.urls.get,B=Q;for(;ie&&ie!=="succeeded"&&ie!=="failed"&&ie!=="canceled";)await new Promise(O=>setTimeout(O,2e3)),B=await(await fetch(oe)).json(),ie=B.status;ie==="succeeded"&&B.output?(c(Array.isArray(B.output)?B.output[0]:B.output),a(!1)):(l("Failed to generate design"),a(!1))}else Q.output?(c(Array.isArray(Q.output)?Q.output[0]:Q.output),a(!1)):(l("Failed to generate design"),a(!1))}catch{l("Failed to generate design"),a(!1)}})():(l("No sketch image found"),a(!1))},[t]);const b=()=>{n(!e),h(e?i-1:i+1)},j=()=>{if(f.trim()){const M={id:Date.now().toString(),user:"You",text:f,timestamp:"Just now"};d([M,...u]),r("")}};return C.jsxs("div",{className:"max-w-4xl mx-auto",children:[C.jsxs("div",{className:"text-center mb-8",children:[C.jsx("h1",{className:"text-3xl font-bold text-meesho-dark mb-2",children:"Your AI-Generated Design"}),C.jsx("p",{className:"text-gray-600",children:"Share your creation with the community!"})]}),C.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[C.jsxs("div",{className:"card",children:[y&&C.jsxs("div",{style:{marginBottom:"1rem",fontStyle:"italic"},children:["🧵 Prompt: ",y]}),C.jsxs("div",{className:"relative min-h-[400px] flex items-center justify-center",children:[s&&C.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full min-h-[400px]",children:[C.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-meesho-primary mb-4"}),C.jsx("span",{className:"text-meesho-primary font-medium",children:"Generating your design..."}),p&&C.jsxs("div",{className:"mt-4",children:[C.jsx("span",{className:"block text-xs text-gray-400 mb-1",children:"Your Sketch Preview"}),C.jsx("img",{src:p,alt:"Sketch Preview",className:"w-32 h-auto border rounded shadow"})]})]}),g&&!s&&C.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full min-h-[400px]",children:[C.jsx("span",{className:"text-red-500 font-medium mb-2",children:g}),C.jsx("button",{className:"btn-primary",onClick:()=>{a(!0),l(null),c(null),setTimeout(()=>{c("https://images.unsplash.com/photo-1595777457583-95e059d581b8?w=600&h=800&fit=crop"),a(!1)},2e3)},children:"Try Again"})]}),o&&!s&&!g&&C.jsxs("div",{style:{display:"flex",gap:"2rem",marginTop:"2rem",flexWrap:"wrap",justifyContent:"center"},children:[C.jsxs("div",{style:{flex:"1 1 250px",minWidth:0},children:[C.jsx("h4",{style:{marginBottom:"0.5rem",fontWeight:600},children:"Your Sketch"}),C.jsx("img",{src:p||"",alt:"User sketch",style:{maxWidth:"100%",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)"}})]}),C.jsxs("div",{style:{flex:"1 1 250px",minWidth:0},children:[C.jsx("h4",{style:{marginBottom:"0.5rem",fontWeight:600},children:"AI Output"}),C.jsx("img",{src:o,alt:"Generated design",style:{maxWidth:"100%",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)"}})]})]}),C.jsx("div",{className:"absolute top-4 right-4",children:C.jsx("button",{className:"bg-white/90 hover:bg-white p-2 rounded-full shadow-lg transition-colors",children:C.jsx(mw,{className:"w-5 h-5 text-meesho-dark"})})})]}),C.jsxs("div",{className:"flex justify-center space-x-4 mt-6",children:[C.jsxs("button",{onClick:b,className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ${e?"bg-meesho-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[C.jsx(Mp,{className:`w-4 h-4 ${e?"fill-current":""}`}),C.jsx("span",{children:i})]}),C.jsxs("button",{onClick:()=>_(!m),className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 text-gray-700 hover:bg-gray-200 rounded-lg transition-colors",children:[C.jsx(jp,{className:"w-4 h-4"}),C.jsx("span",{children:u.length})]}),C.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 text-gray-700 hover:bg-gray-200 rounded-lg transition-colors",children:[C.jsx(kw,{className:"w-4 h-4"}),C.jsx("span",{children:"Share"})]})]})]}),C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{className:"card",children:[C.jsx("h3",{className:"text-lg font-semibold text-meesho-dark mb-4",children:"Design Details"}),C.jsxs("div",{className:"space-y-3 text-sm",children:[C.jsxs("div",{className:"flex justify-between",children:[C.jsx("span",{className:"text-gray-600",children:"Style:"}),C.jsx("span",{className:"font-medium",children:"Elegant Evening Dress"})]}),C.jsxs("div",{className:"flex justify-between",children:[C.jsx("span",{className:"text-gray-600",children:"Color Palette:"}),C.jsx("span",{className:"font-medium",children:"Rose Gold & Navy"})]}),C.jsxs("div",{className:"flex justify-between",children:[C.jsx("span",{className:"text-gray-600",children:"Fabric:"}),C.jsx("span",{className:"font-medium",children:"Silk & Lace"})]}),C.jsxs("div",{className:"flex justify-between",children:[C.jsx("span",{className:"text-gray-600",children:"Generated:"}),C.jsx("span",{className:"font-medium",children:"2 hours ago"})]})]})]}),m&&C.jsxs("div",{className:"card",children:[C.jsx("h3",{className:"text-lg font-semibold text-meesho-dark mb-4",children:"Comments"}),C.jsxs("div",{className:"mb-4",children:[C.jsx("textarea",{value:f,onChange:M=>r(M.target.value),placeholder:"Add a comment...",className:"w-full p-3 border border-gray-200 rounded-lg resize-none focus:ring-2 focus:ring-meesho-primary focus:border-transparent",rows:3}),C.jsx("button",{onClick:j,disabled:!f.trim(),className:"mt-2 btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:"Post Comment"})]}),C.jsx("div",{className:"space-y-4",children:u.map(M=>C.jsxs("div",{className:"border-b border-gray-100 pb-4 last:border-b-0",children:[C.jsxs("div",{className:"flex justify-between items-start mb-2",children:[C.jsx("span",{className:"font-medium text-meesho-dark",children:M.user}),C.jsx("span",{className:"text-xs text-gray-500",children:M.timestamp})]}),C.jsx("p",{className:"text-gray-700",children:M.text})]},M.id))})]})]})]}),C.jsxs("div",{className:"mt-12",children:[C.jsx("h2",{className:"text-2xl font-bold text-meesho-dark mb-6",children:"More Designs You'll Love"}),C.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:[1,2,3].map(M=>C.jsxs("div",{className:"card p-0 overflow-hidden",children:[C.jsx("img",{src:`https://images.unsplash.com/photo-${1595777457583+M}?w=300&h=400&fit=crop`,alt:`Design ${M}`,className:"w-full h-48 object-cover"}),C.jsxs("div",{className:"p-4",children:[C.jsxs("h3",{className:"font-medium text-meesho-dark mb-2",children:["Elegant Design ",M]}),C.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[C.jsxs("span",{children:["By Designer ",M]}),C.jsxs("span",{children:["❤️ ",Math.floor(Math.random()*50)+10]})]})]})]},M))})]})]})}function Bw(){var i,h;const{currentUser:t}=_c(),e={totalDesigns:15,totalLikes:234,totalComments:45,points:1250,rank:3},n=[{id:"1",title:"Elegant Evening Dress",likes:42,comments:8,image:"https://images.unsplash.com/photo-1595777457583-95e059d581b8?w=300&h=400&fit=crop"},{id:"2",title:"Summer Floral Dress",likes:38,comments:5,image:"https://images.unsplash.com/photo-1595777457584-95e059d581b9?w=300&h=400&fit=crop"},{id:"3",title:"Casual Boho Style",likes:29,comments:3,image:"https://images.unsplash.com/photo-1595777457585-95e059d581c0?w=300&h=400&fit=crop"}];return C.jsxs("div",{className:"max-w-6xl mx-auto",children:[C.jsxs("div",{className:"text-center mb-8",children:[C.jsx("h1",{className:"text-3xl font-bold text-meesho-dark mb-2",children:"Your Profile"}),C.jsx("p",{className:"text-gray-600",children:"Track your designs and achievements"})]}),C.jsxs("div",{className:"grid lg:grid-cols-3 gap-6 mb-8",children:[C.jsxs("div",{className:"card text-center",children:[C.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-meesho-primary to-meesho-secondary rounded-full mx-auto mb-4 flex items-center justify-center",children:C.jsx("span",{className:"text-2xl font-bold text-white",children:((i=t==null?void 0:t.email)==null?void 0:i.charAt(0).toUpperCase())||"U"})}),C.jsx("h2",{className:"text-xl font-semibold text-meesho-dark mb-2",children:((h=t==null?void 0:t.email)==null?void 0:h.split("@")[0])||"User"}),C.jsx("p",{className:"text-gray-600 mb-4",children:t==null?void 0:t.email}),C.jsxs("div",{className:"flex items-center justify-center space-x-2 text-meesho-yellow",children:[C.jsx(Pi,{className:"w-5 h-5"}),C.jsxs("span",{className:"font-semibold",children:["Rank #",e.rank]})]})]}),C.jsx("div",{className:"lg:col-span-2",children:C.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[C.jsxs("div",{className:"card text-center",children:[C.jsx("div",{className:"text-2xl font-bold text-meesho-primary",children:e.totalDesigns}),C.jsx("div",{className:"text-sm text-gray-600",children:"Designs"})]}),C.jsxs("div",{className:"card text-center",children:[C.jsx("div",{className:"text-2xl font-bold text-meesho-secondary",children:e.totalLikes}),C.jsx("div",{className:"text-sm text-gray-600",children:"Likes"})]}),C.jsxs("div",{className:"card text-center",children:[C.jsx("div",{className:"text-2xl font-bold text-meesho-accent",children:e.totalComments}),C.jsx("div",{className:"text-sm text-gray-600",children:"Comments"})]}),C.jsxs("div",{className:"card text-center",children:[C.jsx("div",{className:"text-2xl font-bold text-meesho-yellow",children:e.points}),C.jsx("div",{className:"text-sm text-gray-600",children:"Points"})]})]})})]}),C.jsxs("div",{className:"card",children:[C.jsx("h3",{className:"text-xl font-semibold text-meesho-dark mb-6",children:"Your Recent Designs"}),C.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:n.map(m=>C.jsxs("div",{className:"group cursor-pointer",children:[C.jsxs("div",{className:"relative overflow-hidden rounded-lg",children:[C.jsx("img",{src:m.image,alt:m.title,className:"w-full h-48 object-cover transition-transform group-hover:scale-105"}),C.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors"})]}),C.jsxs("div",{className:"mt-3",children:[C.jsx("h4",{className:"font-medium text-meesho-dark mb-2",children:m.title}),C.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[C.jsxs("div",{className:"flex items-center space-x-4",children:[C.jsxs("div",{className:"flex items-center space-x-1",children:[C.jsx(Mp,{className:"w-4 h-4"}),C.jsx("span",{children:m.likes})]}),C.jsxs("div",{className:"flex items-center space-x-1",children:[C.jsx(jp,{className:"w-4 h-4"}),C.jsx("span",{children:m.comments})]})]}),C.jsxs("div",{className:"flex items-center space-x-1",children:[C.jsx(pw,{className:"w-4 h-4"}),C.jsx("span",{children:"2d ago"})]})]})]})]},m.id))})]}),C.jsxs("div",{className:"mt-8 card",children:[C.jsx("h3",{className:"text-xl font-semibold text-meesho-dark mb-6",children:"Achievements"}),C.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:[{title:"First Design",description:"Created your first design",earned:!0},{title:"Popular Creator",description:"Reached 100 likes",earned:!0},{title:"Top Designer",description:"Reached top 10 leaderboard",earned:!1}].map((m,_)=>C.jsx("div",{className:`p-4 rounded-lg border-2 ${m.earned?"border-meesho-yellow bg-meesho-yellow/10":"border-gray-200 bg-gray-50"}`,children:C.jsxs("div",{className:"flex items-center space-x-3",children:[C.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${m.earned?"bg-meesho-yellow":"bg-gray-300"}`,children:m.earned?"✓":"?"}),C.jsxs("div",{children:[C.jsx("h4",{className:"font-medium text-meesho-dark",children:m.title}),C.jsx("p",{className:"text-sm text-gray-600",children:m.description})]})]})},_))})]})]})}function Uw(){const t=[{id:"1",name:"Sarah Designer",points:1250,designs:25,likes:450,rank:1,avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face"},{id:"2",name:"Mike Creative",points:980,designs:18,likes:320,rank:2,avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop&crop=face"},{id:"3",name:"Emma Style",points:756,designs:15,likes:280,rank:3,avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=100&h=100&fit=crop&crop=face"},{id:"4",name:"Alex Fashion",points:654,designs:12,likes:245,rank:4,avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face"},{id:"5",name:"Lisa Trend",points:543,designs:10,likes:210,rank:5,avatar:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=100&h=100&fit=crop&crop=face"},{id:"6",name:"David Art",points:432,designs:8,likes:180,rank:6,avatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=100&h=100&fit=crop&crop=face"},{id:"7",name:"Anna Design",points:398,designs:7,likes:165,rank:7,avatar:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=100&h=100&fit=crop&crop=face"},{id:"8",name:"Tom Creative",points:365,designs:6,likes:145,rank:8,avatar:"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=100&h=100&fit=crop&crop=face"},{id:"9",name:"Maria Style",points:334,designs:5,likes:130,rank:9,avatar:"https://images.unsplash.com/photo-1487412720507-e7ab37603c6f?w=100&h=100&fit=crop&crop=face"},{id:"10",name:"John Fashion",points:298,designs:4,likes:115,rank:10,avatar:"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=100&h=100&fit=crop&crop=face"}],e=i=>{switch(i){case 1:return C.jsx(Pi,{className:"w-6 h-6 text-meesho-yellow"});case 2:return C.jsx(Cw,{className:"w-6 h-6 text-gray-400"});case 3:return C.jsx(dw,{className:"w-6 h-6 text-meesho-orange"});default:return C.jsx("span",{className:"text-lg font-bold text-gray-500",children:i})}},n=i=>{switch(i){case 1:return"bg-gradient-to-r from-meesho-yellow to-yellow-400";case 2:return"bg-gradient-to-r from-gray-300 to-gray-400";case 3:return"bg-gradient-to-r from-meesho-orange to-orange-400";default:return"bg-gray-100"}};return C.jsxs("div",{className:"max-w-4xl mx-auto",children:[C.jsxs("div",{className:"text-center mb-8",children:[C.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[C.jsx(Pi,{className:"w-8 h-8 text-meesho-yellow"}),C.jsx("h1",{className:"text-3xl font-bold text-meesho-dark",children:"Leaderboard"})]}),C.jsx("p",{className:"text-gray-600",children:"Top designers based on community engagement and points"})]}),C.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mb-8",children:[C.jsxs("div",{className:"card text-center",children:[C.jsx("div",{className:"text-2xl font-bold text-meesho-primary",children:"1,234"}),C.jsx("div",{className:"text-sm text-gray-600",children:"Total Designers"})]}),C.jsxs("div",{className:"card text-center",children:[C.jsx("div",{className:"text-2xl font-bold text-meesho-secondary",children:"5,678"}),C.jsx("div",{className:"text-sm text-gray-600",children:"Total Designs"})]}),C.jsxs("div",{className:"card text-center",children:[C.jsx("div",{className:"text-2xl font-bold text-meesho-accent",children:"12,345"}),C.jsx("div",{className:"text-sm text-gray-600",children:"Total Likes"})]}),C.jsxs("div",{className:"card text-center",children:[C.jsx("div",{className:"text-2xl font-bold text-meesho-yellow",children:"890"}),C.jsx("div",{className:"text-sm text-gray-600",children:"Total Comments"})]})]}),C.jsxs("div",{className:"card",children:[C.jsxs("div",{className:"flex items-center justify-between mb-6",children:[C.jsx("h2",{className:"text-xl font-semibold text-meesho-dark",children:"Top Designers"}),C.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[C.jsx(Pw,{className:"w-4 h-4"}),C.jsx("span",{children:"Updated daily"})]})]}),C.jsx("div",{className:"space-y-4",children:t.map(i=>C.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border-2 transition-all hover:shadow-md ${i.rank<=3?"border-meesho-yellow/20 bg-meesho-yellow/5":"border-gray-100"}`,children:[C.jsxs("div",{className:"flex items-center space-x-4",children:[C.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${n(i.rank)}`,children:e(i.rank)}),C.jsxs("div",{className:"flex items-center space-x-3",children:[C.jsx("img",{src:i.avatar,alt:i.name,className:"w-10 h-10 rounded-full object-cover"}),C.jsxs("div",{children:[C.jsx("h3",{className:"font-medium text-meesho-dark",children:i.name}),C.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[C.jsxs("span",{children:[i.designs," designs"]}),C.jsx("span",{children:"•"}),C.jsxs("span",{children:[i.likes," likes"]})]})]})]})]}),C.jsxs("div",{className:"text-right",children:[C.jsx("div",{className:"text-xl font-bold text-meesho-primary",children:i.points}),C.jsx("div",{className:"text-sm text-gray-600",children:"points"})]})]},i.id))})]}),C.jsxs("div",{className:"mt-8 card",children:[C.jsx("h3",{className:"text-lg font-semibold text-meesho-dark mb-4",children:"How to Earn Points"}),C.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-sm",children:[C.jsxs("div",{className:"flex items-start space-x-3",children:[C.jsx("div",{className:"w-6 h-6 bg-meesho-primary text-white rounded-full flex items-center justify-center text-xs font-bold",children:"1"}),C.jsxs("div",{children:[C.jsx("strong",{className:"text-meesho-dark",children:"Create Designs"}),C.jsx("p",{className:"text-gray-600",children:"Earn 10 points for each design you create"})]})]}),C.jsxs("div",{className:"flex items-start space-x-3",children:[C.jsx("div",{className:"w-6 h-6 bg-meesho-secondary text-white rounded-full flex items-center justify-center text-xs font-bold",children:"2"}),C.jsxs("div",{children:[C.jsx("strong",{className:"text-meesho-dark",children:"Get Likes"}),C.jsx("p",{className:"text-gray-600",children:"Earn 2 points for each like on your designs"})]})]}),C.jsxs("div",{className:"flex items-start space-x-3",children:[C.jsx("div",{className:"w-6 h-6 bg-meesho-accent text-white rounded-full flex items-center justify-center text-xs font-bold",children:"3"}),C.jsxs("div",{children:[C.jsx("strong",{className:"text-meesho-dark",children:"Engage"}),C.jsx("p",{className:"text-gray-600",children:"Earn 1 point for each comment you make"})]})]})]})]})]})}function zw(){const[t,e]=K.useState(""),[n,i]=K.useState(""),[h,m]=K.useState(!1),[_,f]=K.useState(!1),[r,u]=K.useState(""),{login:d,signup:s,signInWithGoogle:a}=_c(),o=sc(),c=async l=>{l.preventDefault(),u(""),f(!0);try{h?await s(t,n):await d(t,n),o("/")}catch(p){u("Failed to "+(h?"sign up":"log in")),console.error(p)}f(!1)},g=async()=>{try{await a(),o("/")}catch(l){u("Failed to sign in with Google"),console.error(l)}};return C.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-meesho-light to-white py-12 px-4 sm:px-6 lg:px-8",children:C.jsxs("div",{className:"max-w-md w-full space-y-8",children:[C.jsxs("div",{className:"text-center",children:[C.jsx("div",{className:"mx-auto h-12 w-12 bg-gradient-to-r from-meesho-primary to-meesho-secondary rounded-lg flex items-center justify-center",children:C.jsx(Er,{className:"h-8 w-8 text-white"})}),C.jsx("h2",{className:"mt-6 text-3xl font-bold text-meesho-dark",children:h?"Create Account":"Sign In"}),C.jsx("p",{className:"mt-2 text-sm text-gray-600",children:h?"Join the Meesho Design Studio community":"Welcome back to Meesho Design Studio"})]}),C.jsxs("form",{className:"mt-8 space-y-6",onSubmit:c,children:[r&&C.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:r}),C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{children:[C.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),C.jsxs("div",{className:"mt-1 relative",children:[C.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:C.jsx(ww,{className:"h-5 w-5 text-gray-400"})}),C.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:l=>e(l.target.value),className:"appearance-none relative block w-full pl-10 pr-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-meesho-primary focus:border-meesho-primary focus:z-10 sm:text-sm",placeholder:"Enter your email"})]})]}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),C.jsxs("div",{className:"mt-1 relative",children:[C.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:C.jsx(_w,{className:"h-5 w-5 text-gray-400"})}),C.jsx("input",{id:"password",name:"password",type:"password",autoComplete:h?"new-password":"current-password",required:!0,value:n,onChange:l=>i(l.target.value),className:"appearance-none relative block w-full pl-10 pr-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-meesho-primary focus:border-meesho-primary focus:z-10 sm:text-sm",placeholder:"Enter your password"})]})]})]}),C.jsx("div",{children:C.jsx("button",{type:"submit",disabled:_,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-meesho-primary hover:bg-meesho-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-meesho-primary disabled:opacity-50 disabled:cursor-not-allowed",children:_?C.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):C.jsx("span",{children:h?"Create Account":"Sign In"})})}),C.jsxs("div",{className:"relative",children:[C.jsx("div",{className:"absolute inset-0 flex items-center",children:C.jsx("div",{className:"w-full border-t border-gray-300"})}),C.jsx("div",{className:"relative flex justify-center text-sm",children:C.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),C.jsx("div",{children:C.jsxs("button",{type:"button",onClick:g,className:"group relative w-full flex justify-center py-3 px-4 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-meesho-primary",children:[C.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[C.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),C.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),C.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),C.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google"]})}),C.jsx("div",{className:"text-center",children:C.jsx("button",{type:"button",onClick:()=>m(!h),className:"text-meesho-primary hover:text-meesho-primary/80 font-medium",children:h?"Already have an account? Sign in":"Don't have an account? Sign up"})})]}),C.jsx("div",{className:"text-center",children:C.jsx(pr,{to:"/",className:"text-gray-600 hover:text-meesho-primary",children:"← Back to Home"})})]})})}function Ww({children:t}){var _;const{currentUser:e,logout:n}=_c(),i=Ni(),h=[{name:"Home",href:"/",icon:yw},{name:"Design",href:"/sketch",icon:Er},{name:"Leaderboard",href:"/leaderboard",icon:Pi},{name:"Profile",href:"/profile",icon:Aw}],m=async()=>{try{await n()}catch(f){console.error("Failed to log out:",f)}};return C.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-meesho-light to-white",children:[C.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:C.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:C.jsxs("div",{className:"flex justify-between items-center h-16",children:[C.jsxs(pr,{to:"/",className:"flex items-center space-x-2",children:[C.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-meesho-primary to-meesho-secondary rounded-lg flex items-center justify-center",children:C.jsx(Er,{className:"w-5 h-5 text-white"})}),C.jsx("span",{className:"text-xl font-bold text-meesho-dark",children:"Meesho Design Studio"})]}),C.jsx("nav",{className:"hidden md:flex space-x-8",children:h.map(f=>{const r=f.icon,u=i.pathname===f.href;return C.jsxs(pr,{to:f.href,className:`flex items-center space-x-1 px-3 py-2 rounded-md text-sm font-medium transition-colors ${u?"text-meesho-primary bg-meesho-primary/10":"text-gray-600 hover:text-meesho-primary hover:bg-gray-50"}`,children:[C.jsx(r,{className:"w-4 h-4"}),C.jsx("span",{children:f.name})]},f.name)})}),C.jsx("div",{className:"flex items-center space-x-4",children:e?C.jsxs(C.Fragment,{children:[C.jsxs("span",{className:"text-sm text-gray-600",children:["Hi, ",(_=e.email)==null?void 0:_.split("@")[0]]}),C.jsxs("button",{onClick:m,className:"flex items-center space-x-1 text-gray-600 hover:text-meesho-primary transition-colors",children:[C.jsx(xw,{className:"w-4 h-4"}),C.jsx("span",{className:"text-sm",children:"Logout"})]})]}):C.jsx(pr,{to:"/login",className:"btn-primary",children:"Sign In"})})]})})}),C.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t})]})}function Hw(){return C.jsx(uw,{children:C.jsx(hy,{children:C.jsxs(Ru,{children:[C.jsx(Kt,{path:"/login",element:C.jsx(zw,{})}),C.jsx(Kt,{path:"/*",element:C.jsx(Ww,{children:C.jsxs(Ru,{children:[C.jsx(Kt,{path:"/",element:C.jsx(Mw,{})}),C.jsx(Kt,{path:"/sketch",element:C.jsx(Lw,{})}),C.jsx(Kt,{path:"/design/:id",element:C.jsx(Fw,{})}),C.jsx(Kt,{path:"/profile",element:C.jsx(Bw,{})}),C.jsx(Kt,{path:"/leaderboard",element:C.jsx(Uw,{})})]})})})]})})})}ia.createRoot(document.getElementById("root")).render(C.jsx(Th.StrictMode,{children:C.jsx(Hw,{})}));
