function Yv(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const c in i)if(c!=="default"&&!(c in t)){const v=Object.getOwnPropertyDescriptor(i,c);v&&Object.defineProperty(t,c,v.get?v:{enumerable:!0,get:()=>i[c]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const v of c)if(v.type==="childList")for(const w of v.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&i(w)}).observe(document,{childList:!0,subtree:!0});function n(c){const v={};return c.integrity&&(v.integrity=c.integrity),c.referrerPolicy&&(v.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?v.credentials="include":c.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function i(c){if(c.ep)return;c.ep=!0;const v=n(c);fetch(c.href,v)}})();function Gv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function $v(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var c=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,c.get?c:{enumerable:!0,get:function(){return t[i]}})}),n}var Kd={exports:{}},ma={},qd={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bs=Symbol.for("react.element"),Kv=Symbol.for("react.portal"),qv=Symbol.for("react.fragment"),Jv=Symbol.for("react.strict_mode"),Qv=Symbol.for("react.profiler"),Zv=Symbol.for("react.provider"),ey=Symbol.for("react.context"),ty=Symbol.for("react.forward_ref"),ny=Symbol.for("react.suspense"),iy=Symbol.for("react.memo"),ry=Symbol.for("react.lazy"),Gh=Symbol.iterator;function sy(t){return t===null||typeof t!="object"?null:(t=Gh&&t[Gh]||t["@@iterator"],typeof t=="function"?t:null)}var Jd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qd=Object.assign,Zd={};function hr(t,e,n){this.props=t,this.context=e,this.refs=Zd,this.updater=n||Jd}hr.prototype.isReactComponent={};hr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};hr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ep(){}ep.prototype=hr.prototype;function Hu(t,e,n){this.props=t,this.context=e,this.refs=Zd,this.updater=n||Jd}var Wu=Hu.prototype=new ep;Wu.constructor=Hu;Qd(Wu,hr.prototype);Wu.isPureReactComponent=!0;var $h=Array.isArray,tp=Object.prototype.hasOwnProperty,Vu={current:null},np={key:!0,ref:!0,__self:!0,__source:!0};function ip(t,e,n){var i,c={},v=null,w=null;if(e!=null)for(i in e.ref!==void 0&&(w=e.ref),e.key!==void 0&&(v=""+e.key),e)tp.call(e,i)&&!np.hasOwnProperty(i)&&(c[i]=e[i]);var h=arguments.length-2;if(h===1)c.children=n;else if(1<h){for(var r=Array(h),f=0;f<h;f++)r[f]=arguments[f+2];c.children=r}if(t&&t.defaultProps)for(i in h=t.defaultProps,h)c[i]===void 0&&(c[i]=h[i]);return{$$typeof:bs,type:t,key:v,ref:w,props:c,_owner:Vu.current}}function oy(t,e){return{$$typeof:bs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Xu(t){return typeof t=="object"&&t!==null&&t.$$typeof===bs}function ay(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Kh=/\/+/g;function el(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ay(""+t.key):e.toString(36)}function wo(t,e,n,i,c){var v=typeof t;(v==="undefined"||v==="boolean")&&(t=null);var w=!1;if(t===null)w=!0;else switch(v){case"string":case"number":w=!0;break;case"object":switch(t.$$typeof){case bs:case Kv:w=!0}}if(w)return w=t,c=c(w),t=i===""?"."+el(w,0):i,$h(c)?(n="",t!=null&&(n=t.replace(Kh,"$&/")+"/"),wo(c,e,n,"",function(f){return f})):c!=null&&(Xu(c)&&(c=oy(c,n+(!c.key||w&&w.key===c.key?"":(""+c.key).replace(Kh,"$&/")+"/")+t)),e.push(c)),1;if(w=0,i=i===""?".":i+":",$h(t))for(var h=0;h<t.length;h++){v=t[h];var r=i+el(v,h);w+=wo(v,e,n,r,c)}else if(r=sy(t),typeof r=="function")for(t=r.call(t),h=0;!(v=t.next()).done;)v=v.value,r=i+el(v,h++),w+=wo(v,e,n,r,c);else if(v==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return w}function eo(t,e,n){if(t==null)return t;var i=[],c=0;return wo(t,i,"","",function(v){return e.call(n,v,c++)}),i}function ly(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ht={current:null},xo={transition:null},uy={ReactCurrentDispatcher:ht,ReactCurrentBatchConfig:xo,ReactCurrentOwner:Vu};function rp(){throw Error("act(...) is not supported in production builds of React.")}Ce.Children={map:eo,forEach:function(t,e,n){eo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return eo(t,function(){e++}),e},toArray:function(t){return eo(t,function(e){return e})||[]},only:function(t){if(!Xu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ce.Component=hr;Ce.Fragment=qv;Ce.Profiler=Qv;Ce.PureComponent=Hu;Ce.StrictMode=Jv;Ce.Suspense=ny;Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uy;Ce.act=rp;Ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Qd({},t.props),c=t.key,v=t.ref,w=t._owner;if(e!=null){if(e.ref!==void 0&&(v=e.ref,w=Vu.current),e.key!==void 0&&(c=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(r in e)tp.call(e,r)&&!np.hasOwnProperty(r)&&(i[r]=e[r]===void 0&&h!==void 0?h[r]:e[r])}var r=arguments.length-2;if(r===1)i.children=n;else if(1<r){h=Array(r);for(var f=0;f<r;f++)h[f]=arguments[f+2];i.children=h}return{$$typeof:bs,type:t.type,key:c,ref:v,props:i,_owner:w}};Ce.createContext=function(t){return t={$$typeof:ey,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Zv,_context:t},t.Consumer=t};Ce.createElement=ip;Ce.createFactory=function(t){var e=ip.bind(null,t);return e.type=t,e};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(t){return{$$typeof:ty,render:t}};Ce.isValidElement=Xu;Ce.lazy=function(t){return{$$typeof:ry,_payload:{_status:-1,_result:t},_init:ly}};Ce.memo=function(t,e){return{$$typeof:iy,type:t,compare:e===void 0?null:e}};Ce.startTransition=function(t){var e=xo.transition;xo.transition={};try{t()}finally{xo.transition=e}};Ce.unstable_act=rp;Ce.useCallback=function(t,e){return ht.current.useCallback(t,e)};Ce.useContext=function(t){return ht.current.useContext(t)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(t){return ht.current.useDeferredValue(t)};Ce.useEffect=function(t,e){return ht.current.useEffect(t,e)};Ce.useId=function(){return ht.current.useId()};Ce.useImperativeHandle=function(t,e,n){return ht.current.useImperativeHandle(t,e,n)};Ce.useInsertionEffect=function(t,e){return ht.current.useInsertionEffect(t,e)};Ce.useLayoutEffect=function(t,e){return ht.current.useLayoutEffect(t,e)};Ce.useMemo=function(t,e){return ht.current.useMemo(t,e)};Ce.useReducer=function(t,e,n){return ht.current.useReducer(t,e,n)};Ce.useRef=function(t){return ht.current.useRef(t)};Ce.useState=function(t){return ht.current.useState(t)};Ce.useSyncExternalStore=function(t,e,n){return ht.current.useSyncExternalStore(t,e,n)};Ce.useTransition=function(){return ht.current.useTransition()};Ce.version="18.3.1";qd.exports=Ce;var ae=qd.exports;const sp=Gv(ae),cy=Yv({__proto__:null,default:sp},[ae]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hy=ae,fy=Symbol.for("react.element"),dy=Symbol.for("react.fragment"),py=Object.prototype.hasOwnProperty,gy=hy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,my={key:!0,ref:!0,__self:!0,__source:!0};function op(t,e,n){var i,c={},v=null,w=null;n!==void 0&&(v=""+n),e.key!==void 0&&(v=""+e.key),e.ref!==void 0&&(w=e.ref);for(i in e)py.call(e,i)&&!my.hasOwnProperty(i)&&(c[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)c[i]===void 0&&(c[i]=e[i]);return{$$typeof:fy,type:t,key:v,ref:w,props:c,_owner:gy.current}}ma.Fragment=dy;ma.jsx=op;ma.jsxs=op;Kd.exports=ma;var P=Kd.exports,Ll={},ap={exports:{}},Tt={},lp={exports:{}},up={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,I){var L=q.length;q.push(I);e:for(;0<L;){var B=L-1>>>1,F=q[B];if(0<c(F,I))q[B]=I,q[L]=F,L=B;else break e}}function n(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var I=q[0],L=q.pop();if(L!==I){q[0]=L;e:for(var B=0,F=q.length,X=F>>>1;B<X;){var N=2*(B+1)-1,D=q[N],z=N+1,H=q[z];if(0>c(D,L))z<F&&0>c(H,D)?(q[B]=H,q[z]=L,B=z):(q[B]=D,q[N]=L,B=N);else if(z<F&&0>c(H,L))q[B]=H,q[z]=L,B=z;else break e}}return I}function c(q,I){var L=q.sortIndex-I.sortIndex;return L!==0?L:q.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var v=performance;t.unstable_now=function(){return v.now()}}else{var w=Date,h=w.now();t.unstable_now=function(){return w.now()-h}}var r=[],f=[],d=1,o=null,a=3,s=!1,u=!1,p=!1,l=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(q){for(var I=n(f);I!==null;){if(I.callback===null)i(f);else if(I.startTime<=q)i(f),I.sortIndex=I.expirationTime,e(r,I);else break;I=n(f)}}function x(q){if(p=!1,_(q),!u)if(n(r)!==null)u=!0,fe(S);else{var I=n(f);I!==null&&de(x,I.startTime-q)}}function S(q,I){u=!1,p&&(p=!1,g(T),T=-1),s=!0;var L=a;try{for(_(I),o=n(r);o!==null&&(!(o.expirationTime>I)||q&&!j());){var B=o.callback;if(typeof B=="function"){o.callback=null,a=o.priorityLevel;var F=B(o.expirationTime<=I);I=t.unstable_now(),typeof F=="function"?o.callback=F:o===n(r)&&i(r),_(I)}else i(r);o=n(r)}if(o!==null)var X=!0;else{var N=n(f);N!==null&&de(x,N.startTime-I),X=!1}return X}finally{o=null,a=L,s=!1}}var b=!1,E=null,T=-1,O=5,A=-1;function j(){return!(t.unstable_now()-A<O)}function U(){if(E!==null){var q=t.unstable_now();A=q;var I=!0;try{I=E(!0,q)}finally{I?M():(b=!1,E=null)}}else b=!1}var M;if(typeof y=="function")M=function(){y(U)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,oe=re.port2;re.port1.onmessage=U,M=function(){oe.postMessage(null)}}else M=function(){l(U,0)};function fe(q){E=q,b||(b=!0,M())}function de(q,I){T=l(function(){q(t.unstable_now())},I)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){u||s||(u=!0,fe(S))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return a},t.unstable_getFirstCallbackNode=function(){return n(r)},t.unstable_next=function(q){switch(a){case 1:case 2:case 3:var I=3;break;default:I=a}var L=a;a=I;try{return q()}finally{a=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,I){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var L=a;a=q;try{return I()}finally{a=L}},t.unstable_scheduleCallback=function(q,I,L){var B=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?B+L:B):L=B,q){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=L+F,q={id:d++,callback:I,priorityLevel:q,startTime:L,expirationTime:F,sortIndex:-1},L>B?(q.sortIndex=L,e(f,q),n(r)===null&&q===n(f)&&(p?(g(T),T=-1):p=!0,de(x,L-B))):(q.sortIndex=F,e(r,q),u||s||(u=!0,fe(S))),q},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(q){var I=a;return function(){var L=a;a=I;try{return q.apply(this,arguments)}finally{a=L}}}})(up);lp.exports=up;var vy=lp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yy=ae,St=vy;function se(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cp=new Set,rs={};function Si(t,e){tr(t,e),tr(t+"Capture",e)}function tr(t,e){for(rs[t]=e,t=0;t<e.length;t++)cp.add(e[t])}var hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nl=Object.prototype.hasOwnProperty,_y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qh={},Jh={};function wy(t){return Nl.call(Jh,t)?!0:Nl.call(qh,t)?!1:_y.test(t)?Jh[t]=!0:(qh[t]=!0,!1)}function xy(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Cy(t,e,n,i){if(e===null||typeof e>"u"||xy(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ft(t,e,n,i,c,v,w){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=c,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=v,this.removeEmptyString=w}var Qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Qe[t]=new ft(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Qe[e]=new ft(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Qe[t]=new ft(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Qe[t]=new ft(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Qe[t]=new ft(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Qe[t]=new ft(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Qe[t]=new ft(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Qe[t]=new ft(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Qe[t]=new ft(t,5,!1,t.toLowerCase(),null,!1,!1)});var Yu=/[\-:]([a-z])/g;function Gu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Yu,Gu);Qe[e]=new ft(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Yu,Gu);Qe[e]=new ft(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Yu,Gu);Qe[e]=new ft(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Qe[t]=new ft(t,1,!1,t.toLowerCase(),null,!1,!1)});Qe.xlinkHref=new ft("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Qe[t]=new ft(t,1,!1,t.toLowerCase(),null,!0,!0)});function $u(t,e,n,i){var c=Qe.hasOwnProperty(e)?Qe[e]:null;(c!==null?c.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Cy(e,n,c,i)&&(n=null),i||c===null?wy(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):c.mustUseProperty?t[c.propertyName]=n===null?c.type===3?!1:"":n:(e=c.attributeName,i=c.attributeNamespace,n===null?t.removeAttribute(e):(c=c.type,n=c===3||c===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var vn=yy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,to=Symbol.for("react.element"),Ri=Symbol.for("react.portal"),Mi=Symbol.for("react.fragment"),Ku=Symbol.for("react.strict_mode"),Fl=Symbol.for("react.profiler"),hp=Symbol.for("react.provider"),fp=Symbol.for("react.context"),qu=Symbol.for("react.forward_ref"),Bl=Symbol.for("react.suspense"),Ul=Symbol.for("react.suspense_list"),Ju=Symbol.for("react.memo"),kn=Symbol.for("react.lazy"),dp=Symbol.for("react.offscreen"),Qh=Symbol.iterator;function Ar(t){return t===null||typeof t!="object"?null:(t=Qh&&t[Qh]||t["@@iterator"],typeof t=="function"?t:null)}var Ne=Object.assign,tl;function Ur(t){if(tl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);tl=e&&e[1]||""}return`
`+tl+t}var nl=!1;function il(t,e){if(!t||nl)return"";nl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var c=f.stack.split(`
`),v=i.stack.split(`
`),w=c.length-1,h=v.length-1;1<=w&&0<=h&&c[w]!==v[h];)h--;for(;1<=w&&0<=h;w--,h--)if(c[w]!==v[h]){if(w!==1||h!==1)do if(w--,h--,0>h||c[w]!==v[h]){var r=`
`+c[w].replace(" at new "," at ");return t.displayName&&r.includes("<anonymous>")&&(r=r.replace("<anonymous>",t.displayName)),r}while(1<=w&&0<=h);break}}}finally{nl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ur(t):""}function Sy(t){switch(t.tag){case 5:return Ur(t.type);case 16:return Ur("Lazy");case 13:return Ur("Suspense");case 19:return Ur("SuspenseList");case 0:case 2:case 15:return t=il(t.type,!1),t;case 11:return t=il(t.type.render,!1),t;case 1:return t=il(t.type,!0),t;default:return""}}function zl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Mi:return"Fragment";case Ri:return"Portal";case Fl:return"Profiler";case Ku:return"StrictMode";case Bl:return"Suspense";case Ul:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case fp:return(t.displayName||"Context")+".Consumer";case hp:return(t._context.displayName||"Context")+".Provider";case qu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ju:return e=t.displayName||null,e!==null?e:zl(t.type)||"Memo";case kn:e=t._payload,t=t._init;try{return zl(t(e))}catch{}}return null}function Ty(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zl(e);case 8:return e===Ku?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function $n(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function pp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ey(t){var e=pp(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var c=n.get,v=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return c.call(this)},set:function(w){i=""+w,v.call(this,w)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(w){i=""+w},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function no(t){t._valueTracker||(t._valueTracker=Ey(t))}function gp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=pp(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Lo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Hl(t,e){var n=e.checked;return Ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Zh(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=$n(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function mp(t,e){e=e.checked,e!=null&&$u(t,"checked",e,!1)}function Wl(t,e){mp(t,e);var n=$n(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Vl(t,e.type,n):e.hasOwnProperty("defaultValue")&&Vl(t,e.type,$n(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ef(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Vl(t,e,n){(e!=="number"||Lo(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var zr=Array.isArray;function Xi(t,e,n,i){if(t=t.options,e){e={};for(var c=0;c<n.length;c++)e["$"+n[c]]=!0;for(n=0;n<t.length;n++)c=e.hasOwnProperty("$"+t[n].value),t[n].selected!==c&&(t[n].selected=c),c&&i&&(t[n].defaultSelected=!0)}else{for(n=""+$n(n),e=null,c=0;c<t.length;c++){if(t[c].value===n){t[c].selected=!0,i&&(t[c].defaultSelected=!0);return}e!==null||t[c].disabled||(e=t[c])}e!==null&&(e.selected=!0)}}function Xl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(se(91));return Ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function tf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(se(92));if(zr(n)){if(1<n.length)throw Error(se(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:$n(n)}}function vp(t,e){var n=$n(e.value),i=$n(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function nf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function yp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?yp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var io,_p=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,c){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,c)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(io=io||document.createElement("div"),io.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=io.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ss(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Yr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ky=["Webkit","ms","Moz","O"];Object.keys(Yr).forEach(function(t){ky.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Yr[e]=Yr[t]})});function wp(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Yr.hasOwnProperty(t)&&Yr[t]?(""+e).trim():e+"px"}function xp(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,c=wp(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,c):t[n]=c}}var by=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gl(t,e){if(e){if(by[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(se(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(se(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(se(61))}if(e.style!=null&&typeof e.style!="object")throw Error(se(62))}}function $l(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kl=null;function Qu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ql=null,Yi=null,Gi=null;function rf(t){if(t=Is(t)){if(typeof ql!="function")throw Error(se(280));var e=t.stateNode;e&&(e=xa(e),ql(t.stateNode,t.type,e))}}function Cp(t){Yi?Gi?Gi.push(t):Gi=[t]:Yi=t}function Sp(){if(Yi){var t=Yi,e=Gi;if(Gi=Yi=null,rf(t),e)for(t=0;t<e.length;t++)rf(e[t])}}function Tp(t,e){return t(e)}function Ep(){}var rl=!1;function kp(t,e,n){if(rl)return t(e,n);rl=!0;try{return Tp(t,e,n)}finally{rl=!1,(Yi!==null||Gi!==null)&&(Ep(),Sp())}}function os(t,e){var n=t.stateNode;if(n===null)return null;var i=xa(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(se(231,e,typeof n));return n}var Jl=!1;if(hn)try{var Dr={};Object.defineProperty(Dr,"passive",{get:function(){Jl=!0}}),window.addEventListener("test",Dr,Dr),window.removeEventListener("test",Dr,Dr)}catch{Jl=!1}function Oy(t,e,n,i,c,v,w,h,r){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(d){this.onError(d)}}var Gr=!1,No=null,Fo=!1,Ql=null,Py={onError:function(t){Gr=!0,No=t}};function Iy(t,e,n,i,c,v,w,h,r){Gr=!1,No=null,Oy.apply(Py,arguments)}function Ay(t,e,n,i,c,v,w,h,r){if(Iy.apply(this,arguments),Gr){if(Gr){var f=No;Gr=!1,No=null}else throw Error(se(198));Fo||(Fo=!0,Ql=f)}}function Ti(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function bp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function sf(t){if(Ti(t)!==t)throw Error(se(188))}function Dy(t){var e=t.alternate;if(!e){if(e=Ti(t),e===null)throw Error(se(188));return e!==t?null:t}for(var n=t,i=e;;){var c=n.return;if(c===null)break;var v=c.alternate;if(v===null){if(i=c.return,i!==null){n=i;continue}break}if(c.child===v.child){for(v=c.child;v;){if(v===n)return sf(c),t;if(v===i)return sf(c),e;v=v.sibling}throw Error(se(188))}if(n.return!==i.return)n=c,i=v;else{for(var w=!1,h=c.child;h;){if(h===n){w=!0,n=c,i=v;break}if(h===i){w=!0,i=c,n=v;break}h=h.sibling}if(!w){for(h=v.child;h;){if(h===n){w=!0,n=v,i=c;break}if(h===i){w=!0,i=v,n=c;break}h=h.sibling}if(!w)throw Error(se(189))}}if(n.alternate!==i)throw Error(se(190))}if(n.tag!==3)throw Error(se(188));return n.stateNode.current===n?t:e}function Op(t){return t=Dy(t),t!==null?Pp(t):null}function Pp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Pp(t);if(e!==null)return e;t=t.sibling}return null}var Ip=St.unstable_scheduleCallback,of=St.unstable_cancelCallback,Ry=St.unstable_shouldYield,My=St.unstable_requestPaint,Ue=St.unstable_now,jy=St.unstable_getCurrentPriorityLevel,Zu=St.unstable_ImmediatePriority,Ap=St.unstable_UserBlockingPriority,Bo=St.unstable_NormalPriority,Ly=St.unstable_LowPriority,Dp=St.unstable_IdlePriority,va=null,Kt=null;function Ny(t){if(Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(va,t,void 0,(t.current.flags&128)===128)}catch{}}var zt=Math.clz32?Math.clz32:Uy,Fy=Math.log,By=Math.LN2;function Uy(t){return t>>>=0,t===0?32:31-(Fy(t)/By|0)|0}var ro=64,so=4194304;function Hr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Uo(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,c=t.suspendedLanes,v=t.pingedLanes,w=n&268435455;if(w!==0){var h=w&~c;h!==0?i=Hr(h):(v&=w,v!==0&&(i=Hr(v)))}else w=n&~c,w!==0?i=Hr(w):v!==0&&(i=Hr(v));if(i===0)return 0;if(e!==0&&e!==i&&!(e&c)&&(c=i&-i,v=e&-e,c>=v||c===16&&(v&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-zt(e),c=1<<n,i|=t[n],e&=~c;return i}function zy(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hy(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,c=t.expirationTimes,v=t.pendingLanes;0<v;){var w=31-zt(v),h=1<<w,r=c[w];r===-1?(!(h&n)||h&i)&&(c[w]=zy(h,e)):r<=e&&(t.expiredLanes|=h),v&=~h}}function Zl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Rp(){var t=ro;return ro<<=1,!(ro&4194240)&&(ro=64),t}function sl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Os(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zt(e),t[e]=n}function Wy(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var c=31-zt(n),v=1<<c;e[c]=0,i[c]=-1,t[c]=-1,n&=~v}}function ec(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-zt(n),c=1<<i;c&e|t[i]&e&&(t[i]|=e),n&=~c}}var be=0;function Mp(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var jp,tc,Lp,Np,Fp,eu=!1,oo=[],Ln=null,Nn=null,Fn=null,as=new Map,ls=new Map,On=[],Vy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function af(t,e){switch(t){case"focusin":case"focusout":Ln=null;break;case"dragenter":case"dragleave":Nn=null;break;case"mouseover":case"mouseout":Fn=null;break;case"pointerover":case"pointerout":as.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ls.delete(e.pointerId)}}function Rr(t,e,n,i,c,v){return t===null||t.nativeEvent!==v?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:v,targetContainers:[c]},e!==null&&(e=Is(e),e!==null&&tc(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,c!==null&&e.indexOf(c)===-1&&e.push(c),t)}function Xy(t,e,n,i,c){switch(e){case"focusin":return Ln=Rr(Ln,t,e,n,i,c),!0;case"dragenter":return Nn=Rr(Nn,t,e,n,i,c),!0;case"mouseover":return Fn=Rr(Fn,t,e,n,i,c),!0;case"pointerover":var v=c.pointerId;return as.set(v,Rr(as.get(v)||null,t,e,n,i,c)),!0;case"gotpointercapture":return v=c.pointerId,ls.set(v,Rr(ls.get(v)||null,t,e,n,i,c)),!0}return!1}function Bp(t){var e=ui(t.target);if(e!==null){var n=Ti(e);if(n!==null){if(e=n.tag,e===13){if(e=bp(n),e!==null){t.blockedOn=e,Fp(t.priority,function(){Lp(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Co(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=tu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Kl=i,n.target.dispatchEvent(i),Kl=null}else return e=Is(n),e!==null&&tc(e),t.blockedOn=n,!1;e.shift()}return!0}function lf(t,e,n){Co(t)&&n.delete(e)}function Yy(){eu=!1,Ln!==null&&Co(Ln)&&(Ln=null),Nn!==null&&Co(Nn)&&(Nn=null),Fn!==null&&Co(Fn)&&(Fn=null),as.forEach(lf),ls.forEach(lf)}function Mr(t,e){t.blockedOn===e&&(t.blockedOn=null,eu||(eu=!0,St.unstable_scheduleCallback(St.unstable_NormalPriority,Yy)))}function us(t){function e(c){return Mr(c,t)}if(0<oo.length){Mr(oo[0],t);for(var n=1;n<oo.length;n++){var i=oo[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Ln!==null&&Mr(Ln,t),Nn!==null&&Mr(Nn,t),Fn!==null&&Mr(Fn,t),as.forEach(e),ls.forEach(e),n=0;n<On.length;n++)i=On[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<On.length&&(n=On[0],n.blockedOn===null);)Bp(n),n.blockedOn===null&&On.shift()}var $i=vn.ReactCurrentBatchConfig,zo=!0;function Gy(t,e,n,i){var c=be,v=$i.transition;$i.transition=null;try{be=1,nc(t,e,n,i)}finally{be=c,$i.transition=v}}function $y(t,e,n,i){var c=be,v=$i.transition;$i.transition=null;try{be=4,nc(t,e,n,i)}finally{be=c,$i.transition=v}}function nc(t,e,n,i){if(zo){var c=tu(t,e,n,i);if(c===null)gl(t,e,i,Ho,n),af(t,i);else if(Xy(c,t,e,n,i))i.stopPropagation();else if(af(t,i),e&4&&-1<Vy.indexOf(t)){for(;c!==null;){var v=Is(c);if(v!==null&&jp(v),v=tu(t,e,n,i),v===null&&gl(t,e,i,Ho,n),v===c)break;c=v}c!==null&&i.stopPropagation()}else gl(t,e,i,null,n)}}var Ho=null;function tu(t,e,n,i){if(Ho=null,t=Qu(i),t=ui(t),t!==null)if(e=Ti(t),e===null)t=null;else if(n=e.tag,n===13){if(t=bp(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ho=t,null}function Up(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jy()){case Zu:return 1;case Ap:return 4;case Bo:case Ly:return 16;case Dp:return 536870912;default:return 16}default:return 16}}var Rn=null,ic=null,So=null;function zp(){if(So)return So;var t,e=ic,n=e.length,i,c="value"in Rn?Rn.value:Rn.textContent,v=c.length;for(t=0;t<n&&e[t]===c[t];t++);var w=n-t;for(i=1;i<=w&&e[n-i]===c[v-i];i++);return So=c.slice(t,1<i?1-i:void 0)}function To(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ao(){return!0}function uf(){return!1}function Et(t){function e(n,i,c,v,w){this._reactName=n,this._targetInst=c,this.type=i,this.nativeEvent=v,this.target=w,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(v):v[h]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?ao:uf,this.isPropagationStopped=uf,this}return Ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ao)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ao)},persist:function(){},isPersistent:ao}),e}var fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rc=Et(fr),Ps=Ne({},fr,{view:0,detail:0}),Ky=Et(Ps),ol,al,jr,ya=Ne({},Ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==jr&&(jr&&t.type==="mousemove"?(ol=t.screenX-jr.screenX,al=t.screenY-jr.screenY):al=ol=0,jr=t),ol)},movementY:function(t){return"movementY"in t?t.movementY:al}}),cf=Et(ya),qy=Ne({},ya,{dataTransfer:0}),Jy=Et(qy),Qy=Ne({},Ps,{relatedTarget:0}),ll=Et(Qy),Zy=Ne({},fr,{animationName:0,elapsedTime:0,pseudoElement:0}),e0=Et(Zy),t0=Ne({},fr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),n0=Et(t0),i0=Ne({},fr,{data:0}),hf=Et(i0),r0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},s0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},o0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function a0(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=o0[t])?!!e[t]:!1}function sc(){return a0}var l0=Ne({},Ps,{key:function(t){if(t.key){var e=r0[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=To(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?s0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sc,charCode:function(t){return t.type==="keypress"?To(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?To(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),u0=Et(l0),c0=Ne({},ya,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ff=Et(c0),h0=Ne({},Ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sc}),f0=Et(h0),d0=Ne({},fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),p0=Et(d0),g0=Ne({},ya,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),m0=Et(g0),v0=[9,13,27,32],oc=hn&&"CompositionEvent"in window,$r=null;hn&&"documentMode"in document&&($r=document.documentMode);var y0=hn&&"TextEvent"in window&&!$r,Hp=hn&&(!oc||$r&&8<$r&&11>=$r),df=" ",pf=!1;function Wp(t,e){switch(t){case"keyup":return v0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ji=!1;function _0(t,e){switch(t){case"compositionend":return Vp(e);case"keypress":return e.which!==32?null:(pf=!0,df);case"textInput":return t=e.data,t===df&&pf?null:t;default:return null}}function w0(t,e){if(ji)return t==="compositionend"||!oc&&Wp(t,e)?(t=zp(),So=ic=Rn=null,ji=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Hp&&e.locale!=="ko"?null:e.data;default:return null}}var x0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!x0[t.type]:e==="textarea"}function Xp(t,e,n,i){Cp(i),e=Wo(e,"onChange"),0<e.length&&(n=new rc("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Kr=null,cs=null;function C0(t){ng(t,0)}function _a(t){var e=Fi(t);if(gp(e))return t}function S0(t,e){if(t==="change")return e}var Yp=!1;if(hn){var ul;if(hn){var cl="oninput"in document;if(!cl){var mf=document.createElement("div");mf.setAttribute("oninput","return;"),cl=typeof mf.oninput=="function"}ul=cl}else ul=!1;Yp=ul&&(!document.documentMode||9<document.documentMode)}function vf(){Kr&&(Kr.detachEvent("onpropertychange",Gp),cs=Kr=null)}function Gp(t){if(t.propertyName==="value"&&_a(cs)){var e=[];Xp(e,cs,t,Qu(t)),kp(C0,e)}}function T0(t,e,n){t==="focusin"?(vf(),Kr=e,cs=n,Kr.attachEvent("onpropertychange",Gp)):t==="focusout"&&vf()}function E0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return _a(cs)}function k0(t,e){if(t==="click")return _a(e)}function b0(t,e){if(t==="input"||t==="change")return _a(e)}function O0(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Vt=typeof Object.is=="function"?Object.is:O0;function hs(t,e){if(Vt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var c=n[i];if(!Nl.call(e,c)||!Vt(t[c],e[c]))return!1}return!0}function yf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _f(t,e){var n=yf(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=yf(n)}}function $p(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?$p(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Kp(){for(var t=window,e=Lo();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Lo(t.document)}return e}function ac(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function P0(t){var e=Kp(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&$p(n.ownerDocument.documentElement,n)){if(i!==null&&ac(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var c=n.textContent.length,v=Math.min(i.start,c);i=i.end===void 0?v:Math.min(i.end,c),!t.extend&&v>i&&(c=i,i=v,v=c),c=_f(n,v);var w=_f(n,i);c&&w&&(t.rangeCount!==1||t.anchorNode!==c.node||t.anchorOffset!==c.offset||t.focusNode!==w.node||t.focusOffset!==w.offset)&&(e=e.createRange(),e.setStart(c.node,c.offset),t.removeAllRanges(),v>i?(t.addRange(e),t.extend(w.node,w.offset)):(e.setEnd(w.node,w.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var I0=hn&&"documentMode"in document&&11>=document.documentMode,Li=null,nu=null,qr=null,iu=!1;function wf(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;iu||Li==null||Li!==Lo(i)||(i=Li,"selectionStart"in i&&ac(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),qr&&hs(qr,i)||(qr=i,i=Wo(nu,"onSelect"),0<i.length&&(e=new rc("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Li)))}function lo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ni={animationend:lo("Animation","AnimationEnd"),animationiteration:lo("Animation","AnimationIteration"),animationstart:lo("Animation","AnimationStart"),transitionend:lo("Transition","TransitionEnd")},hl={},qp={};hn&&(qp=document.createElement("div").style,"AnimationEvent"in window||(delete Ni.animationend.animation,delete Ni.animationiteration.animation,delete Ni.animationstart.animation),"TransitionEvent"in window||delete Ni.transitionend.transition);function wa(t){if(hl[t])return hl[t];if(!Ni[t])return t;var e=Ni[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in qp)return hl[t]=e[n];return t}var Jp=wa("animationend"),Qp=wa("animationiteration"),Zp=wa("animationstart"),eg=wa("transitionend"),tg=new Map,xf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qn(t,e){tg.set(t,e),Si(e,[t])}for(var fl=0;fl<xf.length;fl++){var dl=xf[fl],A0=dl.toLowerCase(),D0=dl[0].toUpperCase()+dl.slice(1);qn(A0,"on"+D0)}qn(Jp,"onAnimationEnd");qn(Qp,"onAnimationIteration");qn(Zp,"onAnimationStart");qn("dblclick","onDoubleClick");qn("focusin","onFocus");qn("focusout","onBlur");qn(eg,"onTransitionEnd");tr("onMouseEnter",["mouseout","mouseover"]);tr("onMouseLeave",["mouseout","mouseover"]);tr("onPointerEnter",["pointerout","pointerover"]);tr("onPointerLeave",["pointerout","pointerover"]);Si("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Si("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Si("onBeforeInput",["compositionend","keypress","textInput","paste"]);Si("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Si("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Si("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),R0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wr));function Cf(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,Ay(i,e,void 0,t),t.currentTarget=null}function ng(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],c=i.event;i=i.listeners;e:{var v=void 0;if(e)for(var w=i.length-1;0<=w;w--){var h=i[w],r=h.instance,f=h.currentTarget;if(h=h.listener,r!==v&&c.isPropagationStopped())break e;Cf(c,h,f),v=r}else for(w=0;w<i.length;w++){if(h=i[w],r=h.instance,f=h.currentTarget,h=h.listener,r!==v&&c.isPropagationStopped())break e;Cf(c,h,f),v=r}}}if(Fo)throw t=Ql,Fo=!1,Ql=null,t}function Ae(t,e){var n=e[lu];n===void 0&&(n=e[lu]=new Set);var i=t+"__bubble";n.has(i)||(ig(e,t,2,!1),n.add(i))}function pl(t,e,n){var i=0;e&&(i|=4),ig(n,t,i,e)}var uo="_reactListening"+Math.random().toString(36).slice(2);function fs(t){if(!t[uo]){t[uo]=!0,cp.forEach(function(n){n!=="selectionchange"&&(R0.has(n)||pl(n,!1,t),pl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[uo]||(e[uo]=!0,pl("selectionchange",!1,e))}}function ig(t,e,n,i){switch(Up(e)){case 1:var c=Gy;break;case 4:c=$y;break;default:c=nc}n=c.bind(null,e,n,t),c=void 0,!Jl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(c=!0),i?c!==void 0?t.addEventListener(e,n,{capture:!0,passive:c}):t.addEventListener(e,n,!0):c!==void 0?t.addEventListener(e,n,{passive:c}):t.addEventListener(e,n,!1)}function gl(t,e,n,i,c){var v=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var w=i.tag;if(w===3||w===4){var h=i.stateNode.containerInfo;if(h===c||h.nodeType===8&&h.parentNode===c)break;if(w===4)for(w=i.return;w!==null;){var r=w.tag;if((r===3||r===4)&&(r=w.stateNode.containerInfo,r===c||r.nodeType===8&&r.parentNode===c))return;w=w.return}for(;h!==null;){if(w=ui(h),w===null)return;if(r=w.tag,r===5||r===6){i=v=w;continue e}h=h.parentNode}}i=i.return}kp(function(){var f=v,d=Qu(n),o=[];e:{var a=tg.get(t);if(a!==void 0){var s=rc,u=t;switch(t){case"keypress":if(To(n)===0)break e;case"keydown":case"keyup":s=u0;break;case"focusin":u="focus",s=ll;break;case"focusout":u="blur",s=ll;break;case"beforeblur":case"afterblur":s=ll;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=cf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=Jy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=f0;break;case Jp:case Qp:case Zp:s=e0;break;case eg:s=p0;break;case"scroll":s=Ky;break;case"wheel":s=m0;break;case"copy":case"cut":case"paste":s=n0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=ff}var p=(e&4)!==0,l=!p&&t==="scroll",g=p?a!==null?a+"Capture":null:a;p=[];for(var y=f,_;y!==null;){_=y;var x=_.stateNode;if(_.tag===5&&x!==null&&(_=x,g!==null&&(x=os(y,g),x!=null&&p.push(ds(y,x,_)))),l)break;y=y.return}0<p.length&&(a=new s(a,u,null,n,d),o.push({event:a,listeners:p}))}}if(!(e&7)){e:{if(a=t==="mouseover"||t==="pointerover",s=t==="mouseout"||t==="pointerout",a&&n!==Kl&&(u=n.relatedTarget||n.fromElement)&&(ui(u)||u[fn]))break e;if((s||a)&&(a=d.window===d?d:(a=d.ownerDocument)?a.defaultView||a.parentWindow:window,s?(u=n.relatedTarget||n.toElement,s=f,u=u?ui(u):null,u!==null&&(l=Ti(u),u!==l||u.tag!==5&&u.tag!==6)&&(u=null)):(s=null,u=f),s!==u)){if(p=cf,x="onMouseLeave",g="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(p=ff,x="onPointerLeave",g="onPointerEnter",y="pointer"),l=s==null?a:Fi(s),_=u==null?a:Fi(u),a=new p(x,y+"leave",s,n,d),a.target=l,a.relatedTarget=_,x=null,ui(d)===f&&(p=new p(g,y+"enter",u,n,d),p.target=_,p.relatedTarget=l,x=p),l=x,s&&u)t:{for(p=s,g=u,y=0,_=p;_;_=Di(_))y++;for(_=0,x=g;x;x=Di(x))_++;for(;0<y-_;)p=Di(p),y--;for(;0<_-y;)g=Di(g),_--;for(;y--;){if(p===g||g!==null&&p===g.alternate)break t;p=Di(p),g=Di(g)}p=null}else p=null;s!==null&&Sf(o,a,s,p,!1),u!==null&&l!==null&&Sf(o,l,u,p,!0)}}e:{if(a=f?Fi(f):window,s=a.nodeName&&a.nodeName.toLowerCase(),s==="select"||s==="input"&&a.type==="file")var S=S0;else if(gf(a))if(Yp)S=b0;else{S=E0;var b=T0}else(s=a.nodeName)&&s.toLowerCase()==="input"&&(a.type==="checkbox"||a.type==="radio")&&(S=k0);if(S&&(S=S(t,f))){Xp(o,S,n,d);break e}b&&b(t,a,f),t==="focusout"&&(b=a._wrapperState)&&b.controlled&&a.type==="number"&&Vl(a,"number",a.value)}switch(b=f?Fi(f):window,t){case"focusin":(gf(b)||b.contentEditable==="true")&&(Li=b,nu=f,qr=null);break;case"focusout":qr=nu=Li=null;break;case"mousedown":iu=!0;break;case"contextmenu":case"mouseup":case"dragend":iu=!1,wf(o,n,d);break;case"selectionchange":if(I0)break;case"keydown":case"keyup":wf(o,n,d)}var E;if(oc)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else ji?Wp(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(Hp&&n.locale!=="ko"&&(ji||T!=="onCompositionStart"?T==="onCompositionEnd"&&ji&&(E=zp()):(Rn=d,ic="value"in Rn?Rn.value:Rn.textContent,ji=!0)),b=Wo(f,T),0<b.length&&(T=new hf(T,t,null,n,d),o.push({event:T,listeners:b}),E?T.data=E:(E=Vp(n),E!==null&&(T.data=E)))),(E=y0?_0(t,n):w0(t,n))&&(f=Wo(f,"onBeforeInput"),0<f.length&&(d=new hf("onBeforeInput","beforeinput",null,n,d),o.push({event:d,listeners:f}),d.data=E))}ng(o,e)})}function ds(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Wo(t,e){for(var n=e+"Capture",i=[];t!==null;){var c=t,v=c.stateNode;c.tag===5&&v!==null&&(c=v,v=os(t,n),v!=null&&i.unshift(ds(t,v,c)),v=os(t,e),v!=null&&i.push(ds(t,v,c))),t=t.return}return i}function Di(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Sf(t,e,n,i,c){for(var v=e._reactName,w=[];n!==null&&n!==i;){var h=n,r=h.alternate,f=h.stateNode;if(r!==null&&r===i)break;h.tag===5&&f!==null&&(h=f,c?(r=os(n,v),r!=null&&w.unshift(ds(n,r,h))):c||(r=os(n,v),r!=null&&w.push(ds(n,r,h)))),n=n.return}w.length!==0&&t.push({event:e,listeners:w})}var M0=/\r\n?/g,j0=/\u0000|\uFFFD/g;function Tf(t){return(typeof t=="string"?t:""+t).replace(M0,`
`).replace(j0,"")}function co(t,e,n){if(e=Tf(e),Tf(t)!==e&&n)throw Error(se(425))}function Vo(){}var ru=null,su=null;function ou(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var au=typeof setTimeout=="function"?setTimeout:void 0,L0=typeof clearTimeout=="function"?clearTimeout:void 0,Ef=typeof Promise=="function"?Promise:void 0,N0=typeof queueMicrotask=="function"?queueMicrotask:typeof Ef<"u"?function(t){return Ef.resolve(null).then(t).catch(F0)}:au;function F0(t){setTimeout(function(){throw t})}function ml(t,e){var n=e,i=0;do{var c=n.nextSibling;if(t.removeChild(n),c&&c.nodeType===8)if(n=c.data,n==="/$"){if(i===0){t.removeChild(c),us(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=c}while(n);us(e)}function Bn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function kf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var dr=Math.random().toString(36).slice(2),$t="__reactFiber$"+dr,ps="__reactProps$"+dr,fn="__reactContainer$"+dr,lu="__reactEvents$"+dr,B0="__reactListeners$"+dr,U0="__reactHandles$"+dr;function ui(t){var e=t[$t];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fn]||n[$t]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=kf(t);t!==null;){if(n=t[$t])return n;t=kf(t)}return e}t=n,n=t.parentNode}return null}function Is(t){return t=t[$t]||t[fn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Fi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(se(33))}function xa(t){return t[ps]||null}var uu=[],Bi=-1;function Jn(t){return{current:t}}function De(t){0>Bi||(t.current=uu[Bi],uu[Bi]=null,Bi--)}function Pe(t,e){Bi++,uu[Bi]=t.current,t.current=e}var Kn={},st=Jn(Kn),vt=Jn(!1),gi=Kn;function nr(t,e){var n=t.type.contextTypes;if(!n)return Kn;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var c={},v;for(v in n)c[v]=e[v];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=c),c}function yt(t){return t=t.childContextTypes,t!=null}function Xo(){De(vt),De(st)}function bf(t,e,n){if(st.current!==Kn)throw Error(se(168));Pe(st,e),Pe(vt,n)}function rg(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var c in i)if(!(c in e))throw Error(se(108,Ty(t)||"Unknown",c));return Ne({},n,i)}function Yo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Kn,gi=st.current,Pe(st,t),Pe(vt,vt.current),!0}function Of(t,e,n){var i=t.stateNode;if(!i)throw Error(se(169));n?(t=rg(t,e,gi),i.__reactInternalMemoizedMergedChildContext=t,De(vt),De(st),Pe(st,t)):De(vt),Pe(vt,n)}var tn=null,Ca=!1,vl=!1;function sg(t){tn===null?tn=[t]:tn.push(t)}function z0(t){Ca=!0,sg(t)}function Qn(){if(!vl&&tn!==null){vl=!0;var t=0,e=be;try{var n=tn;for(be=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}tn=null,Ca=!1}catch(c){throw tn!==null&&(tn=tn.slice(t+1)),Ip(Zu,Qn),c}finally{be=e,vl=!1}}return null}var Ui=[],zi=0,Go=null,$o=0,bt=[],Ot=0,mi=null,rn=1,sn="";function oi(t,e){Ui[zi++]=$o,Ui[zi++]=Go,Go=t,$o=e}function og(t,e,n){bt[Ot++]=rn,bt[Ot++]=sn,bt[Ot++]=mi,mi=t;var i=rn;t=sn;var c=32-zt(i)-1;i&=~(1<<c),n+=1;var v=32-zt(e)+c;if(30<v){var w=c-c%5;v=(i&(1<<w)-1).toString(32),i>>=w,c-=w,rn=1<<32-zt(e)+c|n<<c|i,sn=v+t}else rn=1<<v|n<<c|i,sn=t}function lc(t){t.return!==null&&(oi(t,1),og(t,1,0))}function uc(t){for(;t===Go;)Go=Ui[--zi],Ui[zi]=null,$o=Ui[--zi],Ui[zi]=null;for(;t===mi;)mi=bt[--Ot],bt[Ot]=null,sn=bt[--Ot],bt[Ot]=null,rn=bt[--Ot],bt[Ot]=null}var Ct=null,xt=null,Re=!1,Ft=null;function ag(t,e){var n=Pt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Pf(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ct=t,xt=Bn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ct=t,xt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=mi!==null?{id:rn,overflow:sn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ct=t,xt=null,!0):!1;default:return!1}}function cu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function hu(t){if(Re){var e=xt;if(e){var n=e;if(!Pf(t,e)){if(cu(t))throw Error(se(418));e=Bn(n.nextSibling);var i=Ct;e&&Pf(t,e)?ag(i,n):(t.flags=t.flags&-4097|2,Re=!1,Ct=t)}}else{if(cu(t))throw Error(se(418));t.flags=t.flags&-4097|2,Re=!1,Ct=t}}}function If(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ct=t}function ho(t){if(t!==Ct)return!1;if(!Re)return If(t),Re=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ou(t.type,t.memoizedProps)),e&&(e=xt)){if(cu(t))throw lg(),Error(se(418));for(;e;)ag(t,e),e=Bn(e.nextSibling)}if(If(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(se(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){xt=Bn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}xt=null}}else xt=Ct?Bn(t.stateNode.nextSibling):null;return!0}function lg(){for(var t=xt;t;)t=Bn(t.nextSibling)}function ir(){xt=Ct=null,Re=!1}function cc(t){Ft===null?Ft=[t]:Ft.push(t)}var H0=vn.ReactCurrentBatchConfig;function Lr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(se(309));var i=n.stateNode}if(!i)throw Error(se(147,t));var c=i,v=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===v?e.ref:(e=function(w){var h=c.refs;w===null?delete h[v]:h[v]=w},e._stringRef=v,e)}if(typeof t!="string")throw Error(se(284));if(!n._owner)throw Error(se(290,t))}return t}function fo(t,e){throw t=Object.prototype.toString.call(e),Error(se(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Af(t){var e=t._init;return e(t._payload)}function ug(t){function e(g,y){if(t){var _=g.deletions;_===null?(g.deletions=[y],g.flags|=16):_.push(y)}}function n(g,y){if(!t)return null;for(;y!==null;)e(g,y),y=y.sibling;return null}function i(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function c(g,y){return g=Wn(g,y),g.index=0,g.sibling=null,g}function v(g,y,_){return g.index=_,t?(_=g.alternate,_!==null?(_=_.index,_<y?(g.flags|=2,y):_):(g.flags|=2,y)):(g.flags|=1048576,y)}function w(g){return t&&g.alternate===null&&(g.flags|=2),g}function h(g,y,_,x){return y===null||y.tag!==6?(y=Tl(_,g.mode,x),y.return=g,y):(y=c(y,_),y.return=g,y)}function r(g,y,_,x){var S=_.type;return S===Mi?d(g,y,_.props.children,x,_.key):y!==null&&(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===kn&&Af(S)===y.type)?(x=c(y,_.props),x.ref=Lr(g,y,_),x.return=g,x):(x=Ao(_.type,_.key,_.props,null,g.mode,x),x.ref=Lr(g,y,_),x.return=g,x)}function f(g,y,_,x){return y===null||y.tag!==4||y.stateNode.containerInfo!==_.containerInfo||y.stateNode.implementation!==_.implementation?(y=El(_,g.mode,x),y.return=g,y):(y=c(y,_.children||[]),y.return=g,y)}function d(g,y,_,x,S){return y===null||y.tag!==7?(y=pi(_,g.mode,x,S),y.return=g,y):(y=c(y,_),y.return=g,y)}function o(g,y,_){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Tl(""+y,g.mode,_),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case to:return _=Ao(y.type,y.key,y.props,null,g.mode,_),_.ref=Lr(g,null,y),_.return=g,_;case Ri:return y=El(y,g.mode,_),y.return=g,y;case kn:var x=y._init;return o(g,x(y._payload),_)}if(zr(y)||Ar(y))return y=pi(y,g.mode,_,null),y.return=g,y;fo(g,y)}return null}function a(g,y,_,x){var S=y!==null?y.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return S!==null?null:h(g,y,""+_,x);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case to:return _.key===S?r(g,y,_,x):null;case Ri:return _.key===S?f(g,y,_,x):null;case kn:return S=_._init,a(g,y,S(_._payload),x)}if(zr(_)||Ar(_))return S!==null?null:d(g,y,_,x,null);fo(g,_)}return null}function s(g,y,_,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return g=g.get(_)||null,h(y,g,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case to:return g=g.get(x.key===null?_:x.key)||null,r(y,g,x,S);case Ri:return g=g.get(x.key===null?_:x.key)||null,f(y,g,x,S);case kn:var b=x._init;return s(g,y,_,b(x._payload),S)}if(zr(x)||Ar(x))return g=g.get(_)||null,d(y,g,x,S,null);fo(y,x)}return null}function u(g,y,_,x){for(var S=null,b=null,E=y,T=y=0,O=null;E!==null&&T<_.length;T++){E.index>T?(O=E,E=null):O=E.sibling;var A=a(g,E,_[T],x);if(A===null){E===null&&(E=O);break}t&&E&&A.alternate===null&&e(g,E),y=v(A,y,T),b===null?S=A:b.sibling=A,b=A,E=O}if(T===_.length)return n(g,E),Re&&oi(g,T),S;if(E===null){for(;T<_.length;T++)E=o(g,_[T],x),E!==null&&(y=v(E,y,T),b===null?S=E:b.sibling=E,b=E);return Re&&oi(g,T),S}for(E=i(g,E);T<_.length;T++)O=s(E,g,T,_[T],x),O!==null&&(t&&O.alternate!==null&&E.delete(O.key===null?T:O.key),y=v(O,y,T),b===null?S=O:b.sibling=O,b=O);return t&&E.forEach(function(j){return e(g,j)}),Re&&oi(g,T),S}function p(g,y,_,x){var S=Ar(_);if(typeof S!="function")throw Error(se(150));if(_=S.call(_),_==null)throw Error(se(151));for(var b=S=null,E=y,T=y=0,O=null,A=_.next();E!==null&&!A.done;T++,A=_.next()){E.index>T?(O=E,E=null):O=E.sibling;var j=a(g,E,A.value,x);if(j===null){E===null&&(E=O);break}t&&E&&j.alternate===null&&e(g,E),y=v(j,y,T),b===null?S=j:b.sibling=j,b=j,E=O}if(A.done)return n(g,E),Re&&oi(g,T),S;if(E===null){for(;!A.done;T++,A=_.next())A=o(g,A.value,x),A!==null&&(y=v(A,y,T),b===null?S=A:b.sibling=A,b=A);return Re&&oi(g,T),S}for(E=i(g,E);!A.done;T++,A=_.next())A=s(E,g,T,A.value,x),A!==null&&(t&&A.alternate!==null&&E.delete(A.key===null?T:A.key),y=v(A,y,T),b===null?S=A:b.sibling=A,b=A);return t&&E.forEach(function(U){return e(g,U)}),Re&&oi(g,T),S}function l(g,y,_,x){if(typeof _=="object"&&_!==null&&_.type===Mi&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case to:e:{for(var S=_.key,b=y;b!==null;){if(b.key===S){if(S=_.type,S===Mi){if(b.tag===7){n(g,b.sibling),y=c(b,_.props.children),y.return=g,g=y;break e}}else if(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===kn&&Af(S)===b.type){n(g,b.sibling),y=c(b,_.props),y.ref=Lr(g,b,_),y.return=g,g=y;break e}n(g,b);break}else e(g,b);b=b.sibling}_.type===Mi?(y=pi(_.props.children,g.mode,x,_.key),y.return=g,g=y):(x=Ao(_.type,_.key,_.props,null,g.mode,x),x.ref=Lr(g,y,_),x.return=g,g=x)}return w(g);case Ri:e:{for(b=_.key;y!==null;){if(y.key===b)if(y.tag===4&&y.stateNode.containerInfo===_.containerInfo&&y.stateNode.implementation===_.implementation){n(g,y.sibling),y=c(y,_.children||[]),y.return=g,g=y;break e}else{n(g,y);break}else e(g,y);y=y.sibling}y=El(_,g.mode,x),y.return=g,g=y}return w(g);case kn:return b=_._init,l(g,y,b(_._payload),x)}if(zr(_))return u(g,y,_,x);if(Ar(_))return p(g,y,_,x);fo(g,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,y!==null&&y.tag===6?(n(g,y.sibling),y=c(y,_),y.return=g,g=y):(n(g,y),y=Tl(_,g.mode,x),y.return=g,g=y),w(g)):n(g,y)}return l}var rr=ug(!0),cg=ug(!1),Ko=Jn(null),qo=null,Hi=null,hc=null;function fc(){hc=Hi=qo=null}function dc(t){var e=Ko.current;De(Ko),t._currentValue=e}function fu(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Ki(t,e){qo=t,hc=Hi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(mt=!0),t.firstContext=null)}function At(t){var e=t._currentValue;if(hc!==t)if(t={context:t,memoizedValue:e,next:null},Hi===null){if(qo===null)throw Error(se(308));Hi=t,qo.dependencies={lanes:0,firstContext:t}}else Hi=Hi.next=t;return e}var ci=null;function pc(t){ci===null?ci=[t]:ci.push(t)}function hg(t,e,n,i){var c=e.interleaved;return c===null?(n.next=n,pc(e)):(n.next=c.next,c.next=n),e.interleaved=n,dn(t,i)}function dn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var bn=!1;function gc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function un(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Un(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Te&2){var c=i.pending;return c===null?e.next=e:(e.next=c.next,c.next=e),i.pending=e,dn(t,n)}return c=i.interleaved,c===null?(e.next=e,pc(i)):(e.next=c.next,c.next=e),i.interleaved=e,dn(t,n)}function Eo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,ec(t,n)}}function Df(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var c=null,v=null;if(n=n.firstBaseUpdate,n!==null){do{var w={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};v===null?c=v=w:v=v.next=w,n=n.next}while(n!==null);v===null?c=v=e:v=v.next=e}else c=v=e;n={baseState:i.baseState,firstBaseUpdate:c,lastBaseUpdate:v,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Jo(t,e,n,i){var c=t.updateQueue;bn=!1;var v=c.firstBaseUpdate,w=c.lastBaseUpdate,h=c.shared.pending;if(h!==null){c.shared.pending=null;var r=h,f=r.next;r.next=null,w===null?v=f:w.next=f,w=r;var d=t.alternate;d!==null&&(d=d.updateQueue,h=d.lastBaseUpdate,h!==w&&(h===null?d.firstBaseUpdate=f:h.next=f,d.lastBaseUpdate=r))}if(v!==null){var o=c.baseState;w=0,d=f=r=null,h=v;do{var a=h.lane,s=h.eventTime;if((i&a)===a){d!==null&&(d=d.next={eventTime:s,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var u=t,p=h;switch(a=e,s=n,p.tag){case 1:if(u=p.payload,typeof u=="function"){o=u.call(s,o,a);break e}o=u;break e;case 3:u.flags=u.flags&-65537|128;case 0:if(u=p.payload,a=typeof u=="function"?u.call(s,o,a):u,a==null)break e;o=Ne({},o,a);break e;case 2:bn=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,a=c.effects,a===null?c.effects=[h]:a.push(h))}else s={eventTime:s,lane:a,tag:h.tag,payload:h.payload,callback:h.callback,next:null},d===null?(f=d=s,r=o):d=d.next=s,w|=a;if(h=h.next,h===null){if(h=c.shared.pending,h===null)break;a=h,h=a.next,a.next=null,c.lastBaseUpdate=a,c.shared.pending=null}}while(!0);if(d===null&&(r=o),c.baseState=r,c.firstBaseUpdate=f,c.lastBaseUpdate=d,e=c.shared.interleaved,e!==null){c=e;do w|=c.lane,c=c.next;while(c!==e)}else v===null&&(c.shared.lanes=0);yi|=w,t.lanes=w,t.memoizedState=o}}function Rf(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],c=i.callback;if(c!==null){if(i.callback=null,i=n,typeof c!="function")throw Error(se(191,c));c.call(i)}}}var As={},qt=Jn(As),gs=Jn(As),ms=Jn(As);function hi(t){if(t===As)throw Error(se(174));return t}function mc(t,e){switch(Pe(ms,e),Pe(gs,t),Pe(qt,As),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Yl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Yl(e,t)}De(qt),Pe(qt,e)}function sr(){De(qt),De(gs),De(ms)}function dg(t){hi(ms.current);var e=hi(qt.current),n=Yl(e,t.type);e!==n&&(Pe(gs,t),Pe(qt,n))}function vc(t){gs.current===t&&(De(qt),De(gs))}var je=Jn(0);function Qo(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var yl=[];function yc(){for(var t=0;t<yl.length;t++)yl[t]._workInProgressVersionPrimary=null;yl.length=0}var ko=vn.ReactCurrentDispatcher,_l=vn.ReactCurrentBatchConfig,vi=0,Le=null,Ve=null,Ge=null,Zo=!1,Jr=!1,vs=0,W0=0;function nt(){throw Error(se(321))}function _c(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Vt(t[n],e[n]))return!1;return!0}function wc(t,e,n,i,c,v){if(vi=v,Le=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ko.current=t===null||t.memoizedState===null?G0:$0,t=n(i,c),Jr){v=0;do{if(Jr=!1,vs=0,25<=v)throw Error(se(301));v+=1,Ge=Ve=null,e.updateQueue=null,ko.current=K0,t=n(i,c)}while(Jr)}if(ko.current=ea,e=Ve!==null&&Ve.next!==null,vi=0,Ge=Ve=Le=null,Zo=!1,e)throw Error(se(300));return t}function xc(){var t=vs!==0;return vs=0,t}function Gt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Le.memoizedState=Ge=t:Ge=Ge.next=t,Ge}function Dt(){if(Ve===null){var t=Le.alternate;t=t!==null?t.memoizedState:null}else t=Ve.next;var e=Ge===null?Le.memoizedState:Ge.next;if(e!==null)Ge=e,Ve=t;else{if(t===null)throw Error(se(310));Ve=t,t={memoizedState:Ve.memoizedState,baseState:Ve.baseState,baseQueue:Ve.baseQueue,queue:Ve.queue,next:null},Ge===null?Le.memoizedState=Ge=t:Ge=Ge.next=t}return Ge}function ys(t,e){return typeof e=="function"?e(t):e}function wl(t){var e=Dt(),n=e.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=t;var i=Ve,c=i.baseQueue,v=n.pending;if(v!==null){if(c!==null){var w=c.next;c.next=v.next,v.next=w}i.baseQueue=c=v,n.pending=null}if(c!==null){v=c.next,i=i.baseState;var h=w=null,r=null,f=v;do{var d=f.lane;if((vi&d)===d)r!==null&&(r=r.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var o={lane:d,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};r===null?(h=r=o,w=i):r=r.next=o,Le.lanes|=d,yi|=d}f=f.next}while(f!==null&&f!==v);r===null?w=i:r.next=h,Vt(i,e.memoizedState)||(mt=!0),e.memoizedState=i,e.baseState=w,e.baseQueue=r,n.lastRenderedState=i}if(t=n.interleaved,t!==null){c=t;do v=c.lane,Le.lanes|=v,yi|=v,c=c.next;while(c!==t)}else c===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function xl(t){var e=Dt(),n=e.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=t;var i=n.dispatch,c=n.pending,v=e.memoizedState;if(c!==null){n.pending=null;var w=c=c.next;do v=t(v,w.action),w=w.next;while(w!==c);Vt(v,e.memoizedState)||(mt=!0),e.memoizedState=v,e.baseQueue===null&&(e.baseState=v),n.lastRenderedState=v}return[v,i]}function pg(){}function gg(t,e){var n=Le,i=Dt(),c=e(),v=!Vt(i.memoizedState,c);if(v&&(i.memoizedState=c,mt=!0),i=i.queue,Cc(yg.bind(null,n,i,t),[t]),i.getSnapshot!==e||v||Ge!==null&&Ge.memoizedState.tag&1){if(n.flags|=2048,_s(9,vg.bind(null,n,i,c,e),void 0,null),$e===null)throw Error(se(349));vi&30||mg(n,e,c)}return c}function mg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Le.updateQueue,e===null?(e={lastEffect:null,stores:null},Le.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function vg(t,e,n,i){e.value=n,e.getSnapshot=i,_g(e)&&wg(t)}function yg(t,e,n){return n(function(){_g(e)&&wg(t)})}function _g(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Vt(t,n)}catch{return!0}}function wg(t){var e=dn(t,1);e!==null&&Ht(e,t,1,-1)}function Mf(t){var e=Gt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:t},e.queue=t,t=t.dispatch=Y0.bind(null,Le,t),[e.memoizedState,t]}function _s(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Le.updateQueue,e===null?(e={lastEffect:null,stores:null},Le.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function xg(){return Dt().memoizedState}function bo(t,e,n,i){var c=Gt();Le.flags|=t,c.memoizedState=_s(1|e,n,void 0,i===void 0?null:i)}function Sa(t,e,n,i){var c=Dt();i=i===void 0?null:i;var v=void 0;if(Ve!==null){var w=Ve.memoizedState;if(v=w.destroy,i!==null&&_c(i,w.deps)){c.memoizedState=_s(e,n,v,i);return}}Le.flags|=t,c.memoizedState=_s(1|e,n,v,i)}function jf(t,e){return bo(8390656,8,t,e)}function Cc(t,e){return Sa(2048,8,t,e)}function Cg(t,e){return Sa(4,2,t,e)}function Sg(t,e){return Sa(4,4,t,e)}function Tg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Eg(t,e,n){return n=n!=null?n.concat([t]):null,Sa(4,4,Tg.bind(null,e,t),n)}function Sc(){}function kg(t,e){var n=Dt();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&_c(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function bg(t,e){var n=Dt();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&_c(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Og(t,e,n){return vi&21?(Vt(n,e)||(n=Rp(),Le.lanes|=n,yi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,mt=!0),t.memoizedState=n)}function V0(t,e){var n=be;be=n!==0&&4>n?n:4,t(!0);var i=_l.transition;_l.transition={};try{t(!1),e()}finally{be=n,_l.transition=i}}function Pg(){return Dt().memoizedState}function X0(t,e,n){var i=Hn(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Ig(t))Ag(e,n);else if(n=hg(t,e,n,i),n!==null){var c=ut();Ht(n,t,i,c),Dg(n,e,i)}}function Y0(t,e,n){var i=Hn(t),c={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ig(t))Ag(e,c);else{var v=t.alternate;if(t.lanes===0&&(v===null||v.lanes===0)&&(v=e.lastRenderedReducer,v!==null))try{var w=e.lastRenderedState,h=v(w,n);if(c.hasEagerState=!0,c.eagerState=h,Vt(h,w)){var r=e.interleaved;r===null?(c.next=c,pc(e)):(c.next=r.next,r.next=c),e.interleaved=c;return}}catch{}finally{}n=hg(t,e,c,i),n!==null&&(c=ut(),Ht(n,t,i,c),Dg(n,e,i))}}function Ig(t){var e=t.alternate;return t===Le||e!==null&&e===Le}function Ag(t,e){Jr=Zo=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Dg(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,ec(t,n)}}var ea={readContext:At,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useInsertionEffect:nt,useLayoutEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useMutableSource:nt,useSyncExternalStore:nt,useId:nt,unstable_isNewReconciler:!1},G0={readContext:At,useCallback:function(t,e){return Gt().memoizedState=[t,e===void 0?null:e],t},useContext:At,useEffect:jf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,bo(4194308,4,Tg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return bo(4194308,4,t,e)},useInsertionEffect:function(t,e){return bo(4,2,t,e)},useMemo:function(t,e){var n=Gt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Gt();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=X0.bind(null,Le,t),[i.memoizedState,t]},useRef:function(t){var e=Gt();return t={current:t},e.memoizedState=t},useState:Mf,useDebugValue:Sc,useDeferredValue:function(t){return Gt().memoizedState=t},useTransition:function(){var t=Mf(!1),e=t[0];return t=V0.bind(null,t[1]),Gt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Le,c=Gt();if(Re){if(n===void 0)throw Error(se(407));n=n()}else{if(n=e(),$e===null)throw Error(se(349));vi&30||mg(i,e,n)}c.memoizedState=n;var v={value:n,getSnapshot:e};return c.queue=v,jf(yg.bind(null,i,v,t),[t]),i.flags|=2048,_s(9,vg.bind(null,i,v,n,e),void 0,null),n},useId:function(){var t=Gt(),e=$e.identifierPrefix;if(Re){var n=sn,i=rn;n=(i&~(1<<32-zt(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=vs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=W0++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},$0={readContext:At,useCallback:kg,useContext:At,useEffect:Cc,useImperativeHandle:Eg,useInsertionEffect:Cg,useLayoutEffect:Sg,useMemo:bg,useReducer:wl,useRef:xg,useState:function(){return wl(ys)},useDebugValue:Sc,useDeferredValue:function(t){var e=Dt();return Og(e,Ve.memoizedState,t)},useTransition:function(){var t=wl(ys)[0],e=Dt().memoizedState;return[t,e]},useMutableSource:pg,useSyncExternalStore:gg,useId:Pg,unstable_isNewReconciler:!1},K0={readContext:At,useCallback:kg,useContext:At,useEffect:Cc,useImperativeHandle:Eg,useInsertionEffect:Cg,useLayoutEffect:Sg,useMemo:bg,useReducer:xl,useRef:xg,useState:function(){return xl(ys)},useDebugValue:Sc,useDeferredValue:function(t){var e=Dt();return Ve===null?e.memoizedState=t:Og(e,Ve.memoizedState,t)},useTransition:function(){var t=xl(ys)[0],e=Dt().memoizedState;return[t,e]},useMutableSource:pg,useSyncExternalStore:gg,useId:Pg,unstable_isNewReconciler:!1};function Lt(t,e){if(t&&t.defaultProps){e=Ne({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function du(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ne({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ta={isMounted:function(t){return(t=t._reactInternals)?Ti(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=ut(),c=Hn(t),v=un(i,c);v.payload=e,n!=null&&(v.callback=n),e=Un(t,v,c),e!==null&&(Ht(e,t,c,i),Eo(e,t,c))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=ut(),c=Hn(t),v=un(i,c);v.tag=1,v.payload=e,n!=null&&(v.callback=n),e=Un(t,v,c),e!==null&&(Ht(e,t,c,i),Eo(e,t,c))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ut(),i=Hn(t),c=un(n,i);c.tag=2,e!=null&&(c.callback=e),e=Un(t,c,i),e!==null&&(Ht(e,t,i,n),Eo(e,t,i))}};function Lf(t,e,n,i,c,v,w){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,v,w):e.prototype&&e.prototype.isPureReactComponent?!hs(n,i)||!hs(c,v):!0}function Rg(t,e,n){var i=!1,c=Kn,v=e.contextType;return typeof v=="object"&&v!==null?v=At(v):(c=yt(e)?gi:st.current,i=e.contextTypes,v=(i=i!=null)?nr(t,c):Kn),e=new e(n,v),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ta,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=c,t.__reactInternalMemoizedMaskedChildContext=v),e}function Nf(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Ta.enqueueReplaceState(e,e.state,null)}function pu(t,e,n,i){var c=t.stateNode;c.props=n,c.state=t.memoizedState,c.refs={},gc(t);var v=e.contextType;typeof v=="object"&&v!==null?c.context=At(v):(v=yt(e)?gi:st.current,c.context=nr(t,v)),c.state=t.memoizedState,v=e.getDerivedStateFromProps,typeof v=="function"&&(du(t,e,v,n),c.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(e=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),e!==c.state&&Ta.enqueueReplaceState(c,c.state,null),Jo(t,n,c,i),c.state=t.memoizedState),typeof c.componentDidMount=="function"&&(t.flags|=4194308)}function or(t,e){try{var n="",i=e;do n+=Sy(i),i=i.return;while(i);var c=n}catch(v){c=`
Error generating stack: `+v.message+`
`+v.stack}return{value:t,source:e,stack:c,digest:null}}function Cl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function gu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var q0=typeof WeakMap=="function"?WeakMap:Map;function Mg(t,e,n){n=un(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){na||(na=!0,Eu=i),gu(t,e)},n}function jg(t,e,n){n=un(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var c=e.value;n.payload=function(){return i(c)},n.callback=function(){gu(t,e)}}var v=t.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){gu(t,e),typeof i!="function"&&(zn===null?zn=new Set([this]):zn.add(this));var w=e.stack;this.componentDidCatch(e.value,{componentStack:w!==null?w:""})}),n}function Ff(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new q0;var c=new Set;i.set(e,c)}else c=i.get(e),c===void 0&&(c=new Set,i.set(e,c));c.has(n)||(c.add(n),t=c_.bind(null,t,e,n),e.then(t,t))}function Bf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Uf(t,e,n,i,c){return t.mode&1?(t.flags|=65536,t.lanes=c,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=un(-1,1),e.tag=2,Un(n,e,1))),n.lanes|=1),t)}var J0=vn.ReactCurrentOwner,mt=!1;function at(t,e,n,i){e.child=t===null?cg(e,null,n,i):rr(e,t.child,n,i)}function zf(t,e,n,i,c){n=n.render;var v=e.ref;return Ki(e,c),i=wc(t,e,n,i,v,c),n=xc(),t!==null&&!mt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~c,pn(t,e,c)):(Re&&n&&lc(e),e.flags|=1,at(t,e,i,c),e.child)}function Hf(t,e,n,i,c){if(t===null){var v=n.type;return typeof v=="function"&&!Ac(v)&&v.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=v,Lg(t,e,v,i,c)):(t=Ao(n.type,null,i,e,e.mode,c),t.ref=e.ref,t.return=e,e.child=t)}if(v=t.child,!(t.lanes&c)){var w=v.memoizedProps;if(n=n.compare,n=n!==null?n:hs,n(w,i)&&t.ref===e.ref)return pn(t,e,c)}return e.flags|=1,t=Wn(v,i),t.ref=e.ref,t.return=e,e.child=t}function Lg(t,e,n,i,c){if(t!==null){var v=t.memoizedProps;if(hs(v,i)&&t.ref===e.ref)if(mt=!1,e.pendingProps=i=v,(t.lanes&c)!==0)t.flags&131072&&(mt=!0);else return e.lanes=t.lanes,pn(t,e,c)}return mu(t,e,n,i,c)}function Ng(t,e,n){var i=e.pendingProps,c=i.children,v=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(Vi,wt),wt|=n;else{if(!(n&1073741824))return t=v!==null?v.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Pe(Vi,wt),wt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=v!==null?v.baseLanes:n,Pe(Vi,wt),wt|=i}else v!==null?(i=v.baseLanes|n,e.memoizedState=null):i=n,Pe(Vi,wt),wt|=i;return at(t,e,c,n),e.child}function Fg(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function mu(t,e,n,i,c){var v=yt(n)?gi:st.current;return v=nr(e,v),Ki(e,c),n=wc(t,e,n,i,v,c),i=xc(),t!==null&&!mt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~c,pn(t,e,c)):(Re&&i&&lc(e),e.flags|=1,at(t,e,n,c),e.child)}function Wf(t,e,n,i,c){if(yt(n)){var v=!0;Yo(e)}else v=!1;if(Ki(e,c),e.stateNode===null)Oo(t,e),Rg(e,n,i),pu(e,n,i,c),i=!0;else if(t===null){var w=e.stateNode,h=e.memoizedProps;w.props=h;var r=w.context,f=n.contextType;typeof f=="object"&&f!==null?f=At(f):(f=yt(n)?gi:st.current,f=nr(e,f));var d=n.getDerivedStateFromProps,o=typeof d=="function"||typeof w.getSnapshotBeforeUpdate=="function";o||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(h!==i||r!==f)&&Nf(e,w,i,f),bn=!1;var a=e.memoizedState;w.state=a,Jo(e,i,w,c),r=e.memoizedState,h!==i||a!==r||vt.current||bn?(typeof d=="function"&&(du(e,n,d,i),r=e.memoizedState),(h=bn||Lf(e,n,h,i,a,r,f))?(o||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(e.flags|=4194308)):(typeof w.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=r),w.props=i,w.state=r,w.context=f,i=h):(typeof w.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{w=e.stateNode,fg(t,e),h=e.memoizedProps,f=e.type===e.elementType?h:Lt(e.type,h),w.props=f,o=e.pendingProps,a=w.context,r=n.contextType,typeof r=="object"&&r!==null?r=At(r):(r=yt(n)?gi:st.current,r=nr(e,r));var s=n.getDerivedStateFromProps;(d=typeof s=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(h!==o||a!==r)&&Nf(e,w,i,r),bn=!1,a=e.memoizedState,w.state=a,Jo(e,i,w,c);var u=e.memoizedState;h!==o||a!==u||vt.current||bn?(typeof s=="function"&&(du(e,n,s,i),u=e.memoizedState),(f=bn||Lf(e,n,f,i,a,u,r)||!1)?(d||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(i,u,r),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(i,u,r)),typeof w.componentDidUpdate=="function"&&(e.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof w.componentDidUpdate!="function"||h===t.memoizedProps&&a===t.memoizedState||(e.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&a===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=u),w.props=i,w.state=u,w.context=r,i=f):(typeof w.componentDidUpdate!="function"||h===t.memoizedProps&&a===t.memoizedState||(e.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&a===t.memoizedState||(e.flags|=1024),i=!1)}return vu(t,e,n,i,v,c)}function vu(t,e,n,i,c,v){Fg(t,e);var w=(e.flags&128)!==0;if(!i&&!w)return c&&Of(e,n,!1),pn(t,e,v);i=e.stateNode,J0.current=e;var h=w&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&w?(e.child=rr(e,t.child,null,v),e.child=rr(e,null,h,v)):at(t,e,h,v),e.memoizedState=i.state,c&&Of(e,n,!0),e.child}function Bg(t){var e=t.stateNode;e.pendingContext?bf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&bf(t,e.context,!1),mc(t,e.containerInfo)}function Vf(t,e,n,i,c){return ir(),cc(c),e.flags|=256,at(t,e,n,i),e.child}var yu={dehydrated:null,treeContext:null,retryLane:0};function _u(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ug(t,e,n){var i=e.pendingProps,c=je.current,v=!1,w=(e.flags&128)!==0,h;if((h=w)||(h=t!==null&&t.memoizedState===null?!1:(c&2)!==0),h?(v=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(c|=1),Pe(je,c&1),t===null)return hu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(w=i.children,t=i.fallback,v?(i=e.mode,v=e.child,w={mode:"hidden",children:w},!(i&1)&&v!==null?(v.childLanes=0,v.pendingProps=w):v=ba(w,i,0,null),t=pi(t,i,n,null),v.return=e,t.return=e,v.sibling=t,e.child=v,e.child.memoizedState=_u(n),e.memoizedState=yu,t):Tc(e,w));if(c=t.memoizedState,c!==null&&(h=c.dehydrated,h!==null))return Q0(t,e,w,i,h,c,n);if(v){v=i.fallback,w=e.mode,c=t.child,h=c.sibling;var r={mode:"hidden",children:i.children};return!(w&1)&&e.child!==c?(i=e.child,i.childLanes=0,i.pendingProps=r,e.deletions=null):(i=Wn(c,r),i.subtreeFlags=c.subtreeFlags&14680064),h!==null?v=Wn(h,v):(v=pi(v,w,n,null),v.flags|=2),v.return=e,i.return=e,i.sibling=v,e.child=i,i=v,v=e.child,w=t.child.memoizedState,w=w===null?_u(n):{baseLanes:w.baseLanes|n,cachePool:null,transitions:w.transitions},v.memoizedState=w,v.childLanes=t.childLanes&~n,e.memoizedState=yu,i}return v=t.child,t=v.sibling,i=Wn(v,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Tc(t,e){return e=ba({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function po(t,e,n,i){return i!==null&&cc(i),rr(e,t.child,null,n),t=Tc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Q0(t,e,n,i,c,v,w){if(n)return e.flags&256?(e.flags&=-257,i=Cl(Error(se(422))),po(t,e,w,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(v=i.fallback,c=e.mode,i=ba({mode:"visible",children:i.children},c,0,null),v=pi(v,c,w,null),v.flags|=2,i.return=e,v.return=e,i.sibling=v,e.child=i,e.mode&1&&rr(e,t.child,null,w),e.child.memoizedState=_u(w),e.memoizedState=yu,v);if(!(e.mode&1))return po(t,e,w,null);if(c.data==="$!"){if(i=c.nextSibling&&c.nextSibling.dataset,i)var h=i.dgst;return i=h,v=Error(se(419)),i=Cl(v,i,void 0),po(t,e,w,i)}if(h=(w&t.childLanes)!==0,mt||h){if(i=$e,i!==null){switch(w&-w){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(i.suspendedLanes|w)?0:c,c!==0&&c!==v.retryLane&&(v.retryLane=c,dn(t,c),Ht(i,t,c,-1))}return Ic(),i=Cl(Error(se(421))),po(t,e,w,i)}return c.data==="$?"?(e.flags|=128,e.child=t.child,e=h_.bind(null,t),c._reactRetry=e,null):(t=v.treeContext,xt=Bn(c.nextSibling),Ct=e,Re=!0,Ft=null,t!==null&&(bt[Ot++]=rn,bt[Ot++]=sn,bt[Ot++]=mi,rn=t.id,sn=t.overflow,mi=e),e=Tc(e,i.children),e.flags|=4096,e)}function Xf(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),fu(t.return,e,n)}function Sl(t,e,n,i,c){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:c}:(v.isBackwards=e,v.rendering=null,v.renderingStartTime=0,v.last=i,v.tail=n,v.tailMode=c)}function zg(t,e,n){var i=e.pendingProps,c=i.revealOrder,v=i.tail;if(at(t,e,i.children,n),i=je.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Xf(t,n,e);else if(t.tag===19)Xf(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Pe(je,i),!(e.mode&1))e.memoizedState=null;else switch(c){case"forwards":for(n=e.child,c=null;n!==null;)t=n.alternate,t!==null&&Qo(t)===null&&(c=n),n=n.sibling;n=c,n===null?(c=e.child,e.child=null):(c=n.sibling,n.sibling=null),Sl(e,!1,c,n,v);break;case"backwards":for(n=null,c=e.child,e.child=null;c!==null;){if(t=c.alternate,t!==null&&Qo(t)===null){e.child=c;break}t=c.sibling,c.sibling=n,n=c,c=t}Sl(e,!0,n,null,v);break;case"together":Sl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Oo(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function pn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),yi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(se(153));if(e.child!==null){for(t=e.child,n=Wn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Wn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Z0(t,e,n){switch(e.tag){case 3:Bg(e),ir();break;case 5:dg(e);break;case 1:yt(e.type)&&Yo(e);break;case 4:mc(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,c=e.memoizedProps.value;Pe(Ko,i._currentValue),i._currentValue=c;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Pe(je,je.current&1),e.flags|=128,null):n&e.child.childLanes?Ug(t,e,n):(Pe(je,je.current&1),t=pn(t,e,n),t!==null?t.sibling:null);Pe(je,je.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return zg(t,e,n);e.flags|=128}if(c=e.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Pe(je,je.current),i)break;return null;case 22:case 23:return e.lanes=0,Ng(t,e,n)}return pn(t,e,n)}var Hg,wu,Wg,Vg;Hg=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wu=function(){};Wg=function(t,e,n,i){var c=t.memoizedProps;if(c!==i){t=e.stateNode,hi(qt.current);var v=null;switch(n){case"input":c=Hl(t,c),i=Hl(t,i),v=[];break;case"select":c=Ne({},c,{value:void 0}),i=Ne({},i,{value:void 0}),v=[];break;case"textarea":c=Xl(t,c),i=Xl(t,i),v=[];break;default:typeof c.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Vo)}Gl(n,i);var w;n=null;for(f in c)if(!i.hasOwnProperty(f)&&c.hasOwnProperty(f)&&c[f]!=null)if(f==="style"){var h=c[f];for(w in h)h.hasOwnProperty(w)&&(n||(n={}),n[w]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(rs.hasOwnProperty(f)?v||(v=[]):(v=v||[]).push(f,null));for(f in i){var r=i[f];if(h=c!=null?c[f]:void 0,i.hasOwnProperty(f)&&r!==h&&(r!=null||h!=null))if(f==="style")if(h){for(w in h)!h.hasOwnProperty(w)||r&&r.hasOwnProperty(w)||(n||(n={}),n[w]="");for(w in r)r.hasOwnProperty(w)&&h[w]!==r[w]&&(n||(n={}),n[w]=r[w])}else n||(v||(v=[]),v.push(f,n)),n=r;else f==="dangerouslySetInnerHTML"?(r=r?r.__html:void 0,h=h?h.__html:void 0,r!=null&&h!==r&&(v=v||[]).push(f,r)):f==="children"?typeof r!="string"&&typeof r!="number"||(v=v||[]).push(f,""+r):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(rs.hasOwnProperty(f)?(r!=null&&f==="onScroll"&&Ae("scroll",t),v||h===r||(v=[])):(v=v||[]).push(f,r))}n&&(v=v||[]).push("style",n);var f=v;(e.updateQueue=f)&&(e.flags|=4)}};Vg=function(t,e,n,i){n!==i&&(e.flags|=4)};function Nr(t,e){if(!Re)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function it(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var c=t.child;c!==null;)n|=c.lanes|c.childLanes,i|=c.subtreeFlags&14680064,i|=c.flags&14680064,c.return=t,c=c.sibling;else for(c=t.child;c!==null;)n|=c.lanes|c.childLanes,i|=c.subtreeFlags,i|=c.flags,c.return=t,c=c.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function e_(t,e,n){var i=e.pendingProps;switch(uc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(e),null;case 1:return yt(e.type)&&Xo(),it(e),null;case 3:return i=e.stateNode,sr(),De(vt),De(st),yc(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(ho(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ft!==null&&(Ou(Ft),Ft=null))),wu(t,e),it(e),null;case 5:vc(e);var c=hi(ms.current);if(n=e.type,t!==null&&e.stateNode!=null)Wg(t,e,n,i,c),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(se(166));return it(e),null}if(t=hi(qt.current),ho(e)){i=e.stateNode,n=e.type;var v=e.memoizedProps;switch(i[$t]=e,i[ps]=v,t=(e.mode&1)!==0,n){case"dialog":Ae("cancel",i),Ae("close",i);break;case"iframe":case"object":case"embed":Ae("load",i);break;case"video":case"audio":for(c=0;c<Wr.length;c++)Ae(Wr[c],i);break;case"source":Ae("error",i);break;case"img":case"image":case"link":Ae("error",i),Ae("load",i);break;case"details":Ae("toggle",i);break;case"input":Zh(i,v),Ae("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!v.multiple},Ae("invalid",i);break;case"textarea":tf(i,v),Ae("invalid",i)}Gl(n,v),c=null;for(var w in v)if(v.hasOwnProperty(w)){var h=v[w];w==="children"?typeof h=="string"?i.textContent!==h&&(v.suppressHydrationWarning!==!0&&co(i.textContent,h,t),c=["children",h]):typeof h=="number"&&i.textContent!==""+h&&(v.suppressHydrationWarning!==!0&&co(i.textContent,h,t),c=["children",""+h]):rs.hasOwnProperty(w)&&h!=null&&w==="onScroll"&&Ae("scroll",i)}switch(n){case"input":no(i),ef(i,v,!0);break;case"textarea":no(i),nf(i);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(i.onclick=Vo)}i=c,e.updateQueue=i,i!==null&&(e.flags|=4)}else{w=c.nodeType===9?c:c.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=yp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=w.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=w.createElement(n,{is:i.is}):(t=w.createElement(n),n==="select"&&(w=t,i.multiple?w.multiple=!0:i.size&&(w.size=i.size))):t=w.createElementNS(t,n),t[$t]=e,t[ps]=i,Hg(t,e,!1,!1),e.stateNode=t;e:{switch(w=$l(n,i),n){case"dialog":Ae("cancel",t),Ae("close",t),c=i;break;case"iframe":case"object":case"embed":Ae("load",t),c=i;break;case"video":case"audio":for(c=0;c<Wr.length;c++)Ae(Wr[c],t);c=i;break;case"source":Ae("error",t),c=i;break;case"img":case"image":case"link":Ae("error",t),Ae("load",t),c=i;break;case"details":Ae("toggle",t),c=i;break;case"input":Zh(t,i),c=Hl(t,i),Ae("invalid",t);break;case"option":c=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},c=Ne({},i,{value:void 0}),Ae("invalid",t);break;case"textarea":tf(t,i),c=Xl(t,i),Ae("invalid",t);break;default:c=i}Gl(n,c),h=c;for(v in h)if(h.hasOwnProperty(v)){var r=h[v];v==="style"?xp(t,r):v==="dangerouslySetInnerHTML"?(r=r?r.__html:void 0,r!=null&&_p(t,r)):v==="children"?typeof r=="string"?(n!=="textarea"||r!=="")&&ss(t,r):typeof r=="number"&&ss(t,""+r):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(rs.hasOwnProperty(v)?r!=null&&v==="onScroll"&&Ae("scroll",t):r!=null&&$u(t,v,r,w))}switch(n){case"input":no(t),ef(t,i,!1);break;case"textarea":no(t),nf(t);break;case"option":i.value!=null&&t.setAttribute("value",""+$n(i.value));break;case"select":t.multiple=!!i.multiple,v=i.value,v!=null?Xi(t,!!i.multiple,v,!1):i.defaultValue!=null&&Xi(t,!!i.multiple,i.defaultValue,!0);break;default:typeof c.onClick=="function"&&(t.onclick=Vo)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return it(e),null;case 6:if(t&&e.stateNode!=null)Vg(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(se(166));if(n=hi(ms.current),hi(qt.current),ho(e)){if(i=e.stateNode,n=e.memoizedProps,i[$t]=e,(v=i.nodeValue!==n)&&(t=Ct,t!==null))switch(t.tag){case 3:co(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&co(i.nodeValue,n,(t.mode&1)!==0)}v&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[$t]=e,e.stateNode=i}return it(e),null;case 13:if(De(je),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Re&&xt!==null&&e.mode&1&&!(e.flags&128))lg(),ir(),e.flags|=98560,v=!1;else if(v=ho(e),i!==null&&i.dehydrated!==null){if(t===null){if(!v)throw Error(se(318));if(v=e.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(se(317));v[$t]=e}else ir(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;it(e),v=!1}else Ft!==null&&(Ou(Ft),Ft=null),v=!0;if(!v)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||je.current&1?Xe===0&&(Xe=3):Ic())),e.updateQueue!==null&&(e.flags|=4),it(e),null);case 4:return sr(),wu(t,e),t===null&&fs(e.stateNode.containerInfo),it(e),null;case 10:return dc(e.type._context),it(e),null;case 17:return yt(e.type)&&Xo(),it(e),null;case 19:if(De(je),v=e.memoizedState,v===null)return it(e),null;if(i=(e.flags&128)!==0,w=v.rendering,w===null)if(i)Nr(v,!1);else{if(Xe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(w=Qo(t),w!==null){for(e.flags|=128,Nr(v,!1),i=w.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)v=n,t=i,v.flags&=14680066,w=v.alternate,w===null?(v.childLanes=0,v.lanes=t,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=w.childLanes,v.lanes=w.lanes,v.child=w.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=w.memoizedProps,v.memoizedState=w.memoizedState,v.updateQueue=w.updateQueue,v.type=w.type,t=w.dependencies,v.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Pe(je,je.current&1|2),e.child}t=t.sibling}v.tail!==null&&Ue()>ar&&(e.flags|=128,i=!0,Nr(v,!1),e.lanes=4194304)}else{if(!i)if(t=Qo(w),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Nr(v,!0),v.tail===null&&v.tailMode==="hidden"&&!w.alternate&&!Re)return it(e),null}else 2*Ue()-v.renderingStartTime>ar&&n!==1073741824&&(e.flags|=128,i=!0,Nr(v,!1),e.lanes=4194304);v.isBackwards?(w.sibling=e.child,e.child=w):(n=v.last,n!==null?n.sibling=w:e.child=w,v.last=w)}return v.tail!==null?(e=v.tail,v.rendering=e,v.tail=e.sibling,v.renderingStartTime=Ue(),e.sibling=null,n=je.current,Pe(je,i?n&1|2:n&1),e):(it(e),null);case 22:case 23:return Pc(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?wt&1073741824&&(it(e),e.subtreeFlags&6&&(e.flags|=8192)):it(e),null;case 24:return null;case 25:return null}throw Error(se(156,e.tag))}function t_(t,e){switch(uc(e),e.tag){case 1:return yt(e.type)&&Xo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return sr(),De(vt),De(st),yc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return vc(e),null;case 13:if(De(je),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(se(340));ir()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return De(je),null;case 4:return sr(),null;case 10:return dc(e.type._context),null;case 22:case 23:return Pc(),null;case 24:return null;default:return null}}var go=!1,rt=!1,n_=typeof WeakSet=="function"?WeakSet:Set,he=null;function Wi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Fe(t,e,i)}else n.current=null}function xu(t,e,n){try{n()}catch(i){Fe(t,e,i)}}var Yf=!1;function i_(t,e){if(ru=zo,t=Kp(),ac(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var c=i.anchorOffset,v=i.focusNode;i=i.focusOffset;try{n.nodeType,v.nodeType}catch{n=null;break e}var w=0,h=-1,r=-1,f=0,d=0,o=t,a=null;t:for(;;){for(var s;o!==n||c!==0&&o.nodeType!==3||(h=w+c),o!==v||i!==0&&o.nodeType!==3||(r=w+i),o.nodeType===3&&(w+=o.nodeValue.length),(s=o.firstChild)!==null;)a=o,o=s;for(;;){if(o===t)break t;if(a===n&&++f===c&&(h=w),a===v&&++d===i&&(r=w),(s=o.nextSibling)!==null)break;o=a,a=o.parentNode}o=s}n=h===-1||r===-1?null:{start:h,end:r}}else n=null}n=n||{start:0,end:0}}else n=null;for(su={focusedElem:t,selectionRange:n},zo=!1,he=e;he!==null;)if(e=he,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,he=t;else for(;he!==null;){e=he;try{var u=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(u!==null){var p=u.memoizedProps,l=u.memoizedState,g=e.stateNode,y=g.getSnapshotBeforeUpdate(e.elementType===e.type?p:Lt(e.type,p),l);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(x){Fe(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,he=t;break}he=e.return}return u=Yf,Yf=!1,u}function Qr(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var c=i=i.next;do{if((c.tag&t)===t){var v=c.destroy;c.destroy=void 0,v!==void 0&&xu(e,n,v)}c=c.next}while(c!==i)}}function Ea(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Cu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Xg(t){var e=t.alternate;e!==null&&(t.alternate=null,Xg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[$t],delete e[ps],delete e[lu],delete e[B0],delete e[U0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Yg(t){return t.tag===5||t.tag===3||t.tag===4}function Gf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Yg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Su(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Vo));else if(i!==4&&(t=t.child,t!==null))for(Su(t,e,n),t=t.sibling;t!==null;)Su(t,e,n),t=t.sibling}function Tu(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Tu(t,e,n),t=t.sibling;t!==null;)Tu(t,e,n),t=t.sibling}var qe=null,Nt=!1;function Sn(t,e,n){for(n=n.child;n!==null;)Gg(t,e,n),n=n.sibling}function Gg(t,e,n){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(va,n)}catch{}switch(n.tag){case 5:rt||Wi(n,e);case 6:var i=qe,c=Nt;qe=null,Sn(t,e,n),qe=i,Nt=c,qe!==null&&(Nt?(t=qe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):qe.removeChild(n.stateNode));break;case 18:qe!==null&&(Nt?(t=qe,n=n.stateNode,t.nodeType===8?ml(t.parentNode,n):t.nodeType===1&&ml(t,n),us(t)):ml(qe,n.stateNode));break;case 4:i=qe,c=Nt,qe=n.stateNode.containerInfo,Nt=!0,Sn(t,e,n),qe=i,Nt=c;break;case 0:case 11:case 14:case 15:if(!rt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){c=i=i.next;do{var v=c,w=v.destroy;v=v.tag,w!==void 0&&(v&2||v&4)&&xu(n,e,w),c=c.next}while(c!==i)}Sn(t,e,n);break;case 1:if(!rt&&(Wi(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(h){Fe(n,e,h)}Sn(t,e,n);break;case 21:Sn(t,e,n);break;case 22:n.mode&1?(rt=(i=rt)||n.memoizedState!==null,Sn(t,e,n),rt=i):Sn(t,e,n);break;default:Sn(t,e,n)}}function $f(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new n_),e.forEach(function(i){var c=f_.bind(null,t,i);n.has(i)||(n.add(i),i.then(c,c))})}}function jt(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var c=n[i];try{var v=t,w=e,h=w;e:for(;h!==null;){switch(h.tag){case 5:qe=h.stateNode,Nt=!1;break e;case 3:qe=h.stateNode.containerInfo,Nt=!0;break e;case 4:qe=h.stateNode.containerInfo,Nt=!0;break e}h=h.return}if(qe===null)throw Error(se(160));Gg(v,w,c),qe=null,Nt=!1;var r=c.alternate;r!==null&&(r.return=null),c.return=null}catch(f){Fe(c,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)$g(e,t),e=e.sibling}function $g(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(jt(e,t),Yt(t),i&4){try{Qr(3,t,t.return),Ea(3,t)}catch(p){Fe(t,t.return,p)}try{Qr(5,t,t.return)}catch(p){Fe(t,t.return,p)}}break;case 1:jt(e,t),Yt(t),i&512&&n!==null&&Wi(n,n.return);break;case 5:if(jt(e,t),Yt(t),i&512&&n!==null&&Wi(n,n.return),t.flags&32){var c=t.stateNode;try{ss(c,"")}catch(p){Fe(t,t.return,p)}}if(i&4&&(c=t.stateNode,c!=null)){var v=t.memoizedProps,w=n!==null?n.memoizedProps:v,h=t.type,r=t.updateQueue;if(t.updateQueue=null,r!==null)try{h==="input"&&v.type==="radio"&&v.name!=null&&mp(c,v),$l(h,w);var f=$l(h,v);for(w=0;w<r.length;w+=2){var d=r[w],o=r[w+1];d==="style"?xp(c,o):d==="dangerouslySetInnerHTML"?_p(c,o):d==="children"?ss(c,o):$u(c,d,o,f)}switch(h){case"input":Wl(c,v);break;case"textarea":vp(c,v);break;case"select":var a=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!v.multiple;var s=v.value;s!=null?Xi(c,!!v.multiple,s,!1):a!==!!v.multiple&&(v.defaultValue!=null?Xi(c,!!v.multiple,v.defaultValue,!0):Xi(c,!!v.multiple,v.multiple?[]:"",!1))}c[ps]=v}catch(p){Fe(t,t.return,p)}}break;case 6:if(jt(e,t),Yt(t),i&4){if(t.stateNode===null)throw Error(se(162));c=t.stateNode,v=t.memoizedProps;try{c.nodeValue=v}catch(p){Fe(t,t.return,p)}}break;case 3:if(jt(e,t),Yt(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{us(e.containerInfo)}catch(p){Fe(t,t.return,p)}break;case 4:jt(e,t),Yt(t);break;case 13:jt(e,t),Yt(t),c=t.child,c.flags&8192&&(v=c.memoizedState!==null,c.stateNode.isHidden=v,!v||c.alternate!==null&&c.alternate.memoizedState!==null||(bc=Ue())),i&4&&$f(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(rt=(f=rt)||d,jt(e,t),rt=f):jt(e,t),Yt(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!d&&t.mode&1)for(he=t,d=t.child;d!==null;){for(o=he=d;he!==null;){switch(a=he,s=a.child,a.tag){case 0:case 11:case 14:case 15:Qr(4,a,a.return);break;case 1:Wi(a,a.return);var u=a.stateNode;if(typeof u.componentWillUnmount=="function"){i=a,n=a.return;try{e=i,u.props=e.memoizedProps,u.state=e.memoizedState,u.componentWillUnmount()}catch(p){Fe(i,n,p)}}break;case 5:Wi(a,a.return);break;case 22:if(a.memoizedState!==null){qf(o);continue}}s!==null?(s.return=a,he=s):qf(o)}d=d.sibling}e:for(d=null,o=t;;){if(o.tag===5){if(d===null){d=o;try{c=o.stateNode,f?(v=c.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(h=o.stateNode,r=o.memoizedProps.style,w=r!=null&&r.hasOwnProperty("display")?r.display:null,h.style.display=wp("display",w))}catch(p){Fe(t,t.return,p)}}}else if(o.tag===6){if(d===null)try{o.stateNode.nodeValue=f?"":o.memoizedProps}catch(p){Fe(t,t.return,p)}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===t)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;o.sibling===null;){if(o.return===null||o.return===t)break e;d===o&&(d=null),o=o.return}d===o&&(d=null),o.sibling.return=o.return,o=o.sibling}}break;case 19:jt(e,t),Yt(t),i&4&&$f(t);break;case 21:break;default:jt(e,t),Yt(t)}}function Yt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Yg(n)){var i=n;break e}n=n.return}throw Error(se(160))}switch(i.tag){case 5:var c=i.stateNode;i.flags&32&&(ss(c,""),i.flags&=-33);var v=Gf(t);Tu(t,v,c);break;case 3:case 4:var w=i.stateNode.containerInfo,h=Gf(t);Su(t,h,w);break;default:throw Error(se(161))}}catch(r){Fe(t,t.return,r)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function r_(t,e,n){he=t,Kg(t)}function Kg(t,e,n){for(var i=(t.mode&1)!==0;he!==null;){var c=he,v=c.child;if(c.tag===22&&i){var w=c.memoizedState!==null||go;if(!w){var h=c.alternate,r=h!==null&&h.memoizedState!==null||rt;h=go;var f=rt;if(go=w,(rt=r)&&!f)for(he=c;he!==null;)w=he,r=w.child,w.tag===22&&w.memoizedState!==null?Jf(c):r!==null?(r.return=w,he=r):Jf(c);for(;v!==null;)he=v,Kg(v),v=v.sibling;he=c,go=h,rt=f}Kf(t)}else c.subtreeFlags&8772&&v!==null?(v.return=c,he=v):Kf(t)}}function Kf(t){for(;he!==null;){var e=he;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:rt||Ea(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!rt)if(n===null)i.componentDidMount();else{var c=e.elementType===e.type?n.memoizedProps:Lt(e.type,n.memoizedProps);i.componentDidUpdate(c,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var v=e.updateQueue;v!==null&&Rf(e,v,i);break;case 3:var w=e.updateQueue;if(w!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Rf(e,w,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var r=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":r.autoFocus&&n.focus();break;case"img":r.src&&(n.src=r.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var d=f.memoizedState;if(d!==null){var o=d.dehydrated;o!==null&&us(o)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}rt||e.flags&512&&Cu(e)}catch(a){Fe(e,e.return,a)}}if(e===t){he=null;break}if(n=e.sibling,n!==null){n.return=e.return,he=n;break}he=e.return}}function qf(t){for(;he!==null;){var e=he;if(e===t){he=null;break}var n=e.sibling;if(n!==null){n.return=e.return,he=n;break}he=e.return}}function Jf(t){for(;he!==null;){var e=he;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ea(4,e)}catch(r){Fe(e,n,r)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var c=e.return;try{i.componentDidMount()}catch(r){Fe(e,c,r)}}var v=e.return;try{Cu(e)}catch(r){Fe(e,v,r)}break;case 5:var w=e.return;try{Cu(e)}catch(r){Fe(e,w,r)}}}catch(r){Fe(e,e.return,r)}if(e===t){he=null;break}var h=e.sibling;if(h!==null){h.return=e.return,he=h;break}he=e.return}}var s_=Math.ceil,ta=vn.ReactCurrentDispatcher,Ec=vn.ReactCurrentOwner,It=vn.ReactCurrentBatchConfig,Te=0,$e=null,He=null,Je=0,wt=0,Vi=Jn(0),Xe=0,ws=null,yi=0,ka=0,kc=0,Zr=null,dt=null,bc=0,ar=1/0,en=null,na=!1,Eu=null,zn=null,mo=!1,Mn=null,ia=0,es=0,ku=null,Po=-1,Io=0;function ut(){return Te&6?Ue():Po!==-1?Po:Po=Ue()}function Hn(t){return t.mode&1?Te&2&&Je!==0?Je&-Je:H0.transition!==null?(Io===0&&(Io=Rp()),Io):(t=be,t!==0||(t=window.event,t=t===void 0?16:Up(t.type)),t):1}function Ht(t,e,n,i){if(50<es)throw es=0,ku=null,Error(se(185));Os(t,n,i),(!(Te&2)||t!==$e)&&(t===$e&&(!(Te&2)&&(ka|=n),Xe===4&&Pn(t,Je)),_t(t,i),n===1&&Te===0&&!(e.mode&1)&&(ar=Ue()+500,Ca&&Qn()))}function _t(t,e){var n=t.callbackNode;Hy(t,e);var i=Uo(t,t===$e?Je:0);if(i===0)n!==null&&of(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&of(n),e===1)t.tag===0?z0(Qf.bind(null,t)):sg(Qf.bind(null,t)),N0(function(){!(Te&6)&&Qn()}),n=null;else{switch(Mp(i)){case 1:n=Zu;break;case 4:n=Ap;break;case 16:n=Bo;break;case 536870912:n=Dp;break;default:n=Bo}n=im(n,qg.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function qg(t,e){if(Po=-1,Io=0,Te&6)throw Error(se(327));var n=t.callbackNode;if(qi()&&t.callbackNode!==n)return null;var i=Uo(t,t===$e?Je:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=ra(t,i);else{e=i;var c=Te;Te|=2;var v=Qg();($e!==t||Je!==e)&&(en=null,ar=Ue()+500,di(t,e));do try{l_();break}catch(h){Jg(t,h)}while(!0);fc(),ta.current=v,Te=c,He!==null?e=0:($e=null,Je=0,e=Xe)}if(e!==0){if(e===2&&(c=Zl(t),c!==0&&(i=c,e=bu(t,c))),e===1)throw n=ws,di(t,0),Pn(t,i),_t(t,Ue()),n;if(e===6)Pn(t,i);else{if(c=t.current.alternate,!(i&30)&&!o_(c)&&(e=ra(t,i),e===2&&(v=Zl(t),v!==0&&(i=v,e=bu(t,v))),e===1))throw n=ws,di(t,0),Pn(t,i),_t(t,Ue()),n;switch(t.finishedWork=c,t.finishedLanes=i,e){case 0:case 1:throw Error(se(345));case 2:ai(t,dt,en);break;case 3:if(Pn(t,i),(i&130023424)===i&&(e=bc+500-Ue(),10<e)){if(Uo(t,0)!==0)break;if(c=t.suspendedLanes,(c&i)!==i){ut(),t.pingedLanes|=t.suspendedLanes&c;break}t.timeoutHandle=au(ai.bind(null,t,dt,en),e);break}ai(t,dt,en);break;case 4:if(Pn(t,i),(i&4194240)===i)break;for(e=t.eventTimes,c=-1;0<i;){var w=31-zt(i);v=1<<w,w=e[w],w>c&&(c=w),i&=~v}if(i=c,i=Ue()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*s_(i/1960))-i,10<i){t.timeoutHandle=au(ai.bind(null,t,dt,en),i);break}ai(t,dt,en);break;case 5:ai(t,dt,en);break;default:throw Error(se(329))}}}return _t(t,Ue()),t.callbackNode===n?qg.bind(null,t):null}function bu(t,e){var n=Zr;return t.current.memoizedState.isDehydrated&&(di(t,e).flags|=256),t=ra(t,e),t!==2&&(e=dt,dt=n,e!==null&&Ou(e)),t}function Ou(t){dt===null?dt=t:dt.push.apply(dt,t)}function o_(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var c=n[i],v=c.getSnapshot;c=c.value;try{if(!Vt(v(),c))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Pn(t,e){for(e&=~kc,e&=~ka,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zt(e),i=1<<n;t[n]=-1,e&=~i}}function Qf(t){if(Te&6)throw Error(se(327));qi();var e=Uo(t,0);if(!(e&1))return _t(t,Ue()),null;var n=ra(t,e);if(t.tag!==0&&n===2){var i=Zl(t);i!==0&&(e=i,n=bu(t,i))}if(n===1)throw n=ws,di(t,0),Pn(t,e),_t(t,Ue()),n;if(n===6)throw Error(se(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ai(t,dt,en),_t(t,Ue()),null}function Oc(t,e){var n=Te;Te|=1;try{return t(e)}finally{Te=n,Te===0&&(ar=Ue()+500,Ca&&Qn())}}function _i(t){Mn!==null&&Mn.tag===0&&!(Te&6)&&qi();var e=Te;Te|=1;var n=It.transition,i=be;try{if(It.transition=null,be=1,t)return t()}finally{be=i,It.transition=n,Te=e,!(Te&6)&&Qn()}}function Pc(){wt=Vi.current,De(Vi)}function di(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,L0(n)),He!==null)for(n=He.return;n!==null;){var i=n;switch(uc(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Xo();break;case 3:sr(),De(vt),De(st),yc();break;case 5:vc(i);break;case 4:sr();break;case 13:De(je);break;case 19:De(je);break;case 10:dc(i.type._context);break;case 22:case 23:Pc()}n=n.return}if($e=t,He=t=Wn(t.current,null),Je=wt=e,Xe=0,ws=null,kc=ka=yi=0,dt=Zr=null,ci!==null){for(e=0;e<ci.length;e++)if(n=ci[e],i=n.interleaved,i!==null){n.interleaved=null;var c=i.next,v=n.pending;if(v!==null){var w=v.next;v.next=c,i.next=w}n.pending=i}ci=null}return t}function Jg(t,e){do{var n=He;try{if(fc(),ko.current=ea,Zo){for(var i=Le.memoizedState;i!==null;){var c=i.queue;c!==null&&(c.pending=null),i=i.next}Zo=!1}if(vi=0,Ge=Ve=Le=null,Jr=!1,vs=0,Ec.current=null,n===null||n.return===null){Xe=1,ws=e,He=null;break}e:{var v=t,w=n.return,h=n,r=e;if(e=Je,h.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){var f=r,d=h,o=d.tag;if(!(d.mode&1)&&(o===0||o===11||o===15)){var a=d.alternate;a?(d.updateQueue=a.updateQueue,d.memoizedState=a.memoizedState,d.lanes=a.lanes):(d.updateQueue=null,d.memoizedState=null)}var s=Bf(w);if(s!==null){s.flags&=-257,Uf(s,w,h,v,e),s.mode&1&&Ff(v,f,e),e=s,r=f;var u=e.updateQueue;if(u===null){var p=new Set;p.add(r),e.updateQueue=p}else u.add(r);break e}else{if(!(e&1)){Ff(v,f,e),Ic();break e}r=Error(se(426))}}else if(Re&&h.mode&1){var l=Bf(w);if(l!==null){!(l.flags&65536)&&(l.flags|=256),Uf(l,w,h,v,e),cc(or(r,h));break e}}v=r=or(r,h),Xe!==4&&(Xe=2),Zr===null?Zr=[v]:Zr.push(v),v=w;do{switch(v.tag){case 3:v.flags|=65536,e&=-e,v.lanes|=e;var g=Mg(v,r,e);Df(v,g);break e;case 1:h=r;var y=v.type,_=v.stateNode;if(!(v.flags&128)&&(typeof y.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(zn===null||!zn.has(_)))){v.flags|=65536,e&=-e,v.lanes|=e;var x=jg(v,h,e);Df(v,x);break e}}v=v.return}while(v!==null)}em(n)}catch(S){e=S,He===n&&n!==null&&(He=n=n.return);continue}break}while(!0)}function Qg(){var t=ta.current;return ta.current=ea,t===null?ea:t}function Ic(){(Xe===0||Xe===3||Xe===2)&&(Xe=4),$e===null||!(yi&268435455)&&!(ka&268435455)||Pn($e,Je)}function ra(t,e){var n=Te;Te|=2;var i=Qg();($e!==t||Je!==e)&&(en=null,di(t,e));do try{a_();break}catch(c){Jg(t,c)}while(!0);if(fc(),Te=n,ta.current=i,He!==null)throw Error(se(261));return $e=null,Je=0,Xe}function a_(){for(;He!==null;)Zg(He)}function l_(){for(;He!==null&&!Ry();)Zg(He)}function Zg(t){var e=nm(t.alternate,t,wt);t.memoizedProps=t.pendingProps,e===null?em(t):He=e,Ec.current=null}function em(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=t_(n,e),n!==null){n.flags&=32767,He=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Xe=6,He=null;return}}else if(n=e_(n,e,wt),n!==null){He=n;return}if(e=e.sibling,e!==null){He=e;return}He=e=t}while(e!==null);Xe===0&&(Xe=5)}function ai(t,e,n){var i=be,c=It.transition;try{It.transition=null,be=1,u_(t,e,n,i)}finally{It.transition=c,be=i}return null}function u_(t,e,n,i){do qi();while(Mn!==null);if(Te&6)throw Error(se(327));n=t.finishedWork;var c=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(se(177));t.callbackNode=null,t.callbackPriority=0;var v=n.lanes|n.childLanes;if(Wy(t,v),t===$e&&(He=$e=null,Je=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||mo||(mo=!0,im(Bo,function(){return qi(),null})),v=(n.flags&15990)!==0,n.subtreeFlags&15990||v){v=It.transition,It.transition=null;var w=be;be=1;var h=Te;Te|=4,Ec.current=null,i_(t,n),$g(n,t),P0(su),zo=!!ru,su=ru=null,t.current=n,r_(n),My(),Te=h,be=w,It.transition=v}else t.current=n;if(mo&&(mo=!1,Mn=t,ia=c),v=t.pendingLanes,v===0&&(zn=null),Ny(n.stateNode),_t(t,Ue()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)c=e[n],i(c.value,{componentStack:c.stack,digest:c.digest});if(na)throw na=!1,t=Eu,Eu=null,t;return ia&1&&t.tag!==0&&qi(),v=t.pendingLanes,v&1?t===ku?es++:(es=0,ku=t):es=0,Qn(),null}function qi(){if(Mn!==null){var t=Mp(ia),e=It.transition,n=be;try{if(It.transition=null,be=16>t?16:t,Mn===null)var i=!1;else{if(t=Mn,Mn=null,ia=0,Te&6)throw Error(se(331));var c=Te;for(Te|=4,he=t.current;he!==null;){var v=he,w=v.child;if(he.flags&16){var h=v.deletions;if(h!==null){for(var r=0;r<h.length;r++){var f=h[r];for(he=f;he!==null;){var d=he;switch(d.tag){case 0:case 11:case 15:Qr(8,d,v)}var o=d.child;if(o!==null)o.return=d,he=o;else for(;he!==null;){d=he;var a=d.sibling,s=d.return;if(Xg(d),d===f){he=null;break}if(a!==null){a.return=s,he=a;break}he=s}}}var u=v.alternate;if(u!==null){var p=u.child;if(p!==null){u.child=null;do{var l=p.sibling;p.sibling=null,p=l}while(p!==null)}}he=v}}if(v.subtreeFlags&2064&&w!==null)w.return=v,he=w;else e:for(;he!==null;){if(v=he,v.flags&2048)switch(v.tag){case 0:case 11:case 15:Qr(9,v,v.return)}var g=v.sibling;if(g!==null){g.return=v.return,he=g;break e}he=v.return}}var y=t.current;for(he=y;he!==null;){w=he;var _=w.child;if(w.subtreeFlags&2064&&_!==null)_.return=w,he=_;else e:for(w=y;he!==null;){if(h=he,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Ea(9,h)}}catch(S){Fe(h,h.return,S)}if(h===w){he=null;break e}var x=h.sibling;if(x!==null){x.return=h.return,he=x;break e}he=h.return}}if(Te=c,Qn(),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(va,t)}catch{}i=!0}return i}finally{be=n,It.transition=e}}return!1}function Zf(t,e,n){e=or(n,e),e=Mg(t,e,1),t=Un(t,e,1),e=ut(),t!==null&&(Os(t,1,e),_t(t,e))}function Fe(t,e,n){if(t.tag===3)Zf(t,t,n);else for(;e!==null;){if(e.tag===3){Zf(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(zn===null||!zn.has(i))){t=or(n,t),t=jg(e,t,1),e=Un(e,t,1),t=ut(),e!==null&&(Os(e,1,t),_t(e,t));break}}e=e.return}}function c_(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=ut(),t.pingedLanes|=t.suspendedLanes&n,$e===t&&(Je&n)===n&&(Xe===4||Xe===3&&(Je&130023424)===Je&&500>Ue()-bc?di(t,0):kc|=n),_t(t,e)}function tm(t,e){e===0&&(t.mode&1?(e=so,so<<=1,!(so&130023424)&&(so=4194304)):e=1);var n=ut();t=dn(t,e),t!==null&&(Os(t,e,n),_t(t,n))}function h_(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),tm(t,n)}function f_(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,c=t.memoizedState;c!==null&&(n=c.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(se(314))}i!==null&&i.delete(e),tm(t,n)}var nm;nm=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||vt.current)mt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return mt=!1,Z0(t,e,n);mt=!!(t.flags&131072)}else mt=!1,Re&&e.flags&1048576&&og(e,$o,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Oo(t,e),t=e.pendingProps;var c=nr(e,st.current);Ki(e,n),c=wc(null,e,i,t,c,n);var v=xc();return e.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,yt(i)?(v=!0,Yo(e)):v=!1,e.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,gc(e),c.updater=Ta,e.stateNode=c,c._reactInternals=e,pu(e,i,t,n),e=vu(null,e,i,!0,v,n)):(e.tag=0,Re&&v&&lc(e),at(null,e,c,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Oo(t,e),t=e.pendingProps,c=i._init,i=c(i._payload),e.type=i,c=e.tag=p_(i),t=Lt(i,t),c){case 0:e=mu(null,e,i,t,n);break e;case 1:e=Wf(null,e,i,t,n);break e;case 11:e=zf(null,e,i,t,n);break e;case 14:e=Hf(null,e,i,Lt(i.type,t),n);break e}throw Error(se(306,i,""))}return e;case 0:return i=e.type,c=e.pendingProps,c=e.elementType===i?c:Lt(i,c),mu(t,e,i,c,n);case 1:return i=e.type,c=e.pendingProps,c=e.elementType===i?c:Lt(i,c),Wf(t,e,i,c,n);case 3:e:{if(Bg(e),t===null)throw Error(se(387));i=e.pendingProps,v=e.memoizedState,c=v.element,fg(t,e),Jo(e,i,null,n);var w=e.memoizedState;if(i=w.element,v.isDehydrated)if(v={element:i,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},e.updateQueue.baseState=v,e.memoizedState=v,e.flags&256){c=or(Error(se(423)),e),e=Vf(t,e,i,n,c);break e}else if(i!==c){c=or(Error(se(424)),e),e=Vf(t,e,i,n,c);break e}else for(xt=Bn(e.stateNode.containerInfo.firstChild),Ct=e,Re=!0,Ft=null,n=cg(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ir(),i===c){e=pn(t,e,n);break e}at(t,e,i,n)}e=e.child}return e;case 5:return dg(e),t===null&&hu(e),i=e.type,c=e.pendingProps,v=t!==null?t.memoizedProps:null,w=c.children,ou(i,c)?w=null:v!==null&&ou(i,v)&&(e.flags|=32),Fg(t,e),at(t,e,w,n),e.child;case 6:return t===null&&hu(e),null;case 13:return Ug(t,e,n);case 4:return mc(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=rr(e,null,i,n):at(t,e,i,n),e.child;case 11:return i=e.type,c=e.pendingProps,c=e.elementType===i?c:Lt(i,c),zf(t,e,i,c,n);case 7:return at(t,e,e.pendingProps,n),e.child;case 8:return at(t,e,e.pendingProps.children,n),e.child;case 12:return at(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,c=e.pendingProps,v=e.memoizedProps,w=c.value,Pe(Ko,i._currentValue),i._currentValue=w,v!==null)if(Vt(v.value,w)){if(v.children===c.children&&!vt.current){e=pn(t,e,n);break e}}else for(v=e.child,v!==null&&(v.return=e);v!==null;){var h=v.dependencies;if(h!==null){w=v.child;for(var r=h.firstContext;r!==null;){if(r.context===i){if(v.tag===1){r=un(-1,n&-n),r.tag=2;var f=v.updateQueue;if(f!==null){f=f.shared;var d=f.pending;d===null?r.next=r:(r.next=d.next,d.next=r),f.pending=r}}v.lanes|=n,r=v.alternate,r!==null&&(r.lanes|=n),fu(v.return,n,e),h.lanes|=n;break}r=r.next}}else if(v.tag===10)w=v.type===e.type?null:v.child;else if(v.tag===18){if(w=v.return,w===null)throw Error(se(341));w.lanes|=n,h=w.alternate,h!==null&&(h.lanes|=n),fu(w,n,e),w=v.sibling}else w=v.child;if(w!==null)w.return=v;else for(w=v;w!==null;){if(w===e){w=null;break}if(v=w.sibling,v!==null){v.return=w.return,w=v;break}w=w.return}v=w}at(t,e,c.children,n),e=e.child}return e;case 9:return c=e.type,i=e.pendingProps.children,Ki(e,n),c=At(c),i=i(c),e.flags|=1,at(t,e,i,n),e.child;case 14:return i=e.type,c=Lt(i,e.pendingProps),c=Lt(i.type,c),Hf(t,e,i,c,n);case 15:return Lg(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,c=e.pendingProps,c=e.elementType===i?c:Lt(i,c),Oo(t,e),e.tag=1,yt(i)?(t=!0,Yo(e)):t=!1,Ki(e,n),Rg(e,i,c),pu(e,i,c,n),vu(null,e,i,!0,t,n);case 19:return zg(t,e,n);case 22:return Ng(t,e,n)}throw Error(se(156,e.tag))};function im(t,e){return Ip(t,e)}function d_(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pt(t,e,n,i){return new d_(t,e,n,i)}function Ac(t){return t=t.prototype,!(!t||!t.isReactComponent)}function p_(t){if(typeof t=="function")return Ac(t)?1:0;if(t!=null){if(t=t.$$typeof,t===qu)return 11;if(t===Ju)return 14}return 2}function Wn(t,e){var n=t.alternate;return n===null?(n=Pt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ao(t,e,n,i,c,v){var w=2;if(i=t,typeof t=="function")Ac(t)&&(w=1);else if(typeof t=="string")w=5;else e:switch(t){case Mi:return pi(n.children,c,v,e);case Ku:w=8,c|=8;break;case Fl:return t=Pt(12,n,e,c|2),t.elementType=Fl,t.lanes=v,t;case Bl:return t=Pt(13,n,e,c),t.elementType=Bl,t.lanes=v,t;case Ul:return t=Pt(19,n,e,c),t.elementType=Ul,t.lanes=v,t;case dp:return ba(n,c,v,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case hp:w=10;break e;case fp:w=9;break e;case qu:w=11;break e;case Ju:w=14;break e;case kn:w=16,i=null;break e}throw Error(se(130,t==null?t:typeof t,""))}return e=Pt(w,n,e,c),e.elementType=t,e.type=i,e.lanes=v,e}function pi(t,e,n,i){return t=Pt(7,t,i,e),t.lanes=n,t}function ba(t,e,n,i){return t=Pt(22,t,i,e),t.elementType=dp,t.lanes=n,t.stateNode={isHidden:!1},t}function Tl(t,e,n){return t=Pt(6,t,null,e),t.lanes=n,t}function El(t,e,n){return e=Pt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function g_(t,e,n,i,c){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sl(0),this.expirationTimes=sl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sl(0),this.identifierPrefix=i,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function Dc(t,e,n,i,c,v,w,h,r){return t=new g_(t,e,n,h,r),e===1?(e=1,v===!0&&(e|=8)):e=0,v=Pt(3,null,null,e),t.current=v,v.stateNode=t,v.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},gc(v),t}function m_(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ri,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function rm(t){if(!t)return Kn;t=t._reactInternals;e:{if(Ti(t)!==t||t.tag!==1)throw Error(se(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(yt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(se(171))}if(t.tag===1){var n=t.type;if(yt(n))return rg(t,n,e)}return e}function sm(t,e,n,i,c,v,w,h,r){return t=Dc(n,i,!0,t,c,v,w,h,r),t.context=rm(null),n=t.current,i=ut(),c=Hn(n),v=un(i,c),v.callback=e??null,Un(n,v,c),t.current.lanes=c,Os(t,c,i),_t(t,i),t}function Oa(t,e,n,i){var c=e.current,v=ut(),w=Hn(c);return n=rm(n),e.context===null?e.context=n:e.pendingContext=n,e=un(v,w),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Un(c,e,w),t!==null&&(Ht(t,c,w,v),Eo(t,c,w)),w}function sa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ed(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Rc(t,e){ed(t,e),(t=t.alternate)&&ed(t,e)}function v_(){return null}var om=typeof reportError=="function"?reportError:function(t){console.error(t)};function Mc(t){this._internalRoot=t}Pa.prototype.render=Mc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(se(409));Oa(t,e,null,null)};Pa.prototype.unmount=Mc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;_i(function(){Oa(null,t,null,null)}),e[fn]=null}};function Pa(t){this._internalRoot=t}Pa.prototype.unstable_scheduleHydration=function(t){if(t){var e=Np();t={blockedOn:null,target:t,priority:e};for(var n=0;n<On.length&&e!==0&&e<On[n].priority;n++);On.splice(n,0,t),n===0&&Bp(t)}};function jc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ia(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function td(){}function y_(t,e,n,i,c){if(c){if(typeof i=="function"){var v=i;i=function(){var f=sa(w);v.call(f)}}var w=sm(e,i,t,0,null,!1,!1,"",td);return t._reactRootContainer=w,t[fn]=w.current,fs(t.nodeType===8?t.parentNode:t),_i(),w}for(;c=t.lastChild;)t.removeChild(c);if(typeof i=="function"){var h=i;i=function(){var f=sa(r);h.call(f)}}var r=Dc(t,0,!1,null,null,!1,!1,"",td);return t._reactRootContainer=r,t[fn]=r.current,fs(t.nodeType===8?t.parentNode:t),_i(function(){Oa(e,r,n,i)}),r}function Aa(t,e,n,i,c){var v=n._reactRootContainer;if(v){var w=v;if(typeof c=="function"){var h=c;c=function(){var r=sa(w);h.call(r)}}Oa(e,w,t,c)}else w=y_(n,e,t,c,i);return sa(w)}jp=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Hr(e.pendingLanes);n!==0&&(ec(e,n|1),_t(e,Ue()),!(Te&6)&&(ar=Ue()+500,Qn()))}break;case 13:_i(function(){var i=dn(t,1);if(i!==null){var c=ut();Ht(i,t,1,c)}}),Rc(t,1)}};tc=function(t){if(t.tag===13){var e=dn(t,134217728);if(e!==null){var n=ut();Ht(e,t,134217728,n)}Rc(t,134217728)}};Lp=function(t){if(t.tag===13){var e=Hn(t),n=dn(t,e);if(n!==null){var i=ut();Ht(n,t,e,i)}Rc(t,e)}};Np=function(){return be};Fp=function(t,e){var n=be;try{return be=t,e()}finally{be=n}};ql=function(t,e,n){switch(e){case"input":if(Wl(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var c=xa(i);if(!c)throw Error(se(90));gp(i),Wl(i,c)}}}break;case"textarea":vp(t,n);break;case"select":e=n.value,e!=null&&Xi(t,!!n.multiple,e,!1)}};Tp=Oc;Ep=_i;var __={usingClientEntryPoint:!1,Events:[Is,Fi,xa,Cp,Sp,Oc]},Fr={findFiberByHostInstance:ui,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},w_={bundleType:Fr.bundleType,version:Fr.version,rendererPackageName:Fr.rendererPackageName,rendererConfig:Fr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Op(t),t===null?null:t.stateNode},findFiberByHostInstance:Fr.findFiberByHostInstance||v_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vo.isDisabled&&vo.supportsFiber)try{va=vo.inject(w_),Kt=vo}catch{}}Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=__;Tt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jc(e))throw Error(se(200));return m_(t,e,null,n)};Tt.createRoot=function(t,e){if(!jc(t))throw Error(se(299));var n=!1,i="",c=om;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(c=e.onRecoverableError)),e=Dc(t,1,!1,null,null,n,!1,i,c),t[fn]=e.current,fs(t.nodeType===8?t.parentNode:t),new Mc(e)};Tt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(se(188)):(t=Object.keys(t).join(","),Error(se(268,t)));return t=Op(e),t=t===null?null:t.stateNode,t};Tt.flushSync=function(t){return _i(t)};Tt.hydrate=function(t,e,n){if(!Ia(e))throw Error(se(200));return Aa(null,t,e,!0,n)};Tt.hydrateRoot=function(t,e,n){if(!jc(t))throw Error(se(405));var i=n!=null&&n.hydratedSources||null,c=!1,v="",w=om;if(n!=null&&(n.unstable_strictMode===!0&&(c=!0),n.identifierPrefix!==void 0&&(v=n.identifierPrefix),n.onRecoverableError!==void 0&&(w=n.onRecoverableError)),e=sm(e,null,t,1,n??null,c,!1,v,w),t[fn]=e.current,fs(t),i)for(t=0;t<i.length;t++)n=i[t],c=n._getVersion,c=c(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,c]:e.mutableSourceEagerHydrationData.push(n,c);return new Pa(e)};Tt.render=function(t,e,n){if(!Ia(e))throw Error(se(200));return Aa(null,t,e,!1,n)};Tt.unmountComponentAtNode=function(t){if(!Ia(t))throw Error(se(40));return t._reactRootContainer?(_i(function(){Aa(null,null,t,!1,function(){t._reactRootContainer=null,t[fn]=null})}),!0):!1};Tt.unstable_batchedUpdates=Oc;Tt.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Ia(n))throw Error(se(200));if(t==null||t._reactInternals===void 0)throw Error(se(38));return Aa(t,e,n,!1,i)};Tt.version="18.3.1-next-f1338f8080-20240426";function am(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(am)}catch(t){console.error(t)}}am(),ap.exports=Tt;var x_=ap.exports,nd=x_;Ll.createRoot=nd.createRoot,Ll.hydrateRoot=nd.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xs(){return xs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},xs.apply(this,arguments)}var jn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(jn||(jn={}));const id="popstate";function C_(t){t===void 0&&(t={});function e(i,c){let{pathname:v,search:w,hash:h}=i.location;return Pu("",{pathname:v,search:w,hash:h},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(i,c){return typeof c=="string"?c:oa(c)}return T_(e,n,null,t)}function We(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function lm(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function S_(){return Math.random().toString(36).substr(2,8)}function rd(t,e){return{usr:t.state,key:t.key,idx:e}}function Pu(t,e,n,i){return n===void 0&&(n=null),xs({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?pr(e):e,{state:n,key:e&&e.key||i||S_()})}function oa(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function pr(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function T_(t,e,n,i){i===void 0&&(i={});let{window:c=document.defaultView,v5Compat:v=!1}=i,w=c.history,h=jn.Pop,r=null,f=d();f==null&&(f=0,w.replaceState(xs({},w.state,{idx:f}),""));function d(){return(w.state||{idx:null}).idx}function o(){h=jn.Pop;let l=d(),g=l==null?null:l-f;f=l,r&&r({action:h,location:p.location,delta:g})}function a(l,g){h=jn.Push;let y=Pu(p.location,l,g);f=d()+1;let _=rd(y,f),x=p.createHref(y);try{w.pushState(_,"",x)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;c.location.assign(x)}v&&r&&r({action:h,location:p.location,delta:1})}function s(l,g){h=jn.Replace;let y=Pu(p.location,l,g);f=d();let _=rd(y,f),x=p.createHref(y);w.replaceState(_,"",x),v&&r&&r({action:h,location:p.location,delta:0})}function u(l){let g=c.location.origin!=="null"?c.location.origin:c.location.href,y=typeof l=="string"?l:oa(l);return y=y.replace(/ $/,"%20"),We(g,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,g)}let p={get action(){return h},get location(){return t(c,w)},listen(l){if(r)throw new Error("A history only accepts one active listener");return c.addEventListener(id,o),r=l,()=>{c.removeEventListener(id,o),r=null}},createHref(l){return e(c,l)},createURL:u,encodeLocation(l){let g=u(l);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:a,replace:s,go(l){return w.go(l)}};return p}var sd;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(sd||(sd={}));function E_(t,e,n){return n===void 0&&(n="/"),k_(t,e,n)}function k_(t,e,n,i){let c=typeof e=="string"?pr(e):e,v=Lc(c.pathname||"/",n);if(v==null)return null;let w=um(t);b_(w);let h=null;for(let r=0;h==null&&r<w.length;++r){let f=B_(v);h=L_(w[r],f)}return h}function um(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let c=(v,w,h)=>{let r={relativePath:h===void 0?v.path||"":h,caseSensitive:v.caseSensitive===!0,childrenIndex:w,route:v};r.relativePath.startsWith("/")&&(We(r.relativePath.startsWith(i),'Absolute route path "'+r.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),r.relativePath=r.relativePath.slice(i.length));let f=Vn([i,r.relativePath]),d=n.concat(r);v.children&&v.children.length>0&&(We(v.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),um(v.children,e,d,f)),!(v.path==null&&!v.index)&&e.push({path:f,score:M_(f,v.index),routesMeta:d})};return t.forEach((v,w)=>{var h;if(v.path===""||!((h=v.path)!=null&&h.includes("?")))c(v,w);else for(let r of cm(v.path))c(v,w,r)}),e}function cm(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,c=n.endsWith("?"),v=n.replace(/\?$/,"");if(i.length===0)return c?[v,""]:[v];let w=cm(i.join("/")),h=[];return h.push(...w.map(r=>r===""?v:[v,r].join("/"))),c&&h.push(...w),h.map(r=>t.startsWith("/")&&r===""?"/":r)}function b_(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:j_(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const O_=/^:[\w-]+$/,P_=3,I_=2,A_=1,D_=10,R_=-2,od=t=>t==="*";function M_(t,e){let n=t.split("/"),i=n.length;return n.some(od)&&(i+=R_),e&&(i+=I_),n.filter(c=>!od(c)).reduce((c,v)=>c+(O_.test(v)?P_:v===""?A_:D_),i)}function j_(t,e){return t.length===e.length&&t.slice(0,-1).every((i,c)=>i===e[c])?t[t.length-1]-e[e.length-1]:0}function L_(t,e,n){let{routesMeta:i}=t,c={},v="/",w=[];for(let h=0;h<i.length;++h){let r=i[h],f=h===i.length-1,d=v==="/"?e:e.slice(v.length)||"/",o=N_({path:r.relativePath,caseSensitive:r.caseSensitive,end:f},d),a=r.route;if(!o)return null;Object.assign(c,o.params),w.push({params:c,pathname:Vn([v,o.pathname]),pathnameBase:W_(Vn([v,o.pathnameBase])),route:a}),o.pathnameBase!=="/"&&(v=Vn([v,o.pathnameBase]))}return w}function N_(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=F_(t.path,t.caseSensitive,t.end),c=e.match(n);if(!c)return null;let v=c[0],w=v.replace(/(.)\/+$/,"$1"),h=c.slice(1);return{params:i.reduce((f,d,o)=>{let{paramName:a,isOptional:s}=d;if(a==="*"){let p=h[o]||"";w=v.slice(0,v.length-p.length).replace(/(.)\/+$/,"$1")}const u=h[o];return s&&!u?f[a]=void 0:f[a]=(u||"").replace(/%2F/g,"/"),f},{}),pathname:v,pathnameBase:w,pattern:t}}function F_(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),lm(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],c="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(w,h,r)=>(i.push({paramName:h,isOptional:r!=null}),r?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),c+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?c+="\\/*$":t!==""&&t!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,e?void 0:"i"),i]}function B_(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return lm(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Lc(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function U_(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:c=""}=typeof t=="string"?pr(t):t;return{pathname:n?n.startsWith("/")?n:z_(n,e):e,search:V_(i),hash:X_(c)}}function z_(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(c=>{c===".."?n.length>1&&n.pop():c!=="."&&n.push(c)}),n.length>1?n.join("/"):"/"}function kl(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function H_(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function hm(t,e){let n=H_(t);return e?n.map((i,c)=>c===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function fm(t,e,n,i){i===void 0&&(i=!1);let c;typeof t=="string"?c=pr(t):(c=xs({},t),We(!c.pathname||!c.pathname.includes("?"),kl("?","pathname","search",c)),We(!c.pathname||!c.pathname.includes("#"),kl("#","pathname","hash",c)),We(!c.search||!c.search.includes("#"),kl("#","search","hash",c)));let v=t===""||c.pathname==="",w=v?"/":c.pathname,h;if(w==null)h=n;else{let o=e.length-1;if(!i&&w.startsWith("..")){let a=w.split("/");for(;a[0]==="..";)a.shift(),o-=1;c.pathname=a.join("/")}h=o>=0?e[o]:"/"}let r=U_(c,h),f=w&&w!=="/"&&w.endsWith("/"),d=(v||w===".")&&n.endsWith("/");return!r.pathname.endsWith("/")&&(f||d)&&(r.pathname+="/"),r}const Vn=t=>t.join("/").replace(/\/\/+/g,"/"),W_=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),V_=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,X_=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Y_(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const dm=["post","put","patch","delete"];new Set(dm);const G_=["get",...dm];new Set(G_);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cs(){return Cs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Cs.apply(this,arguments)}const Nc=ae.createContext(null),$_=ae.createContext(null),Ei=ae.createContext(null),Da=ae.createContext(null),ki=ae.createContext({outlet:null,matches:[],isDataRoute:!1}),pm=ae.createContext(null);function K_(t,e){let{relative:n}=e===void 0?{}:e;Ds()||We(!1);let{basename:i,navigator:c}=ae.useContext(Ei),{hash:v,pathname:w,search:h}=mm(t,{relative:n}),r=w;return i!=="/"&&(r=w==="/"?i:Vn([i,w])),c.createHref({pathname:r,search:h,hash:v})}function Ds(){return ae.useContext(Da)!=null}function Rs(){return Ds()||We(!1),ae.useContext(Da).location}function gm(t){ae.useContext(Ei).static||ae.useLayoutEffect(t)}function Fc(){let{isDataRoute:t}=ae.useContext(ki);return t?lw():q_()}function q_(){Ds()||We(!1);let t=ae.useContext(Nc),{basename:e,future:n,navigator:i}=ae.useContext(Ei),{matches:c}=ae.useContext(ki),{pathname:v}=Rs(),w=JSON.stringify(hm(c,n.v7_relativeSplatPath)),h=ae.useRef(!1);return gm(()=>{h.current=!0}),ae.useCallback(function(f,d){if(d===void 0&&(d={}),!h.current)return;if(typeof f=="number"){i.go(f);return}let o=fm(f,JSON.parse(w),v,d.relative==="path");t==null&&e!=="/"&&(o.pathname=o.pathname==="/"?e:Vn([e,o.pathname])),(d.replace?i.replace:i.push)(o,d.state,d)},[e,i,w,v,t])}function mm(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=ae.useContext(Ei),{matches:c}=ae.useContext(ki),{pathname:v}=Rs(),w=JSON.stringify(hm(c,i.v7_relativeSplatPath));return ae.useMemo(()=>fm(t,JSON.parse(w),v,n==="path"),[t,w,v,n])}function J_(t,e){return Q_(t,e)}function Q_(t,e,n,i){Ds()||We(!1);let{navigator:c}=ae.useContext(Ei),{matches:v}=ae.useContext(ki),w=v[v.length-1],h=w?w.params:{};w&&w.pathname;let r=w?w.pathnameBase:"/";w&&w.route;let f=Rs(),d;if(e){var o;let l=typeof e=="string"?pr(e):e;r==="/"||(o=l.pathname)!=null&&o.startsWith(r)||We(!1),d=l}else d=f;let a=d.pathname||"/",s=a;if(r!=="/"){let l=r.replace(/^\//,"").split("/");s="/"+a.replace(/^\//,"").split("/").slice(l.length).join("/")}let u=E_(t,{pathname:s}),p=iw(u&&u.map(l=>Object.assign({},l,{params:Object.assign({},h,l.params),pathname:Vn([r,c.encodeLocation?c.encodeLocation(l.pathname).pathname:l.pathname]),pathnameBase:l.pathnameBase==="/"?r:Vn([r,c.encodeLocation?c.encodeLocation(l.pathnameBase).pathname:l.pathnameBase])})),v,n,i);return e&&p?ae.createElement(Da.Provider,{value:{location:Cs({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:jn.Pop}},p):p}function Z_(){let t=aw(),e=Y_(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ae.createElement(ae.Fragment,null,ae.createElement("h2",null,"Unexpected Application Error!"),ae.createElement("h3",{style:{fontStyle:"italic"}},e),n?ae.createElement("pre",{style:c},n):null,null)}const ew=ae.createElement(Z_,null);class tw extends ae.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?ae.createElement(ki.Provider,{value:this.props.routeContext},ae.createElement(pm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function nw(t){let{routeContext:e,match:n,children:i}=t,c=ae.useContext(Nc);return c&&c.static&&c.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=n.route.id),ae.createElement(ki.Provider,{value:e},i)}function iw(t,e,n,i){var c;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var v;if(!n)return null;if(n.errors)t=n.matches;else if((v=i)!=null&&v.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let w=t,h=(c=n)==null?void 0:c.errors;if(h!=null){let d=w.findIndex(o=>o.route.id&&(h==null?void 0:h[o.route.id])!==void 0);d>=0||We(!1),w=w.slice(0,Math.min(w.length,d+1))}let r=!1,f=-1;if(n&&i&&i.v7_partialHydration)for(let d=0;d<w.length;d++){let o=w[d];if((o.route.HydrateFallback||o.route.hydrateFallbackElement)&&(f=d),o.route.id){let{loaderData:a,errors:s}=n,u=o.route.loader&&a[o.route.id]===void 0&&(!s||s[o.route.id]===void 0);if(o.route.lazy||u){r=!0,f>=0?w=w.slice(0,f+1):w=[w[0]];break}}}return w.reduceRight((d,o,a)=>{let s,u=!1,p=null,l=null;n&&(s=h&&o.route.id?h[o.route.id]:void 0,p=o.route.errorElement||ew,r&&(f<0&&a===0?(uw("route-fallback"),u=!0,l=null):f===a&&(u=!0,l=o.route.hydrateFallbackElement||null)));let g=e.concat(w.slice(0,a+1)),y=()=>{let _;return s?_=p:u?_=l:o.route.Component?_=ae.createElement(o.route.Component,null):o.route.element?_=o.route.element:_=d,ae.createElement(nw,{match:o,routeContext:{outlet:d,matches:g,isDataRoute:n!=null},children:_})};return n&&(o.route.ErrorBoundary||o.route.errorElement||a===0)?ae.createElement(tw,{location:n.location,revalidation:n.revalidation,component:p,error:s,children:y(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):y()},null)}var vm=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(vm||{}),ym=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ym||{});function rw(t){let e=ae.useContext(Nc);return e||We(!1),e}function sw(t){let e=ae.useContext($_);return e||We(!1),e}function ow(t){let e=ae.useContext(ki);return e||We(!1),e}function _m(t){let e=ow(),n=e.matches[e.matches.length-1];return n.route.id||We(!1),n.route.id}function aw(){var t;let e=ae.useContext(pm),n=sw(),i=_m();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function lw(){let{router:t}=rw(vm.UseNavigateStable),e=_m(ym.UseNavigateStable),n=ae.useRef(!1);return gm(()=>{n.current=!0}),ae.useCallback(function(c,v){v===void 0&&(v={}),n.current&&(typeof c=="number"?t.navigate(c):t.navigate(c,Cs({fromRouteId:e},v)))},[t,e])}const ad={};function uw(t,e,n){ad[t]||(ad[t]=!0)}function cw(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function En(t){We(!1)}function hw(t){let{basename:e="/",children:n=null,location:i,navigationType:c=jn.Pop,navigator:v,static:w=!1,future:h}=t;Ds()&&We(!1);let r=e.replace(/^\/*/,"/"),f=ae.useMemo(()=>({basename:r,navigator:v,static:w,future:Cs({v7_relativeSplatPath:!1},h)}),[r,h,v,w]);typeof i=="string"&&(i=pr(i));let{pathname:d="/",search:o="",hash:a="",state:s=null,key:u="default"}=i,p=ae.useMemo(()=>{let l=Lc(d,r);return l==null?null:{location:{pathname:l,search:o,hash:a,state:s,key:u},navigationType:c}},[r,d,o,a,s,u,c]);return p==null?null:ae.createElement(Ei.Provider,{value:f},ae.createElement(Da.Provider,{children:n,value:p}))}function ld(t){let{children:e,location:n}=t;return J_(Iu(e),n)}new Promise(()=>{});function Iu(t,e){e===void 0&&(e=[]);let n=[];return ae.Children.forEach(t,(i,c)=>{if(!ae.isValidElement(i))return;let v=[...e,c];if(i.type===ae.Fragment){n.push.apply(n,Iu(i.props.children,v));return}i.type!==En&&We(!1),!i.props.index||!i.props.children||We(!1);let w={id:i.props.id||v.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(w.children=Iu(i.props.children,v)),n.push(w)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Au(){return Au=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Au.apply(this,arguments)}function fw(t,e){if(t==null)return{};var n={},i=Object.keys(t),c,v;for(v=0;v<i.length;v++)c=i[v],!(e.indexOf(c)>=0)&&(n[c]=t[c]);return n}function dw(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function pw(t,e){return t.button===0&&(!e||e==="_self")&&!dw(t)}const gw=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],mw="6";try{window.__reactRouterVersion=mw}catch{}const vw="startTransition",ud=cy[vw];function yw(t){let{basename:e,children:n,future:i,window:c}=t,v=ae.useRef();v.current==null&&(v.current=C_({window:c,v5Compat:!0}));let w=v.current,[h,r]=ae.useState({action:w.action,location:w.location}),{v7_startTransition:f}=i||{},d=ae.useCallback(o=>{f&&ud?ud(()=>r(o)):r(o)},[r,f]);return ae.useLayoutEffect(()=>w.listen(d),[w,d]),ae.useEffect(()=>cw(i),[i]),ae.createElement(hw,{basename:e,children:n,location:h.location,navigationType:h.action,navigator:w,future:i})}const _w=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ww=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ji=ae.forwardRef(function(e,n){let{onClick:i,relative:c,reloadDocument:v,replace:w,state:h,target:r,to:f,preventScrollReset:d,viewTransition:o}=e,a=fw(e,gw),{basename:s}=ae.useContext(Ei),u,p=!1;if(typeof f=="string"&&ww.test(f)&&(u=f,_w))try{let _=new URL(window.location.href),x=f.startsWith("//")?new URL(_.protocol+f):new URL(f),S=Lc(x.pathname,s);x.origin===_.origin&&S!=null?f=S+x.search+x.hash:p=!0}catch{}let l=K_(f,{relative:c}),g=xw(f,{replace:w,state:h,target:r,preventScrollReset:d,relative:c,viewTransition:o});function y(_){i&&i(_),_.defaultPrevented||g(_)}return ae.createElement("a",Au({},a,{href:u||l,onClick:p||v?i:y,ref:n,target:r}))});var cd;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(cd||(cd={}));var hd;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(hd||(hd={}));function xw(t,e){let{target:n,replace:i,state:c,preventScrollReset:v,relative:w,viewTransition:h}=e===void 0?{}:e,r=Fc(),f=Rs(),d=mm(t,{relative:w});return ae.useCallback(o=>{if(pw(o,n)){o.preventDefault();let a=i!==void 0?i:oa(f)===oa(d);r(t,{replace:a,state:c,preventScrollReset:v,relative:w,viewTransition:h})}},[f,r,d,i,c,n,t,v,w,h])}var fd={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let c=t.charCodeAt(i);c<128?e[n++]=c:c<2048?(e[n++]=c>>6|192,e[n++]=c&63|128):(c&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(c=65536+((c&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=c>>18|240,e[n++]=c>>12&63|128,e[n++]=c>>6&63|128,e[n++]=c&63|128):(e[n++]=c>>12|224,e[n++]=c>>6&63|128,e[n++]=c&63|128)}return e},Cw=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const c=t[n++];if(c<128)e[i++]=String.fromCharCode(c);else if(c>191&&c<224){const v=t[n++];e[i++]=String.fromCharCode((c&31)<<6|v&63)}else if(c>239&&c<365){const v=t[n++],w=t[n++],h=t[n++],r=((c&7)<<18|(v&63)<<12|(w&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(r>>10)),e[i++]=String.fromCharCode(56320+(r&1023))}else{const v=t[n++],w=t[n++];e[i++]=String.fromCharCode((c&15)<<12|(v&63)<<6|w&63)}}return e.join("")},xm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let c=0;c<t.length;c+=3){const v=t[c],w=c+1<t.length,h=w?t[c+1]:0,r=c+2<t.length,f=r?t[c+2]:0,d=v>>2,o=(v&3)<<4|h>>4;let a=(h&15)<<2|f>>6,s=f&63;r||(s=64,w||(a=64)),i.push(n[d],n[o],n[a],n[s])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(wm(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Cw(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let c=0;c<t.length;){const v=n[t.charAt(c++)],h=c<t.length?n[t.charAt(c)]:0;++c;const f=c<t.length?n[t.charAt(c)]:64;++c;const o=c<t.length?n[t.charAt(c)]:64;if(++c,v==null||h==null||f==null||o==null)throw new Sw;const a=v<<2|h>>4;if(i.push(a),f!==64){const s=h<<4&240|f>>2;if(i.push(s),o!==64){const u=f<<6&192|o;i.push(u)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Sw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Tw=function(t){const e=wm(t);return xm.encodeByteArray(e,!0)},aa=function(t){return Tw(t).replace(/\./g,"")},Cm=function(t){try{return xm.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw=()=>Ew().__FIREBASE_DEFAULTS__,bw=()=>{if(typeof process>"u"||typeof fd>"u")return;const t=fd.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Ow=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Cm(t[1]);return e&&JSON.parse(e)},Bc=()=>{try{return kw()||bw()||Ow()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Sm=t=>{var e,n;return(n=(e=Bc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Pw=t=>{const e=Sm(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Tm=()=>{var t;return(t=Bc())===null||t===void 0?void 0:t.config},Em=t=>{var e;return(e=Bc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",c=t.iat||0,v=t.sub||t.user_id;if(!v)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const w=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:c,exp:c+3600,auth_time:c,sub:v,user_id:v,firebase:{sign_in_provider:"custom",identities:{}}},t);return[aa(JSON.stringify(n)),aa(JSON.stringify(w)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Dw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ct())}function Rw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Mw(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function jw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Lw(){const t=ct();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Nw(){try{return typeof indexedDB=="object"}catch{return!1}}function Fw(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",c=self.indexedDB.open(i);c.onsuccess=()=>{c.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},c.onupgradeneeded=()=>{n=!1},c.onerror=()=>{var v;e(((v=c.error)===null||v===void 0?void 0:v.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw="FirebaseError";class yn extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=Bw,Object.setPrototypeOf(this,yn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ms.prototype.create)}}class Ms{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},c=`${this.service}/${e}`,v=this.errors[e],w=v?Uw(v,i):"Error",h=`${this.serviceName}: ${w} (${c}).`;return new yn(c,h,i)}}function Uw(t,e){return t.replace(zw,(n,i)=>{const c=e[i];return c!=null?String(c):`<${i}?>`})}const zw=/\{\$([^}]+)}/g;function Hw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function la(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const c of n){if(!i.includes(c))return!1;const v=t[c],w=e[c];if(dd(v)&&dd(w)){if(!la(v,w))return!1}else if(v!==w)return!1}for(const c of i)if(!n.includes(c))return!1;return!0}function dd(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(c=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(c))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Vr(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[c,v]=i.split("=");e[decodeURIComponent(c)]=decodeURIComponent(v)}}),e}function Xr(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Ww(t,e){const n=new Vw(t,e);return n.subscribe.bind(n)}class Vw{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let c;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");Xw(e,["next","error","complete"])?c=e:c={next:e,error:n,complete:i},c.next===void 0&&(c.next=bl),c.error===void 0&&(c.error=bl),c.complete===void 0&&(c.complete=bl);const v=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?c.error(this.finalError):c.complete()}catch{}}),this.observers.push(c),v}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Xw(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function bl(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(t){return t&&t._delegate?t._delegate:t}class wi{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Iw;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const c=this.getOrInitializeService({instanceIdentifier:n});c&&i.resolve(c)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),c=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(v){if(c)return null;throw v}else{if(c)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($w(e))try{this.getOrInitializeService({instanceIdentifier:li})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(n);try{const v=this.getOrInitializeService({instanceIdentifier:c});i.resolve(v)}catch{}}}}clearInstance(e=li){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=li){return this.instances.has(e)}getOptions(e=li){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const c=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[v,w]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(v);i===h&&w.resolve(c)}return c}onInit(e,n){var i;const c=this.normalizeInstanceIdentifier(n),v=(i=this.onInitCallbacks.get(c))!==null&&i!==void 0?i:new Set;v.add(e),this.onInitCallbacks.set(c,v);const w=this.instances.get(c);return w&&e(w,c),()=>{v.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const c of i)try{c(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Gw(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=li){return this.component?this.component.multipleInstances?e:li:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Gw(t){return t===li?void 0:t}function $w(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Yw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ke||(ke={}));const qw={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},Jw=ke.INFO,Qw={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},Zw=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),c=Qw[e];if(c)console[c](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Uc{constructor(e){this.name=e,this._logLevel=Jw,this._logHandler=Zw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const ex=(t,e)=>e.some(n=>t instanceof n);let pd,gd;function tx(){return pd||(pd=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nx(){return gd||(gd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const km=new WeakMap,Du=new WeakMap,bm=new WeakMap,Ol=new WeakMap,zc=new WeakMap;function ix(t){const e=new Promise((n,i)=>{const c=()=>{t.removeEventListener("success",v),t.removeEventListener("error",w)},v=()=>{n(Xn(t.result)),c()},w=()=>{i(t.error),c()};t.addEventListener("success",v),t.addEventListener("error",w)});return e.then(n=>{n instanceof IDBCursor&&km.set(n,t)}).catch(()=>{}),zc.set(e,t),e}function rx(t){if(Du.has(t))return;const e=new Promise((n,i)=>{const c=()=>{t.removeEventListener("complete",v),t.removeEventListener("error",w),t.removeEventListener("abort",w)},v=()=>{n(),c()},w=()=>{i(t.error||new DOMException("AbortError","AbortError")),c()};t.addEventListener("complete",v),t.addEventListener("error",w),t.addEventListener("abort",w)});Du.set(t,e)}let Ru={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Du.get(t);if(e==="objectStoreNames")return t.objectStoreNames||bm.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function sx(t){Ru=t(Ru)}function ox(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Pl(this),e,...n);return bm.set(i,e.sort?e.sort():[e]),Xn(i)}:nx().includes(t)?function(...e){return t.apply(Pl(this),e),Xn(km.get(this))}:function(...e){return Xn(t.apply(Pl(this),e))}}function ax(t){return typeof t=="function"?ox(t):(t instanceof IDBTransaction&&rx(t),ex(t,tx())?new Proxy(t,Ru):t)}function Xn(t){if(t instanceof IDBRequest)return ix(t);if(Ol.has(t))return Ol.get(t);const e=ax(t);return e!==t&&(Ol.set(t,e),zc.set(e,t)),e}const Pl=t=>zc.get(t);function lx(t,e,{blocked:n,upgrade:i,blocking:c,terminated:v}={}){const w=indexedDB.open(t,e),h=Xn(w);return i&&w.addEventListener("upgradeneeded",r=>{i(Xn(w.result),r.oldVersion,r.newVersion,Xn(w.transaction),r)}),n&&w.addEventListener("blocked",r=>n(r.oldVersion,r.newVersion,r)),h.then(r=>{v&&r.addEventListener("close",()=>v()),c&&r.addEventListener("versionchange",f=>c(f.oldVersion,f.newVersion,f))}).catch(()=>{}),h}const ux=["get","getKey","getAll","getAllKeys","count"],cx=["put","add","delete","clear"],Il=new Map;function md(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Il.get(e))return Il.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,c=cx.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(c||ux.includes(n)))return;const v=async function(w,...h){const r=this.transaction(w,c?"readwrite":"readonly");let f=r.store;return i&&(f=f.index(h.shift())),(await Promise.all([f[n](...h),c&&r.done]))[0]};return Il.set(e,v),v}sx(t=>({...t,get:(e,n,i)=>md(e,n)||t.get(e,n,i),has:(e,n)=>!!md(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(fx(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function fx(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Mu="@firebase/app",vd="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gn=new Uc("@firebase/app"),dx="@firebase/app-compat",px="@firebase/analytics-compat",gx="@firebase/analytics",mx="@firebase/app-check-compat",vx="@firebase/app-check",yx="@firebase/auth",_x="@firebase/auth-compat",wx="@firebase/database",xx="@firebase/data-connect",Cx="@firebase/database-compat",Sx="@firebase/functions",Tx="@firebase/functions-compat",Ex="@firebase/installations",kx="@firebase/installations-compat",bx="@firebase/messaging",Ox="@firebase/messaging-compat",Px="@firebase/performance",Ix="@firebase/performance-compat",Ax="@firebase/remote-config",Dx="@firebase/remote-config-compat",Rx="@firebase/storage",Mx="@firebase/storage-compat",jx="@firebase/firestore",Lx="@firebase/vertexai-preview",Nx="@firebase/firestore-compat",Fx="firebase",Bx="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ju="[DEFAULT]",Ux={[Mu]:"fire-core",[dx]:"fire-core-compat",[gx]:"fire-analytics",[px]:"fire-analytics-compat",[vx]:"fire-app-check",[mx]:"fire-app-check-compat",[yx]:"fire-auth",[_x]:"fire-auth-compat",[wx]:"fire-rtdb",[xx]:"fire-data-connect",[Cx]:"fire-rtdb-compat",[Sx]:"fire-fn",[Tx]:"fire-fn-compat",[Ex]:"fire-iid",[kx]:"fire-iid-compat",[bx]:"fire-fcm",[Ox]:"fire-fcm-compat",[Px]:"fire-perf",[Ix]:"fire-perf-compat",[Ax]:"fire-rc",[Dx]:"fire-rc-compat",[Rx]:"fire-gcs",[Mx]:"fire-gcs-compat",[jx]:"fire-fst",[Nx]:"fire-fst-compat",[Lx]:"fire-vertex","fire-js":"fire-js",[Fx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=new Map,zx=new Map,Lu=new Map;function yd(t,e){try{t.container.addComponent(e)}catch(n){gn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function lr(t){const e=t.name;if(Lu.has(e))return gn.debug(`There were multiple attempts to register component ${e}.`),!1;Lu.set(e,t);for(const n of ua.values())yd(n,t);for(const n of zx.values())yd(n,t);return!0}function Hc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Bt(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yn=new Ms("app","Firebase",Hx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new wi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr=Bx;function Om(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:ju,automaticDataCollectionEnabled:!1},e),c=i.name;if(typeof c!="string"||!c)throw Yn.create("bad-app-name",{appName:String(c)});if(n||(n=Tm()),!n)throw Yn.create("no-options");const v=ua.get(c);if(v){if(la(n,v.options)&&la(i,v.config))return v;throw Yn.create("duplicate-app",{appName:c})}const w=new Kw(c);for(const r of Lu.values())w.addComponent(r);const h=new Wx(n,i,w);return ua.set(c,h),h}function Pm(t=ju){const e=ua.get(t);if(!e&&t===ju&&Tm())return Om();if(!e)throw Yn.create("no-app",{appName:t});return e}function Gn(t,e,n){var i;let c=(i=Ux[t])!==null&&i!==void 0?i:t;n&&(c+=`-${n}`);const v=c.match(/\s|\//),w=e.match(/\s|\//);if(v||w){const h=[`Unable to register library "${c}" with version "${e}":`];v&&h.push(`library name "${c}" contains illegal characters (whitespace or "/")`),v&&w&&h.push("and"),w&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gn.warn(h.join(" "));return}lr(new wi(`${c}-version`,()=>({library:c,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx="firebase-heartbeat-database",Xx=1,Ss="firebase-heartbeat-store";let Al=null;function Im(){return Al||(Al=lx(Vx,Xx,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ss)}catch(n){console.warn(n)}}}}).catch(t=>{throw Yn.create("idb-open",{originalErrorMessage:t.message})})),Al}async function Yx(t){try{const n=(await Im()).transaction(Ss),i=await n.objectStore(Ss).get(Am(t));return await n.done,i}catch(e){if(e instanceof yn)gn.warn(e.message);else{const n=Yn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});gn.warn(n.message)}}}async function _d(t,e){try{const i=(await Im()).transaction(Ss,"readwrite");await i.objectStore(Ss).put(e,Am(t)),await i.done}catch(n){if(n instanceof yn)gn.warn(n.message);else{const i=Yn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});gn.warn(i.message)}}}function Am(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=1024,$x=30*24*60*60*1e3;class Kx{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Jx(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const c=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),v=wd();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===v||this._heartbeatsCache.heartbeats.some(w=>w.date===v)?void 0:(this._heartbeatsCache.heartbeats.push({date:v,agent:c}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(w=>{const h=new Date(w.date).valueOf();return Date.now()-h<=$x}),this._storage.overwrite(this._heartbeatsCache))}catch(i){gn.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=wd(),{heartbeatsToSend:i,unsentEntries:c}=qx(this._heartbeatsCache.heartbeats),v=aa(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,c.length>0?(this._heartbeatsCache.heartbeats=c,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),v}catch(n){return gn.warn(n),""}}}function wd(){return new Date().toISOString().substring(0,10)}function qx(t,e=Gx){const n=[];let i=t.slice();for(const c of t){const v=n.find(w=>w.agent===c.agent);if(v){if(v.dates.push(c.date),xd(n)>e){v.dates.pop();break}}else if(n.push({agent:c.agent,dates:[c.date]}),xd(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class Jx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Nw()?Fw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Yx(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const c=await this.read();return _d(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:c.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const c=await this.read();return _d(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:c.lastSentHeartbeatDate,heartbeats:[...c.heartbeats,...e.heartbeats]})}else return}}function xd(t){return aa(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qx(t){lr(new wi("platform-logger",e=>new hx(e),"PRIVATE")),lr(new wi("heartbeat",e=>new Kx(e),"PRIVATE")),Gn(Mu,vd,t),Gn(Mu,vd,"esm2017"),Gn("fire-js","")}Qx("");function Wc(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(t);c<i.length;c++)e.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(t,i[c])&&(n[i[c]]=t[i[c]]);return n}function Dm(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Zx=Dm,Rm=new Ms("auth","Firebase",Dm());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca=new Uc("@firebase/auth");function eC(t,...e){ca.logLevel<=ke.WARN&&ca.warn(`Auth (${gr}): ${t}`,...e)}function Do(t,...e){ca.logLevel<=ke.ERROR&&ca.error(`Auth (${gr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(t,...e){throw Xc(t,...e)}function Wt(t,...e){return Xc(t,...e)}function Vc(t,e,n){const i=Object.assign(Object.assign({},Zx()),{[e]:n});return new Ms("auth","Firebase",i).create(e,{appName:t.name})}function cn(t){return Vc(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tC(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Rt(t,"argument-error"),Vc(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xc(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return Rm.create(t,...e)}function ve(t,e,...n){if(!t)throw Xc(e,...n)}function on(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Do(e),new Error(e)}function mn(t,e){t||on(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function nC(){return Cd()==="http:"||Cd()==="https:"}function Cd(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nC()||Mw()||"connection"in navigator)?navigator.onLine:!0}function rC(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,n){this.shortDelay=e,this.longDelay=n,mn(n>e,"Short delay should be less than long delay!"),this.isMobile=Dw()||jw()}get(){return iC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(t,e){mn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;on("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;on("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;on("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC=new Ls(3e4,6e4);function Zn(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ei(t,e,n,i,c={}){return jm(t,c,async()=>{let v={},w={};i&&(e==="GET"?w=i:v={body:JSON.stringify(i)});const h=js(Object.assign({key:t.config.apiKey},w)).slice(1),r=await t._getAdditionalHeaders();r["Content-Type"]="application/json",t.languageCode&&(r["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:r},v);return Rw()||(f.referrerPolicy="no-referrer"),Mm.fetch()(Lm(t,t.config.apiHost,n,h),f)})}async function jm(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},sC),e);try{const c=new lC(t),v=await Promise.race([n(),c.promise]);c.clearNetworkTimeout();const w=await v.json();if("needConfirmation"in w)throw yo(t,"account-exists-with-different-credential",w);if(v.ok&&!("errorMessage"in w))return w;{const h=v.ok?w.errorMessage:w.error.message,[r,f]=h.split(" : ");if(r==="FEDERATED_USER_ID_ALREADY_LINKED")throw yo(t,"credential-already-in-use",w);if(r==="EMAIL_EXISTS")throw yo(t,"email-already-in-use",w);if(r==="USER_DISABLED")throw yo(t,"user-disabled",w);const d=i[r]||r.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw Vc(t,d,f);Rt(t,d)}}catch(c){if(c instanceof yn)throw c;Rt(t,"network-request-failed",{message:String(c)})}}async function Ns(t,e,n,i,c={}){const v=await ei(t,e,n,i,c);return"mfaPendingCredential"in v&&Rt(t,"multi-factor-auth-required",{_serverResponse:v}),v}function Lm(t,e,n,i){const c=`${e}${n}?${i}`;return t.config.emulator?Yc(t.config,c):`${t.config.apiScheme}://${c}`}function aC(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class lC{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Wt(this.auth,"network-request-failed")),oC.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function yo(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const c=Wt(t,e,i);return c.customData._tokenResponse=n,c}function Sd(t){return t!==void 0&&t.enterprise!==void 0}class uC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return aC(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function cC(t,e){return ei(t,"GET","/v2/recaptchaConfig",Zn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hC(t,e){return ei(t,"POST","/v1/accounts:delete",e)}async function Nm(t,e){return ei(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fC(t,e=!1){const n=_n(t),i=await n.getIdToken(e),c=Gc(i);ve(c&&c.exp&&c.auth_time&&c.iat,n.auth,"internal-error");const v=typeof c.firebase=="object"?c.firebase:void 0,w=v==null?void 0:v.sign_in_provider;return{claims:c,token:i,authTime:ts(Dl(c.auth_time)),issuedAtTime:ts(Dl(c.iat)),expirationTime:ts(Dl(c.exp)),signInProvider:w||null,signInSecondFactor:(v==null?void 0:v.sign_in_second_factor)||null}}function Dl(t){return Number(t)*1e3}function Gc(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Do("JWT malformed, contained fewer than 3 sections"),null;try{const c=Cm(n);return c?JSON.parse(c):(Do("Failed to decode base64 JWT payload"),null)}catch(c){return Do("Caught error parsing JWT payload as JSON",c==null?void 0:c.toString()),null}}function Td(t){const e=Gc(t);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ts(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof yn&&dC(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function dC({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const c=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,c)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ts(this.lastLoginAt),this.creationTime=ts(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ha(t){var e;const n=t.auth,i=await t.getIdToken(),c=await Ts(t,Nm(n,{idToken:i}));ve(c==null?void 0:c.users.length,n,"internal-error");const v=c.users[0];t._notifyReloadListener(v);const w=!((e=v.providerUserInfo)===null||e===void 0)&&e.length?Fm(v.providerUserInfo):[],h=mC(t.providerData,w),r=t.isAnonymous,f=!(t.email&&v.passwordHash)&&!(h!=null&&h.length),d=r?f:!1,o={uid:v.localId,displayName:v.displayName||null,photoURL:v.photoUrl||null,email:v.email||null,emailVerified:v.emailVerified||!1,phoneNumber:v.phoneNumber||null,tenantId:v.tenantId||null,providerData:h,metadata:new Fu(v.createdAt,v.lastLoginAt),isAnonymous:d};Object.assign(t,o)}async function gC(t){const e=_n(t);await ha(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mC(t,e){return[...t.filter(i=>!e.some(c=>c.providerId===i.providerId)),...e]}function Fm(t){return t.map(e=>{var{providerId:n}=e,i=Wc(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vC(t,e){const n=await jm(t,{},async()=>{const i=js({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:c,apiKey:v}=t.config,w=Lm(t,c,"/v1/token",`key=${v}`),h=await t._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",Mm.fetch()(w,{method:"POST",headers:h,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function yC(t,e){return ei(t,"POST","/v2/accounts:revokeToken",Zn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Td(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ve(e.length!==0,"internal-error");const n=Td(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:c,expiresIn:v}=await vC(e,n);this.updateTokensAndExpiration(i,c,Number(v))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:c,expirationTime:v}=n,w=new Qi;return i&&(ve(typeof i=="string","internal-error",{appName:e}),w.refreshToken=i),c&&(ve(typeof c=="string","internal-error",{appName:e}),w.accessToken=c),v&&(ve(typeof v=="number","internal-error",{appName:e}),w.expirationTime=v),w}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qi,this.toJSON())}_performRefresh(){return on("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(t,e){ve(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class an{constructor(e){var{uid:n,auth:i,stsTokenManager:c}=e,v=Wc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=c,this.accessToken=c.accessToken,this.displayName=v.displayName||null,this.email=v.email||null,this.emailVerified=v.emailVerified||!1,this.phoneNumber=v.phoneNumber||null,this.photoURL=v.photoURL||null,this.isAnonymous=v.isAnonymous||!1,this.tenantId=v.tenantId||null,this.providerData=v.providerData?[...v.providerData]:[],this.metadata=new Fu(v.createdAt||void 0,v.lastLoginAt||void 0)}async getIdToken(e){const n=await Ts(this,this.stsTokenManager.getToken(this.auth,e));return ve(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return fC(this,e)}reload(){return gC(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new an(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await ha(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Bt(this.auth.app))return Promise.reject(cn(this.auth));const e=await this.getIdToken();return await Ts(this,hC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,c,v,w,h,r,f,d;const o=(i=n.displayName)!==null&&i!==void 0?i:void 0,a=(c=n.email)!==null&&c!==void 0?c:void 0,s=(v=n.phoneNumber)!==null&&v!==void 0?v:void 0,u=(w=n.photoURL)!==null&&w!==void 0?w:void 0,p=(h=n.tenantId)!==null&&h!==void 0?h:void 0,l=(r=n._redirectEventId)!==null&&r!==void 0?r:void 0,g=(f=n.createdAt)!==null&&f!==void 0?f:void 0,y=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:_,emailVerified:x,isAnonymous:S,providerData:b,stsTokenManager:E}=n;ve(_&&E,e,"internal-error");const T=Qi.fromJSON(this.name,E);ve(typeof _=="string",e,"internal-error"),Tn(o,e.name),Tn(a,e.name),ve(typeof x=="boolean",e,"internal-error"),ve(typeof S=="boolean",e,"internal-error"),Tn(s,e.name),Tn(u,e.name),Tn(p,e.name),Tn(l,e.name),Tn(g,e.name),Tn(y,e.name);const O=new an({uid:_,auth:e,email:a,emailVerified:x,displayName:o,isAnonymous:S,photoURL:u,phoneNumber:s,tenantId:p,stsTokenManager:T,createdAt:g,lastLoginAt:y});return b&&Array.isArray(b)&&(O.providerData=b.map(A=>Object.assign({},A))),l&&(O._redirectEventId=l),O}static async _fromIdTokenResponse(e,n,i=!1){const c=new Qi;c.updateFromServerResponse(n);const v=new an({uid:n.localId,auth:e,stsTokenManager:c,isAnonymous:i});return await ha(v),v}static async _fromGetAccountInfoResponse(e,n,i){const c=n.users[0];ve(c.localId!==void 0,"internal-error");const v=c.providerUserInfo!==void 0?Fm(c.providerUserInfo):[],w=!(c.email&&c.passwordHash)&&!(v!=null&&v.length),h=new Qi;h.updateFromIdToken(i);const r=new an({uid:c.localId,auth:e,stsTokenManager:h,isAnonymous:w}),f={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:v,metadata:new Fu(c.createdAt,c.lastLoginAt),isAnonymous:!(c.email&&c.passwordHash)&&!(v!=null&&v.length)};return Object.assign(r,f),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed=new Map;function ln(t){mn(t instanceof Function,"Expected a class definition");let e=Ed.get(t);return e?(mn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ed.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Bm.type="NONE";const kd=Bm;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(t,e,n){return`firebase:${t}:${e}:${n}`}class Zi{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:c,name:v}=this.auth;this.fullUserKey=Ro(this.userKey,c.apiKey,v),this.fullPersistenceKey=Ro("persistence",c.apiKey,v),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?an._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Zi(ln(kd),e,i);const c=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let v=c[0]||ln(kd);const w=Ro(i,e.config.apiKey,e.name);let h=null;for(const f of n)try{const d=await f._get(w);if(d){const o=an._fromJSON(e,d);f!==v&&(h=o),v=f;break}}catch{}const r=c.filter(f=>f._shouldAllowMigration);return!v._shouldAllowMigration||!r.length?new Zi(v,e,i):(v=r[0],h&&await v._set(w,h.toJSON()),await Promise.all(n.map(async f=>{if(f!==v)try{await f._remove(w)}catch{}})),new Zi(v,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Wm(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Um(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Xm(e))return"Blackberry";if(Ym(e))return"Webos";if(zm(e))return"Safari";if((e.includes("chrome/")||Hm(e))&&!e.includes("edge/"))return"Chrome";if(Vm(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Um(t=ct()){return/firefox\//i.test(t)}function zm(t=ct()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Hm(t=ct()){return/crios\//i.test(t)}function Wm(t=ct()){return/iemobile/i.test(t)}function Vm(t=ct()){return/android/i.test(t)}function Xm(t=ct()){return/blackberry/i.test(t)}function Ym(t=ct()){return/webos/i.test(t)}function $c(t=ct()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function _C(t=ct()){var e;return $c(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function wC(){return Lw()&&document.documentMode===10}function Gm(t=ct()){return $c(t)||Vm(t)||Ym(t)||Xm(t)||/windows phone/i.test(t)||Wm(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(t,e=[]){let n;switch(t){case"Browser":n=bd(ct());break;case"Worker":n=`${bd(ct())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${gr}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=v=>new Promise((w,h)=>{try{const r=e(v);w(r)}catch(r){h(r)}});i.onAbort=n,this.queue.push(i);const c=this.queue.length-1;return()=>{this.queue[c]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const c of n)try{c()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CC(t,e={}){return ei(t,"GET","/v2/passwordPolicy",Zn(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC=6;class TC{constructor(e){var n,i,c,v;const w=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=w.minPasswordLength)!==null&&n!==void 0?n:SC,w.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=w.maxPasswordLength),w.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=w.containsLowercaseCharacter),w.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=w.containsUppercaseCharacter),w.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=w.containsNumericCharacter),w.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=w.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(c=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&c!==void 0?c:"",this.forceUpgradeOnSignin=(v=e.forceUpgradeOnSignin)!==null&&v!==void 0?v:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,c,v,w,h;const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=(n=r.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),r.isValid&&(r.isValid=(i=r.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),r.isValid&&(r.isValid=(c=r.containsLowercaseLetter)!==null&&c!==void 0?c:!0),r.isValid&&(r.isValid=(v=r.containsUppercaseLetter)!==null&&v!==void 0?v:!0),r.isValid&&(r.isValid=(w=r.containsNumericCharacter)!==null&&w!==void 0?w:!0),r.isValid&&(r.isValid=(h=r.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),r}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,c=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),c&&(n.meetsMaxPasswordLength=e.length<=c)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let c=0;c<e.length;c++)i=e.charAt(c),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,c,v){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=c)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,n,i,c){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=c,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Od(this),this.idTokenSubscription=new Od(this),this.beforeStateQueue=new xC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Rm,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=c.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ln(n)),this._initializationPromise=this.queue(async()=>{var i,c;if(!this._deleted&&(this.persistenceManager=await Zi.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Nm(this,{idToken:e}),i=await an._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Bt(this.app)){const w=this.app.settings.authIdToken;return w?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(w).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let c=i,v=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const w=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,h=c==null?void 0:c._redirectEventId,r=await this.tryRedirectSignIn(e);(!w||w===h)&&(r!=null&&r.user)&&(c=r.user,v=!0)}if(!c)return this.directlySetCurrentUser(null);if(!c._redirectEventId){if(v)try{await this.beforeStateQueue.runMiddleware(c)}catch(w){c=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(w))}return c?this.reloadAndSetCurrentUserOrClear(c):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===c._redirectEventId?this.directlySetCurrentUser(c):this.reloadAndSetCurrentUserOrClear(c)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ha(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Bt(this.app))return Promise.reject(cn(this));const n=e?_n(e):null;return n&&ve(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Bt(this.app)?Promise.reject(cn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Bt(this.app)?Promise.reject(cn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ln(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await CC(this),n=new TC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ms("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await yC(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ln(e)||this._popupRedirectResolver;ve(n,this,"argument-error"),this.redirectPersistenceManager=await Zi.create(this,[ln(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,c){if(this._deleted)return()=>{};const v=typeof n=="function"?n:n.next.bind(n);let w=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(h,this,"internal-error"),h.then(()=>{w||v(this.currentUser)}),typeof n=="function"){const r=e.addObserver(n,i,c);return()=>{w=!0,r()}}else{const r=e.addObserver(n);return()=>{w=!0,r()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$m(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const c=await this._getAppCheckToken();return c&&(n["X-Firebase-AppCheck"]=c),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&eC(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ti(t){return _n(t)}class Od{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ww(n=>this.observer=n)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ra={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kC(t){Ra=t}function Km(t){return Ra.loadJS(t)}function bC(){return Ra.recaptchaEnterpriseScript}function OC(){return Ra.gapiScript}function PC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const IC="recaptcha-enterprise",AC="NO_RECAPTCHA";class DC{constructor(e){this.type=IC,this.auth=ti(e)}async verify(e="verify",n=!1){async function i(v){if(!n){if(v.tenantId==null&&v._agentRecaptchaConfig!=null)return v._agentRecaptchaConfig.siteKey;if(v.tenantId!=null&&v._tenantRecaptchaConfigs[v.tenantId]!==void 0)return v._tenantRecaptchaConfigs[v.tenantId].siteKey}return new Promise(async(w,h)=>{cC(v,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(r.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const f=new uC(r);return v.tenantId==null?v._agentRecaptchaConfig=f:v._tenantRecaptchaConfigs[v.tenantId]=f,w(f.siteKey)}}).catch(r=>{h(r)})})}function c(v,w,h){const r=window.grecaptcha;Sd(r)?r.enterprise.ready(()=>{r.enterprise.execute(v,{action:e}).then(f=>{w(f)}).catch(()=>{w(AC)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((v,w)=>{i(this.auth).then(h=>{if(!n&&Sd(window.grecaptcha))c(h,v,w);else{if(typeof window>"u"){w(new Error("RecaptchaVerifier is only supported in browser"));return}let r=bC();r.length!==0&&(r+=h),Km(r).then(()=>{c(h,v,w)}).catch(f=>{w(f)})}}).catch(h=>{w(h)})})}}async function Pd(t,e,n,i=!1){const c=new DC(t);let v;try{v=await c.verify(n)}catch{v=await c.verify(n,!0)}const w=Object.assign({},e);return i?Object.assign(w,{captchaResp:v}):Object.assign(w,{captchaResponse:v}),Object.assign(w,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(w,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),w}async function Bu(t,e,n,i){var c;if(!((c=t._getRecaptchaConfig())===null||c===void 0)&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const v=await Pd(t,e,n,n==="getOobCode");return i(t,v)}else return i(t,e).catch(async v=>{if(v.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const w=await Pd(t,e,n,n==="getOobCode");return i(t,w)}else return Promise.reject(v)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(t,e){const n=Hc(t,"auth");if(n.isInitialized()){const c=n.getImmediate(),v=n.getOptions();if(la(v,e??{}))return c;Rt(c,"already-initialized")}return n.initialize({options:e})}function MC(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ln);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function jC(t,e,n){const i=ti(t);ve(i._canInitEmulator,i,"emulator-config-failed"),ve(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const c=!1,v=qm(e),{host:w,port:h}=LC(e),r=h===null?"":`:${h}`;i.config.emulator={url:`${v}//${w}${r}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:w,port:h,protocol:v.replace(":",""),options:Object.freeze({disableWarnings:c})}),NC()}function qm(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function LC(t){const e=qm(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",c=/^(\[[^\]]+\])(:|$)/.exec(i);if(c){const v=c[1];return{host:v,port:Id(i.substr(v.length+1))}}else{const[v,w]=i.split(":");return{host:v,port:Id(w)}}}function Id(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function NC(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return on("not implemented")}_getIdTokenResponse(e){return on("not implemented")}_linkToIdToken(e,n){return on("not implemented")}_getReauthenticationResolver(e){return on("not implemented")}}async function FC(t,e){return ei(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BC(t,e){return Ns(t,"POST","/v1/accounts:signInWithPassword",Zn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UC(t,e){return Ns(t,"POST","/v1/accounts:signInWithEmailLink",Zn(t,e))}async function zC(t,e){return Ns(t,"POST","/v1/accounts:signInWithEmailLink",Zn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends Kc{constructor(e,n,i,c=null){super("password",i),this._email=e,this._password=n,this._tenantId=c}static _fromEmailAndPassword(e,n){return new Es(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Es(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bu(e,n,"signInWithPassword",BC);case"emailLink":return UC(e,{email:this._email,oobCode:this._password});default:Rt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bu(e,i,"signUpPassword",FC);case"emailLink":return zC(e,{idToken:n,email:this._email,oobCode:this._password});default:Rt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function er(t,e){return Ns(t,"POST","/v1/accounts:signInWithIdp",Zn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC="http://localhost";class xi extends Kc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new xi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Rt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:c}=n,v=Wc(n,["providerId","signInMethod"]);if(!i||!c)return null;const w=new xi(i,c);return w.idToken=v.idToken||void 0,w.accessToken=v.accessToken||void 0,w.secret=v.secret,w.nonce=v.nonce,w.pendingToken=v.pendingToken||null,w}_getIdTokenResponse(e){const n=this.buildRequest();return er(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,er(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,er(e,n)}buildRequest(){const e={requestUri:HC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=js(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WC(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function VC(t){const e=Vr(Xr(t)).link,n=e?Vr(Xr(e)).deep_link_id:null,i=Vr(Xr(t)).deep_link_id;return(i?Vr(Xr(i)).link:null)||i||n||e||t}class qc{constructor(e){var n,i,c,v,w,h;const r=Vr(Xr(e)),f=(n=r.apiKey)!==null&&n!==void 0?n:null,d=(i=r.oobCode)!==null&&i!==void 0?i:null,o=WC((c=r.mode)!==null&&c!==void 0?c:null);ve(f&&d&&o,"argument-error"),this.apiKey=f,this.operation=o,this.code=d,this.continueUrl=(v=r.continueUrl)!==null&&v!==void 0?v:null,this.languageCode=(w=r.languageCode)!==null&&w!==void 0?w:null,this.tenantId=(h=r.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const n=VC(e);try{return new qc(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(){this.providerId=mr.PROVIDER_ID}static credential(e,n){return Es._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=qc.parseLink(n);return ve(i,"argument-error"),Es._fromEmailAndCode(e,i.code,i.tenantId)}}mr.PROVIDER_ID="password";mr.EMAIL_PASSWORD_SIGN_IN_METHOD="password";mr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends Jc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In extends Fs{constructor(){super("facebook.com")}static credential(e){return xi._fromParams({providerId:In.PROVIDER_ID,signInMethod:In.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return In.credentialFromTaggedObject(e)}static credentialFromError(e){return In.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return In.credential(e.oauthAccessToken)}catch{return null}}}In.FACEBOOK_SIGN_IN_METHOD="facebook.com";In.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn extends Fs{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return xi._fromParams({providerId:nn.PROVIDER_ID,signInMethod:nn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return nn.credentialFromTaggedObject(e)}static credentialFromError(e){return nn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return nn.credential(n,i)}catch{return null}}}nn.GOOGLE_SIGN_IN_METHOD="google.com";nn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An extends Fs{constructor(){super("github.com")}static credential(e){return xi._fromParams({providerId:An.PROVIDER_ID,signInMethod:An.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return An.credentialFromTaggedObject(e)}static credentialFromError(e){return An.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return An.credential(e.oauthAccessToken)}catch{return null}}}An.GITHUB_SIGN_IN_METHOD="github.com";An.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn extends Fs{constructor(){super("twitter.com")}static credential(e,n){return xi._fromParams({providerId:Dn.PROVIDER_ID,signInMethod:Dn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Dn.credentialFromTaggedObject(e)}static credentialFromError(e){return Dn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Dn.credential(n,i)}catch{return null}}}Dn.TWITTER_SIGN_IN_METHOD="twitter.com";Dn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XC(t,e){return Ns(t,"POST","/v1/accounts:signUp",Zn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,c=!1){const v=await an._fromIdTokenResponse(e,i,c),w=Ad(i);return new Ci({user:v,providerId:w,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const c=Ad(i);return new Ci({user:e,providerId:c,_tokenResponse:i,operationType:n})}}function Ad(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa extends yn{constructor(e,n,i,c){var v;super(n.code,n.message),this.operationType=i,this.user=c,Object.setPrototypeOf(this,fa.prototype),this.customData={appName:e.name,tenantId:(v=e.tenantId)!==null&&v!==void 0?v:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,c){return new fa(e,n,i,c)}}function Jm(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(v=>{throw v.code==="auth/multi-factor-auth-required"?fa._fromErrorAndOperation(t,v,e,i):v})}async function YC(t,e,n=!1){const i=await Ts(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ci._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GC(t,e,n=!1){const{auth:i}=t;if(Bt(i.app))return Promise.reject(cn(i));const c="reauthenticate";try{const v=await Ts(t,Jm(i,c,e,t),n);ve(v.idToken,i,"internal-error");const w=Gc(v.idToken);ve(w,i,"internal-error");const{sub:h}=w;return ve(t.uid===h,i,"user-mismatch"),Ci._forOperation(t,c,v)}catch(v){throw(v==null?void 0:v.code)==="auth/user-not-found"&&Rt(i,"user-mismatch"),v}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qm(t,e,n=!1){if(Bt(t.app))return Promise.reject(cn(t));const i="signIn",c=await Jm(t,i,e),v=await Ci._fromIdTokenResponse(t,i,c);return n||await t._updateCurrentUser(v.user),v}async function $C(t,e){return Qm(ti(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zm(t){const e=ti(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function KC(t,e,n){if(Bt(t.app))return Promise.reject(cn(t));const i=ti(t),w=await Bu(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",XC).catch(r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Zm(t),r}),h=await Ci._fromIdTokenResponse(i,"signIn",w);return await i._updateCurrentUser(h.user),h}function qC(t,e,n){return Bt(t.app)?Promise.reject(cn(t)):$C(_n(t),mr.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Zm(t),i})}function JC(t,e,n,i){return _n(t).onIdTokenChanged(e,n,i)}function QC(t,e,n){return _n(t).beforeAuthStateChanged(e,n)}function ZC(t,e,n,i){return _n(t).onAuthStateChanged(e,n,i)}function eS(t){return _n(t).signOut()}const da="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(da,"1"),this.storage.removeItem(da),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS=1e3,nS=10;class tv extends ev{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Gm(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),c=this.localCache[n];i!==c&&e(n,c,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((w,h,r)=>{this.notifyListeners(w,r)});return}const i=e.key;n?this.detachListener():this.stopPolling();const c=()=>{const w=this.storage.getItem(i);!n&&this.localCache[i]===w||this.notifyListeners(i,w)},v=this.storage.getItem(i);wC()&&v!==e.newValue&&e.newValue!==e.oldValue?setTimeout(c,nS):c()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const c of Array.from(i))c(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},tS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}tv.type="LOCAL";const iS=tv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv extends ev{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}nv.type="SESSION";const iv=nv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(c=>c.isListeningto(e));if(n)return n;const i=new Ma(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:c,data:v}=n.data,w=this.handlersMap[c];if(!(w!=null&&w.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:c});const h=Array.from(w).map(async f=>f(n.origin,v)),r=await rS(h);n.ports[0].postMessage({status:"done",eventId:i,eventType:c,response:r})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ma.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qc(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const c=typeof MessageChannel<"u"?new MessageChannel:null;if(!c)throw new Error("connection_unavailable");let v,w;return new Promise((h,r)=>{const f=Qc("",20);c.port1.start();const d=setTimeout(()=>{r(new Error("unsupported_event"))},i);w={messageChannel:c,onMessage(o){const a=o;if(a.data.eventId===f)switch(a.data.status){case"ack":clearTimeout(d),v=setTimeout(()=>{r(new Error("timeout"))},3e3);break;case"done":clearTimeout(v),h(a.data.response);break;default:clearTimeout(d),clearTimeout(v),r(new Error("invalid_response"));break}}},this.handlers.add(w),c.port1.addEventListener("message",w.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[c.port2])}).finally(()=>{w&&this.removeMessageHandler(w)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(){return window}function oS(t){Jt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(){return typeof Jt().WorkerGlobalScope<"u"&&typeof Jt().importScripts=="function"}async function aS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function lS(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function uS(){return rv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="firebaseLocalStorageDb",cS=1,pa="firebaseLocalStorage",ov="fbase_key";class Bs{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ja(t,e){return t.transaction([pa],e?"readwrite":"readonly").objectStore(pa)}function hS(){const t=indexedDB.deleteDatabase(sv);return new Bs(t).toPromise()}function Uu(){const t=indexedDB.open(sv,cS);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(pa,{keyPath:ov})}catch(c){n(c)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(pa)?e(i):(i.close(),await hS(),e(await Uu()))})})}async function Dd(t,e,n){const i=ja(t,!0).put({[ov]:e,value:n});return new Bs(i).toPromise()}async function fS(t,e){const n=ja(t,!1).get(e),i=await new Bs(n).toPromise();return i===void 0?null:i.value}function Rd(t,e){const n=ja(t,!0).delete(e);return new Bs(n).toPromise()}const dS=800,pS=3;class av{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Uu(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>pS)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ma._getInstance(uS()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await aS(),!this.activeServiceWorker)return;this.sender=new sS(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||lS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Uu();return await Dd(e,da,"1"),await Rd(e,da),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Dd(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>fS(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Rd(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(c=>{const v=ja(c,!1).getAll();return new Bs(v).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:c,value:v}of e)i.add(c),JSON.stringify(this.localCache[c])!==JSON.stringify(v)&&(this.notifyListeners(c,v),n.push(c));for(const c of Object.keys(this.localCache))this.localCache[c]&&!i.has(c)&&(this.notifyListeners(c,null),n.push(c));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const c of Array.from(i))c(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}av.type="LOCAL";const gS=av;new Ls(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(t,e){return e?ln(e):(ve(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc extends Kc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return er(e,this._buildIdpRequest())}_linkToIdToken(e,n){return er(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return er(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function mS(t){return Qm(t.auth,new Zc(t),t.bypassAuthState)}function vS(t){const{auth:e,user:n}=t;return ve(n,e,"internal-error"),GC(n,new Zc(t),t.bypassAuthState)}async function yS(t){const{auth:e,user:n}=t;return ve(n,e,"internal-error"),YC(n,new Zc(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e,n,i,c,v=!1){this.auth=e,this.resolver=i,this.user=c,this.bypassAuthState=v,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:c,tenantId:v,error:w,type:h}=e;if(w){this.reject(w);return}const r={auth:this.auth,requestUri:n,sessionId:i,tenantId:v||void 0,postBody:c||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(r))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mS;case"linkViaPopup":case"linkViaRedirect":return yS;case"reauthViaPopup":case"reauthViaRedirect":return vS;default:Rt(this.auth,"internal-error")}}resolve(e){mn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S=new Ls(2e3,1e4);async function wS(t,e,n){if(Bt(t.app))return Promise.reject(Wt(t,"operation-not-supported-in-this-environment"));const i=ti(t);tC(t,e,Jc);const c=lv(i,n);return new fi(i,"signInViaPopup",e,c).executeNotNull()}class fi extends uv{constructor(e,n,i,c,v){super(e,n,c,v),this.provider=i,this.authWindow=null,this.pollId=null,fi.currentPopupAction&&fi.currentPopupAction.cancel(),fi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ve(e,this.auth,"internal-error"),e}async onExecution(){mn(this.filter.length===1,"Popup operations only handle one event");const e=Qc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Wt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Wt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Wt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_S.get())};e()}}fi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="pendingRedirect",Mo=new Map;class CS extends uv{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Mo.get(this.auth._key());if(!e){try{const i=await SS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Mo.set(this.auth._key(),e)}return this.bypassAuthState||Mo.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function SS(t,e){const n=kS(e),i=ES(t);if(!await i._isAvailable())return!1;const c=await i._get(n)==="true";return await i._remove(n),c}function TS(t,e){Mo.set(t._key(),e)}function ES(t){return ln(t._redirectPersistence)}function kS(t){return Ro(xS,t.config.apiKey,t.name)}async function bS(t,e,n=!1){if(Bt(t.app))return Promise.reject(cn(t));const i=ti(t),c=lv(i,e),w=await new CS(i,c,n).execute();return w&&!n&&(delete w.user._redirectEventId,await i._persistUserIfCurrent(w.user),await i._setRedirectUser(null,e)),w}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS=10*60*1e3;class PS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!IS(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!cv(e)){const c=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Wt(this.auth,c))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=OS&&this.cachedEventUids.clear(),this.cachedEventUids.has(Md(e))}saveEventToCache(e){this.cachedEventUids.add(Md(e)),this.lastProcessedEventTime=Date.now()}}function Md(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function cv({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function IS(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cv(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AS(t,e={}){return ei(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,RS=/^https?/;async function MS(t){if(t.config.emulator)return;const{authorizedDomains:e}=await AS(t);for(const n of e)try{if(jS(n))return}catch{}Rt(t,"unauthorized-domain")}function jS(t){const e=Nu(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const w=new URL(t);return w.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&w.hostname===i}if(!RS.test(n))return!1;if(DS.test(t))return i===t;const c=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+c+"|"+c+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS=new Ls(3e4,6e4);function jd(){const t=Jt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function NS(t){return new Promise((e,n)=>{var i,c,v;function w(){jd(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{jd(),n(Wt(t,"network-request-failed"))},timeout:LS.get()})}if(!((c=(i=Jt().gapi)===null||i===void 0?void 0:i.iframes)===null||c===void 0)&&c.Iframe)e(gapi.iframes.getContext());else if(!((v=Jt().gapi)===null||v===void 0)&&v.load)w();else{const h=PC("iframefcb");return Jt()[h]=()=>{gapi.load?w():n(Wt(t,"network-request-failed"))},Km(`${OC()}?onload=${h}`).catch(r=>n(r))}}).catch(e=>{throw jo=null,e})}let jo=null;function FS(t){return jo=jo||NS(t),jo}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS=new Ls(5e3,15e3),US="__/auth/iframe",zS="emulator/auth/iframe",HS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},WS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function VS(t){const e=t.config;ve(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Yc(e,zS):`https://${t.config.authDomain}/${US}`,i={apiKey:e.apiKey,appName:t.name,v:gr},c=WS.get(t.config.apiHost);c&&(i.eid=c);const v=t._getFrameworks();return v.length&&(i.fw=v.join(",")),`${n}?${js(i).slice(1)}`}async function XS(t){const e=await FS(t),n=Jt().gapi;return ve(n,t,"internal-error"),e.open({where:document.body,url:VS(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:HS,dontclear:!0},i=>new Promise(async(c,v)=>{await i.restyle({setHideOnLeave:!1});const w=Wt(t,"network-request-failed"),h=Jt().setTimeout(()=>{v(w)},BS.get());function r(){Jt().clearTimeout(h),c(i)}i.ping(r).then(r,()=>{v(w)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},GS=500,$S=600,KS="_blank",qS="http://localhost";class Ld{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function JS(t,e,n,i=GS,c=$S){const v=Math.max((window.screen.availHeight-c)/2,0).toString(),w=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const r=Object.assign(Object.assign({},YS),{width:i.toString(),height:c.toString(),top:v,left:w}),f=ct().toLowerCase();n&&(h=Hm(f)?KS:n),Um(f)&&(e=e||qS,r.scrollbars="yes");const d=Object.entries(r).reduce((a,[s,u])=>`${a}${s}=${u},`,"");if(_C(f)&&h!=="_self")return QS(e||"",h),new Ld(null);const o=window.open(e||"",h,d);ve(o,t,"popup-blocked");try{o.focus()}catch{}return new Ld(o)}function QS(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS="__/auth/handler",e1="emulator/auth/handler",t1=encodeURIComponent("fac");async function Nd(t,e,n,i,c,v){ve(t.config.authDomain,t,"auth-domain-config-required"),ve(t.config.apiKey,t,"invalid-api-key");const w={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:gr,eventId:c};if(e instanceof Jc){e.setDefaultLanguage(t.languageCode),w.providerId=e.providerId||"",Hw(e.getCustomParameters())||(w.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,o]of Object.entries({}))w[d]=o}if(e instanceof Fs){const d=e.getScopes().filter(o=>o!=="");d.length>0&&(w.scopes=d.join(","))}t.tenantId&&(w.tid=t.tenantId);const h=w;for(const d of Object.keys(h))h[d]===void 0&&delete h[d];const r=await t._getAppCheckToken(),f=r?`#${t1}=${encodeURIComponent(r)}`:"";return`${n1(t)}?${js(h).slice(1)}${f}`}function n1({config:t}){return t.emulator?Yc(t,e1):`https://${t.authDomain}/${ZS}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rl="webStorageSupport";class i1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=iv,this._completeRedirectFn=bS,this._overrideRedirectResult=TS}async _openPopup(e,n,i,c){var v;mn((v=this.eventManagers[e._key()])===null||v===void 0?void 0:v.manager,"_initialize() not called before _openPopup()");const w=await Nd(e,n,i,Nu(),c);return JS(e,w,Qc())}async _openRedirect(e,n,i,c){await this._originValidation(e);const v=await Nd(e,n,i,Nu(),c);return oS(v),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:c,promise:v}=this.eventManagers[n];return c?Promise.resolve(c):(mn(v,"If manager is not set, promise should be"),v)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await XS(e),i=new PS(e);return n.register("authEvent",c=>(ve(c==null?void 0:c.authEvent,e,"invalid-auth-event"),{status:i.onEvent(c.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Rl,{type:Rl},c=>{var v;const w=(v=c==null?void 0:c[0])===null||v===void 0?void 0:v[Rl];w!==void 0&&n(!!w),Rt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=MS(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Gm()||zm()||$c()}}const r1=i1;var Fd="@firebase/auth",Bd="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function a1(t){lr(new wi("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),c=e.getProvider("heartbeat"),v=e.getProvider("app-check-internal"),{apiKey:w,authDomain:h}=i.options;ve(w&&!w.includes(":"),"invalid-api-key",{appName:i.name});const r={apiKey:w,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$m(t)},f=new EC(i,c,v,r);return MC(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),lr(new wi("auth-internal",e=>{const n=ti(e.getProvider("auth").getImmediate());return(i=>new s1(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gn(Fd,Bd,o1(t)),Gn(Fd,Bd,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1=5*60,u1=Em("authIdTokenMaxAge")||l1;let Ud=null;const c1=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>u1)return;const c=n==null?void 0:n.token;Ud!==c&&(Ud=c,await fetch(t,{method:c?"POST":"DELETE",headers:c?{Authorization:`Bearer ${c}`}:{}}))};function h1(t=Pm()){const e=Hc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=RC(t,{popupRedirectResolver:r1,persistence:[gS,iS,iv]}),i=Em("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const v=new URL(i,location.origin);if(location.origin===v.origin){const w=c1(v.toString());QC(n,w,()=>w(n.currentUser)),JC(n,h=>w(h))}}const c=Sm("auth");return c&&jC(n,`http://${c}`),n}function f1(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}kC({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=c=>{const v=Wt("internal-error");v.customData=c,n(v)},i.type="text/javascript",i.charset="UTF-8",f1().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});a1("Browser");var d1="firebase",p1="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gn(d1,p1,"app");var zd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,T){function O(){}O.prototype=T.prototype,E.D=T.prototype,E.prototype=new O,E.prototype.constructor=E,E.C=function(A,j,U){for(var M=Array(arguments.length-2),re=2;re<arguments.length;re++)M[re-2]=arguments[re];return T.prototype[j].apply(A,M)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function c(E,T,O){O||(O=0);var A=Array(16);if(typeof T=="string")for(var j=0;16>j;++j)A[j]=T.charCodeAt(O++)|T.charCodeAt(O++)<<8|T.charCodeAt(O++)<<16|T.charCodeAt(O++)<<24;else for(j=0;16>j;++j)A[j]=T[O++]|T[O++]<<8|T[O++]<<16|T[O++]<<24;T=E.g[0],O=E.g[1],j=E.g[2];var U=E.g[3],M=T+(U^O&(j^U))+A[0]+3614090360&4294967295;T=O+(M<<7&4294967295|M>>>25),M=U+(j^T&(O^j))+A[1]+3905402710&4294967295,U=T+(M<<12&4294967295|M>>>20),M=j+(O^U&(T^O))+A[2]+606105819&4294967295,j=U+(M<<17&4294967295|M>>>15),M=O+(T^j&(U^T))+A[3]+3250441966&4294967295,O=j+(M<<22&4294967295|M>>>10),M=T+(U^O&(j^U))+A[4]+4118548399&4294967295,T=O+(M<<7&4294967295|M>>>25),M=U+(j^T&(O^j))+A[5]+1200080426&4294967295,U=T+(M<<12&4294967295|M>>>20),M=j+(O^U&(T^O))+A[6]+2821735955&4294967295,j=U+(M<<17&4294967295|M>>>15),M=O+(T^j&(U^T))+A[7]+4249261313&4294967295,O=j+(M<<22&4294967295|M>>>10),M=T+(U^O&(j^U))+A[8]+1770035416&4294967295,T=O+(M<<7&4294967295|M>>>25),M=U+(j^T&(O^j))+A[9]+2336552879&4294967295,U=T+(M<<12&4294967295|M>>>20),M=j+(O^U&(T^O))+A[10]+4294925233&4294967295,j=U+(M<<17&4294967295|M>>>15),M=O+(T^j&(U^T))+A[11]+2304563134&4294967295,O=j+(M<<22&4294967295|M>>>10),M=T+(U^O&(j^U))+A[12]+1804603682&4294967295,T=O+(M<<7&4294967295|M>>>25),M=U+(j^T&(O^j))+A[13]+4254626195&4294967295,U=T+(M<<12&4294967295|M>>>20),M=j+(O^U&(T^O))+A[14]+2792965006&4294967295,j=U+(M<<17&4294967295|M>>>15),M=O+(T^j&(U^T))+A[15]+1236535329&4294967295,O=j+(M<<22&4294967295|M>>>10),M=T+(j^U&(O^j))+A[1]+4129170786&4294967295,T=O+(M<<5&4294967295|M>>>27),M=U+(O^j&(T^O))+A[6]+3225465664&4294967295,U=T+(M<<9&4294967295|M>>>23),M=j+(T^O&(U^T))+A[11]+643717713&4294967295,j=U+(M<<14&4294967295|M>>>18),M=O+(U^T&(j^U))+A[0]+3921069994&4294967295,O=j+(M<<20&4294967295|M>>>12),M=T+(j^U&(O^j))+A[5]+3593408605&4294967295,T=O+(M<<5&4294967295|M>>>27),M=U+(O^j&(T^O))+A[10]+38016083&4294967295,U=T+(M<<9&4294967295|M>>>23),M=j+(T^O&(U^T))+A[15]+3634488961&4294967295,j=U+(M<<14&4294967295|M>>>18),M=O+(U^T&(j^U))+A[4]+3889429448&4294967295,O=j+(M<<20&4294967295|M>>>12),M=T+(j^U&(O^j))+A[9]+568446438&4294967295,T=O+(M<<5&4294967295|M>>>27),M=U+(O^j&(T^O))+A[14]+3275163606&4294967295,U=T+(M<<9&4294967295|M>>>23),M=j+(T^O&(U^T))+A[3]+4107603335&4294967295,j=U+(M<<14&4294967295|M>>>18),M=O+(U^T&(j^U))+A[8]+1163531501&4294967295,O=j+(M<<20&4294967295|M>>>12),M=T+(j^U&(O^j))+A[13]+2850285829&4294967295,T=O+(M<<5&4294967295|M>>>27),M=U+(O^j&(T^O))+A[2]+4243563512&4294967295,U=T+(M<<9&4294967295|M>>>23),M=j+(T^O&(U^T))+A[7]+1735328473&4294967295,j=U+(M<<14&4294967295|M>>>18),M=O+(U^T&(j^U))+A[12]+2368359562&4294967295,O=j+(M<<20&4294967295|M>>>12),M=T+(O^j^U)+A[5]+4294588738&4294967295,T=O+(M<<4&4294967295|M>>>28),M=U+(T^O^j)+A[8]+2272392833&4294967295,U=T+(M<<11&4294967295|M>>>21),M=j+(U^T^O)+A[11]+1839030562&4294967295,j=U+(M<<16&4294967295|M>>>16),M=O+(j^U^T)+A[14]+4259657740&4294967295,O=j+(M<<23&4294967295|M>>>9),M=T+(O^j^U)+A[1]+2763975236&4294967295,T=O+(M<<4&4294967295|M>>>28),M=U+(T^O^j)+A[4]+1272893353&4294967295,U=T+(M<<11&4294967295|M>>>21),M=j+(U^T^O)+A[7]+4139469664&4294967295,j=U+(M<<16&4294967295|M>>>16),M=O+(j^U^T)+A[10]+3200236656&4294967295,O=j+(M<<23&4294967295|M>>>9),M=T+(O^j^U)+A[13]+681279174&4294967295,T=O+(M<<4&4294967295|M>>>28),M=U+(T^O^j)+A[0]+3936430074&4294967295,U=T+(M<<11&4294967295|M>>>21),M=j+(U^T^O)+A[3]+3572445317&4294967295,j=U+(M<<16&4294967295|M>>>16),M=O+(j^U^T)+A[6]+76029189&4294967295,O=j+(M<<23&4294967295|M>>>9),M=T+(O^j^U)+A[9]+3654602809&4294967295,T=O+(M<<4&4294967295|M>>>28),M=U+(T^O^j)+A[12]+3873151461&4294967295,U=T+(M<<11&4294967295|M>>>21),M=j+(U^T^O)+A[15]+530742520&4294967295,j=U+(M<<16&4294967295|M>>>16),M=O+(j^U^T)+A[2]+3299628645&4294967295,O=j+(M<<23&4294967295|M>>>9),M=T+(j^(O|~U))+A[0]+4096336452&4294967295,T=O+(M<<6&4294967295|M>>>26),M=U+(O^(T|~j))+A[7]+1126891415&4294967295,U=T+(M<<10&4294967295|M>>>22),M=j+(T^(U|~O))+A[14]+2878612391&4294967295,j=U+(M<<15&4294967295|M>>>17),M=O+(U^(j|~T))+A[5]+4237533241&4294967295,O=j+(M<<21&4294967295|M>>>11),M=T+(j^(O|~U))+A[12]+1700485571&4294967295,T=O+(M<<6&4294967295|M>>>26),M=U+(O^(T|~j))+A[3]+2399980690&4294967295,U=T+(M<<10&4294967295|M>>>22),M=j+(T^(U|~O))+A[10]+4293915773&4294967295,j=U+(M<<15&4294967295|M>>>17),M=O+(U^(j|~T))+A[1]+2240044497&4294967295,O=j+(M<<21&4294967295|M>>>11),M=T+(j^(O|~U))+A[8]+1873313359&4294967295,T=O+(M<<6&4294967295|M>>>26),M=U+(O^(T|~j))+A[15]+4264355552&4294967295,U=T+(M<<10&4294967295|M>>>22),M=j+(T^(U|~O))+A[6]+2734768916&4294967295,j=U+(M<<15&4294967295|M>>>17),M=O+(U^(j|~T))+A[13]+1309151649&4294967295,O=j+(M<<21&4294967295|M>>>11),M=T+(j^(O|~U))+A[4]+4149444226&4294967295,T=O+(M<<6&4294967295|M>>>26),M=U+(O^(T|~j))+A[11]+3174756917&4294967295,U=T+(M<<10&4294967295|M>>>22),M=j+(T^(U|~O))+A[2]+718787259&4294967295,j=U+(M<<15&4294967295|M>>>17),M=O+(U^(j|~T))+A[9]+3951481745&4294967295,E.g[0]=E.g[0]+T&4294967295,E.g[1]=E.g[1]+(j+(M<<21&4294967295|M>>>11))&4294967295,E.g[2]=E.g[2]+j&4294967295,E.g[3]=E.g[3]+U&4294967295}i.prototype.u=function(E,T){T===void 0&&(T=E.length);for(var O=T-this.blockSize,A=this.B,j=this.h,U=0;U<T;){if(j==0)for(;U<=O;)c(this,E,U),U+=this.blockSize;if(typeof E=="string"){for(;U<T;)if(A[j++]=E.charCodeAt(U++),j==this.blockSize){c(this,A),j=0;break}}else for(;U<T;)if(A[j++]=E[U++],j==this.blockSize){c(this,A),j=0;break}}this.h=j,this.o+=T},i.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var T=1;T<E.length-8;++T)E[T]=0;var O=8*this.o;for(T=E.length-8;T<E.length;++T)E[T]=O&255,O/=256;for(this.u(E),E=Array(16),T=O=0;4>T;++T)for(var A=0;32>A;A+=8)E[O++]=this.g[T]>>>A&255;return E};function v(E,T){var O=h;return Object.prototype.hasOwnProperty.call(O,E)?O[E]:O[E]=T(E)}function w(E,T){this.h=T;for(var O=[],A=!0,j=E.length-1;0<=j;j--){var U=E[j]|0;A&&U==T||(O[j]=U,A=!1)}this.g=O}var h={};function r(E){return-128<=E&&128>E?v(E,function(T){return new w([T|0],0>T?-1:0)}):new w([E|0],0>E?-1:0)}function f(E){if(isNaN(E)||!isFinite(E))return o;if(0>E)return l(f(-E));for(var T=[],O=1,A=0;E>=O;A++)T[A]=E/O|0,O*=4294967296;return new w(T,0)}function d(E,T){if(E.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(E.charAt(0)=="-")return l(d(E.substring(1),T));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=f(Math.pow(T,8)),A=o,j=0;j<E.length;j+=8){var U=Math.min(8,E.length-j),M=parseInt(E.substring(j,j+U),T);8>U?(U=f(Math.pow(T,U)),A=A.j(U).add(f(M))):(A=A.j(O),A=A.add(f(M)))}return A}var o=r(0),a=r(1),s=r(16777216);t=w.prototype,t.m=function(){if(p(this))return-l(this).m();for(var E=0,T=1,O=0;O<this.g.length;O++){var A=this.i(O);E+=(0<=A?A:4294967296+A)*T,T*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(u(this))return"0";if(p(this))return"-"+l(this).toString(E);for(var T=f(Math.pow(E,6)),O=this,A="";;){var j=x(O,T).g;O=g(O,j.j(T));var U=((0<O.g.length?O.g[0]:O.h)>>>0).toString(E);if(O=j,u(O))return U+A;for(;6>U.length;)U="0"+U;A=U+A}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function u(E){if(E.h!=0)return!1;for(var T=0;T<E.g.length;T++)if(E.g[T]!=0)return!1;return!0}function p(E){return E.h==-1}t.l=function(E){return E=g(this,E),p(E)?-1:u(E)?0:1};function l(E){for(var T=E.g.length,O=[],A=0;A<T;A++)O[A]=~E.g[A];return new w(O,~E.h).add(a)}t.abs=function(){return p(this)?l(this):this},t.add=function(E){for(var T=Math.max(this.g.length,E.g.length),O=[],A=0,j=0;j<=T;j++){var U=A+(this.i(j)&65535)+(E.i(j)&65535),M=(U>>>16)+(this.i(j)>>>16)+(E.i(j)>>>16);A=M>>>16,U&=65535,M&=65535,O[j]=M<<16|U}return new w(O,O[O.length-1]&-2147483648?-1:0)};function g(E,T){return E.add(l(T))}t.j=function(E){if(u(this)||u(E))return o;if(p(this))return p(E)?l(this).j(l(E)):l(l(this).j(E));if(p(E))return l(this.j(l(E)));if(0>this.l(s)&&0>E.l(s))return f(this.m()*E.m());for(var T=this.g.length+E.g.length,O=[],A=0;A<2*T;A++)O[A]=0;for(A=0;A<this.g.length;A++)for(var j=0;j<E.g.length;j++){var U=this.i(A)>>>16,M=this.i(A)&65535,re=E.i(j)>>>16,oe=E.i(j)&65535;O[2*A+2*j]+=M*oe,y(O,2*A+2*j),O[2*A+2*j+1]+=U*oe,y(O,2*A+2*j+1),O[2*A+2*j+1]+=M*re,y(O,2*A+2*j+1),O[2*A+2*j+2]+=U*re,y(O,2*A+2*j+2)}for(A=0;A<T;A++)O[A]=O[2*A+1]<<16|O[2*A];for(A=T;A<2*T;A++)O[A]=0;return new w(O,0)};function y(E,T){for(;(E[T]&65535)!=E[T];)E[T+1]+=E[T]>>>16,E[T]&=65535,T++}function _(E,T){this.g=E,this.h=T}function x(E,T){if(u(T))throw Error("division by zero");if(u(E))return new _(o,o);if(p(E))return T=x(l(E),T),new _(l(T.g),l(T.h));if(p(T))return T=x(E,l(T)),new _(l(T.g),T.h);if(30<E.g.length){if(p(E)||p(T))throw Error("slowDivide_ only works with positive integers.");for(var O=a,A=T;0>=A.l(E);)O=S(O),A=S(A);var j=b(O,1),U=b(A,1);for(A=b(A,2),O=b(O,2);!u(A);){var M=U.add(A);0>=M.l(E)&&(j=j.add(O),U=M),A=b(A,1),O=b(O,1)}return T=g(E,j.j(T)),new _(j,T)}for(j=o;0<=E.l(T);){for(O=Math.max(1,Math.floor(E.m()/T.m())),A=Math.ceil(Math.log(O)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),U=f(O),M=U.j(T);p(M)||0<M.l(E);)O-=A,U=f(O),M=U.j(T);u(U)&&(U=a),j=j.add(U),E=g(E,M)}return new _(j,E)}t.A=function(E){return x(this,E).h},t.and=function(E){for(var T=Math.max(this.g.length,E.g.length),O=[],A=0;A<T;A++)O[A]=this.i(A)&E.i(A);return new w(O,this.h&E.h)},t.or=function(E){for(var T=Math.max(this.g.length,E.g.length),O=[],A=0;A<T;A++)O[A]=this.i(A)|E.i(A);return new w(O,this.h|E.h)},t.xor=function(E){for(var T=Math.max(this.g.length,E.g.length),O=[],A=0;A<T;A++)O[A]=this.i(A)^E.i(A);return new w(O,this.h^E.h)};function S(E){for(var T=E.g.length+1,O=[],A=0;A<T;A++)O[A]=E.i(A)<<1|E.i(A-1)>>>31;return new w(O,E.h)}function b(E,T){var O=T>>5;T%=32;for(var A=E.g.length-O,j=[],U=0;U<A;U++)j[U]=0<T?E.i(U+O)>>>T|E.i(U+O+1)<<32-T:E.i(U+O);return new w(j,E.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,w.prototype.add=w.prototype.add,w.prototype.multiply=w.prototype.j,w.prototype.modulo=w.prototype.A,w.prototype.compare=w.prototype.l,w.prototype.toNumber=w.prototype.m,w.prototype.toString=w.prototype.toString,w.prototype.getBits=w.prototype.i,w.fromNumber=f,w.fromString=d,hv=w}).apply(typeof zd<"u"?zd:typeof self<"u"?self:typeof window<"u"?window:{});var _o=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,C,k){return m==Array.prototype||m==Object.prototype||(m[C]=k.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof _o=="object"&&_o];for(var C=0;C<m.length;++C){var k=m[C];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}var i=n(this);function c(m,C){if(C)e:{var k=i;m=m.split(".");for(var R=0;R<m.length-1;R++){var V=m[R];if(!(V in k))break e;k=k[V]}m=m[m.length-1],R=k[m],C=C(R),C!=R&&C!=null&&e(k,m,{configurable:!0,writable:!0,value:C})}}function v(m,C){m instanceof String&&(m+="");var k=0,R=!1,V={next:function(){if(!R&&k<m.length){var $=k++;return{value:C($,m[$]),done:!1}}return R=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}c("Array.prototype.values",function(m){return m||function(){return v(this,function(C,k){return k})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var w=w||{},h=this||self;function r(m){var C=typeof m;return C=C!="object"?C:m?Array.isArray(m)?"array":C:"null",C=="array"||C=="object"&&typeof m.length=="number"}function f(m){var C=typeof m;return C=="object"&&m!=null||C=="function"}function d(m,C,k){return m.call.apply(m.bind,arguments)}function o(m,C,k){if(!m)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,R),m.apply(C,V)}}return function(){return m.apply(C,arguments)}}function a(m,C,k){return a=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:o,a.apply(null,arguments)}function s(m,C){var k=Array.prototype.slice.call(arguments,1);return function(){var R=k.slice();return R.push.apply(R,arguments),m.apply(this,R)}}function u(m,C){function k(){}k.prototype=C.prototype,m.aa=C.prototype,m.prototype=new k,m.prototype.constructor=m,m.Qb=function(R,V,$){for(var ce=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)ce[Oe-2]=arguments[Oe];return C.prototype[V].apply(R,ce)}}function p(m){const C=m.length;if(0<C){const k=Array(C);for(let R=0;R<C;R++)k[R]=m[R];return k}return[]}function l(m,C){for(let k=1;k<arguments.length;k++){const R=arguments[k];if(r(R)){const V=m.length||0,$=R.length||0;m.length=V+$;for(let ce=0;ce<$;ce++)m[V+ce]=R[ce]}else m.push(R)}}class g{constructor(C,k){this.i=C,this.j=k,this.h=0,this.g=null}get(){let C;return 0<this.h?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function y(m){return/^[\s\xa0]*$/.test(m)}function _(){var m=h.navigator;return m&&(m=m.userAgent)?m:""}function x(m){return x[" "](m),m}x[" "]=function(){};var S=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function b(m,C,k){for(const R in m)C.call(k,m[R],R,m)}function E(m,C){for(const k in m)C.call(void 0,m[k],k,m)}function T(m){const C={};for(const k in m)C[k]=m[k];return C}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(m,C){let k,R;for(let V=1;V<arguments.length;V++){R=arguments[V];for(k in R)m[k]=R[k];for(let $=0;$<O.length;$++)k=O[$],Object.prototype.hasOwnProperty.call(R,k)&&(m[k]=R[k])}}function j(m){var C=1;m=m.split(":");const k=[];for(;0<C&&m.length;)k.push(m.shift()),C--;return m.length&&k.push(m.join(":")),k}function U(m){h.setTimeout(()=>{throw m},0)}function M(){var m=I;let C=null;return m.g&&(C=m.g,m.g=m.g.next,m.g||(m.h=null),C.next=null),C}class re{constructor(){this.h=this.g=null}add(C,k){const R=oe.get();R.set(C,k),this.h?this.h.next=R:this.g=R,this.h=R}}var oe=new g(()=>new fe,m=>m.reset());class fe{constructor(){this.next=this.g=this.h=null}set(C,k){this.h=C,this.g=k,this.next=null}reset(){this.next=this.g=this.h=null}}let de,q=!1,I=new re,L=()=>{const m=h.Promise.resolve(void 0);de=()=>{m.then(B)}};var B=()=>{for(var m;m=M();){try{m.h.call(m.g)}catch(k){U(k)}var C=oe;C.j(m),100>C.h&&(C.h++,m.next=C.g,C.g=m)}q=!1};function F(){this.s=this.s,this.C=this.C}F.prototype.s=!1,F.prototype.ma=function(){this.s||(this.s=!0,this.N())},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function X(m,C){this.type=m,this.g=this.target=C,this.defaultPrevented=!1}X.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var m=!1,C=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const k=()=>{};h.addEventListener("test",k,C),h.removeEventListener("test",k,C)}catch{}return m}();function D(m,C){if(X.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var k=this.type=m.type,R=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=C,C=m.relatedTarget){if(S){e:{try{x(C.nodeName);var V=!0;break e}catch{}V=!1}V||(C=null)}}else k=="mouseover"?C=m.fromElement:k=="mouseout"&&(C=m.toElement);this.relatedTarget=C,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:z[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&D.aa.h.call(this)}}u(D,X);var z={2:"touch",3:"pen",4:"mouse"};D.prototype.h=function(){D.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var H="closure_listenable_"+(1e6*Math.random()|0),J=0;function Y(m,C,k,R,V){this.listener=m,this.proxy=null,this.src=C,this.type=k,this.capture=!!R,this.ha=V,this.key=++J,this.da=this.fa=!1}function te(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function ie(m){this.src=m,this.g={},this.h=0}ie.prototype.add=function(m,C,k,R,V){var $=m.toString();m=this.g[$],m||(m=this.g[$]=[],this.h++);var ce=G(m,C,R,V);return-1<ce?(C=m[ce],k||(C.fa=!1)):(C=new Y(C,this.src,$,!!R,V),C.fa=k,m.push(C)),C};function le(m,C){var k=C.type;if(k in m.g){var R=m.g[k],V=Array.prototype.indexOf.call(R,C,void 0),$;($=0<=V)&&Array.prototype.splice.call(R,V,1),$&&(te(C),m.g[k].length==0&&(delete m.g[k],m.h--))}}function G(m,C,k,R){for(var V=0;V<m.length;++V){var $=m[V];if(!$.da&&$.listener==C&&$.capture==!!k&&$.ha==R)return V}return-1}var W="closure_lm_"+(1e6*Math.random()|0),Q={};function ee(m,C,k,R,V){if(Array.isArray(C)){for(var $=0;$<C.length;$++)ee(m,C[$],k,R,V);return null}return k=xe(k),m&&m[H]?m.K(C,k,f(R)?!!R.capture:!1,V):K(m,C,k,!1,R,V)}function K(m,C,k,R,V,$){if(!C)throw Error("Invalid event type");var ce=f(V)?!!V.capture:!!V,Oe=ge(m);if(Oe||(m[W]=Oe=new ie(m)),k=Oe.add(C,k,R,ce,$),k.proxy)return k;if(R=ne(),k.proxy=R,R.src=m,R.listener=k,m.addEventListener)N||(V=ce),V===void 0&&(V=!1),m.addEventListener(C.toString(),R,V);else if(m.attachEvent)m.attachEvent(pe(C.toString()),R);else if(m.addListener&&m.removeListener)m.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return k}function ne(){function m(k){return C.call(m.src,m.listener,k)}const C=Z;return m}function ue(m,C,k,R,V){if(Array.isArray(C))for(var $=0;$<C.length;$++)ue(m,C[$],k,R,V);else R=f(R)?!!R.capture:!!R,k=xe(k),m&&m[H]?(m=m.i,C=String(C).toString(),C in m.g&&($=m.g[C],k=G($,k,R,V),-1<k&&(te($[k]),Array.prototype.splice.call($,k,1),$.length==0&&(delete m.g[C],m.h--)))):m&&(m=ge(m))&&(C=m.g[C.toString()],m=-1,C&&(m=G(C,k,R,V)),(k=-1<m?C[m]:null)&&me(k))}function me(m){if(typeof m!="number"&&m&&!m.da){var C=m.src;if(C&&C[H])le(C.i,m);else{var k=m.type,R=m.proxy;C.removeEventListener?C.removeEventListener(k,R,m.capture):C.detachEvent?C.detachEvent(pe(k),R):C.addListener&&C.removeListener&&C.removeListener(R),(k=ge(C))?(le(k,m),k.h==0&&(k.src=null,C[W]=null)):te(m)}}}function pe(m){return m in Q?Q[m]:Q[m]="on"+m}function Z(m,C){if(m.da)m=!0;else{C=new D(C,this);var k=m.listener,R=m.ha||m.src;m.fa&&me(m),m=k.call(R,C)}return m}function ge(m){return m=m[W],m instanceof ie?m:null}var ye="__closure_events_fn_"+(1e9*Math.random()>>>0);function xe(m){return typeof m=="function"?m:(m[ye]||(m[ye]=function(C){return m.handleEvent(C)}),m[ye])}function we(){F.call(this),this.i=new ie(this),this.M=this,this.F=null}u(we,F),we.prototype[H]=!0,we.prototype.removeEventListener=function(m,C,k,R){ue(this,m,C,k,R)};function _e(m,C){var k,R=m.F;if(R)for(k=[];R;R=R.F)k.push(R);if(m=m.M,R=C.type||C,typeof C=="string")C=new X(C,m);else if(C instanceof X)C.target=C.target||m;else{var V=C;C=new X(R,m),A(C,V)}if(V=!0,k)for(var $=k.length-1;0<=$;$--){var ce=C.g=k[$];V=ze(ce,R,!0,C)&&V}if(ce=C.g=m,V=ze(ce,R,!0,C)&&V,V=ze(ce,R,!1,C)&&V,k)for($=0;$<k.length;$++)ce=C.g=k[$],V=ze(ce,R,!1,C)&&V}we.prototype.N=function(){if(we.aa.N.call(this),this.i){var m=this.i,C;for(C in m.g){for(var k=m.g[C],R=0;R<k.length;R++)te(k[R]);delete m.g[C],m.h--}}this.F=null},we.prototype.K=function(m,C,k,R){return this.i.add(String(m),C,!1,k,R)},we.prototype.L=function(m,C,k,R){return this.i.add(String(m),C,!0,k,R)};function ze(m,C,k,R){if(C=m.i.g[String(C)],!C)return!0;C=C.concat();for(var V=!0,$=0;$<C.length;++$){var ce=C[$];if(ce&&!ce.da&&ce.capture==k){var Oe=ce.listener,Ke=ce.ha||ce.src;ce.fa&&le(m.i,ce),V=Oe.call(Ke,R)!==!1&&V}}return V&&!R.defaultPrevented}function Me(m,C,k){if(typeof m=="function")k&&(m=a(m,k));else if(m&&typeof m.handleEvent=="function")m=a(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(C)?-1:h.setTimeout(m,C||0)}function Xt(m){m.g=Me(()=>{m.g=null,m.i&&(m.i=!1,Xt(m))},m.l);const C=m.h;m.h=null,m.m.apply(null,C)}class ni extends F{constructor(C,k){super(),this.m=C,this.l=k,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:Xt(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ze(m){F.call(this),this.h=m,this.g={}}u(Ze,F);var zs=[];function vr(m){b(m.g,function(C,k){this.g.hasOwnProperty(k)&&me(C)},m),m.g={}}Ze.prototype.N=function(){Ze.aa.N.call(this),vr(this)},Ze.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yr=h.JSON.stringify,La=h.JSON.parse,wv=class{stringify(m){return h.JSON.stringify(m,void 0)}parse(m){return h.JSON.parse(m,void 0)}};function Na(){}Na.prototype.h=null;function rh(m){return m.h||(m.h=m.i())}function xv(){}var _r={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fa(){X.call(this,"d")}u(Fa,X);function Ba(){X.call(this,"c")}u(Ba,X);var bi={},sh=null;function Ua(){return sh=sh||new we}bi.La="serverreachability";function oh(m){X.call(this,bi.La,m)}u(oh,X);function wr(m){const C=Ua();_e(C,new oh(C))}bi.STAT_EVENT="statevent";function ah(m,C){X.call(this,bi.STAT_EVENT,m),this.stat=C}u(ah,X);function ot(m){const C=Ua();_e(C,new ah(C,m))}bi.Ma="timingevent";function lh(m,C){X.call(this,bi.Ma,m),this.size=C}u(lh,X);function xr(m,C){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){m()},C)}function Cr(){this.g=!0}Cr.prototype.xa=function(){this.g=!1};function Cv(m,C,k,R,V,$){m.info(function(){if(m.g)if($)for(var ce="",Oe=$.split("&"),Ke=0;Ke<Oe.length;Ke++){var Ee=Oe[Ke].split("=");if(1<Ee.length){var et=Ee[0];Ee=Ee[1];var tt=et.split("_");ce=2<=tt.length&&tt[1]=="type"?ce+(et+"="+Ee+"&"):ce+(et+"=redacted&")}}else ce=null;else ce=$;return"XMLHTTP REQ ("+R+") [attempt "+V+"]: "+C+`
`+k+`
`+ce})}function Sv(m,C,k,R,V,$,ce){m.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+V+"]: "+C+`
`+k+`
`+$+" "+ce})}function Oi(m,C,k,R){m.info(function(){return"XMLHTTP TEXT ("+C+"): "+Ev(m,k)+(R?" "+R:"")})}function Tv(m,C){m.info(function(){return"TIMEOUT: "+C})}Cr.prototype.info=function(){};function Ev(m,C){if(!m.g)return C;if(!C)return null;try{var k=JSON.parse(C);if(k){for(m=0;m<k.length;m++)if(Array.isArray(k[m])){var R=k[m];if(!(2>R.length)){var V=R[1];if(Array.isArray(V)&&!(1>V.length)){var $=V[0];if($!="noop"&&$!="stop"&&$!="close")for(var ce=1;ce<V.length;ce++)V[ce]=""}}}}return yr(k)}catch{return C}}var za={NO_ERROR:0,TIMEOUT:8},kv={},Ha;function Hs(){}u(Hs,Na),Hs.prototype.g=function(){return new XMLHttpRequest},Hs.prototype.i=function(){return{}},Ha=new Hs;function wn(m,C,k,R){this.j=m,this.i=C,this.l=k,this.R=R||1,this.U=new Ze(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new uh}function uh(){this.i=null,this.g="",this.h=!1}var ch={},Wa={};function Va(m,C,k){m.L=1,m.v=Ys(Qt(C)),m.m=k,m.P=!0,hh(m,null)}function hh(m,C){m.F=Date.now(),Ws(m),m.A=Qt(m.v);var k=m.A,R=m.R;Array.isArray(R)||(R=[String(R)]),Eh(k.i,"t",R),m.C=0,k=m.j.J,m.h=new uh,m.g=Wh(m.j,k?C:null,!m.m),0<m.O&&(m.M=new ni(a(m.Y,m,m.g),m.O)),C=m.U,k=m.g,R=m.ca;var V="readystatechange";Array.isArray(V)||(V&&(zs[0]=V.toString()),V=zs);for(var $=0;$<V.length;$++){var ce=ee(k,V[$],R||C.handleEvent,!1,C.h||C);if(!ce)break;C.g[ce.key]=ce}C=m.H?T(m.H):{},m.m?(m.u||(m.u="POST"),C["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,C)):(m.u="GET",m.g.ea(m.A,m.u,null,C)),wr(),Cv(m.i,m.u,m.A,m.l,m.R,m.m)}wn.prototype.ca=function(m){m=m.target;const C=this.M;C&&Zt(m)==3?C.j():this.Y(m)},wn.prototype.Y=function(m){try{if(m==this.g)e:{const tt=Zt(this.g);var C=this.g.Ba();const Ai=this.g.Z();if(!(3>tt)&&(tt!=3||this.g&&(this.h.h||this.g.oa()||Dh(this.g)))){this.J||tt!=4||C==7||(C==8||0>=Ai?wr(3):wr(2)),Xa(this);var k=this.g.Z();this.X=k;t:if(fh(this)){var R=Dh(this.g);m="";var V=R.length,$=Zt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ii(this),Sr(this);var ce="";break t}this.h.i=new h.TextDecoder}for(C=0;C<V;C++)this.h.h=!0,m+=this.h.i.decode(R[C],{stream:!($&&C==V-1)});R.length=0,this.h.g+=m,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=k==200,Sv(this.i,this.u,this.A,this.l,this.R,tt,k),this.o){if(this.T&&!this.K){t:{if(this.g){var Oe,Ke=this.g;if((Oe=Ke.g?Ke.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Oe)){var Ee=Oe;break t}}Ee=null}if(k=Ee)Oi(this.i,this.l,k,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ya(this,k);else{this.o=!1,this.s=3,ot(12),ii(this),Sr(this);break e}}if(this.P){k=!0;let Mt;for(;!this.J&&this.C<ce.length;)if(Mt=bv(this,ce),Mt==Wa){tt==4&&(this.s=4,ot(14),k=!1),Oi(this.i,this.l,null,"[Incomplete Response]");break}else if(Mt==ch){this.s=4,ot(15),Oi(this.i,this.l,ce,"[Invalid Chunk]"),k=!1;break}else Oi(this.i,this.l,Mt,null),Ya(this,Mt);if(fh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tt!=4||ce.length!=0||this.h.h||(this.s=1,ot(16),k=!1),this.o=this.o&&k,!k)Oi(this.i,this.l,ce,"[Invalid Chunked Response]"),ii(this),Sr(this);else if(0<ce.length&&!this.W){this.W=!0;var et=this.j;et.g==this&&et.ba&&!et.M&&(et.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),Qa(et),et.M=!0,ot(11))}}else Oi(this.i,this.l,ce,null),Ya(this,ce);tt==4&&ii(this),this.o&&!this.J&&(tt==4?Bh(this.j,this):(this.o=!1,Ws(this)))}else Vv(this.g),k==400&&0<ce.indexOf("Unknown SID")?(this.s=3,ot(12)):(this.s=0,ot(13)),ii(this),Sr(this)}}}catch{}finally{}};function fh(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function bv(m,C){var k=m.C,R=C.indexOf(`
`,k);return R==-1?Wa:(k=Number(C.substring(k,R)),isNaN(k)?ch:(R+=1,R+k>C.length?Wa:(C=C.slice(R,R+k),m.C=R+k,C)))}wn.prototype.cancel=function(){this.J=!0,ii(this)};function Ws(m){m.S=Date.now()+m.I,dh(m,m.I)}function dh(m,C){if(m.B!=null)throw Error("WatchDog timer not null");m.B=xr(a(m.ba,m),C)}function Xa(m){m.B&&(h.clearTimeout(m.B),m.B=null)}wn.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(Tv(this.i,this.A),this.L!=2&&(wr(),ot(17)),ii(this),this.s=2,Sr(this)):dh(this,this.S-m)};function Sr(m){m.j.G==0||m.J||Bh(m.j,m)}function ii(m){Xa(m);var C=m.M;C&&typeof C.ma=="function"&&C.ma(),m.M=null,vr(m.U),m.g&&(C=m.g,m.g=null,C.abort(),C.ma())}function Ya(m,C){try{var k=m.j;if(k.G!=0&&(k.g==m||Ga(k.h,m))){if(!m.K&&Ga(k.h,m)&&k.G==3){try{var R=k.Da.g.parse(C)}catch{R=null}if(Array.isArray(R)&&R.length==3){var V=R;if(V[0]==0){e:if(!k.u){if(k.g)if(k.g.F+3e3<m.F)Qs(k),qs(k);else break e;Ja(k),ot(18)}}else k.za=V[1],0<k.za-k.T&&37500>V[2]&&k.F&&k.v==0&&!k.C&&(k.C=xr(a(k.Za,k),6e3));if(1>=mh(k.h)&&k.ca){try{k.ca()}catch{}k.ca=void 0}}else si(k,11)}else if((m.K||k.g==m)&&Qs(k),!y(C))for(V=k.Da.g.parse(C),C=0;C<V.length;C++){let Ee=V[C];if(k.T=Ee[0],Ee=Ee[1],k.G==2)if(Ee[0]=="c"){k.K=Ee[1],k.ia=Ee[2];const et=Ee[3];et!=null&&(k.la=et,k.j.info("VER="+k.la));const tt=Ee[4];tt!=null&&(k.Aa=tt,k.j.info("SVER="+k.Aa));const Ai=Ee[5];Ai!=null&&typeof Ai=="number"&&0<Ai&&(R=1.5*Ai,k.L=R,k.j.info("backChannelRequestTimeoutMs_="+R)),R=k;const Mt=m.g;if(Mt){const Zs=Mt.g?Mt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Zs){var $=R.h;$.g||Zs.indexOf("spdy")==-1&&Zs.indexOf("quic")==-1&&Zs.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&($a($,$.h),$.h=null))}if(R.D){const Za=Mt.g?Mt.g.getResponseHeader("X-HTTP-Session-Id"):null;Za&&(R.ya=Za,Ie(R.I,R.D,Za))}}k.G=3,k.l&&k.l.ua(),k.ba&&(k.R=Date.now()-m.F,k.j.info("Handshake RTT: "+k.R+"ms")),R=k;var ce=m;if(R.qa=Hh(R,R.J?R.ia:null,R.W),ce.K){vh(R.h,ce);var Oe=ce,Ke=R.L;Ke&&(Oe.I=Ke),Oe.B&&(Xa(Oe),Ws(Oe)),R.g=ce}else Nh(R);0<k.i.length&&Js(k)}else Ee[0]!="stop"&&Ee[0]!="close"||si(k,7);else k.G==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?si(k,7):qa(k):Ee[0]!="noop"&&k.l&&k.l.ta(Ee),k.v=0)}}wr(4)}catch{}}var Ov=class{constructor(m,C){this.g=m,this.map=C}};function ph(m){this.l=m||10,h.PerformanceNavigationTiming?(m=h.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function gh(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function mh(m){return m.h?1:m.g?m.g.size:0}function Ga(m,C){return m.h?m.h==C:m.g?m.g.has(C):!1}function $a(m,C){m.g?m.g.add(C):m.h=C}function vh(m,C){m.h&&m.h==C?m.h=null:m.g&&m.g.has(C)&&m.g.delete(C)}ph.prototype.cancel=function(){if(this.i=yh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function yh(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let C=m.i;for(const k of m.g.values())C=C.concat(k.D);return C}return p(m.i)}function Pv(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(r(m)){for(var C=[],k=m.length,R=0;R<k;R++)C.push(m[R]);return C}C=[],k=0;for(R in m)C[k++]=m[R];return C}function Iv(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(r(m)||typeof m=="string"){var C=[];m=m.length;for(var k=0;k<m;k++)C.push(k);return C}C=[],k=0;for(const R in m)C[k++]=R;return C}}}function _h(m,C){if(m.forEach&&typeof m.forEach=="function")m.forEach(C,void 0);else if(r(m)||typeof m=="string")Array.prototype.forEach.call(m,C,void 0);else for(var k=Iv(m),R=Pv(m),V=R.length,$=0;$<V;$++)C.call(void 0,R[$],k&&k[$],m)}var wh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Av(m,C){if(m){m=m.split("&");for(var k=0;k<m.length;k++){var R=m[k].indexOf("="),V=null;if(0<=R){var $=m[k].substring(0,R);V=m[k].substring(R+1)}else $=m[k];C($,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function ri(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof ri){this.h=m.h,Vs(this,m.j),this.o=m.o,this.g=m.g,Xs(this,m.s),this.l=m.l;var C=m.i,k=new kr;k.i=C.i,C.g&&(k.g=new Map(C.g),k.h=C.h),xh(this,k),this.m=m.m}else m&&(C=String(m).match(wh))?(this.h=!1,Vs(this,C[1]||"",!0),this.o=Tr(C[2]||""),this.g=Tr(C[3]||"",!0),Xs(this,C[4]),this.l=Tr(C[5]||"",!0),xh(this,C[6]||"",!0),this.m=Tr(C[7]||"")):(this.h=!1,this.i=new kr(null,this.h))}ri.prototype.toString=function(){var m=[],C=this.j;C&&m.push(Er(C,Ch,!0),":");var k=this.g;return(k||C=="file")&&(m.push("//"),(C=this.o)&&m.push(Er(C,Ch,!0),"@"),m.push(encodeURIComponent(String(k)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k=this.s,k!=null&&m.push(":",String(k))),(k=this.l)&&(this.g&&k.charAt(0)!="/"&&m.push("/"),m.push(Er(k,k.charAt(0)=="/"?Mv:Rv,!0))),(k=this.i.toString())&&m.push("?",k),(k=this.m)&&m.push("#",Er(k,Lv)),m.join("")};function Qt(m){return new ri(m)}function Vs(m,C,k){m.j=k?Tr(C,!0):C,m.j&&(m.j=m.j.replace(/:$/,""))}function Xs(m,C){if(C){if(C=Number(C),isNaN(C)||0>C)throw Error("Bad port number "+C);m.s=C}else m.s=null}function xh(m,C,k){C instanceof kr?(m.i=C,Nv(m.i,m.h)):(k||(C=Er(C,jv)),m.i=new kr(C,m.h))}function Ie(m,C,k){m.i.set(C,k)}function Ys(m){return Ie(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function Tr(m,C){return m?C?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Er(m,C,k){return typeof m=="string"?(m=encodeURI(m).replace(C,Dv),k&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Dv(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Ch=/[#\/\?@]/g,Rv=/[#\?:]/g,Mv=/[#\?]/g,jv=/[#\?@]/g,Lv=/#/g;function kr(m,C){this.h=this.g=null,this.i=m||null,this.j=!!C}function xn(m){m.g||(m.g=new Map,m.h=0,m.i&&Av(m.i,function(C,k){m.add(decodeURIComponent(C.replace(/\+/g," ")),k)}))}t=kr.prototype,t.add=function(m,C){xn(this),this.i=null,m=Pi(this,m);var k=this.g.get(m);return k||this.g.set(m,k=[]),k.push(C),this.h+=1,this};function Sh(m,C){xn(m),C=Pi(m,C),m.g.has(C)&&(m.i=null,m.h-=m.g.get(C).length,m.g.delete(C))}function Th(m,C){return xn(m),C=Pi(m,C),m.g.has(C)}t.forEach=function(m,C){xn(this),this.g.forEach(function(k,R){k.forEach(function(V){m.call(C,V,R,this)},this)},this)},t.na=function(){xn(this);const m=Array.from(this.g.values()),C=Array.from(this.g.keys()),k=[];for(let R=0;R<C.length;R++){const V=m[R];for(let $=0;$<V.length;$++)k.push(C[R])}return k},t.V=function(m){xn(this);let C=[];if(typeof m=="string")Th(this,m)&&(C=C.concat(this.g.get(Pi(this,m))));else{m=Array.from(this.g.values());for(let k=0;k<m.length;k++)C=C.concat(m[k])}return C},t.set=function(m,C){return xn(this),this.i=null,m=Pi(this,m),Th(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[C]),this.h+=1,this},t.get=function(m,C){return m?(m=this.V(m),0<m.length?String(m[0]):C):C};function Eh(m,C,k){Sh(m,C),0<k.length&&(m.i=null,m.g.set(Pi(m,C),p(k)),m.h+=k.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],C=Array.from(this.g.keys());for(var k=0;k<C.length;k++){var R=C[k];const $=encodeURIComponent(String(R)),ce=this.V(R);for(R=0;R<ce.length;R++){var V=$;ce[R]!==""&&(V+="="+encodeURIComponent(String(ce[R]))),m.push(V)}}return this.i=m.join("&")};function Pi(m,C){return C=String(C),m.j&&(C=C.toLowerCase()),C}function Nv(m,C){C&&!m.j&&(xn(m),m.i=null,m.g.forEach(function(k,R){var V=R.toLowerCase();R!=V&&(Sh(this,R),Eh(this,V,k))},m)),m.j=C}function Fv(m,C){const k=new Cr;if(h.Image){const R=new Image;R.onload=s(Cn,k,"TestLoadImage: loaded",!0,C,R),R.onerror=s(Cn,k,"TestLoadImage: error",!1,C,R),R.onabort=s(Cn,k,"TestLoadImage: abort",!1,C,R),R.ontimeout=s(Cn,k,"TestLoadImage: timeout",!1,C,R),h.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=m}else C(!1)}function Bv(m,C){const k=new Cr,R=new AbortController,V=setTimeout(()=>{R.abort(),Cn(k,"TestPingServer: timeout",!1,C)},1e4);fetch(m,{signal:R.signal}).then($=>{clearTimeout(V),$.ok?Cn(k,"TestPingServer: ok",!0,C):Cn(k,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(V),Cn(k,"TestPingServer: error",!1,C)})}function Cn(m,C,k,R,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),R(k)}catch{}}function Uv(){this.g=new wv}function zv(m,C,k){const R=k||"";try{_h(m,function(V,$){let ce=V;f(V)&&(ce=yr(V)),C.push(R+$+"="+encodeURIComponent(ce))})}catch(V){throw C.push(R+"type="+encodeURIComponent("_badmap")),V}}function Gs(m){this.l=m.Ub||null,this.j=m.eb||!1}u(Gs,Na),Gs.prototype.g=function(){return new $s(this.l,this.j)},Gs.prototype.i=function(m){return function(){return m}}({});function $s(m,C){we.call(this),this.D=m,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}u($s,we),t=$s.prototype,t.open=function(m,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=C,this.readyState=1,Or(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const C={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(C.body=m),(this.D||h).fetch(new Request(this.A,C)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,br(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Or(this)),this.g&&(this.readyState=3,Or(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;kh(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function kh(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var C=m.value?m.value:new Uint8Array(0);(C=this.v.decode(C,{stream:!m.done}))&&(this.response=this.responseText+=C)}m.done?br(this):Or(this),this.readyState==3&&kh(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,br(this))},t.Qa=function(m){this.g&&(this.response=m,br(this))},t.ga=function(){this.g&&br(this)};function br(m){m.readyState=4,m.l=null,m.j=null,m.v=null,Or(m)}t.setRequestHeader=function(m,C){this.u.append(m,C)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],C=this.h.entries();for(var k=C.next();!k.done;)k=k.value,m.push(k[0]+": "+k[1]),k=C.next();return m.join(`\r
`)};function Or(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty($s.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function bh(m){let C="";return b(m,function(k,R){C+=R,C+=":",C+=k,C+=`\r
`}),C}function Ka(m,C,k){e:{for(R in k){var R=!1;break e}R=!0}R||(k=bh(k),typeof m=="string"?k!=null&&encodeURIComponent(String(k)):Ie(m,C,k))}function Be(m){we.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}u(Be,we);var Hv=/^https?$/i,Wv=["POST","PUT"];t=Be.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,C,k,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);C=C?C.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ha.g(),this.v=this.o?rh(this.o):rh(Ha),this.g.onreadystatechange=a(this.Ea,this);try{this.B=!0,this.g.open(C,String(m),!0),this.B=!1}catch($){Oh(this,$);return}if(m=k||"",k=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var V in R)k.set(V,R[V]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const $ of R.keys())k.set($,R.get($));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(k.keys()).find($=>$.toLowerCase()=="content-type"),V=h.FormData&&m instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Wv,C,void 0))||R||V||k.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ce]of k)this.g.setRequestHeader($,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ah(this),this.u=!0,this.g.send(m),this.u=!1}catch($){Oh(this,$)}};function Oh(m,C){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=C,m.m=5,Ph(m),Ks(m)}function Ph(m){m.A||(m.A=!0,_e(m,"complete"),_e(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,_e(this,"complete"),_e(this,"abort"),Ks(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ks(this,!0)),Be.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ih(this):this.bb())},t.bb=function(){Ih(this)};function Ih(m){if(m.h&&typeof w<"u"&&(!m.v[1]||Zt(m)!=4||m.Z()!=2)){if(m.u&&Zt(m)==4)Me(m.Ea,0,m);else if(_e(m,"readystatechange"),Zt(m)==4){m.h=!1;try{const ce=m.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var k;if(!(k=C)){var R;if(R=ce===0){var V=String(m.D).match(wh)[1]||null;!V&&h.self&&h.self.location&&(V=h.self.location.protocol.slice(0,-1)),R=!Hv.test(V?V.toLowerCase():"")}k=R}if(k)_e(m,"complete"),_e(m,"success");else{m.m=6;try{var $=2<Zt(m)?m.g.statusText:""}catch{$=""}m.l=$+" ["+m.Z()+"]",Ph(m)}}finally{Ks(m)}}}}function Ks(m,C){if(m.g){Ah(m);const k=m.g,R=m.v[0]?()=>{}:null;m.g=null,m.v=null,C||_e(m,"ready");try{k.onreadystatechange=R}catch{}}}function Ah(m){m.I&&(h.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function Zt(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<Zt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var C=this.g.responseText;return m&&C.indexOf(m)==0&&(C=C.substring(m.length)),La(C)}};function Dh(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Vv(m){const C={};m=(m.g&&2<=Zt(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<m.length;R++){if(y(m[R]))continue;var k=j(m[R]);const V=k[0];if(k=k[1],typeof k!="string")continue;k=k.trim();const $=C[V]||[];C[V]=$,$.push(k)}E(C,function(R){return R.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Pr(m,C,k){return k&&k.internalChannelParams&&k.internalChannelParams[m]||C}function Rh(m){this.Aa=0,this.i=[],this.j=new Cr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Pr("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Pr("baseRetryDelayMs",5e3,m),this.cb=Pr("retryDelaySeedMs",1e4,m),this.Wa=Pr("forwardChannelMaxRetries",2,m),this.wa=Pr("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new ph(m&&m.concurrentRequestLimit),this.Da=new Uv,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Rh.prototype,t.la=8,t.G=1,t.connect=function(m,C,k,R){ot(0),this.W=m,this.H=C||{},k&&R!==void 0&&(this.H.OSID=k,this.H.OAID=R),this.F=this.X,this.I=Hh(this,null,this.W),Js(this)};function qa(m){if(Mh(m),m.G==3){var C=m.U++,k=Qt(m.I);if(Ie(k,"SID",m.K),Ie(k,"RID",C),Ie(k,"TYPE","terminate"),Ir(m,k),C=new wn(m,m.j,C),C.L=2,C.v=Ys(Qt(k)),k=!1,h.navigator&&h.navigator.sendBeacon)try{k=h.navigator.sendBeacon(C.v.toString(),"")}catch{}!k&&h.Image&&(new Image().src=C.v,k=!0),k||(C.g=Wh(C.j,null),C.g.ea(C.v)),C.F=Date.now(),Ws(C)}zh(m)}function qs(m){m.g&&(Qa(m),m.g.cancel(),m.g=null)}function Mh(m){qs(m),m.u&&(h.clearTimeout(m.u),m.u=null),Qs(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&h.clearTimeout(m.s),m.s=null)}function Js(m){if(!gh(m.h)&&!m.s){m.s=!0;var C=m.Ga;de||L(),q||(de(),q=!0),I.add(C,m),m.B=0}}function Xv(m,C){return mh(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=C.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=xr(a(m.Ga,m,C),Uh(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const V=new wn(this,this.j,m);let $=this.o;if(this.S&&($?($=T($),A($,this.S)):$=this.S),this.m!==null||this.O||(V.H=$,$=null),this.P)e:{for(var C=0,k=0;k<this.i.length;k++){t:{var R=this.i[k];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(C+=R,4096<C){C=k;break e}if(C===4096||k===this.i.length-1){C=k+1;break e}}C=1e3}else C=1e3;C=Lh(this,V,C),k=Qt(this.I),Ie(k,"RID",m),Ie(k,"CVER",22),this.D&&Ie(k,"X-HTTP-Session-Id",this.D),Ir(this,k),$&&(this.O?C="headers="+encodeURIComponent(String(bh($)))+"&"+C:this.m&&Ka(k,this.m,$)),$a(this.h,V),this.Ua&&Ie(k,"TYPE","init"),this.P?(Ie(k,"$req",C),Ie(k,"SID","null"),V.T=!0,Va(V,k,null)):Va(V,k,C),this.G=2}}else this.G==3&&(m?jh(this,m):this.i.length==0||gh(this.h)||jh(this))};function jh(m,C){var k;C?k=C.l:k=m.U++;const R=Qt(m.I);Ie(R,"SID",m.K),Ie(R,"RID",k),Ie(R,"AID",m.T),Ir(m,R),m.m&&m.o&&Ka(R,m.m,m.o),k=new wn(m,m.j,k,m.B+1),m.m===null&&(k.H=m.o),C&&(m.i=C.D.concat(m.i)),C=Lh(m,k,1e3),k.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),$a(m.h,k),Va(k,R,C)}function Ir(m,C){m.H&&b(m.H,function(k,R){Ie(C,R,k)}),m.l&&_h({},function(k,R){Ie(C,R,k)})}function Lh(m,C,k){k=Math.min(m.i.length,k);var R=m.l?a(m.l.Na,m.l,m):null;e:{var V=m.i;let $=-1;for(;;){const ce=["count="+k];$==-1?0<k?($=V[0].g,ce.push("ofs="+$)):$=0:ce.push("ofs="+$);let Oe=!0;for(let Ke=0;Ke<k;Ke++){let Ee=V[Ke].g;const et=V[Ke].map;if(Ee-=$,0>Ee)$=Math.max(0,V[Ke].g-100),Oe=!1;else try{zv(et,ce,"req"+Ee+"_")}catch{R&&R(et)}}if(Oe){R=ce.join("&");break e}}}return m=m.i.splice(0,k),C.D=m,R}function Nh(m){if(!m.g&&!m.u){m.Y=1;var C=m.Fa;de||L(),q||(de(),q=!0),I.add(C,m),m.v=0}}function Ja(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=xr(a(m.Fa,m),Uh(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,Fh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=xr(a(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ot(10),qs(this),Fh(this))};function Qa(m){m.A!=null&&(h.clearTimeout(m.A),m.A=null)}function Fh(m){m.g=new wn(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var C=Qt(m.qa);Ie(C,"RID","rpc"),Ie(C,"SID",m.K),Ie(C,"AID",m.T),Ie(C,"CI",m.F?"0":"1"),!m.F&&m.ja&&Ie(C,"TO",m.ja),Ie(C,"TYPE","xmlhttp"),Ir(m,C),m.m&&m.o&&Ka(C,m.m,m.o),m.L&&(m.g.I=m.L);var k=m.g;m=m.ia,k.L=1,k.v=Ys(Qt(C)),k.m=null,k.P=!0,hh(k,m)}t.Za=function(){this.C!=null&&(this.C=null,qs(this),Ja(this),ot(19))};function Qs(m){m.C!=null&&(h.clearTimeout(m.C),m.C=null)}function Bh(m,C){var k=null;if(m.g==C){Qs(m),Qa(m),m.g=null;var R=2}else if(Ga(m.h,C))k=C.D,vh(m.h,C),R=1;else return;if(m.G!=0){if(C.o)if(R==1){k=C.m?C.m.length:0,C=Date.now()-C.F;var V=m.B;R=Ua(),_e(R,new lh(R,k)),Js(m)}else Nh(m);else if(V=C.s,V==3||V==0&&0<C.X||!(R==1&&Xv(m,C)||R==2&&Ja(m)))switch(k&&0<k.length&&(C=m.h,C.i=C.i.concat(k)),V){case 1:si(m,5);break;case 4:si(m,10);break;case 3:si(m,6);break;default:si(m,2)}}}function Uh(m,C){let k=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(k*=2),k*C}function si(m,C){if(m.j.info("Error code "+C),C==2){var k=a(m.fb,m),R=m.Xa;const V=!R;R=new ri(R||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Vs(R,"https"),Ys(R),V?Fv(R.toString(),k):Bv(R.toString(),k)}else ot(2);m.G=0,m.l&&m.l.sa(C),zh(m),Mh(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function zh(m){if(m.G=0,m.ka=[],m.l){const C=yh(m.h);(C.length!=0||m.i.length!=0)&&(l(m.ka,C),l(m.ka,m.i),m.h.i.length=0,p(m.i),m.i.length=0),m.l.ra()}}function Hh(m,C,k){var R=k instanceof ri?Qt(k):new ri(k);if(R.g!="")C&&(R.g=C+"."+R.g),Xs(R,R.s);else{var V=h.location;R=V.protocol,C=C?C+"."+V.hostname:V.hostname,V=+V.port;var $=new ri(null);R&&Vs($,R),C&&($.g=C),V&&Xs($,V),k&&($.l=k),R=$}return k=m.D,C=m.ya,k&&C&&Ie(R,k,C),Ie(R,"VER",m.la),Ir(m,R),R}function Wh(m,C,k){if(C&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return C=m.Ca&&!m.pa?new Be(new Gs({eb:k})):new Be(m.pa),C.Ha(m.J),C}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Vh(){}t=Vh.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function kt(m,C){we.call(this),this.g=new Rh(C),this.l=m,this.h=C&&C.messageUrlParams||null,m=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(m?m["X-WebChannel-Content-Type"]=C.messageContentType:m={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.va&&(m?m["X-WebChannel-Client-Profile"]=C.va:m={"X-WebChannel-Client-Profile":C.va}),this.g.S=m,(m=C&&C.Sb)&&!y(m)&&(this.g.m=m),this.v=C&&C.supportsCrossDomainXhr||!1,this.u=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!y(C)&&(this.g.D=C,m=this.h,m!==null&&C in m&&(m=this.h,C in m&&delete m[C])),this.j=new Ii(this)}u(kt,we),kt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},kt.prototype.close=function(){qa(this.g)},kt.prototype.o=function(m){var C=this.g;if(typeof m=="string"){var k={};k.__data__=m,m=k}else this.u&&(k={},k.__data__=yr(m),m=k);C.i.push(new Ov(C.Ya++,m)),C.G==3&&Js(C)},kt.prototype.N=function(){this.g.l=null,delete this.j,qa(this.g),delete this.g,kt.aa.N.call(this)};function Xh(m){Fa.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var C=m.__sm__;if(C){e:{for(const k in C){m=k;break e}m=void 0}(this.i=m)&&(m=this.i,C=C!==null&&m in C?C[m]:void 0),this.data=C}else this.data=m}u(Xh,Fa);function Yh(){Ba.call(this),this.status=1}u(Yh,Ba);function Ii(m){this.g=m}u(Ii,Vh),Ii.prototype.ua=function(){_e(this.g,"a")},Ii.prototype.ta=function(m){_e(this.g,new Xh(m))},Ii.prototype.sa=function(m){_e(this.g,new Yh)},Ii.prototype.ra=function(){_e(this.g,"b")},kt.prototype.send=kt.prototype.o,kt.prototype.open=kt.prototype.m,kt.prototype.close=kt.prototype.close,za.NO_ERROR=0,za.TIMEOUT=8,za.HTTP_ERROR=6,kv.COMPLETE="complete",xv.EventType=_r,_r.OPEN="a",_r.CLOSE="b",_r.ERROR="c",_r.MESSAGE="d",we.prototype.listen=we.prototype.K,Be.prototype.listenOnce=Be.prototype.L,Be.prototype.getLastError=Be.prototype.Ka,Be.prototype.getLastErrorCode=Be.prototype.Ba,Be.prototype.getStatus=Be.prototype.Z,Be.prototype.getResponseJson=Be.prototype.Oa,Be.prototype.getResponseText=Be.prototype.oa,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Ha}).apply(typeof _o<"u"?_o:typeof self<"u"?self:typeof window<"u"?window:{});const Hd="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};lt.UNAUTHENTICATED=new lt(null),lt.GOOGLE_CREDENTIALS=new lt("google-credentials-uid"),lt.FIRST_PARTY=new lt("first-party-uid"),lt.MOCK_USER=new lt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Us="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur=new Uc("@firebase/firestore");function Ut(t,...e){if(ur.logLevel<=ke.DEBUG){const n=e.map(eh);ur.debug(`Firestore (${Us}): ${t}`,...n)}}function fv(t,...e){if(ur.logLevel<=ke.ERROR){const n=e.map(eh);ur.error(`Firestore (${Us}): ${t}`,...n)}}function g1(t,...e){if(ur.logLevel<=ke.WARN){const n=e.map(eh);ur.warn(`Firestore (${Us}): ${t}`,...n)}}function eh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(t="Unexpected state"){const e=`FIRESTORE (${Us}) INTERNAL ASSERTION FAILED: `+t;throw fv(e),new Error(e)}function ns(t,e){t||th()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pt={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class gt extends yn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class m1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(lt.UNAUTHENTICATED))}shutdown(){}}class v1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class y1{constructor(e){this.t=e,this.currentUser=lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ns(this.o===void 0);let i=this.i;const c=r=>this.i!==i?(i=this.i,n(r)):Promise.resolve();let v=new is;this.o=()=>{this.i++,this.currentUser=this.u(),v.resolve(),v=new is,e.enqueueRetryable(()=>c(this.currentUser))};const w=()=>{const r=v;e.enqueueRetryable(async()=>{await r.promise,await c(this.currentUser)})},h=r=>{Ut("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=r,this.o&&(this.auth.addAuthTokenListener(this.o),w())};this.t.onInit(r=>h(r)),setTimeout(()=>{if(!this.auth){const r=this.t.getImmediate({optional:!0});r?h(r):(Ut("FirebaseAuthCredentialsProvider","Auth not yet detected"),v.resolve(),v=new is)}},0),w()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(Ut("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ns(typeof i.accessToken=="string"),new dv(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ns(e===null||typeof e=="string"),new lt(e)}}class _1{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=lt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class w1{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new _1(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class x1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class C1{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ns(this.o===void 0);const i=v=>{v.error!=null&&Ut("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${v.error.message}`);const w=v.token!==this.R;return this.R=v.token,Ut("FirebaseAppCheckTokenProvider",`Received ${w?"new":"existing"} token.`),w?n(v.token):Promise.resolve()};this.o=v=>{e.enqueueRetryable(()=>i(v))};const c=v=>{Ut("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=v,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(v=>c(v)),setTimeout(()=>{if(!this.appCheck){const v=this.A.getImmediate({optional:!0});v?c(v):Ut("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ns(typeof n.token=="string"),this.R=n.token,new x1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function S1(t){return t.name==="IndexedDbTransactionError"}class ga{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ga("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ga&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wd,Se;(Se=Wd||(Wd={}))[Se.OK=0]="OK",Se[Se.CANCELLED=1]="CANCELLED",Se[Se.UNKNOWN=2]="UNKNOWN",Se[Se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Se[Se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Se[Se.NOT_FOUND=5]="NOT_FOUND",Se[Se.ALREADY_EXISTS=6]="ALREADY_EXISTS",Se[Se.PERMISSION_DENIED=7]="PERMISSION_DENIED",Se[Se.UNAUTHENTICATED=16]="UNAUTHENTICATED",Se[Se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Se[Se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Se[Se.ABORTED=10]="ABORTED",Se[Se.OUT_OF_RANGE=11]="OUT_OF_RANGE",Se[Se.UNIMPLEMENTED=12]="UNIMPLEMENTED",Se[Se.INTERNAL=13]="INTERNAL",Se[Se.UNAVAILABLE=14]="UNAVAILABLE",Se[Se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new hv([4294967295,4294967295],0);function Ml(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,n,i=1e3,c=1.5,v=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=c,this.Qo=v,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),c=Math.max(0,n-i);c>0&&Ut("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,c,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,n,i,c,v){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=c,this.removalCallback=v,this.deferred=new is,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(w=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,c,v){const w=Date.now()+i,h=new nh(e,n,w,c,v);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new gt(pt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var Vd,Xd;(Xd=Vd||(Vd={})).ea="default",Xd.Cache="cache";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd=new Map;function k1(t,e,n,i){if(e===!0&&i===!0)throw new gt(pt.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function b1(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":th()}function O1(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new gt(pt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=b1(t);throw new gt(pt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new gt(pt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new gt(pt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}k1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=E1((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(v){if(v.timeoutSeconds!==void 0){if(isNaN(v.timeoutSeconds))throw new gt(pt.INVALID_ARGUMENT,`invalid long polling timeout: ${v.timeoutSeconds} (must not be NaN)`);if(v.timeoutSeconds<5)throw new gt(pt.INVALID_ARGUMENT,`invalid long polling timeout: ${v.timeoutSeconds} (minimum allowed value is 5)`);if(v.timeoutSeconds>30)throw new gt(pt.INVALID_ARGUMENT,`invalid long polling timeout: ${v.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,c){return i.timeoutSeconds===c.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pv{constructor(e,n,i,c){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gd({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new gt(pt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new gt(pt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gd(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new m1;switch(i.type){case"firstParty":return new w1(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new gt(pt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Yd.get(n);i&&(Ut("ComponentProvider","Removing Datastore"),Yd.delete(n),i.terminate())}(this),Promise.resolve()}}function P1(t,e,n,i={}){var c;const v=(t=O1(t,pv))._getSettings(),w=`${e}:${n}`;if(v.host!=="firestore.googleapis.com"&&v.host!==w&&g1("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},v),{host:w,ssl:!1})),i.mockUserToken){let h,r;if(typeof i.mockUserToken=="string")h=i.mockUserToken,r=lt.MOCK_USER;else{h=Aw(i.mockUserToken,(c=t._app)===null||c===void 0?void 0:c.options.projectId);const f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new gt(pt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");r=new lt(f)}t._authCredentials=new v1(new dv(h,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new T1(this,"async_queue_retry"),this.Vu=()=>{const i=Ml();i&&Ut("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=Ml();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Ml();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new is;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!S1(e))throw e;Ut("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const c=function(w){let h=w.message||"";return w.stack&&(h=w.stack.includes(w.message)?w.stack:w.message+`
`+w.stack),h}(i);throw fv("INTERNAL UNHANDLED ERROR: ",c),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const c=nh.createAndSchedule(this,e,n,i,v=>this.yu(v));return this.Tu.push(c),c}fu(){this.Eu&&th()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class I1 extends pv{constructor(e,n,i,c){super(e,n,i,c),this.type="firestore",this._queue=new $d,this._persistenceKey=(c==null?void 0:c.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $d(e),this._firestoreClient=void 0,await e}}}function A1(t,e){const n=typeof t=="object"?t:Pm(),i=typeof t=="string"?t:"(default)",c=Hc(n,"firestore").getImmediate({identifier:i});if(!c._initialized){const v=Pw("firestore");v&&P1(c,...v)}return c}(function(e,n=!0){(function(c){Us=c})(gr),lr(new wi("firestore",(i,{instanceIdentifier:c,options:v})=>{const w=i.getProvider("app").getImmediate(),h=new I1(new y1(i.getProvider("auth-internal")),new C1(i.getProvider("app-check-internal")),function(f,d){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new gt(pt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ga(f.options.projectId,d)}(w,c),w);return v=Object.assign({useFetchStreams:n},v),h._setSettings(v),h},"PUBLIC").setMultipleInstances(!0)),Gn(Hd,"4.7.3",e),Gn(Hd,"4.7.3","esm2017")})();const D1={apiKey:"AIzaSyBXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",authDomain:"meesho-design-studio.firebaseapp.com",projectId:"meesho-design-studio",storageBucket:"meesho-design-studio.appspot.com",messagingSenderId:"123456789012",appId:"1:123456789012:web:abcdefghijklmnop"},gv=Om(D1),Br=h1(gv);A1(gv);const mv=ae.createContext(void 0);function ih(){const t=ae.useContext(mv);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function R1({children:t}){const[e,n]=ae.useState(null),[i,c]=ae.useState(!0);function v(d,o){return KC(Br,d,o)}function w(d,o){return qC(Br,d,o)}function h(){return eS(Br)}function r(){const d=new nn;return wS(Br,d)}ae.useEffect(()=>ZC(Br,o=>{n(o),c(!1)}),[]);const f={currentUser:e,login:w,signup:v,logout:h,signInWithGoogle:r,loading:i};return P.jsx(mv.Provider,{value:f,children:!i&&t})}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var M1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ye=(t,e)=>{const n=ae.forwardRef(({color:i="currentColor",size:c=24,strokeWidth:v=2,absoluteStrokeWidth:w,className:h="",children:r,...f},d)=>ae.createElement("svg",{ref:d,...M1,width:c,height:c,stroke:i,strokeWidth:w?Number(v)*24/Number(c):v,className:["lucide",`lucide-${j1(t)}`,h].join(" "),...f},[...e.map(([o,a])=>ae.createElement(o,a)),...Array.isArray(r)?r:[r]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=Ye("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=Ye("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=Ye("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=Ye("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=Ye("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=Ye("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=Ye("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=Ye("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=Ye("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=Ye("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=Ye("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=Ye("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=Ye("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zu=Ye("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=Ye("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=Ye("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=Ye("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=Ye("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=Ye("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);function q1(){return P.jsxs("div",{className:"text-center",children:[P.jsxs("div",{className:"max-w-4xl mx-auto",children:[P.jsxs("div",{className:"mb-8",children:[P.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-meesho-primary to-meesho-secondary rounded-full mb-6",children:P.jsx(cr,{className:"w-10 h-10 text-white"})}),P.jsxs("h1",{className:"text-5xl font-bold text-meesho-dark mb-4",children:["Welcome to"," ",P.jsx("span",{className:"bg-gradient-to-r from-meesho-primary to-meesho-secondary bg-clip-text text-transparent",children:"Meesho Design Studio"})]}),P.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-2xl mx-auto",children:"Unleash your creativity and design stunning outfits! Sketch your ideas, generate AI-powered designs, and share them with the community."})]}),P.jsxs(Ji,{to:"/sketch",className:"inline-flex items-center space-x-2 btn-primary text-lg px-8 py-4",children:[P.jsx(zu,{className:"w-5 h-5"}),P.jsx("span",{children:"Start Designing"})]})]}),P.jsxs("div",{className:"mt-20 grid md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:[P.jsxs("div",{className:"card text-center",children:[P.jsx("div",{className:"w-12 h-12 bg-meesho-yellow rounded-lg flex items-center justify-center mx-auto mb-4",children:P.jsx(cr,{className:"w-6 h-6 text-meesho-dark"})}),P.jsx("h3",{className:"text-xl font-semibold text-meesho-dark mb-2",children:"Sketch & Design"}),P.jsx("p",{className:"text-gray-600",children:"Use our intuitive canvas to sketch your outfit ideas and bring them to life."})]}),P.jsxs("div",{className:"card text-center",children:[P.jsx("div",{className:"w-12 h-12 bg-meesho-purple rounded-lg flex items-center justify-center mx-auto mb-4",children:P.jsx(zu,{className:"w-6 h-6 text-meesho-dark"})}),P.jsx("h3",{className:"text-xl font-semibold text-meesho-dark mb-2",children:"AI Generation"}),P.jsx("p",{className:"text-gray-600",children:"Transform your sketches into stunning AI-generated dress designs instantly."})]}),P.jsxs("div",{className:"card text-center",children:[P.jsx("div",{className:"w-12 h-12 bg-meesho-pink rounded-lg flex items-center justify-center mx-auto mb-4",children:P.jsx(K1,{className:"w-6 h-6 text-meesho-dark"})}),P.jsx("h3",{className:"text-xl font-semibold text-meesho-dark mb-2",children:"Share & Connect"}),P.jsx("p",{className:"text-gray-600",children:"Share your designs with the community, get likes, comments, and earn rewards."})]})]}),P.jsxs("div",{className:"mt-16 bg-white rounded-2xl shadow-lg p-8 max-w-4xl mx-auto",children:[P.jsx("h2",{className:"text-2xl font-bold text-meesho-dark mb-6",children:"Community Stats"}),P.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[P.jsxs("div",{className:"text-center",children:[P.jsx("div",{className:"text-3xl font-bold text-meesho-primary",children:"1,234"}),P.jsx("div",{className:"text-gray-600",children:"Designs Created"})]}),P.jsxs("div",{className:"text-center",children:[P.jsx("div",{className:"text-3xl font-bold text-meesho-secondary",children:"567"}),P.jsx("div",{className:"text-gray-600",children:"Active Designers"})]}),P.jsxs("div",{className:"text-center",children:[P.jsx("div",{className:"text-3xl font-bold text-meesho-accent",children:"8,901"}),P.jsx("div",{className:"text-gray-600",children:"Total Likes"})]}),P.jsxs("div",{className:"text-center",children:[P.jsx("div",{className:"text-3xl font-bold text-meesho-yellow",children:"234"}),P.jsx("div",{className:"text-gray-600",children:"Comments"})]})]})]}),P.jsxs("div",{className:"mt-16",children:[P.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-6",children:[P.jsx(ks,{className:"w-6 h-6 text-meesho-yellow"}),P.jsx("h2",{className:"text-2xl font-bold text-meesho-dark",children:"Top Designers"})]}),P.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 max-w-2xl mx-auto",children:[P.jsx("div",{className:"space-y-4",children:[{name:"Sarah Designer",points:1250,rank:1},{name:"Mike Creative",points:980,rank:2},{name:"Emma Style",points:756,rank:3}].map(t=>P.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[P.jsxs("div",{className:"flex items-center space-x-3",children:[P.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold ${t.rank===1?"bg-meesho-yellow":t.rank===2?"bg-gray-400":"bg-meesho-orange"}`,children:t.rank}),P.jsx("span",{className:"font-medium text-meesho-dark",children:t.name})]}),P.jsxs("div",{className:"text-meesho-primary font-semibold",children:[t.points," pts"]})]},t.rank))}),P.jsx(Ji,{to:"/leaderboard",className:"block text-center mt-6 text-meesho-primary hover:text-meesho-primary/80 font-medium",children:"View Full Leaderboard "})]})]})]})}var _v={};const J1={},Q1=Object.freeze(Object.defineProperty({__proto__:null,default:J1},Symbol.toStringTag,{value:"Module"})),jl=$v(Q1);(function(t){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var e=e||{version:"5.5.2"};if(t.fabric=e,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?e.document=document:e.document=document.implementation.createHTMLDocument(""),e.window=window;else{var n=jl,i=new n.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;e.document=i.document,e.jsdomImplForWrapper=jl.implForWrapper,e.nodeCanvas=jl.Canvas,e.window=i,DOMParser=e.window.DOMParser}e.isTouchSupported="ontouchstart"in e.window||"ontouchstart"in e.document||e.window&&e.window.navigator&&e.window.navigator.maxTouchPoints>0,e.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",e.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],e.DPI=96,e.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",e.commaWsp="(?:\\s+,?\\s*|,\\s*)",e.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,e.reNonWord=/[ \n\.,;!\?\-]/,e.fontPaths={},e.iMatrix=[1,0,0,1,0,0],e.svgNS="http://www.w3.org/2000/svg",e.perfLimitSizeTotal=2097152,e.maxCacheSideLimit=4096,e.minCacheSideLimit=256,e.charWidthsCache={},e.textureSize=2048,e.disableStyleCopyPaste=!1,e.enableGLFiltering=!0,e.devicePixelRatio=e.window.devicePixelRatio||e.window.webkitDevicePixelRatio||e.window.mozDevicePixelRatio||1,e.browserShadowBlurConstant=1,e.arcToSegmentsCache={},e.boundsOfCurveCache={},e.cachesBoundsOfCurve=!0,e.forceGLPutImageData=!1,e.initFilterBackend=function(){if(e.enableGLFiltering&&e.isWebglSupported&&e.isWebglSupported(e.textureSize))return console.log("max texture size: "+e.maxTextureSize),new e.WebglFilterBackend({tileSize:e.textureSize});if(e.Canvas2dFilterBackend)return new e.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=e),function(){function h(s,u){if(this.__eventListeners[s]){var p=this.__eventListeners[s];u?p[p.indexOf(u)]=!1:e.util.array.fill(p,!1)}}function r(s,u){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var p in s)this.on(p,s[p]);else this.__eventListeners[s]||(this.__eventListeners[s]=[]),this.__eventListeners[s].push(u);return this}function f(s,u){var p=(function(){u.apply(this,arguments),this.off(s,p)}).bind(this);this.on(s,p)}function d(s,u){if(arguments.length===1)for(var p in s)f.call(this,p,s[p]);else f.call(this,s,u);return this}function o(s,u){if(!this.__eventListeners)return this;if(arguments.length===0)for(s in this.__eventListeners)h.call(this,s);else if(arguments.length===1&&typeof arguments[0]=="object")for(var p in s)h.call(this,p,s[p]);else h.call(this,s,u);return this}function a(s,u){if(!this.__eventListeners)return this;var p=this.__eventListeners[s];if(!p)return this;for(var l=0,g=p.length;l<g;l++)p[l]&&p[l].call(this,u||{});return this.__eventListeners[s]=p.filter(function(y){return y!==!1}),this}e.Observable={fire:a,on:r,once:d,off:o}}(),e.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var h=0,r=arguments.length;h<r;h++)this._onObjectAdded(arguments[h]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(h,r,f){var d=this._objects;return f?d[r]=h:d.splice(r,0,h),this._onObjectAdded&&this._onObjectAdded(h),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var h=this._objects,r,f=!1,d=0,o=arguments.length;d<o;d++)r=h.indexOf(arguments[d]),r!==-1&&(f=!0,h.splice(r,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[d]));return this.renderOnAddRemove&&f&&this.requestRenderAll(),this},forEachObject:function(h,r){for(var f=this.getObjects(),d=0,o=f.length;d<o;d++)h.call(r,f[d],d,f);return this},getObjects:function(h){return typeof h>"u"?this._objects.concat():this._objects.filter(function(r){return r.type===h})},item:function(h){return this._objects[h]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(h,r){return this._objects.indexOf(h)>-1?!0:r?this._objects.some(function(f){return typeof f.contains=="function"&&f.contains(h,!0)}):!1},complexity:function(){return this._objects.reduce(function(h,r){return h+=r.complexity?r.complexity():0,h},0)}},e.CommonMethods={_setOptions:function(h){for(var r in h)this.set(r,h[r])},_initGradient:function(h,r){h&&h.colorStops&&!(h instanceof e.Gradient)&&this.set(r,new e.Gradient(h))},_initPattern:function(h,r,f){h&&h.source&&!(h instanceof e.Pattern)?this.set(r,new e.Pattern(h,f)):f&&f()},_setObject:function(h){for(var r in h)this._set(r,h[r])},set:function(h,r){return typeof h=="object"?this._setObject(h):this._set(h,r),this},_set:function(h,r){this[h]=r},toggle:function(h){var r=this.get(h);return typeof r=="boolean"&&this.set(h,!r),this},get:function(h){return this[h]}},function(h){var r=Math.sqrt,f=Math.atan2,d=Math.pow,o=Math.PI/180,a=Math.PI/2;e.util={cos:function(s){if(s===0)return 1;s<0&&(s=-s);var u=s/a;switch(u){case 1:case 3:return 0;case 2:return-1}return Math.cos(s)},sin:function(s){if(s===0)return 0;var u=s/a,p=1;switch(s<0&&(p=-1),u){case 1:return p;case 2:return 0;case 3:return-p}return Math.sin(s)},removeFromArray:function(s,u){var p=s.indexOf(u);return p!==-1&&s.splice(p,1),s},getRandomInt:function(s,u){return Math.floor(Math.random()*(u-s+1))+s},degreesToRadians:function(s){return s*o},radiansToDegrees:function(s){return s/o},rotatePoint:function(s,u,p){var l=new e.Point(s.x-u.x,s.y-u.y),g=e.util.rotateVector(l,p);return new e.Point(g.x,g.y).addEquals(u)},rotateVector:function(s,u){var p=e.util.sin(u),l=e.util.cos(u),g=s.x*l-s.y*p,y=s.x*p+s.y*l;return{x:g,y}},createVector:function(s,u){return new e.Point(u.x-s.x,u.y-s.y)},calcAngleBetweenVectors:function(s,u){return Math.acos((s.x*u.x+s.y*u.y)/(Math.hypot(s.x,s.y)*Math.hypot(u.x,u.y)))},getHatVector:function(s){return new e.Point(s.x,s.y).multiply(1/Math.hypot(s.x,s.y))},getBisector:function(s,u,p){var l=e.util.createVector(s,u),g=e.util.createVector(s,p),y=e.util.calcAngleBetweenVectors(l,g),_=e.util.calcAngleBetweenVectors(e.util.rotateVector(l,y),g),x=y*(_===0?1:-1)/2;return{vector:e.util.getHatVector(e.util.rotateVector(l,x)),angle:y}},projectStrokeOnPoints:function(s,u,p){var l=[],g=u.strokeWidth/2,y=u.strokeUniform?new e.Point(1/u.scaleX,1/u.scaleY):new e.Point(1,1),_=function(x){var S=g/Math.hypot(x.x,x.y);return new e.Point(x.x*S*y.x,x.y*S*y.y)};return s.length<=1||s.forEach(function(x,S){var b=new e.Point(x.x,x.y),E,T;S===0?(T=s[S+1],E=p?_(e.util.createVector(T,b)).addEquals(b):s[s.length-1]):S===s.length-1?(E=s[S-1],T=p?_(e.util.createVector(E,b)).addEquals(b):s[0]):(E=s[S-1],T=s[S+1]);var O=e.util.getBisector(b,E,T),A=O.vector,j=O.angle,U,M;if(u.strokeLineJoin==="miter"&&(U=-g/Math.sin(j/2),M=new e.Point(A.x*U*y.x,A.y*U*y.y),Math.hypot(M.x,M.y)/g<=u.strokeMiterLimit)){l.push(b.add(M)),l.push(b.subtract(M));return}U=-g*Math.SQRT2,M=new e.Point(A.x*U*y.x,A.y*U*y.y),l.push(b.add(M)),l.push(b.subtract(M))}),l},transformPoint:function(s,u,p){return p?new e.Point(u[0]*s.x+u[2]*s.y,u[1]*s.x+u[3]*s.y):new e.Point(u[0]*s.x+u[2]*s.y+u[4],u[1]*s.x+u[3]*s.y+u[5])},makeBoundingBoxFromPoints:function(s,u){if(u)for(var p=0;p<s.length;p++)s[p]=e.util.transformPoint(s[p],u);var l=[s[0].x,s[1].x,s[2].x,s[3].x],g=e.util.array.min(l),y=e.util.array.max(l),_=y-g,x=[s[0].y,s[1].y,s[2].y,s[3].y],S=e.util.array.min(x),b=e.util.array.max(x),E=b-S;return{left:g,top:S,width:_,height:E}},invertTransform:function(s){var u=1/(s[0]*s[3]-s[1]*s[2]),p=[u*s[3],-u*s[1],-u*s[2],u*s[0]],l=e.util.transformPoint({x:s[4],y:s[5]},p,!0);return p[4]=-l.x,p[5]=-l.y,p},toFixed:function(s,u){return parseFloat(Number(s).toFixed(u))},parseUnit:function(s,u){var p=/\D{0,2}$/.exec(s),l=parseFloat(s);switch(u||(u=e.Text.DEFAULT_SVG_FONT_SIZE),p[0]){case"mm":return l*e.DPI/25.4;case"cm":return l*e.DPI/2.54;case"in":return l*e.DPI;case"pt":return l*e.DPI/72;case"pc":return l*e.DPI/72*12;case"em":return l*u;default:return l}},falseFunction:function(){return!1},getKlass:function(s,u){return s=e.util.string.camelize(s.charAt(0).toUpperCase()+s.slice(1)),e.util.resolveNamespace(u)[s]},getSvgAttributes:function(s){var u=["instantiated_by_use","style","id","class"];switch(s){case"linearGradient":u=u.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":u=u.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":u=u.concat(["offset","stop-color","stop-opacity"]);break}return u},resolveNamespace:function(s){if(!s)return e;var u=s.split("."),p=u.length,l,g=h||e.window;for(l=0;l<p;++l)g=g[u[l]];return g},loadImage:function(s,u,p,l){if(!s){u&&u.call(p,s);return}var g=e.util.createImage(),y=function(){u&&u.call(p,g,!1),g=g.onload=g.onerror=null};g.onload=y,g.onerror=function(){e.log("Error loading "+g.src),u&&u.call(p,null,!0),g=g.onload=g.onerror=null},s.indexOf("data")!==0&&l!==void 0&&l!==null&&(g.crossOrigin=l),s.substring(0,14)==="data:image/svg"&&(g.onload=null,e.util.loadImageInDom(g,y)),g.src=s},loadImageInDom:function(s,u){var p=e.document.createElement("div");p.style.width=p.style.height="1px",p.style.left=p.style.top="-100%",p.style.position="absolute",p.appendChild(s),e.document.querySelector("body").appendChild(p),s.onload=function(){u(),p.parentNode.removeChild(p),p=null}},enlivenObjects:function(s,u,p,l){s=s||[];var g=[],y=0,_=s.length;function x(){++y===_&&u&&u(g.filter(function(S){return S}))}if(!_){u&&u(g);return}s.forEach(function(S,b){if(!S||!S.type){x();return}var E=e.util.getKlass(S.type,p);E.fromObject(S,function(T,O){O||(g[b]=T),l&&l(S,T,O),x()})})},enlivenObjectEnlivables:function(s,u,p){var l=e.Object.ENLIVEN_PROPS.filter(function(g){return!!s[g]});e.util.enlivenObjects(l.map(function(g){return s[g]}),function(g){var y={};l.forEach(function(_,x){y[_]=g[x],u&&(u[_]=g[x])}),p&&p(y)})},enlivenPatterns:function(s,u){s=s||[];function p(){++g===y&&u&&u(l)}var l=[],g=0,y=s.length;if(!y){u&&u(l);return}s.forEach(function(_,x){_&&_.source?new e.Pattern(_,function(S){l[x]=S,p()}):(l[x]=_,p())})},groupSVGElements:function(s,u,p){var l;return s&&s.length===1?(typeof p<"u"&&(s[0].sourcePath=p),s[0]):(u&&(u.width&&u.height?u.centerPoint={x:u.width/2,y:u.height/2}:(delete u.width,delete u.height)),l=new e.Group(s,u),typeof p<"u"&&(l.sourcePath=p),l)},populateWithProperties:function(s,u,p){if(p&&Array.isArray(p))for(var l=0,g=p.length;l<g;l++)p[l]in s&&(u[p[l]]=s[p[l]])},createCanvasElement:function(){return e.document.createElement("canvas")},copyCanvasElement:function(s){var u=e.util.createCanvasElement();return u.width=s.width,u.height=s.height,u.getContext("2d").drawImage(s,0,0),u},toDataURL:function(s,u,p){return s.toDataURL("image/"+u,p)},createImage:function(){return e.document.createElement("img")},multiplyTransformMatrices:function(s,u,p){return[s[0]*u[0]+s[2]*u[1],s[1]*u[0]+s[3]*u[1],s[0]*u[2]+s[2]*u[3],s[1]*u[2]+s[3]*u[3],p?0:s[0]*u[4]+s[2]*u[5]+s[4],p?0:s[1]*u[4]+s[3]*u[5]+s[5]]},qrDecompose:function(s){var u=f(s[1],s[0]),p=d(s[0],2)+d(s[1],2),l=r(p),g=(s[0]*s[3]-s[2]*s[1])/l,y=f(s[0]*s[2]+s[1]*s[3],p);return{angle:u/o,scaleX:l,scaleY:g,skewX:y/o,skewY:0,translateX:s[4],translateY:s[5]}},calcRotateMatrix:function(s){if(!s.angle)return e.iMatrix.concat();var u=e.util.degreesToRadians(s.angle),p=e.util.cos(u),l=e.util.sin(u);return[p,l,-l,p,0,0]},calcDimensionsMatrix:function(s){var u=typeof s.scaleX>"u"?1:s.scaleX,p=typeof s.scaleY>"u"?1:s.scaleY,l=[s.flipX?-u:u,0,0,s.flipY?-p:p,0,0],g=e.util.multiplyTransformMatrices,y=e.util.degreesToRadians;return s.skewX&&(l=g(l,[1,0,Math.tan(y(s.skewX)),1],!0)),s.skewY&&(l=g(l,[1,Math.tan(y(s.skewY)),0,1],!0)),l},composeMatrix:function(s){var u=[1,0,0,1,s.translateX||0,s.translateY||0],p=e.util.multiplyTransformMatrices;return s.angle&&(u=p(u,e.util.calcRotateMatrix(s))),(s.scaleX!==1||s.scaleY!==1||s.skewX||s.skewY||s.flipX||s.flipY)&&(u=p(u,e.util.calcDimensionsMatrix(s))),u},resetObjectTransform:function(s){s.scaleX=1,s.scaleY=1,s.skewX=0,s.skewY=0,s.flipX=!1,s.flipY=!1,s.rotate(0)},saveObjectTransform:function(s){return{scaleX:s.scaleX,scaleY:s.scaleY,skewX:s.skewX,skewY:s.skewY,angle:s.angle,left:s.left,flipX:s.flipX,flipY:s.flipY,top:s.top}},isTransparent:function(s,u,p,l){l>0&&(u>l?u-=l:u=0,p>l?p-=l:p=0);var g=!0,y,_,x=s.getImageData(u,p,l*2||1,l*2||1),S=x.data.length;for(y=3;y<S&&(_=x.data[y],g=_<=0,g!==!1);y+=4);return x=null,g},parsePreserveAspectRatioAttribute:function(s){var u="meet",p="Mid",l="Mid",g=s.split(" "),y;return g&&g.length&&(u=g.pop(),u!=="meet"&&u!=="slice"?(y=u,u="meet"):g.length&&(y=g.pop())),p=y!=="none"?y.slice(1,4):"none",l=y!=="none"?y.slice(5,8):"none",{meetOrSlice:u,alignX:p,alignY:l}},clearFabricFontCache:function(s){s=(s||"").toLowerCase(),s?e.charWidthsCache[s]&&delete e.charWidthsCache[s]:e.charWidthsCache={}},limitDimsByArea:function(s,u){var p=Math.sqrt(u*s),l=Math.floor(u/p);return{x:Math.floor(p),y:l}},capValue:function(s,u,p){return Math.max(s,Math.min(u,p))},findScaleToFit:function(s,u){return Math.min(u.width/s.width,u.height/s.height)},findScaleToCover:function(s,u){return Math.max(u.width/s.width,u.height/s.height)},matrixToSVG:function(s){return"matrix("+s.map(function(u){return e.util.toFixed(u,e.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(s,u){var p=e.util.invertTransform(u),l=e.util.multiplyTransformMatrices(p,s.calcOwnMatrix());e.util.applyTransformToObject(s,l)},addTransformToObject:function(s,u){e.util.applyTransformToObject(s,e.util.multiplyTransformMatrices(u,s.calcOwnMatrix()))},applyTransformToObject:function(s,u){var p=e.util.qrDecompose(u),l=new e.Point(p.translateX,p.translateY);s.flipX=!1,s.flipY=!1,s.set("scaleX",p.scaleX),s.set("scaleY",p.scaleY),s.skewX=p.skewX,s.skewY=p.skewY,s.angle=p.angle,s.setPositionByOrigin(l,"center","center")},sizeAfterTransform:function(s,u,p){var l=s/2,g=u/2,y=[{x:-l,y:-g},{x:l,y:-g},{x:-l,y:g},{x:l,y:g}],_=e.util.calcDimensionsMatrix(p),x=e.util.makeBoundingBoxFromPoints(y,_);return{x:x.width,y:x.height}},mergeClipPaths:function(s,u){var p=s,l=u;p.inverted&&!l.inverted&&(p=u,l=s),e.util.applyTransformToObject(l,e.util.multiplyTransformMatrices(e.util.invertTransform(p.calcTransformMatrix()),l.calcTransformMatrix()));var g=p.inverted&&l.inverted;return g&&(p.inverted=l.inverted=!1),new e.Group([p],{clipPath:l,inverted:g})},hasStyleChanged:function(s,u,p){return p=p||!1,s.fill!==u.fill||s.stroke!==u.stroke||s.strokeWidth!==u.strokeWidth||s.fontSize!==u.fontSize||s.fontFamily!==u.fontFamily||s.fontWeight!==u.fontWeight||s.fontStyle!==u.fontStyle||s.textBackgroundColor!==u.textBackgroundColor||s.deltaY!==u.deltaY||p&&(s.overline!==u.overline||s.underline!==u.underline||s.linethrough!==u.linethrough)},stylesToArray:function(p,u){for(var p=e.util.object.clone(p,!0),l=u.split(`
`),g=-1,y={},_=[],x=0;x<l.length;x++){if(!p[x]){g+=l[x].length;continue}for(var S=0;S<l[x].length;S++){g++;var b=p[x][S];if(b&&Object.keys(b).length>0){var E=e.util.hasStyleChanged(y,b,!0);E?_.push({start:g,end:g+1,style:b}):_[_.length-1].end++}y=b||{}}}return _},stylesFromArray:function(s,u){if(!Array.isArray(s))return s;for(var p=u.split(`
`),l=-1,g=0,y={},_=0;_<p.length;_++)for(var x=0;x<p[_].length;x++)l++,s[g]&&s[g].start<=l&&l<s[g].end&&(y[_]=y[_]||{},y[_][x]=Object.assign({},s[g].style),l===s[g].end-1&&g++);return y}}}(t),function(){var h=Array.prototype.join,r={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},f={m:"l",M:"L"};function d(I,L,B,F,X,N,D,z,H,J,Y){var te=e.util.cos(I),ie=e.util.sin(I),le=e.util.cos(L),G=e.util.sin(L),W=B*X*le-F*N*G+D,Q=F*X*le+B*N*G+z,ee=J+H*(-B*X*ie-F*N*te),K=Y+H*(-F*X*ie+B*N*te),ne=W+H*(B*X*G+F*N*le),ue=Q+H*(F*X*G-B*N*le);return["C",ee,K,ne,ue,W,Q]}function o(I,L,B,F,X,N,D){var z=Math.PI,H=D*z/180,J=e.util.sin(H),Y=e.util.cos(H),te=0,ie=0;B=Math.abs(B),F=Math.abs(F);var le=-Y*I*.5-J*L*.5,G=-Y*L*.5+J*I*.5,W=B*B,Q=F*F,ee=G*G,K=le*le,ne=W*Q-W*ee-Q*K,ue=0;if(ne<0){var me=Math.sqrt(1-ne/(W*Q));B*=me,F*=me}else ue=(X===N?-1:1)*Math.sqrt(ne/(W*ee+Q*K));var pe=ue*B*G/F,Z=-ue*F*le/B,ge=Y*pe-J*Z+I*.5,ye=J*pe+Y*Z+L*.5,xe=a(1,0,(le-pe)/B,(G-Z)/F),we=a((le-pe)/B,(G-Z)/F,(-le-pe)/B,(-G-Z)/F);N===0&&we>0?we-=2*z:N===1&&we<0&&(we+=2*z);for(var _e=Math.ceil(Math.abs(we/z*2)),ze=[],Me=we/_e,Xt=8/3*Math.sin(Me/4)*Math.sin(Me/4)/Math.sin(Me/2),ni=xe+Me,Ze=0;Ze<_e;Ze++)ze[Ze]=d(xe,ni,Y,J,B,F,ge,ye,Xt,te,ie),te=ze[Ze][5],ie=ze[Ze][6],xe=ni,ni+=Me;return ze}function a(I,L,B,F){var X=Math.atan2(L,I),N=Math.atan2(F,B);return N>=X?N-X:2*Math.PI-(X-N)}function s(I,L,B,F,X,N,D,z){var H;if(e.cachesBoundsOfCurve&&(H=h.call(arguments),e.boundsOfCurveCache[H]))return e.boundsOfCurveCache[H];var J=Math.sqrt,Y=Math.min,te=Math.max,ie=Math.abs,le=[],G=[[],[]],W,Q,ee,K,ne,ue,me,pe;Q=6*I-12*B+6*X,W=-3*I+9*B-9*X+3*D,ee=3*B-3*I;for(var Z=0;Z<2;++Z){if(Z>0&&(Q=6*L-12*F+6*N,W=-3*L+9*F-9*N+3*z,ee=3*F-3*L),ie(W)<1e-12){if(ie(Q)<1e-12)continue;K=-ee/Q,0<K&&K<1&&le.push(K);continue}me=Q*Q-4*ee*W,!(me<0)&&(pe=J(me),ne=(-Q+pe)/(2*W),0<ne&&ne<1&&le.push(ne),ue=(-Q-pe)/(2*W),0<ue&&ue<1&&le.push(ue))}for(var ge,ye,xe=le.length,we=xe,_e;xe--;)K=le[xe],_e=1-K,ge=_e*_e*_e*I+3*_e*_e*K*B+3*_e*K*K*X+K*K*K*D,G[0][xe]=ge,ye=_e*_e*_e*L+3*_e*_e*K*F+3*_e*K*K*N+K*K*K*z,G[1][xe]=ye;G[0][we]=I,G[1][we]=L,G[0][we+1]=D,G[1][we+1]=z;var ze=[{x:Y.apply(null,G[0]),y:Y.apply(null,G[1])},{x:te.apply(null,G[0]),y:te.apply(null,G[1])}];return e.cachesBoundsOfCurve&&(e.boundsOfCurveCache[H]=ze),ze}function u(I,L,B){for(var F=B[1],X=B[2],N=B[3],D=B[4],z=B[5],H=B[6],J=B[7],Y=o(H-I,J-L,F,X,D,z,N),te=0,ie=Y.length;te<ie;te++)Y[te][1]+=I,Y[te][2]+=L,Y[te][3]+=I,Y[te][4]+=L,Y[te][5]+=I,Y[te][6]+=L;return Y}function p(I){var L=0,B=0,F=I.length,X=0,N=0,D,z,H,J=[],Y,te,ie;for(z=0;z<F;++z){switch(H=!1,D=I[z].slice(0),D[0]){case"l":D[0]="L",D[1]+=L,D[2]+=B;case"L":L=D[1],B=D[2];break;case"h":D[1]+=L;case"H":D[0]="L",D[2]=B,L=D[1];break;case"v":D[1]+=B;case"V":D[0]="L",B=D[1],D[1]=L,D[2]=B;break;case"m":D[0]="M",D[1]+=L,D[2]+=B;case"M":L=D[1],B=D[2],X=D[1],N=D[2];break;case"c":D[0]="C",D[1]+=L,D[2]+=B,D[3]+=L,D[4]+=B,D[5]+=L,D[6]+=B;case"C":te=D[3],ie=D[4],L=D[5],B=D[6];break;case"s":D[0]="S",D[1]+=L,D[2]+=B,D[3]+=L,D[4]+=B;case"S":Y==="C"?(te=2*L-te,ie=2*B-ie):(te=L,ie=B),L=D[3],B=D[4],D[0]="C",D[5]=D[3],D[6]=D[4],D[3]=D[1],D[4]=D[2],D[1]=te,D[2]=ie,te=D[3],ie=D[4];break;case"q":D[0]="Q",D[1]+=L,D[2]+=B,D[3]+=L,D[4]+=B;case"Q":te=D[1],ie=D[2],L=D[3],B=D[4];break;case"t":D[0]="T",D[1]+=L,D[2]+=B;case"T":Y==="Q"?(te=2*L-te,ie=2*B-ie):(te=L,ie=B),D[0]="Q",L=D[1],B=D[2],D[1]=te,D[2]=ie,D[3]=L,D[4]=B;break;case"a":D[0]="A",D[6]+=L,D[7]+=B;case"A":H=!0,J=J.concat(u(L,B,D)),L=D[6],B=D[7];break;case"z":case"Z":L=X,B=N;break}H||J.push(D),Y=D[0]}return J}function l(I,L,B,F){return Math.sqrt((B-I)*(B-I)+(F-L)*(F-L))}function g(I){return I*I*I}function y(I){return 3*I*I*(1-I)}function _(I){return 3*I*(1-I)*(1-I)}function x(I){return(1-I)*(1-I)*(1-I)}function S(I,L,B,F,X,N,D,z){return function(H){var J=g(H),Y=y(H),te=_(H),ie=x(H);return{x:D*J+X*Y+B*te+I*ie,y:z*J+N*Y+F*te+L*ie}}}function b(I,L,B,F,X,N,D,z){return function(H){var J=1-H,Y=3*J*J*(B-I)+6*J*H*(X-B)+3*H*H*(D-X),te=3*J*J*(F-L)+6*J*H*(N-F)+3*H*H*(z-N);return Math.atan2(te,Y)}}function E(I){return I*I}function T(I){return 2*I*(1-I)}function O(I){return(1-I)*(1-I)}function A(I,L,B,F,X,N){return function(D){var z=E(D),H=T(D),J=O(D);return{x:X*z+B*H+I*J,y:N*z+F*H+L*J}}}function j(I,L,B,F,X,N){return function(D){var z=1-D,H=2*z*(B-I)+2*D*(X-B),J=2*z*(F-L)+2*D*(N-F);return Math.atan2(J,H)}}function U(I,L,B){var F={x:L,y:B},X,N=0,D;for(D=1;D<=100;D+=1)X=I(D/100),N+=l(F.x,F.y,X.x,X.y),F=X;return N}function M(I,L){for(var B=0,F=0,X=I.iterator,N={x:I.x,y:I.y},D,z,H=.01,J=I.angleFinder,Y;F<L&&H>1e-4;)D=X(B),Y=B,z=l(N.x,N.y,D.x,D.y),z+F>L?(B-=H,H/=2):(N=D,B+=H,F+=z);return D.angle=J(Y),D}function re(I){for(var L=0,B=I.length,F,X=0,N=0,D=0,z=0,H=[],J,Y,te,ie=0;ie<B;ie++){switch(F=I[ie],Y={x:X,y:N,command:F[0]},F[0]){case"M":Y.length=0,D=X=F[1],z=N=F[2];break;case"L":Y.length=l(X,N,F[1],F[2]),X=F[1],N=F[2];break;case"C":J=S(X,N,F[1],F[2],F[3],F[4],F[5],F[6]),te=b(X,N,F[1],F[2],F[3],F[4],F[5],F[6]),Y.iterator=J,Y.angleFinder=te,Y.length=U(J,X,N),X=F[5],N=F[6];break;case"Q":J=A(X,N,F[1],F[2],F[3],F[4]),te=j(X,N,F[1],F[2],F[3],F[4]),Y.iterator=J,Y.angleFinder=te,Y.length=U(J,X,N),X=F[3],N=F[4];break;case"Z":case"z":Y.destX=D,Y.destY=z,Y.length=l(X,N,D,z),X=D,N=z;break}L+=Y.length,H.push(Y)}return H.push({length:L,x:X,y:N}),H}function oe(I,L,B){B||(B=re(I));for(var F=0;L-B[F].length>0&&F<B.length-2;)L-=B[F].length,F++;var X=B[F],N=L/X.length,D=X.command,z=I[F],H;switch(D){case"M":return{x:X.x,y:X.y,angle:0};case"Z":case"z":return H=new e.Point(X.x,X.y).lerp(new e.Point(X.destX,X.destY),N),H.angle=Math.atan2(X.destY-X.y,X.destX-X.x),H;case"L":return H=new e.Point(X.x,X.y).lerp(new e.Point(z[1],z[2]),N),H.angle=Math.atan2(z[2]-X.y,z[1]-X.x),H;case"C":return M(X,L);case"Q":return M(X,L)}}function fe(I){var L=[],B=[],F,X,N=e.rePathCommand,D="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",z="("+D+")"+e.commaWsp,H="([01])"+e.commaWsp+"?",J=z+"?"+z+"?"+z+H+H+z+"?("+D+")",Y=new RegExp(J,"g"),te,ie,le;if(!I||!I.match)return L;le=I.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var G=0,W,Q=le.length;G<Q;G++){F=le[G],ie=F.slice(1).trim(),B.length=0;var ee=F.charAt(0);if(W=[ee],ee.toLowerCase()==="a")for(var K;K=Y.exec(ie);)for(var ne=1;ne<K.length;ne++)B.push(K[ne]);else for(;te=N.exec(ie);)B.push(te[0]);for(var ne=0,ue=B.length;ne<ue;ne++)X=parseFloat(B[ne]),isNaN(X)||W.push(X);var me=r[ee.toLowerCase()],pe=f[ee]||ee;if(W.length-1>me)for(var Z=1,ge=W.length;Z<ge;Z+=me)L.push([ee].concat(W.slice(Z,Z+me))),ee=pe;else L.push(W)}return L}function de(I,L){var B=[],F,X=new e.Point(I[0].x,I[0].y),N=new e.Point(I[1].x,I[1].y),D=I.length,z=1,H=0,J=D>2;for(L=L||0,J&&(z=I[2].x<N.x?-1:I[2].x===N.x?0:1,H=I[2].y<N.y?-1:I[2].y===N.y?0:1),B.push(["M",X.x-z*L,X.y-H*L]),F=1;F<D;F++){if(!X.eq(N)){var Y=X.midPointFrom(N);B.push(["Q",X.x,X.y,Y.x,Y.y])}X=I[F],F+1<I.length&&(N=I[F+1])}return J&&(z=X.x>I[F-2].x?1:X.x===I[F-2].x?0:-1,H=X.y>I[F-2].y?1:X.y===I[F-2].y?0:-1),B.push(["L",X.x+z*L,X.y+H*L]),B}function q(I,L,B){return B&&(L=e.util.multiplyTransformMatrices(L,[1,0,0,1,-B.x,-B.y])),I.map(function(F){for(var X=F.slice(0),N={},D=1;D<F.length-1;D+=2)N.x=F[D],N.y=F[D+1],N=e.util.transformPoint(N,L),X[D]=N.x,X[D+1]=N.y;return X})}e.util.joinPath=function(I){return I.map(function(L){return L.join(" ")}).join(" ")},e.util.parsePath=fe,e.util.makePathSimpler=p,e.util.getSmoothPathFromPoints=de,e.util.getPathSegmentsInfo=re,e.util.getBoundsOfCurve=s,e.util.getPointOnPath=oe,e.util.transformPath=q}(),function(){var h=Array.prototype.slice;function r(s,u){for(var p=h.call(arguments,2),l=[],g=0,y=s.length;g<y;g++)l[g]=p.length?s[g][u].apply(s[g],p):s[g][u].call(s[g]);return l}function f(s,u){return a(s,u,function(p,l){return p>=l})}function d(s,u){return a(s,u,function(p,l){return p<l})}function o(s,u){for(var p=s.length;p--;)s[p]=u;return s}function a(s,u,p){if(!(!s||s.length===0)){var l=s.length-1,g=u?s[l][u]:s[l];if(u)for(;l--;)p(s[l][u],g)&&(g=s[l][u]);else for(;l--;)p(s[l],g)&&(g=s[l]);return g}}e.util.array={fill:o,invoke:r,min:d,max:f}}(),function(){function h(f,d,o){if(o)if(!e.isLikelyNode&&d instanceof Element)f=d;else if(d instanceof Array){f=[];for(var a=0,s=d.length;a<s;a++)f[a]=h({},d[a],o)}else if(d&&typeof d=="object")for(var u in d)u==="canvas"||u==="group"?f[u]=null:d.hasOwnProperty(u)&&(f[u]=h({},d[u],o));else f=d;else for(var u in d)f[u]=d[u];return f}function r(f,d){return h({},f,d)}e.util.object={extend:h,clone:r},e.util.object.extend(e.util,e.Observable)}(),function(){function h(a){return a.replace(/-+(.)?/g,function(s,u){return u?u.toUpperCase():""})}function r(a,s){return a.charAt(0).toUpperCase()+(s?a.slice(1):a.slice(1).toLowerCase())}function f(a){return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function d(a){var s=0,u,p=[];for(s=0,u;s<a.length;s++)(u=o(a,s))!==!1&&p.push(u);return p}function o(a,s){var u=a.charCodeAt(s);if(isNaN(u))return"";if(u<55296||u>57343)return a.charAt(s);if(55296<=u&&u<=56319){if(a.length<=s+1)throw"High surrogate without following low surrogate";var p=a.charCodeAt(s+1);if(56320>p||p>57343)throw"High surrogate without following low surrogate";return a.charAt(s)+a.charAt(s+1)}if(s===0)throw"Low surrogate without preceding high surrogate";var l=a.charCodeAt(s-1);if(55296>l||l>56319)throw"Low surrogate without preceding high surrogate";return!1}e.util.string={camelize:h,capitalize:r,escapeXml:f,graphemeSplit:d}}(),function(){var h=Array.prototype.slice,r=function(){},f=function(){for(var u in{toString:1})if(u==="toString")return!1;return!0}(),d=function(u,p,l){for(var g in p)g in u.prototype&&typeof u.prototype[g]=="function"&&(p[g]+"").indexOf("callSuper")>-1?u.prototype[g]=function(y){return function(){var _=this.constructor.superclass;this.constructor.superclass=l;var x=p[y].apply(this,arguments);if(this.constructor.superclass=_,y!=="initialize")return x}}(g):u.prototype[g]=p[g],f&&(p.toString!==Object.prototype.toString&&(u.prototype.toString=p.toString),p.valueOf!==Object.prototype.valueOf&&(u.prototype.valueOf=p.valueOf))};function o(){}function a(u){for(var p=null,l=this;l.constructor.superclass;){var g=l.constructor.superclass.prototype[u];if(l[u]!==g){p=g;break}l=l.constructor.superclass.prototype}return p?arguments.length>1?p.apply(this,h.call(arguments,1)):p.call(this):console.log("tried to callSuper "+u+", method not found in prototype chain",this)}function s(){var u=null,p=h.call(arguments,0);typeof p[0]=="function"&&(u=p.shift());function l(){this.initialize.apply(this,arguments)}l.superclass=u,l.subclasses=[],u&&(o.prototype=u.prototype,l.prototype=new o,u.subclasses.push(l));for(var g=0,y=p.length;g<y;g++)d(l,p[g],u);return l.prototype.initialize||(l.prototype.initialize=r),l.prototype.constructor=l,l.prototype.callSuper=a,l}e.util.createClass=s}(),function(){var h=!!e.document.createElement("div").attachEvent,r=["touchstart","touchmove","touchend"];e.util.addListener=function(d,o,a,s){d&&d.addEventListener(o,a,h?!1:s)},e.util.removeListener=function(d,o,a,s){d&&d.removeEventListener(o,a,h?!1:s)};function f(d){var o=d.changedTouches;return o&&o[0]?o[0]:d}e.util.getPointer=function(d){var o=d.target,a=e.util.getScrollLeftTop(o),s=f(d);return{x:s.clientX+a.left,y:s.clientY+a.top}},e.util.isTouchEvent=function(d){return r.indexOf(d.type)>-1||d.pointerType==="touch"}}(),function(){function h(s,u){var p=s.style;if(!p)return s;if(typeof u=="string")return s.style.cssText+=";"+u,u.indexOf("opacity")>-1?a(s,u.match(/opacity:\s*(\d?\.?\d*)/)[1]):s;for(var l in u)if(l==="opacity")a(s,u[l]);else{var g=l==="float"||l==="cssFloat"?typeof p.styleFloat>"u"?"cssFloat":"styleFloat":l;p.setProperty(g,u[l])}return s}var r=e.document.createElement("div"),f=typeof r.style.opacity=="string",d=typeof r.style.filter=="string",o=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,a=function(s){return s};f?a=function(s,u){return s.style.opacity=u,s}:d&&(a=function(s,u){var p=s.style;return s.currentStyle&&!s.currentStyle.hasLayout&&(p.zoom=1),o.test(p.filter)?(u=u>=.9999?"":"alpha(opacity="+u*100+")",p.filter=p.filter.replace(o,u)):p.filter+=" alpha(opacity="+u*100+")",s}),e.util.setStyle=h}(),function(){var h=Array.prototype.slice;function r(x){return typeof x=="string"?e.document.getElementById(x):x}var f,d=function(x){return h.call(x,0)};try{f=d(e.document.childNodes)instanceof Array}catch{}f||(d=function(x){for(var S=new Array(x.length),b=x.length;b--;)S[b]=x[b];return S});function o(x,S){var b=e.document.createElement(x);for(var E in S)E==="class"?b.className=S[E]:E==="for"?b.htmlFor=S[E]:b.setAttribute(E,S[E]);return b}function a(x,S){x&&(" "+x.className+" ").indexOf(" "+S+" ")===-1&&(x.className+=(x.className?" ":"")+S)}function s(x,S,b){return typeof S=="string"&&(S=o(S,b)),x.parentNode&&x.parentNode.replaceChild(S,x),S.appendChild(x),S}function u(x){for(var S=0,b=0,E=e.document.documentElement,T=e.document.body||{scrollLeft:0,scrollTop:0};x&&(x.parentNode||x.host)&&(x=x.parentNode||x.host,x===e.document?(S=T.scrollLeft||E.scrollLeft||0,b=T.scrollTop||E.scrollTop||0):(S+=x.scrollLeft||0,b+=x.scrollTop||0),!(x.nodeType===1&&x.style.position==="fixed")););return{left:S,top:b}}function p(x){var S,b=x&&x.ownerDocument,E={left:0,top:0},T={left:0,top:0},O,A={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!b)return T;for(var j in A)T[A[j]]+=parseInt(l(x,j),10)||0;return S=b.documentElement,typeof x.getBoundingClientRect<"u"&&(E=x.getBoundingClientRect()),O=u(x),{left:E.left+O.left-(S.clientLeft||0)+T.left,top:E.top+O.top-(S.clientTop||0)+T.top}}var l;e.document.defaultView&&e.document.defaultView.getComputedStyle?l=function(x,S){var b=e.document.defaultView.getComputedStyle(x,null);return b?b[S]:void 0}:l=function(x,S){var b=x.style[S];return!b&&x.currentStyle&&(b=x.currentStyle[S]),b},function(){var x=e.document.documentElement.style,S="userSelect"in x?"userSelect":"MozUserSelect"in x?"MozUserSelect":"WebkitUserSelect"in x?"WebkitUserSelect":"KhtmlUserSelect"in x?"KhtmlUserSelect":"";function b(T){return typeof T.onselectstart<"u"&&(T.onselectstart=e.util.falseFunction),S?T.style[S]="none":typeof T.unselectable=="string"&&(T.unselectable="on"),T}function E(T){return typeof T.onselectstart<"u"&&(T.onselectstart=null),S?T.style[S]="":typeof T.unselectable=="string"&&(T.unselectable=""),T}e.util.makeElementUnselectable=b,e.util.makeElementSelectable=E}();function g(x){var S=e.jsdomImplForWrapper(x);return S._canvas||S._image}function y(x){if(e.isLikelyNode){var S=e.jsdomImplForWrapper(x);S&&(S._image=null,S._canvas=null,S._currentSrc=null,S._attributes=null,S._classList=null)}}function _(x,S){x.imageSmoothingEnabled=x.imageSmoothingEnabled||x.webkitImageSmoothingEnabled||x.mozImageSmoothingEnabled||x.msImageSmoothingEnabled||x.oImageSmoothingEnabled,x.imageSmoothingEnabled=S}e.util.setImageSmoothing=_,e.util.getById=r,e.util.toArray=d,e.util.addClass=a,e.util.makeElement=o,e.util.wrapElement=s,e.util.getScrollLeftTop=u,e.util.getElementOffset=p,e.util.getNodeCanvas=g,e.util.cleanUpJsdomNode=y}(),function(){function h(d,o){return d+(/\?/.test(d)?"&":"?")+o}function r(){}function f(d,o){o||(o={});var a=o.method?o.method.toUpperCase():"GET",s=o.onComplete||function(){},u=new e.window.XMLHttpRequest,p=o.body||o.parameters;return u.onreadystatechange=function(){u.readyState===4&&(s(u),u.onreadystatechange=r)},a==="GET"&&(p=null,typeof o.parameters=="string"&&(d=h(d,o.parameters))),u.open(a,d,!0),(a==="POST"||a==="PUT")&&u.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),u.send(p),u}e.util.request=f}(),e.log=console.log,e.warn=console.warn,function(){var h=e.util.object.extend,r=e.util.object.clone,f=[];e.util.object.extend(f,{cancelAll:function(){var g=this.splice(0);return g.forEach(function(y){y.cancel()}),g},cancelByCanvas:function(g){if(!g)return[];var y=this.filter(function(_){return typeof _.target=="object"&&_.target.canvas===g});return y.forEach(function(_){_.cancel()}),y},cancelByTarget:function(g){var y=this.findAnimationsByTarget(g);return y.forEach(function(_){_.cancel()}),y},findAnimationIndex:function(g){return this.indexOf(this.findAnimation(g))},findAnimation:function(g){return this.find(function(y){return y.cancel===g})},findAnimationsByTarget:function(g){return g?this.filter(function(y){return y.target===g}):[]}});function d(){return!1}function o(g,y,_,x){return-_*Math.cos(g/x*(Math.PI/2))+_+y}function a(g){g||(g={});var y=!1,_,x=function(){var S=e.runningAnimations.indexOf(_);return S>-1&&e.runningAnimations.splice(S,1)[0]};return _=h(r(g),{cancel:function(){return y=!0,x()},currentValue:"startValue"in g?g.startValue:0,completionRate:0,durationRate:0}),e.runningAnimations.push(_),p(function(S){var b=S||+new Date,E=g.duration||500,T=b+E,O,A=g.onChange||d,j=g.abort||d,U=g.onComplete||d,M=g.easing||o,re="startValue"in g?g.startValue.length>0:!1,oe="startValue"in g?g.startValue:0,fe="endValue"in g?g.endValue:100,de=g.byValue||(re?oe.map(function(q,I){return fe[I]-oe[I]}):fe-oe);g.onStart&&g.onStart(),function q(I){O=I||+new Date;var L=O>T?E:O-b,B=L/E,F=re?oe.map(function(N,D){return M(L,oe[D],de[D],E)}):M(L,oe,de,E),X=Math.abs(re?(F[0]-oe[0])/de[0]:(F-oe)/de);if(_.currentValue=re?F.slice():F,_.completionRate=X,_.durationRate=B,!y){if(j(F,X,B)){x();return}if(O>T){_.currentValue=re?fe.slice():fe,_.completionRate=1,_.durationRate=1,A(re?fe.slice():fe,1,1),U(fe,1,1),x();return}else A(F,X,B),p(q)}}(b)}),_.cancel}var s=e.window.requestAnimationFrame||e.window.webkitRequestAnimationFrame||e.window.mozRequestAnimationFrame||e.window.oRequestAnimationFrame||e.window.msRequestAnimationFrame||function(g){return e.window.setTimeout(g,1e3/60)},u=e.window.cancelAnimationFrame||e.window.clearTimeout;function p(){return s.apply(e.window,arguments)}function l(){return u.apply(e.window,arguments)}e.util.animate=a,e.util.requestAnimFrame=p,e.util.cancelAnimFrame=l,e.runningAnimations=f}(),function(){function h(f,d,o){var a="rgba("+parseInt(f[0]+o*(d[0]-f[0]),10)+","+parseInt(f[1]+o*(d[1]-f[1]),10)+","+parseInt(f[2]+o*(d[2]-f[2]),10);return a+=","+(f&&d?parseFloat(f[3]+o*(d[3]-f[3])):1),a+=")",a}function r(f,d,o,a){var s=new e.Color(f).getSource(),u=new e.Color(d).getSource(),p=a.onComplete,l=a.onChange;return a=a||{},e.util.animate(e.util.object.extend(a,{duration:o||500,startValue:s,endValue:u,byValue:u,easing:function(g,y,_,x){var S=a.colorEasing?a.colorEasing(g,x):1-Math.cos(g/x*(Math.PI/2));return h(y,_,S)},onComplete:function(g,y,_){if(p)return p(h(u,u,0),y,_)},onChange:function(g,y,_){if(l){if(Array.isArray(g))return l(h(g,g,0),y,_);l(g,y,_)}}}))}e.util.animateColor=r}(),function(){function h(I,L,B,F){return I<Math.abs(L)?(I=L,F=B/4):L===0&&I===0?F=B/(2*Math.PI)*Math.asin(1):F=B/(2*Math.PI)*Math.asin(L/I),{a:I,c:L,p:B,s:F}}function r(I,L,B){return I.a*Math.pow(2,10*(L-=1))*Math.sin((L*B-I.s)*(2*Math.PI)/I.p)}function f(I,L,B,F){return B*((I=I/F-1)*I*I+1)+L}function d(I,L,B,F){return I/=F/2,I<1?B/2*I*I*I+L:B/2*((I-=2)*I*I+2)+L}function o(I,L,B,F){return B*(I/=F)*I*I*I+L}function a(I,L,B,F){return-B*((I=I/F-1)*I*I*I-1)+L}function s(I,L,B,F){return I/=F/2,I<1?B/2*I*I*I*I+L:-B/2*((I-=2)*I*I*I-2)+L}function u(I,L,B,F){return B*(I/=F)*I*I*I*I+L}function p(I,L,B,F){return B*((I=I/F-1)*I*I*I*I+1)+L}function l(I,L,B,F){return I/=F/2,I<1?B/2*I*I*I*I*I+L:B/2*((I-=2)*I*I*I*I+2)+L}function g(I,L,B,F){return-B*Math.cos(I/F*(Math.PI/2))+B+L}function y(I,L,B,F){return B*Math.sin(I/F*(Math.PI/2))+L}function _(I,L,B,F){return-B/2*(Math.cos(Math.PI*I/F)-1)+L}function x(I,L,B,F){return I===0?L:B*Math.pow(2,10*(I/F-1))+L}function S(I,L,B,F){return I===F?L+B:B*(-Math.pow(2,-10*I/F)+1)+L}function b(I,L,B,F){return I===0?L:I===F?L+B:(I/=F/2,I<1?B/2*Math.pow(2,10*(I-1))+L:B/2*(-Math.pow(2,-10*--I)+2)+L)}function E(I,L,B,F){return-B*(Math.sqrt(1-(I/=F)*I)-1)+L}function T(I,L,B,F){return B*Math.sqrt(1-(I=I/F-1)*I)+L}function O(I,L,B,F){return I/=F/2,I<1?-B/2*(Math.sqrt(1-I*I)-1)+L:B/2*(Math.sqrt(1-(I-=2)*I)+1)+L}function A(I,L,B,F){var X=1.70158,N=0,D=B;if(I===0)return L;if(I/=F,I===1)return L+B;N||(N=F*.3);var z=h(D,B,N,X);return-r(z,I,F)+L}function j(I,L,B,F){var X=1.70158,N=0,D=B;if(I===0)return L;if(I/=F,I===1)return L+B;N||(N=F*.3);var z=h(D,B,N,X);return z.a*Math.pow(2,-10*I)*Math.sin((I*F-z.s)*(2*Math.PI)/z.p)+z.c+L}function U(I,L,B,F){var X=1.70158,N=0,D=B;if(I===0)return L;if(I/=F/2,I===2)return L+B;N||(N=F*(.3*1.5));var z=h(D,B,N,X);return I<1?-.5*r(z,I,F)+L:z.a*Math.pow(2,-10*(I-=1))*Math.sin((I*F-z.s)*(2*Math.PI)/z.p)*.5+z.c+L}function M(I,L,B,F,X){return X===void 0&&(X=1.70158),B*(I/=F)*I*((X+1)*I-X)+L}function re(I,L,B,F,X){return X===void 0&&(X=1.70158),B*((I=I/F-1)*I*((X+1)*I+X)+1)+L}function oe(I,L,B,F,X){return X===void 0&&(X=1.70158),I/=F/2,I<1?B/2*(I*I*(((X*=1.525)+1)*I-X))+L:B/2*((I-=2)*I*(((X*=1.525)+1)*I+X)+2)+L}function fe(I,L,B,F){return B-de(F-I,0,B,F)+L}function de(I,L,B,F){return(I/=F)<1/2.75?B*(7.5625*I*I)+L:I<2/2.75?B*(7.5625*(I-=1.5/2.75)*I+.75)+L:I<2.5/2.75?B*(7.5625*(I-=2.25/2.75)*I+.9375)+L:B*(7.5625*(I-=2.625/2.75)*I+.984375)+L}function q(I,L,B,F){return I<F/2?fe(I*2,0,B,F)*.5+L:de(I*2-F,0,B,F)*.5+B*.5+L}e.util.ease={easeInQuad:function(I,L,B,F){return B*(I/=F)*I+L},easeOutQuad:function(I,L,B,F){return-B*(I/=F)*(I-2)+L},easeInOutQuad:function(I,L,B,F){return I/=F/2,I<1?B/2*I*I+L:-B/2*(--I*(I-2)-1)+L},easeInCubic:function(I,L,B,F){return B*(I/=F)*I*I+L},easeOutCubic:f,easeInOutCubic:d,easeInQuart:o,easeOutQuart:a,easeInOutQuart:s,easeInQuint:u,easeOutQuint:p,easeInOutQuint:l,easeInSine:g,easeOutSine:y,easeInOutSine:_,easeInExpo:x,easeOutExpo:S,easeInOutExpo:b,easeInCirc:E,easeOutCirc:T,easeInOutCirc:O,easeInElastic:A,easeOutElastic:j,easeInOutElastic:U,easeInBack:M,easeOutBack:re,easeInOutBack:oe,easeInBounce:fe,easeOutBounce:de,easeInOutBounce:q}}(),function(h){var r=h.fabric||(h.fabric={}),f=r.util.object.extend,d=r.util.object.clone,o=r.util.toFixed,a=r.util.parseUnit,s=r.util.multiplyTransformMatrices,u=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],p=["symbol","image","marker","pattern","view","svg"],l=["pattern","defs","symbol","metadata","clipPath","mask","desc"],g=["symbol","g","a","svg","clipPath","defs"],y={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},_={stroke:"strokeOpacity",fill:"fillOpacity"},x="font-size",S="clip-path";r.svgValidTagNamesRegEx=T(u),r.svgViewBoxElementsRegEx=T(p),r.svgInvalidAncestorsRegEx=T(l),r.svgValidParentsRegEx=T(g),r.cssRules={},r.gradientDefs={},r.clipPaths={};function b(N){return N in y?y[N]:N}function E(N,D,z,H){var J=Array.isArray(D),Y;if((N==="fill"||N==="stroke")&&D==="none")D="";else{if(N==="strokeUniform")return D==="non-scaling-stroke";if(N==="strokeDashArray")D==="none"?D=null:D=D.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(N==="transformMatrix")z&&z.transformMatrix?D=s(z.transformMatrix,r.parseTransformAttribute(D)):D=r.parseTransformAttribute(D);else if(N==="visible")D=D!=="none"&&D!=="hidden",z&&z.visible===!1&&(D=!1);else if(N==="opacity")D=parseFloat(D),z&&typeof z.opacity<"u"&&(D*=z.opacity);else if(N==="textAnchor")D=D==="start"?"left":D==="end"?"right":"center";else if(N==="charSpacing")Y=a(D,H)/H*1e3;else if(N==="paintFirst"){var te=D.indexOf("fill"),ie=D.indexOf("stroke"),D="fill";(te>-1&&ie>-1&&ie<te||te===-1&&ie>-1)&&(D="stroke")}else{if(N==="href"||N==="xlink:href"||N==="font")return D;if(N==="imageSmoothing")return D==="optimizeQuality";Y=J?D.map(a):a(D,H)}}return!J&&isNaN(Y)?D:Y}function T(N){return new RegExp("^("+N.join("|")+")\\b","i")}function O(N){for(var D in _)if(!(typeof N[_[D]]>"u"||N[D]==="")){if(typeof N[D]>"u"){if(!r.Object.prototype[D])continue;N[D]=r.Object.prototype[D]}if(N[D].indexOf("url(")!==0){var z=new r.Color(N[D]);N[D]=z.setAlpha(o(z.getAlpha()*N[_[D]],2)).toRgba()}}return N}function A(N,D){var z,H=[],J,Y,te;for(Y=0,te=D.length;Y<te;Y++)z=D[Y],J=N.getElementsByTagName(z),H=H.concat(Array.prototype.slice.call(J));return H}r.parseTransformAttribute=function(){function N(Z,ge){var ye=r.util.cos(ge[0]),xe=r.util.sin(ge[0]),we=0,_e=0;ge.length===3&&(we=ge[1],_e=ge[2]),Z[0]=ye,Z[1]=xe,Z[2]=-xe,Z[3]=ye,Z[4]=we-(ye*we-xe*_e),Z[5]=_e-(xe*we+ye*_e)}function D(Z,ge){var ye=ge[0],xe=ge.length===2?ge[1]:ge[0];Z[0]=ye,Z[3]=xe}function z(Z,ge,ye){Z[ye]=Math.tan(r.util.degreesToRadians(ge[0]))}function H(Z,ge){Z[4]=ge[0],ge.length===2&&(Z[5]=ge[1])}var J=r.iMatrix,Y=r.reNum,te=r.commaWsp,ie="(?:(skewX)\\s*\\(\\s*("+Y+")\\s*\\))",le="(?:(skewY)\\s*\\(\\s*("+Y+")\\s*\\))",G="(?:(rotate)\\s*\\(\\s*("+Y+")(?:"+te+"("+Y+")"+te+"("+Y+"))?\\s*\\))",W="(?:(scale)\\s*\\(\\s*("+Y+")(?:"+te+"("+Y+"))?\\s*\\))",Q="(?:(translate)\\s*\\(\\s*("+Y+")(?:"+te+"("+Y+"))?\\s*\\))",ee="(?:(matrix)\\s*\\(\\s*("+Y+")"+te+"("+Y+")"+te+"("+Y+")"+te+"("+Y+")"+te+"("+Y+")"+te+"("+Y+")\\s*\\))",K="(?:"+ee+"|"+Q+"|"+W+"|"+G+"|"+ie+"|"+le+")",ne="(?:"+K+"(?:"+te+"*"+K+")*)",ue="^\\s*(?:"+ne+"?)\\s*$",me=new RegExp(ue),pe=new RegExp(K,"g");return function(Z){var ge=J.concat(),ye=[];if(!Z||Z&&!me.test(Z))return ge;Z.replace(pe,function(we){var _e=new RegExp(K).exec(we).filter(function(Xt){return!!Xt}),ze=_e[1],Me=_e.slice(2).map(parseFloat);switch(ze){case"translate":H(ge,Me);break;case"rotate":Me[0]=r.util.degreesToRadians(Me[0]),N(ge,Me);break;case"scale":D(ge,Me);break;case"skewX":z(ge,Me,2);break;case"skewY":z(ge,Me,1);break;case"matrix":ge=Me;break}ye.push(ge.concat()),ge=J.concat()});for(var xe=ye[0];ye.length>1;)ye.shift(),xe=r.util.multiplyTransformMatrices(xe,ye[0]);return xe}}();function j(N,D){var z,H;N.replace(/;\s*$/,"").split(";").forEach(function(J){var Y=J.split(":");z=Y[0].trim().toLowerCase(),H=Y[1].trim(),D[z]=H})}function U(N,D){var z,H;for(var J in N)typeof N[J]>"u"||(z=J.toLowerCase(),H=N[J],D[z]=H)}function M(N,D){var z={};for(var H in r.cssRules[D])if(re(N,H.split(" ")))for(var J in r.cssRules[D][H])z[J]=r.cssRules[D][H][J];return z}function re(N,D){var z,H=!0;return z=fe(N,D.pop()),z&&D.length&&(H=oe(N,D)),z&&H&&D.length===0}function oe(N,D){for(var z,H=!0;N.parentNode&&N.parentNode.nodeType===1&&D.length;)H&&(z=D.pop()),N=N.parentNode,H=fe(N,z);return D.length===0}function fe(N,D){var z=N.nodeName,H=N.getAttribute("class"),J=N.getAttribute("id"),Y,te;if(Y=new RegExp("^"+z,"i"),D=D.replace(Y,""),J&&D.length&&(Y=new RegExp("#"+J+"(?![a-zA-Z\\-]+)","i"),D=D.replace(Y,"")),H&&D.length)for(H=H.split(" "),te=H.length;te--;)Y=new RegExp("\\."+H[te]+"(?![a-zA-Z\\-]+)","i"),D=D.replace(Y,"");return D.length===0}function de(N,D){var z;if(N.getElementById&&(z=N.getElementById(D)),z)return z;var H,J,Y,te=N.getElementsByTagName("*");for(J=0,Y=te.length;J<Y;J++)if(H=te[J],D===H.getAttribute("id"))return H}function q(N){for(var D=A(N,["use","svg:use"]),z=0;D.length&&z<D.length;){var H=D[z],J=H.getAttribute("xlink:href")||H.getAttribute("href");if(J===null)return;var Y=J.slice(1),te=H.getAttribute("x")||0,ie=H.getAttribute("y")||0,le=de(N,Y).cloneNode(!0),G=(le.getAttribute("transform")||"")+" translate("+te+", "+ie+")",W,Q=D.length,ee,K,ne,ue,me=r.svgNS;if(L(le),/^svg$/i.test(le.nodeName)){var pe=le.ownerDocument.createElementNS(me,"g");for(K=0,ne=le.attributes,ue=ne.length;K<ue;K++)ee=ne.item(K),pe.setAttributeNS(me,ee.nodeName,ee.nodeValue);for(;le.firstChild;)pe.appendChild(le.firstChild);le=pe}for(K=0,ne=H.attributes,ue=ne.length;K<ue;K++)ee=ne.item(K),!(ee.nodeName==="x"||ee.nodeName==="y"||ee.nodeName==="xlink:href"||ee.nodeName==="href")&&(ee.nodeName==="transform"?G=ee.nodeValue+" "+G:le.setAttribute(ee.nodeName,ee.nodeValue));le.setAttribute("transform",G),le.setAttribute("instantiated_by_use","1"),le.removeAttribute("id"),W=H.parentNode,W.replaceChild(le,H),D.length===Q&&z++}}var I=new RegExp("^\\s*("+r.reNum+"+)\\s*,?\\s*("+r.reNum+"+)\\s*,?\\s*("+r.reNum+"+)\\s*,?\\s*("+r.reNum+"+)\\s*$");function L(N){if(!r.svgViewBoxElementsRegEx.test(N.nodeName))return{};var D=N.getAttribute("viewBox"),z=1,H=1,J=0,Y=0,te,ie,le,G,W=N.getAttribute("width"),Q=N.getAttribute("height"),ee=N.getAttribute("x")||0,K=N.getAttribute("y")||0,ne=N.getAttribute("preserveAspectRatio")||"",ue=!D||!(D=D.match(I)),me=!W||!Q||W==="100%"||Q==="100%",pe=ue&&me,Z={},ge="",ye=0,xe=0;if(Z.width=0,Z.height=0,Z.toBeParsed=pe,ue&&(ee||K)&&N.parentNode&&N.parentNode.nodeName!=="#document"&&(ge=" translate("+a(ee)+" "+a(K)+") ",le=(N.getAttribute("transform")||"")+ge,N.setAttribute("transform",le),N.removeAttribute("x"),N.removeAttribute("y")),pe)return Z;if(ue)return Z.width=a(W),Z.height=a(Q),Z;if(J=-parseFloat(D[1]),Y=-parseFloat(D[2]),te=parseFloat(D[3]),ie=parseFloat(D[4]),Z.minX=J,Z.minY=Y,Z.viewBoxWidth=te,Z.viewBoxHeight=ie,me?(Z.width=te,Z.height=ie):(Z.width=a(W),Z.height=a(Q),z=Z.width/te,H=Z.height/ie),ne=r.util.parsePreserveAspectRatioAttribute(ne),ne.alignX!=="none"&&(ne.meetOrSlice==="meet"&&(H=z=z>H?H:z),ne.meetOrSlice==="slice"&&(H=z=z>H?z:H),ye=Z.width-te*z,xe=Z.height-ie*z,ne.alignX==="Mid"&&(ye/=2),ne.alignY==="Mid"&&(xe/=2),ne.alignX==="Min"&&(ye=0),ne.alignY==="Min"&&(xe=0)),z===1&&H===1&&J===0&&Y===0&&ee===0&&K===0)return Z;if((ee||K)&&N.parentNode.nodeName!=="#document"&&(ge=" translate("+a(ee)+" "+a(K)+") "),le=ge+" matrix("+z+" 0 0 "+H+" "+(J*z+ye)+" "+(Y*H+xe)+") ",N.nodeName==="svg"){for(G=N.ownerDocument.createElementNS(r.svgNS,"g");N.firstChild;)G.appendChild(N.firstChild);N.appendChild(G)}else G=N,G.removeAttribute("x"),G.removeAttribute("y"),le=G.getAttribute("transform")+le;return G.setAttribute("transform",le),Z}function B(N,D){for(;N&&(N=N.parentNode);)if(N.nodeName&&D.test(N.nodeName.replace("svg:",""))&&!N.getAttribute("instantiated_by_use"))return!0;return!1}r.parseSVGDocument=function(N,D,z,H){if(N){q(N);var J=r.Object.__uid++,Y,te,ie=L(N),le=r.util.toArray(N.getElementsByTagName("*"));if(ie.crossOrigin=H&&H.crossOrigin,ie.svgUid=J,le.length===0&&r.isLikelyNode){le=N.selectNodes('//*[name(.)!="svg"]');var G=[];for(Y=0,te=le.length;Y<te;Y++)G[Y]=le[Y];le=G}var W=le.filter(function(ee){return L(ee),r.svgValidTagNamesRegEx.test(ee.nodeName.replace("svg:",""))&&!B(ee,r.svgInvalidAncestorsRegEx)});if(!W||W&&!W.length){D&&D([],{});return}var Q={};le.filter(function(ee){return ee.nodeName.replace("svg:","")==="clipPath"}).forEach(function(ee){var K=ee.getAttribute("id");Q[K]=r.util.toArray(ee.getElementsByTagName("*")).filter(function(ne){return r.svgValidTagNamesRegEx.test(ne.nodeName.replace("svg:",""))})}),r.gradientDefs[J]=r.getGradientDefs(N),r.cssRules[J]=r.getCSSRules(N),r.clipPaths[J]=Q,r.parseElements(W,function(ee,K){D&&(D(ee,ie,K,le),delete r.gradientDefs[J],delete r.cssRules[J],delete r.clipPaths[J])},d(ie),z,H)}};function F(N,D){var z=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],H="xlink:href",J=D.getAttribute(H).slice(1),Y=de(N,J);if(Y&&Y.getAttribute(H)&&F(N,Y),z.forEach(function(ie){Y&&!D.hasAttribute(ie)&&Y.hasAttribute(ie)&&D.setAttribute(ie,Y.getAttribute(ie))}),!D.children.length)for(var te=Y.cloneNode(!0);te.firstChild;)D.appendChild(te.firstChild);D.removeAttribute(H)}var X=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+r.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+r.reNum+"))?\\s+(.*)");f(r,{parseFontDeclaration:function(N,D){var z=N.match(X);if(z){var H=z[1],J=z[3],Y=z[4],te=z[5],ie=z[6];H&&(D.fontStyle=H),J&&(D.fontWeight=isNaN(parseFloat(J))?J:parseFloat(J)),Y&&(D.fontSize=a(Y)),ie&&(D.fontFamily=ie),te&&(D.lineHeight=te==="normal"?1:te)}},getGradientDefs:function(N){var D=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],z=A(N,D),H,J=0,Y={};for(J=z.length;J--;)H=z[J],H.getAttribute("xlink:href")&&F(N,H),Y[H.getAttribute("id")]=H;return Y},parseAttributes:function(N,D,z){if(N){var H,J={},Y,te;typeof z>"u"&&(z=N.getAttribute("svgUid")),N.parentNode&&r.svgValidParentsRegEx.test(N.parentNode.nodeName)&&(J=r.parseAttributes(N.parentNode,D,z));var ie=D.reduce(function(ne,ue){return H=N.getAttribute(ue),H&&(ne[ue]=H),ne},{}),le=f(M(N,z),r.parseStyleAttribute(N));ie=f(ie,le),le[S]&&N.setAttribute(S,le[S]),Y=te=J.fontSize||r.Text.DEFAULT_SVG_FONT_SIZE,ie[x]&&(ie[x]=Y=a(ie[x],te));var G,W,Q={};for(var ee in ie)G=b(ee),W=E(G,ie[ee],J,Y),Q[G]=W;Q&&Q.font&&r.parseFontDeclaration(Q.font,Q);var K=f(J,Q);return r.svgValidParentsRegEx.test(N.nodeName)?K:O(K)}},parseElements:function(N,D,z,H,J){new r.ElementsParser(N,D,z,H,J).parse()},parseStyleAttribute:function(N){var D={},z=N.getAttribute("style");return z&&(typeof z=="string"?j(z,D):U(z,D)),D},parsePointsAttribute:function(N){if(!N)return null;N=N.replace(/,/g," ").trim(),N=N.split(/\s+/);var D=[],z,H;for(z=0,H=N.length;z<H;z+=2)D.push({x:parseFloat(N[z]),y:parseFloat(N[z+1])});return D},getCSSRules:function(N){var D=N.getElementsByTagName("style"),z,H,J={},Y;for(z=0,H=D.length;z<H;z++){var te=D[z].textContent;te=te.replace(/\/\*[\s\S]*?\*\//g,""),te.trim()!==""&&(Y=te.split("}"),Y=Y.filter(function(ie){return ie.trim()}),Y.forEach(function(ie){var le=ie.split("{"),G={},W=le[1].trim(),Q=W.split(";").filter(function(ue){return ue.trim()});for(z=0,H=Q.length;z<H;z++){var ee=Q[z].split(":"),K=ee[0].trim(),ne=ee[1].trim();G[K]=ne}ie=le[0].trim(),ie.split(",").forEach(function(ue){ue=ue.replace(/^svg/i,"").trim(),ue!==""&&(J[ue]?r.util.object.extend(J[ue],G):J[ue]=r.util.object.clone(G))})}))}return J},loadSVGFromURL:function(N,D,z,H){N=N.replace(/^\n\s*/,"").trim(),new r.util.request(N,{method:"get",onComplete:J});function J(Y){var te=Y.responseXML;if(!te||!te.documentElement)return D&&D(null),!1;r.parseSVGDocument(te.documentElement,function(ie,le,G,W){D&&D(ie,le,G,W)},z,H)}},loadSVGFromString:function(N,D,z,H){var J=new r.window.DOMParser,Y=J.parseFromString(N.trim(),"text/xml");r.parseSVGDocument(Y.documentElement,function(te,ie,le,G){D(te,ie,le,G)},z,H)}})}(t),e.ElementsParser=function(h,r,f,d,o,a){this.elements=h,this.callback=r,this.options=f,this.reviver=d,this.svgUid=f&&f.svgUid||0,this.parsingOptions=o,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=a},function(h){h.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},h.createObjects=function(){var r=this;this.elements.forEach(function(f,d){f.setAttribute("svgUid",r.svgUid),r.createObject(f,d)})},h.findTag=function(r){return e[e.util.string.capitalize(r.tagName.replace("svg:",""))]},h.createObject=function(r,f){var d=this.findTag(r);if(d&&d.fromElement)try{d.fromElement(r,this.createCallback(f,r),this.options)}catch(o){e.log(o)}else this.checkIfDone()},h.createCallback=function(r,f){var d=this;return function(o){var a;d.resolveGradient(o,f,"fill"),d.resolveGradient(o,f,"stroke"),o instanceof e.Image&&o._originalElement&&(a=o.parsePreserveAspectRatioAttribute(f)),o._removeTransformMatrix(a),d.resolveClipPath(o,f),d.reviver&&d.reviver(f,o),d.instances[r]=o,d.checkIfDone()}},h.extractPropertyDefinition=function(r,f,d){var o=r[f],a=this.regexUrl;if(a.test(o)){a.lastIndex=0;var s=a.exec(o)[1];return a.lastIndex=0,e[d][this.svgUid][s]}},h.resolveGradient=function(r,f,d){var o=this.extractPropertyDefinition(r,d,"gradientDefs");if(o){var a=f.getAttribute(d+"-opacity"),s=e.Gradient.fromElement(o,r,a,this.options);r.set(d,s)}},h.createClipPathCallback=function(r,f){return function(d){d._removeTransformMatrix(),d.fillRule=d.clipRule,f.push(d)}},h.resolveClipPath=function(r,f){var d=this.extractPropertyDefinition(r,"clipPath","clipPaths"),o,a,s,u,p,l;if(d){u=[],s=e.util.invertTransform(r.calcTransformMatrix());for(var g=d[0].parentNode,y=f;y.parentNode&&y.getAttribute("clip-path")!==r.clipPath;)y=y.parentNode;y.parentNode.appendChild(g);for(var _=0;_<d.length;_++)o=d[_],a=this.findTag(o),a.fromElement(o,this.createClipPathCallback(r,u),this.options);u.length===1?d=u[0]:d=new e.Group(u),p=e.util.multiplyTransformMatrices(s,d.calcTransformMatrix()),d.clipPath&&this.resolveClipPath(d,y);var l=e.util.qrDecompose(p);d.flipX=!1,d.flipY=!1,d.set("scaleX",l.scaleX),d.set("scaleY",l.scaleY),d.angle=l.angle,d.skewX=l.skewX,d.skewY=0,d.setPositionByOrigin({x:l.translateX,y:l.translateY},"center","center"),r.clipPath=d}else delete r.clipPath},h.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(r){return r!=null}),this.callback(this.instances,this.elements))}}(e.ElementsParser.prototype),function(h){var r=h.fabric||(h.fabric={});if(r.Point){r.warn("fabric.Point is already defined");return}r.Point=f;function f(d,o){this.x=d,this.y=o}f.prototype={type:"point",constructor:f,add:function(d){return new f(this.x+d.x,this.y+d.y)},addEquals:function(d){return this.x+=d.x,this.y+=d.y,this},scalarAdd:function(d){return new f(this.x+d,this.y+d)},scalarAddEquals:function(d){return this.x+=d,this.y+=d,this},subtract:function(d){return new f(this.x-d.x,this.y-d.y)},subtractEquals:function(d){return this.x-=d.x,this.y-=d.y,this},scalarSubtract:function(d){return new f(this.x-d,this.y-d)},scalarSubtractEquals:function(d){return this.x-=d,this.y-=d,this},multiply:function(d){return new f(this.x*d,this.y*d)},multiplyEquals:function(d){return this.x*=d,this.y*=d,this},divide:function(d){return new f(this.x/d,this.y/d)},divideEquals:function(d){return this.x/=d,this.y/=d,this},eq:function(d){return this.x===d.x&&this.y===d.y},lt:function(d){return this.x<d.x&&this.y<d.y},lte:function(d){return this.x<=d.x&&this.y<=d.y},gt:function(d){return this.x>d.x&&this.y>d.y},gte:function(d){return this.x>=d.x&&this.y>=d.y},lerp:function(d,o){return typeof o>"u"&&(o=.5),o=Math.max(Math.min(1,o),0),new f(this.x+(d.x-this.x)*o,this.y+(d.y-this.y)*o)},distanceFrom:function(d){var o=this.x-d.x,a=this.y-d.y;return Math.sqrt(o*o+a*a)},midPointFrom:function(d){return this.lerp(d)},min:function(d){return new f(Math.min(this.x,d.x),Math.min(this.y,d.y))},max:function(d){return new f(Math.max(this.x,d.x),Math.max(this.y,d.y))},toString:function(){return this.x+","+this.y},setXY:function(d,o){return this.x=d,this.y=o,this},setX:function(d){return this.x=d,this},setY:function(d){return this.y=d,this},setFromPoint:function(d){return this.x=d.x,this.y=d.y,this},swap:function(d){var o=this.x,a=this.y;this.x=d.x,this.y=d.y,d.x=o,d.y=a},clone:function(){return new f(this.x,this.y)}}}(t),function(h){var r=h.fabric||(h.fabric={});if(r.Intersection){r.warn("fabric.Intersection is already defined");return}function f(d){this.status=d,this.points=[]}r.Intersection=f,r.Intersection.prototype={constructor:f,appendPoint:function(d){return this.points.push(d),this},appendPoints:function(d){return this.points=this.points.concat(d),this}},r.Intersection.intersectLineLine=function(d,o,a,s){var u,p=(s.x-a.x)*(d.y-a.y)-(s.y-a.y)*(d.x-a.x),l=(o.x-d.x)*(d.y-a.y)-(o.y-d.y)*(d.x-a.x),g=(s.y-a.y)*(o.x-d.x)-(s.x-a.x)*(o.y-d.y);if(g!==0){var y=p/g,_=l/g;0<=y&&y<=1&&0<=_&&_<=1?(u=new f("Intersection"),u.appendPoint(new r.Point(d.x+y*(o.x-d.x),d.y+y*(o.y-d.y)))):u=new f}else p===0||l===0?u=new f("Coincident"):u=new f("Parallel");return u},r.Intersection.intersectLinePolygon=function(d,o,a){var s=new f,u=a.length,p,l,g,y;for(y=0;y<u;y++)p=a[y],l=a[(y+1)%u],g=f.intersectLineLine(d,o,p,l),s.appendPoints(g.points);return s.points.length>0&&(s.status="Intersection"),s},r.Intersection.intersectPolygonPolygon=function(d,o){var a=new f,s=d.length,u;for(u=0;u<s;u++){var p=d[u],l=d[(u+1)%s],g=f.intersectLinePolygon(p,l,o);a.appendPoints(g.points)}return a.points.length>0&&(a.status="Intersection"),a},r.Intersection.intersectPolygonRectangle=function(d,o,a){var s=o.min(a),u=o.max(a),p=new r.Point(u.x,s.y),l=new r.Point(s.x,u.y),g=f.intersectLinePolygon(s,p,d),y=f.intersectLinePolygon(p,u,d),_=f.intersectLinePolygon(u,l,d),x=f.intersectLinePolygon(l,s,d),S=new f;return S.appendPoints(g.points),S.appendPoints(y.points),S.appendPoints(_.points),S.appendPoints(x.points),S.points.length>0&&(S.status="Intersection"),S}}(t),function(h){var r=h.fabric||(h.fabric={});if(r.Color){r.warn("fabric.Color is already defined.");return}function f(o){o?this._tryParsingColor(o):this.setSource([0,0,0,1])}r.Color=f,r.Color.prototype={_tryParsingColor:function(o){var a;o in f.colorNameMap&&(o=f.colorNameMap[o]),o==="transparent"&&(a=[255,255,255,0]),a||(a=f.sourceFromHex(o)),a||(a=f.sourceFromRgb(o)),a||(a=f.sourceFromHsl(o)),a||(a=[0,0,0,1]),a&&this.setSource(a)},_rgbToHsl:function(o,a,s){o/=255,a/=255,s/=255;var u,p,l,g=r.util.array.max([o,a,s]),y=r.util.array.min([o,a,s]);if(l=(g+y)/2,g===y)u=p=0;else{var _=g-y;switch(p=l>.5?_/(2-g-y):_/(g+y),g){case o:u=(a-s)/_+(a<s?6:0);break;case a:u=(s-o)/_+2;break;case s:u=(o-a)/_+4;break}u/=6}return[Math.round(u*360),Math.round(p*100),Math.round(l*100)]},getSource:function(){return this._source},setSource:function(o){this._source=o},toRgb:function(){var o=this.getSource();return"rgb("+o[0]+","+o[1]+","+o[2]+")"},toRgba:function(){var o=this.getSource();return"rgba("+o[0]+","+o[1]+","+o[2]+","+o[3]+")"},toHsl:function(){var o=this.getSource(),a=this._rgbToHsl(o[0],o[1],o[2]);return"hsl("+a[0]+","+a[1]+"%,"+a[2]+"%)"},toHsla:function(){var o=this.getSource(),a=this._rgbToHsl(o[0],o[1],o[2]);return"hsla("+a[0]+","+a[1]+"%,"+a[2]+"%,"+o[3]+")"},toHex:function(){var o=this.getSource(),a,s,u;return a=o[0].toString(16),a=a.length===1?"0"+a:a,s=o[1].toString(16),s=s.length===1?"0"+s:s,u=o[2].toString(16),u=u.length===1?"0"+u:u,a.toUpperCase()+s.toUpperCase()+u.toUpperCase()},toHexa:function(){var o=this.getSource(),a;return a=Math.round(o[3]*255),a=a.toString(16),a=a.length===1?"0"+a:a,this.toHex()+a.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(o){var a=this.getSource();return a[3]=o,this.setSource(a),this},toGrayscale:function(){var o=this.getSource(),a=parseInt((o[0]*.3+o[1]*.59+o[2]*.11).toFixed(0),10),s=o[3];return this.setSource([a,a,a,s]),this},toBlackWhite:function(o){var a=this.getSource(),s=(a[0]*.3+a[1]*.59+a[2]*.11).toFixed(0),u=a[3];return o=o||127,s=Number(s)<Number(o)?0:255,this.setSource([s,s,s,u]),this},overlayWith:function(o){o instanceof f||(o=new f(o));var a=[],s=this.getAlpha(),u=.5,p=this.getSource(),l=o.getSource(),g;for(g=0;g<3;g++)a.push(Math.round(p[g]*(1-u)+l[g]*u));return a[3]=s,this.setSource(a),this}},r.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,r.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,r.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,r.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function d(o,a,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?o+(a-o)*6*s:s<1/2?a:s<2/3?o+(a-o)*(2/3-s)*6:o}r.Color.fromRgb=function(o){return f.fromSource(f.sourceFromRgb(o))},r.Color.sourceFromRgb=function(o){var a=o.match(f.reRGBa);if(a){var s=parseInt(a[1],10)/(/%$/.test(a[1])?100:1)*(/%$/.test(a[1])?255:1),u=parseInt(a[2],10)/(/%$/.test(a[2])?100:1)*(/%$/.test(a[2])?255:1),p=parseInt(a[3],10)/(/%$/.test(a[3])?100:1)*(/%$/.test(a[3])?255:1);return[parseInt(s,10),parseInt(u,10),parseInt(p,10),a[4]?parseFloat(a[4]):1]}},r.Color.fromRgba=f.fromRgb,r.Color.fromHsl=function(o){return f.fromSource(f.sourceFromHsl(o))},r.Color.sourceFromHsl=function(o){var a=o.match(f.reHSLa);if(a){var s=(parseFloat(a[1])%360+360)%360/360,u=parseFloat(a[2])/(/%$/.test(a[2])?100:1),p=parseFloat(a[3])/(/%$/.test(a[3])?100:1),l,g,y;if(u===0)l=g=y=p;else{var _=p<=.5?p*(u+1):p+u-p*u,x=p*2-_;l=d(x,_,s+1/3),g=d(x,_,s),y=d(x,_,s-1/3)}return[Math.round(l*255),Math.round(g*255),Math.round(y*255),a[4]?parseFloat(a[4]):1]}},r.Color.fromHsla=f.fromHsl,r.Color.fromHex=function(o){return f.fromSource(f.sourceFromHex(o))},r.Color.sourceFromHex=function(o){if(o.match(f.reHex)){var a=o.slice(o.indexOf("#")+1),s=a.length===3||a.length===4,u=a.length===8||a.length===4,p=s?a.charAt(0)+a.charAt(0):a.substring(0,2),l=s?a.charAt(1)+a.charAt(1):a.substring(2,4),g=s?a.charAt(2)+a.charAt(2):a.substring(4,6),y=u?s?a.charAt(3)+a.charAt(3):a.substring(6,8):"FF";return[parseInt(p,16),parseInt(l,16),parseInt(g,16),parseFloat((parseInt(y,16)/255).toFixed(2))]}},r.Color.fromSource=function(o){var a=new f;return a.setSource(o),a}}(t),function(h){var r=h.fabric||(h.fabric={}),f=["e","se","s","sw","w","nw","n","ne","e"],d=["ns","nesw","ew","nwse"],o={},a="left",s="top",u="right",p="bottom",l="center",g={top:p,bottom:s,left:u,right:a,center:l},y=r.util.radiansToDegrees,_=Math.sign||function(G){return(G>0)-(G<0)||+G};function x(G,W){var Q=G.angle+y(Math.atan2(W.y,W.x))+360;return Math.round(Q%360/45)}function S(G,W){var Q=W.transform.target,ee=Q.canvas,K=r.util.object.clone(W);K.target=Q,ee&&ee.fire("object:"+G,K),Q.fire(G,W)}function b(G,W){var Q=W.canvas,ee=Q.uniScaleKey,K=G[ee];return Q.uniformScaling&&!K||!Q.uniformScaling&&K}function E(G){return G.originX===l&&G.originY===l}function T(G,W,Q){var ee=G.lockScalingX,K=G.lockScalingY;return!!(ee&&K||!W&&(ee||K)&&Q||ee&&W==="x"||K&&W==="y")}function O(G,W,Q){var ee="not-allowed",K=b(G,Q),ne="";if(W.x!==0&&W.y===0?ne="x":W.x===0&&W.y!==0&&(ne="y"),T(Q,ne,K))return ee;var ue=x(Q,W);return f[ue]+"-resize"}function A(G,W,Q){var ee="not-allowed";if(W.x!==0&&Q.lockSkewingY||W.y!==0&&Q.lockSkewingX)return ee;var K=x(Q,W)%4;return d[K]+"-resize"}function j(G,W,Q){return G[Q.canvas.altActionKey]?o.skewCursorStyleHandler(G,W,Q):o.scaleCursorStyleHandler(G,W,Q)}function U(G,W,Q){var ee=G[Q.canvas.altActionKey];if(W.x===0)return ee?"skewX":"scaleY";if(W.y===0)return ee?"skewY":"scaleX"}function M(G,W,Q){return Q.lockRotation?"not-allowed":W.cursorStyle}function re(G,W,Q,ee){return{e:G,transform:W,pointer:{x:Q,y:ee}}}function oe(G){return function(W,Q,ee,K){var ne=Q.target,ue=ne.getCenterPoint(),me=ne.translateToOriginPoint(ue,Q.originX,Q.originY),pe=G(W,Q,ee,K);return ne.setPositionByOrigin(me,Q.originX,Q.originY),pe}}function fe(G,W){return function(Q,ee,K,ne){var ue=W(Q,ee,K,ne);return ue&&S(G,re(Q,ee,K,ne)),ue}}function de(G,W,Q,ee,K){var ne=G.target,ue=ne.controls[G.corner],me=ne.canvas.getZoom(),pe=ne.padding/me,Z=ne.toLocalPoint(new r.Point(ee,K),W,Q);return Z.x>=pe&&(Z.x-=pe),Z.x<=-pe&&(Z.x+=pe),Z.y>=pe&&(Z.y-=pe),Z.y<=pe&&(Z.y+=pe),Z.x-=ue.offsetX,Z.y-=ue.offsetY,Z}function q(G){return G.flipX!==G.flipY}function I(G,W,Q,ee,K){if(G[W]!==0){var ne=G._getTransformedDimensions()[ee],ue=K/ne*G[Q];G.set(Q,ue)}}function L(G,W,Q,ee){var K=W.target,ne=K._getTransformedDimensions(0,K.skewY),ue=de(W,W.originX,W.originY,Q,ee),me=Math.abs(ue.x*2)-ne.x,pe=K.skewX,Z;me<2?Z=0:(Z=y(Math.atan2(me/K.scaleX,ne.y/K.scaleY)),W.originX===a&&W.originY===p&&(Z=-Z),W.originX===u&&W.originY===s&&(Z=-Z),q(K)&&(Z=-Z));var ge=pe!==Z;if(ge){var ye=K._getTransformedDimensions().y;K.set("skewX",Z),I(K,"skewY","scaleY","y",ye)}return ge}function B(G,W,Q,ee){var K=W.target,ne=K._getTransformedDimensions(K.skewX,0),ue=de(W,W.originX,W.originY,Q,ee),me=Math.abs(ue.y*2)-ne.y,pe=K.skewY,Z;me<2?Z=0:(Z=y(Math.atan2(me/K.scaleY,ne.x/K.scaleX)),W.originX===a&&W.originY===p&&(Z=-Z),W.originX===u&&W.originY===s&&(Z=-Z),q(K)&&(Z=-Z));var ge=pe!==Z;if(ge){var ye=K._getTransformedDimensions().x;K.set("skewY",Z),I(K,"skewX","scaleX","x",ye)}return ge}function F(G,W,Q,ee){var K=W.target,ne=K.skewX,ue,me=W.originY;if(K.lockSkewingX)return!1;if(ne===0){var pe=de(W,l,l,Q,ee);pe.x>0?ue=a:ue=u}else ne>0&&(ue=me===s?a:u),ne<0&&(ue=me===s?u:a),q(K)&&(ue=ue===a?u:a);W.originX=ue;var Z=fe("skewing",oe(L));return Z(G,W,Q,ee)}function X(G,W,Q,ee){var K=W.target,ne=K.skewY,ue,me=W.originX;if(K.lockSkewingY)return!1;if(ne===0){var pe=de(W,l,l,Q,ee);pe.y>0?ue=s:ue=p}else ne>0&&(ue=me===a?s:p),ne<0&&(ue=me===a?p:s),q(K)&&(ue=ue===s?p:s);W.originY=ue;var Z=fe("skewing",oe(B));return Z(G,W,Q,ee)}function N(G,W,Q,ee){var K=W,ne=K.target,ue=ne.translateToOriginPoint(ne.getCenterPoint(),K.originX,K.originY);if(ne.lockRotation)return!1;var me=Math.atan2(K.ey-ue.y,K.ex-ue.x),pe=Math.atan2(ee-ue.y,Q-ue.x),Z=y(pe-me+K.theta),ge=!0;if(ne.snapAngle>0){var ye=ne.snapAngle,xe=ne.snapThreshold||ye,we=Math.ceil(Z/ye)*ye,_e=Math.floor(Z/ye)*ye;Math.abs(Z-_e)<xe?Z=_e:Math.abs(Z-we)<xe&&(Z=we)}return Z<0&&(Z=360+Z),Z%=360,ge=ne.angle!==Z,ne.angle=Z,ge}function D(G,W,Q,ee,K){K=K||{};var ne=W.target,ue=ne.lockScalingX,me=ne.lockScalingY,pe=K.by,Z,ge,ye,xe,we=b(G,ne),_e=T(ne,pe,we),ze,Me,Xt=W.gestureScale;if(_e)return!1;if(Xt)ge=W.scaleX*Xt,ye=W.scaleY*Xt;else{if(Z=de(W,W.originX,W.originY,Q,ee),ze=pe!=="y"?_(Z.x):1,Me=pe!=="x"?_(Z.y):1,W.signX||(W.signX=ze),W.signY||(W.signY=Me),ne.lockScalingFlip&&(W.signX!==ze||W.signY!==Me))return!1;if(xe=ne._getTransformedDimensions(),we&&!pe){var ni=Math.abs(Z.x)+Math.abs(Z.y),Ze=W.original,zs=Math.abs(xe.x*Ze.scaleX/ne.scaleX)+Math.abs(xe.y*Ze.scaleY/ne.scaleY),vr=ni/zs;ge=Ze.scaleX*vr,ye=Ze.scaleY*vr}else ge=Math.abs(Z.x*ne.scaleX/xe.x),ye=Math.abs(Z.y*ne.scaleY/xe.y);E(W)&&(ge*=2,ye*=2),W.signX!==ze&&pe!=="y"&&(W.originX=g[W.originX],ge*=-1,W.signX=ze),W.signY!==Me&&pe!=="x"&&(W.originY=g[W.originY],ye*=-1,W.signY=Me)}var yr=ne.scaleX,La=ne.scaleY;return pe?(pe==="x"&&ne.set("scaleX",ge),pe==="y"&&ne.set("scaleY",ye)):(!ue&&ne.set("scaleX",ge),!me&&ne.set("scaleY",ye)),yr!==ne.scaleX||La!==ne.scaleY}function z(G,W,Q,ee){return D(G,W,Q,ee)}function H(G,W,Q,ee){return D(G,W,Q,ee,{by:"x"})}function J(G,W,Q,ee){return D(G,W,Q,ee,{by:"y"})}function Y(G,W,Q,ee){return G[W.target.canvas.altActionKey]?o.skewHandlerX(G,W,Q,ee):o.scalingY(G,W,Q,ee)}function te(G,W,Q,ee){return G[W.target.canvas.altActionKey]?o.skewHandlerY(G,W,Q,ee):o.scalingX(G,W,Q,ee)}function ie(G,W,Q,ee){var K=W.target,ne=de(W,W.originX,W.originY,Q,ee),ue=K.strokeWidth/(K.strokeUniform?K.scaleX:1),me=E(W)?2:1,pe=K.width,Z=Math.abs(ne.x*me/K.scaleX)-ue;return K.set("width",Math.max(Z,0)),pe!==Z}function le(G,W,Q,ee){var K=W.target,ne=Q-W.offsetX,ue=ee-W.offsetY,me=!K.get("lockMovementX")&&K.left!==ne,pe=!K.get("lockMovementY")&&K.top!==ue;return me&&K.set("left",ne),pe&&K.set("top",ue),(me||pe)&&S("moving",re(G,W,Q,ee)),me||pe}o.scaleCursorStyleHandler=O,o.skewCursorStyleHandler=A,o.scaleSkewCursorStyleHandler=j,o.rotationWithSnapping=fe("rotating",oe(N)),o.scalingEqually=fe("scaling",oe(z)),o.scalingX=fe("scaling",oe(H)),o.scalingY=fe("scaling",oe(J)),o.scalingYOrSkewingX=Y,o.scalingXOrSkewingY=te,o.changeWidth=fe("resizing",oe(ie)),o.skewHandlerX=F,o.skewHandlerY=X,o.dragHandler=le,o.scaleOrSkewActionName=U,o.rotationStyleHandler=M,o.fireEvent=S,o.wrapWithFixedAnchor=oe,o.wrapWithFireEvent=fe,o.getLocalPoint=de,r.controlsUtils=o}(t),function(h){var r=h.fabric||(h.fabric={}),f=r.util.degreesToRadians,d=r.controlsUtils;function o(s,u,p,l,g){l=l||{};var y=this.sizeX||l.cornerSize||g.cornerSize,_=this.sizeY||l.cornerSize||g.cornerSize,x=typeof l.transparentCorners<"u"?l.transparentCorners:g.transparentCorners,S=x?"stroke":"fill",b=!x&&(l.cornerStrokeColor||g.cornerStrokeColor),E=u,T=p,O;s.save(),s.fillStyle=l.cornerColor||g.cornerColor,s.strokeStyle=l.cornerStrokeColor||g.cornerStrokeColor,y>_?(O=y,s.scale(1,_/y),T=p*y/_):_>y?(O=_,s.scale(y/_,1),E=u*_/y):O=y,s.lineWidth=1,s.beginPath(),s.arc(E,T,O/2,0,2*Math.PI,!1),s[S](),b&&s.stroke(),s.restore()}function a(s,u,p,l,g){l=l||{};var y=this.sizeX||l.cornerSize||g.cornerSize,_=this.sizeY||l.cornerSize||g.cornerSize,x=typeof l.transparentCorners<"u"?l.transparentCorners:g.transparentCorners,S=x?"stroke":"fill",b=!x&&(l.cornerStrokeColor||g.cornerStrokeColor),E=y/2,T=_/2;s.save(),s.fillStyle=l.cornerColor||g.cornerColor,s.strokeStyle=l.cornerStrokeColor||g.cornerStrokeColor,s.lineWidth=1,s.translate(u,p),s.rotate(f(g.angle)),s[S+"Rect"](-E,-T,y,_),b&&s.strokeRect(-E,-T,y,_),s.restore()}d.renderCircleControl=o,d.renderSquareControl=a}(t),function(h){var r=h.fabric||(h.fabric={});function f(d){for(var o in d)this[o]=d[o]}r.Control=f,r.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(d,o){return o.cursorStyle},getActionName:function(d,o){return o.actionName},getVisibility:function(d,o){var a=d._controlsVisibility;return a&&typeof a[o]<"u"?a[o]:this.visible},setVisibility:function(d){this.visible=d},positionHandler:function(d,o){var a=r.util.transformPoint({x:this.x*d.x+this.offsetX,y:this.y*d.y+this.offsetY},o);return a},calcCornerCoords:function(d,o,a,s,u){var p,l,g,y,_=u?this.touchSizeX:this.sizeX,x=u?this.touchSizeY:this.sizeY;if(_&&x&&_!==x){var S=Math.atan2(x,_),b=Math.sqrt(_*_+x*x)/2,E=S-r.util.degreesToRadians(d),T=Math.PI/2-S-r.util.degreesToRadians(d);p=b*r.util.cos(E),l=b*r.util.sin(E),g=b*r.util.cos(T),y=b*r.util.sin(T)}else{var O=_&&x?_:o;b=O*.7071067812;var E=r.util.degreesToRadians(45-d);p=g=b*r.util.cos(E),l=y=b*r.util.sin(E)}return{tl:{x:a-y,y:s-g},tr:{x:a+p,y:s-l},bl:{x:a-p,y:s+l},br:{x:a+y,y:s+g}}},render:function(d,o,a,s,u){switch(s=s||{},s.cornerStyle||u.cornerStyle){case"circle":r.controlsUtils.renderCircleControl.call(this,d,o,a,s,u);break;default:r.controlsUtils.renderSquareControl.call(this,d,o,a,s,u)}}}}(t),function(){function h(a,s){var u=a.getAttribute("style"),p=a.getAttribute("offset")||0,l,g,y,_;if(p=parseFloat(p)/(/%$/.test(p)?100:1),p=p<0?0:p>1?1:p,u){var x=u.split(/\s*;\s*/);for(x[x.length-1]===""&&x.pop(),_=x.length;_--;){var S=x[_].split(/\s*:\s*/),b=S[0].trim(),E=S[1].trim();b==="stop-color"?l=E:b==="stop-opacity"&&(y=E)}}return l||(l=a.getAttribute("stop-color")||"rgb(0,0,0)"),y||(y=a.getAttribute("stop-opacity")),l=new e.Color(l),g=l.getAlpha(),y=isNaN(parseFloat(y))?1:parseFloat(y),y*=g*s,{offset:p,color:l.toRgb(),opacity:y}}function r(a){return{x1:a.getAttribute("x1")||0,y1:a.getAttribute("y1")||0,x2:a.getAttribute("x2")||"100%",y2:a.getAttribute("y2")||0}}function f(a){return{x1:a.getAttribute("fx")||a.getAttribute("cx")||"50%",y1:a.getAttribute("fy")||a.getAttribute("cy")||"50%",r1:0,x2:a.getAttribute("cx")||"50%",y2:a.getAttribute("cy")||"50%",r2:a.getAttribute("r")||"50%"}}var d=e.util.object.clone;e.Gradient=e.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(a){a||(a={}),a.coords||(a.coords={});var s,u=this;Object.keys(a).forEach(function(p){u[p]=a[p]}),this.id?this.id+="_"+e.Object.__uid++:this.id=e.Object.__uid++,s={x1:a.coords.x1||0,y1:a.coords.y1||0,x2:a.coords.x2||0,y2:a.coords.y2||0},this.type==="radial"&&(s.r1=a.coords.r1||0,s.r2=a.coords.r2||0),this.coords=s,this.colorStops=a.colorStops.slice()},addColorStop:function(a){for(var s in a){var u=new e.Color(a[s]);this.colorStops.push({offset:parseFloat(s),color:u.toRgb(),opacity:u.getAlpha()})}return this},toObject:function(a){var s={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return e.util.populateWithProperties(this,s,a),s},toSVG:function(a,g){var u=d(this.coords,!0),p,l,g=g||{},y,_,x=d(this.colorStops,!0),S=u.r1>u.r2,b=this.gradientTransform?this.gradientTransform.concat():e.iMatrix.concat(),E=-this.offsetX,T=-this.offsetY,O=!!g.additionalTransform,A=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(x.sort(function(oe,fe){return oe.offset-fe.offset}),A==="objectBoundingBox"?(E/=a.width,T/=a.height):(E+=a.width/2,T+=a.height/2),a.type==="path"&&this.gradientUnits!=="percentage"&&(E-=a.pathOffset.x,T-=a.pathOffset.y),b[4]-=E,b[5]-=T,_='id="SVGID_'+this.id+'" gradientUnits="'+A+'"',_+=' gradientTransform="'+(O?g.additionalTransform+" ":"")+e.util.matrixToSVG(b)+'" ',this.type==="linear"?y=["<linearGradient ",_,' x1="',u.x1,'" y1="',u.y1,'" x2="',u.x2,'" y2="',u.y2,`">
`]:this.type==="radial"&&(y=["<radialGradient ",_,' cx="',S?u.x1:u.x2,'" cy="',S?u.y1:u.y2,'" r="',S?u.r1:u.r2,'" fx="',S?u.x2:u.x1,'" fy="',S?u.y2:u.y1,`">
`]),this.type==="radial"){if(S)for(x=x.concat(),x.reverse(),p=0,l=x.length;p<l;p++)x[p].offset=1-x[p].offset;var j=Math.min(u.r1,u.r2);if(j>0){var U=Math.max(u.r1,u.r2),M=j/U;for(p=0,l=x.length;p<l;p++)x[p].offset+=M*(1-x[p].offset)}}for(p=0,l=x.length;p<l;p++){var re=x[p];y.push("<stop ",'offset="',re.offset*100+"%",'" style="stop-color:',re.color,typeof re.opacity<"u"?";stop-opacity: "+re.opacity:";",`"/>
`)}return y.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),y.join("")},toLive:function(a){var s,u=e.util.object.clone(this.coords),p,l;if(this.type){for(this.type==="linear"?s=a.createLinearGradient(u.x1,u.y1,u.x2,u.y2):this.type==="radial"&&(s=a.createRadialGradient(u.x1,u.y1,u.r1,u.x2,u.y2,u.r2)),p=0,l=this.colorStops.length;p<l;p++){var g=this.colorStops[p].color,y=this.colorStops[p].opacity,_=this.colorStops[p].offset;typeof y<"u"&&(g=new e.Color(g).setAlpha(y).toRgba()),s.addColorStop(_,g)}return s}}}),e.util.object.extend(e.Gradient,{fromElement:function(a,s,u,p){var l=parseFloat(u)/(/%$/.test(u)?100:1);l=l<0?0:l>1?1:l,isNaN(l)&&(l=1);var g=a.getElementsByTagName("stop"),y,_=a.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",x=a.getAttribute("gradientTransform")||"",S=[],b,E,T=0,O=0,A;for(a.nodeName==="linearGradient"||a.nodeName==="LINEARGRADIENT"?(y="linear",b=r(a)):(y="radial",b=f(a)),E=g.length;E--;)S.push(h(g[E],l));A=e.parseTransformAttribute(x),o(s,b,p,_),_==="pixels"&&(T=-s.left,O=-s.top);var j=new e.Gradient({id:a.getAttribute("id"),type:y,coords:b,colorStops:S,gradientUnits:_,gradientTransform:A,offsetX:T,offsetY:O});return j}});function o(a,s,u,p){var l,g;Object.keys(s).forEach(function(y){l=s[y],l==="Infinity"?g=1:l==="-Infinity"?g=0:(g=parseFloat(s[y],10),typeof l=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(l)&&(g*=.01,p==="pixels"&&((y==="x1"||y==="x2"||y==="r2")&&(g*=u.viewBoxWidth||u.width),(y==="y1"||y==="y2")&&(g*=u.viewBoxHeight||u.height)))),s[y]=g})}}(),function(){var h=e.util.toFixed;e.Pattern=e.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(r,f){if(r||(r={}),this.id=e.Object.__uid++,this.setOptions(r),!r.source||r.source&&typeof r.source!="string"){f&&f(this);return}else{var d=this;this.source=e.util.createImage(),e.util.loadImage(r.source,function(o,a){d.source=o,f&&f(d,a)},null,this.crossOrigin)}},toObject:function(r){var f=e.Object.NUM_FRACTION_DIGITS,d,o;return typeof this.source.src=="string"?d=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(d=this.source.toDataURL()),o={type:"pattern",source:d,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:h(this.offsetX,f),offsetY:h(this.offsetY,f),patternTransform:this.patternTransform?this.patternTransform.concat():null},e.util.populateWithProperties(this,o,r),o},toSVG:function(r){var f=typeof this.source=="function"?this.source():this.source,d=f.width/r.width,o=f.height/r.height,a=this.offsetX/r.width,s=this.offsetY/r.height,u="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(o=1,s&&(o+=Math.abs(s))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(d=1,a&&(d+=Math.abs(a))),f.src?u=f.src:f.toDataURL&&(u=f.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+a+'" y="'+s+'" width="'+d+'" height="'+o+`">
<image x="0" y="0" width="`+f.width+'" height="'+f.height+'" xlink:href="'+u+`"></image>
</pattern>
`},setOptions:function(r){for(var f in r)this[f]=r[f]},toLive:function(r){var f=this.source;return!f||typeof f.src<"u"&&(!f.complete||f.naturalWidth===0||f.naturalHeight===0)?"":r.createPattern(f,this.repeat)}})}(),function(h){var r=h.fabric||(h.fabric={}),f=r.util.toFixed;if(r.Shadow){r.warn("fabric.Shadow is already defined.");return}r.Shadow=r.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(d){typeof d=="string"&&(d=this._parseShadow(d));for(var o in d)this[o]=d[o];this.id=r.Object.__uid++},_parseShadow:function(d){var o=d.trim(),a=r.Shadow.reOffsetsAndBlur.exec(o)||[],s=o.replace(r.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:s.trim(),offsetX:parseFloat(a[1],10)||0,offsetY:parseFloat(a[2],10)||0,blur:parseFloat(a[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(d){var o=40,a=40,s=r.Object.NUM_FRACTION_DIGITS,u=r.util.rotateVector({x:this.offsetX,y:this.offsetY},r.util.degreesToRadians(-d.angle)),p=20,l=new r.Color(this.color);return d.width&&d.height&&(o=f((Math.abs(u.x)+this.blur)/d.width,s)*100+p,a=f((Math.abs(u.y)+this.blur)/d.height,s)*100+p),d.flipX&&(u.x*=-1),d.flipY&&(u.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+a+'%" height="'+(100+2*a)+'%" x="-'+o+'%" width="'+(100+2*o)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+f(this.blur?this.blur/2:0,s)+`"></feGaussianBlur>
	<feOffset dx="`+f(u.x,s)+'" dy="'+f(u.y,s)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+l.toRgb()+'" flood-opacity="'+l.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var d={},o=r.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(a){this[a]!==o[a]&&(d[a]=this[a])},this),d}}),r.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(t),function(){if(e.StaticCanvas){e.warn("fabric.StaticCanvas is already defined.");return}var h=e.util.object.extend,r=e.util.getElementOffset,f=e.util.removeFromArray,d=e.util.toFixed,o=e.util.transformPoint,a=e.util.invertTransform,s=e.util.getNodeCanvas,u=e.util.createCanvasElement,p=new Error("Could not initialize `canvas` element");e.StaticCanvas=e.util.createClass(e.CommonMethods,{initialize:function(l,g){g||(g={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(l,g)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:e.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(l,g){var y=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(l),this._initOptions(g),this.interactive||this._initRetinaScaling(),g.overlayImage&&this.setOverlayImage(g.overlayImage,y),g.backgroundImage&&this.setBackgroundImage(g.backgroundImage,y),g.backgroundColor&&this.setBackgroundColor(g.backgroundColor,y),g.overlayColor&&this.setOverlayColor(g.overlayColor,y),this.calcOffset()},_isRetinaScaling:function(){return e.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,e.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var l=e.devicePixelRatio;this.__initRetinaScaling(l,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(l,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(l,g,y){g.setAttribute("width",this.width*l),g.setAttribute("height",this.height*l),y.scale(l,l)},calcOffset:function(){return this._offset=r(this.lowerCanvasEl),this},setOverlayImage:function(l,g,y){return this.__setBgOverlayImage("overlayImage",l,g,y)},setBackgroundImage:function(l,g,y){return this.__setBgOverlayImage("backgroundImage",l,g,y)},setOverlayColor:function(l,g){return this.__setBgOverlayColor("overlayColor",l,g)},setBackgroundColor:function(l,g){return this.__setBgOverlayColor("backgroundColor",l,g)},__setBgOverlayImage:function(l,g,y,_){return typeof g=="string"?e.util.loadImage(g,function(x,S){if(x){var b=new e.Image(x,_);this[l]=b,b.canvas=this}y&&y(x,S)},this,_&&_.crossOrigin):(_&&g.setOptions(_),this[l]=g,g&&(g.canvas=this),y&&y(g,!1)),this},__setBgOverlayColor:function(l,g,y){return this[l]=g,this._initGradient(g,l),this._initPattern(g,l,y),this},_createCanvasElement:function(){var l=u();if(!l||(l.style||(l.style={}),typeof l.getContext>"u"))throw p;return l},_initOptions:function(l){var g=this.lowerCanvasEl;this._setOptions(l),this.width=this.width||parseInt(g.width,10)||0,this.height=this.height||parseInt(g.height,10)||0,this.lowerCanvasEl.style&&(g.width=this.width,g.height=this.height,g.style.width=this.width+"px",g.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(l){l&&l.getContext?this.lowerCanvasEl=l:this.lowerCanvasEl=e.util.getById(l)||this._createCanvasElement(),e.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(l,g){return this.setDimensions({width:l},g)},setHeight:function(l,g){return this.setDimensions({height:l},g)},setDimensions:function(l,g){var y;g=g||{};for(var _ in l)y=l[_],g.cssOnly||(this._setBackstoreDimension(_,l[_]),y+="px",this.hasLostContext=!0),g.backstoreOnly||this._setCssDimension(_,y);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),g.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(l,g){return this.lowerCanvasEl[l]=g,this.upperCanvasEl&&(this.upperCanvasEl[l]=g),this.cacheCanvasEl&&(this.cacheCanvasEl[l]=g),this[l]=g,this},_setCssDimension:function(l,g){return this.lowerCanvasEl.style[l]=g,this.upperCanvasEl&&(this.upperCanvasEl.style[l]=g),this.wrapperEl&&(this.wrapperEl.style[l]=g),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(l){var g=this._activeObject,y=this.backgroundImage,_=this.overlayImage,x,S,b;for(this.viewportTransform=l,S=0,b=this._objects.length;S<b;S++)x=this._objects[S],x.group||x.setCoords(!0);return g&&g.setCoords(),y&&y.setCoords(!0),_&&_.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(l,g){var y=l,_=this.viewportTransform.slice(0);l=o(l,a(this.viewportTransform)),_[0]=g,_[3]=g;var x=o(l,_);return _[4]+=y.x-x.x,_[5]+=y.y-x.y,this.setViewportTransform(_)},setZoom:function(l){return this.zoomToPoint(new e.Point(0,0),l),this},absolutePan:function(l){var g=this.viewportTransform.slice(0);return g[4]=-l.x,g[5]=-l.y,this.setViewportTransform(g)},relativePan:function(l){return this.absolutePan(new e.Point(-l.x-this.viewportTransform[4],-l.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(l){this.stateful&&l.setupState(),l._set("canvas",this),l.setCoords(),this.fire("object:added",{target:l}),l.fire("added")},_onObjectRemoved:function(l){this.fire("object:removed",{target:l}),l.fire("removed"),delete l.canvas},clearContext:function(l){return l.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var l=this.contextContainer;return this.renderCanvas(l,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=e.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var l={},g=this.width,y=this.height,_=a(this.viewportTransform);return l.tl=o({x:0,y:0},_),l.br=o({x:g,y},_),l.tr=new e.Point(l.br.x,l.tl.y),l.bl=new e.Point(l.tl.x,l.br.y),this.vptCoords=l,l},cancelRequestedRender:function(){this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(l,g){var y=this.viewportTransform,_=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(l),e.util.setImageSmoothing(l,this.imageSmoothingEnabled),this.fire("before:render",{ctx:l}),this._renderBackground(l),l.save(),l.transform(y[0],y[1],y[2],y[3],y[4],y[5]),this._renderObjects(l,g),l.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(l),_&&(_.canvas=this,_.shouldCache(),_._transformDone=!0,_.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(l)),this._renderOverlay(l),this.controlsAboveOverlay&&this.interactive&&this.drawControls(l),this.fire("after:render",{ctx:l})},drawClipPathOnCanvas:function(l){var g=this.viewportTransform,y=this.clipPath;l.save(),l.transform(g[0],g[1],g[2],g[3],g[4],g[5]),l.globalCompositeOperation="destination-in",y.transform(l),l.scale(1/y.zoomX,1/y.zoomY),l.drawImage(y._cacheCanvas,-y.cacheTranslationX,-y.cacheTranslationY),l.restore()},_renderObjects:function(l,g){var y,_;for(y=0,_=g.length;y<_;++y)g[y]&&g[y].render(l)},_renderBackgroundOrOverlay:function(l,g){var y=this[g+"Color"],_=this[g+"Image"],x=this.viewportTransform,S=this[g+"Vpt"];if(!(!y&&!_)){if(y){l.save(),l.beginPath(),l.moveTo(0,0),l.lineTo(this.width,0),l.lineTo(this.width,this.height),l.lineTo(0,this.height),l.closePath(),l.fillStyle=y.toLive?y.toLive(l,this):y,S&&l.transform(x[0],x[1],x[2],x[3],x[4],x[5]),l.transform(1,0,0,1,y.offsetX||0,y.offsetY||0);var b=y.gradientTransform||y.patternTransform;b&&l.transform(b[0],b[1],b[2],b[3],b[4],b[5]),l.fill(),l.restore()}if(_){l.save();var E=this.skipOffscreen;this.skipOffscreen=S,S&&l.transform(x[0],x[1],x[2],x[3],x[4],x[5]),_.render(l),this.skipOffscreen=E,l.restore()}}},_renderBackground:function(l){this._renderBackgroundOrOverlay(l,"background")},_renderOverlay:function(l){this._renderBackgroundOrOverlay(l,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new e.Point(this.width/2,this.height/2)},centerObjectH:function(l){return this._centerObject(l,new e.Point(this.getCenterPoint().x,l.getCenterPoint().y))},centerObjectV:function(l){return this._centerObject(l,new e.Point(l.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(l){var g=this.getCenterPoint();return this._centerObject(l,g)},viewportCenterObject:function(l){var g=this.getVpCenter();return this._centerObject(l,g)},viewportCenterObjectH:function(l){var g=this.getVpCenter();return this._centerObject(l,new e.Point(g.x,l.getCenterPoint().y)),this},viewportCenterObjectV:function(l){var g=this.getVpCenter();return this._centerObject(l,new e.Point(l.getCenterPoint().x,g.y))},getVpCenter:function(){var l=this.getCenterPoint(),g=a(this.viewportTransform);return o(l,g)},_centerObject:function(l,g){return l.setPositionByOrigin(g,"center","center"),l.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(l){return this.toDatalessObject(l)},toObject:function(l){return this._toObjectMethod("toObject",l)},toDatalessObject:function(l){return this._toObjectMethod("toDatalessObject",l)},_toObjectMethod:function(l,g){var y=this.clipPath,_={version:e.version,objects:this._toObjects(l,g)};return y&&!y.excludeFromExport&&(_.clipPath=this._toObject(this.clipPath,l,g)),h(_,this.__serializeBgOverlay(l,g)),e.util.populateWithProperties(this,_,g),_},_toObjects:function(l,g){return this._objects.filter(function(y){return!y.excludeFromExport}).map(function(y){return this._toObject(y,l,g)},this)},_toObject:function(l,g,y){var _;this.includeDefaultValues||(_=l.includeDefaultValues,l.includeDefaultValues=!1);var x=l[g](y);return this.includeDefaultValues||(l.includeDefaultValues=_),x},__serializeBgOverlay:function(l,g){var y={},_=this.backgroundImage,x=this.overlayImage,S=this.backgroundColor,b=this.overlayColor;return S&&S.toObject?S.excludeFromExport||(y.background=S.toObject(g)):S&&(y.background=S),b&&b.toObject?b.excludeFromExport||(y.overlay=b.toObject(g)):b&&(y.overlay=b),_&&!_.excludeFromExport&&(y.backgroundImage=this._toObject(_,l,g)),x&&!x.excludeFromExport&&(y.overlayImage=this._toObject(x,l,g)),y},svgViewportTransformation:!0,toSVG:function(l,g){l||(l={}),l.reviver=g;var y=[];return this._setSVGPreamble(y,l),this._setSVGHeader(y,l),this.clipPath&&y.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(y,"background"),this._setSVGBgOverlayImage(y,"backgroundImage",g),this._setSVGObjects(y,g),this.clipPath&&y.push(`</g>
`),this._setSVGBgOverlayColor(y,"overlay"),this._setSVGBgOverlayImage(y,"overlayImage",g),y.push("</svg>"),y.join("")},_setSVGPreamble:function(l,g){g.suppressPreamble||l.push('<?xml version="1.0" encoding="',g.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(l,g){var y=g.width||this.width,_=g.height||this.height,x,S='viewBox="0 0 '+this.width+" "+this.height+'" ',b=e.Object.NUM_FRACTION_DIGITS;g.viewBox?S='viewBox="'+g.viewBox.x+" "+g.viewBox.y+" "+g.viewBox.width+" "+g.viewBox.height+'" ':this.svgViewportTransformation&&(x=this.viewportTransform,S='viewBox="'+d(-x[4]/x[0],b)+" "+d(-x[5]/x[3],b)+" "+d(this.width/x[0],b)+" "+d(this.height/x[3],b)+'" '),l.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',y,'" ','height="',_,'" ',S,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",e.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(g),`</defs>
`)},createSVGClipPathMarkup:function(l){var g=this.clipPath;return g?(g.clipPathId="CLIPPATH_"+e.Object.__uid++,'<clipPath id="'+g.clipPathId+`" >
`+this.clipPath.toClipPathSVG(l.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var l=this,g=["background","overlay"].map(function(y){var _=l[y+"Color"];if(_&&_.toLive){var x=l[y+"Vpt"],S=l.viewportTransform,b={width:l.width/(x?S[0]:1),height:l.height/(x?S[3]:1)};return _.toSVG(b,{additionalTransform:x?e.util.matrixToSVG(S):""})}});return g.join("")},createSVGFontFacesMarkup:function(){var l="",g={},y,_,x,S,b,E,T,O,A,j=e.fontPaths,U=[];for(this._objects.forEach(function re(oe){U.push(oe),oe._objects&&oe._objects.forEach(re)}),O=0,A=U.length;O<A;O++)if(y=U[O],_=y.fontFamily,!(y.type.indexOf("text")===-1||g[_]||!j[_])&&(g[_]=!0,!!y.styles)){x=y.styles;for(b in x){S=x[b];for(T in S)E=S[T],_=E.fontFamily,!g[_]&&j[_]&&(g[_]=!0)}}for(var M in g)l+=[`		@font-face {
`,"			font-family: '",M,`';
`,"			src: url('",j[M],`');
`,`		}
`].join("");return l&&(l=['	<style type="text/css">',`<![CDATA[
`,l,"]]>",`</style>
`].join("")),l},_setSVGObjects:function(l,g){var y,_,x,S=this._objects;for(_=0,x=S.length;_<x;_++)y=S[_],!y.excludeFromExport&&this._setSVGObject(l,y,g)},_setSVGObject:function(l,g,y){l.push(g.toSVG(y))},_setSVGBgOverlayImage:function(l,g,y){this[g]&&!this[g].excludeFromExport&&this[g].toSVG&&l.push(this[g].toSVG(y))},_setSVGBgOverlayColor:function(l,g){var y=this[g+"Color"],_=this.viewportTransform,x=this.width,S=this.height;if(y)if(y.toLive){var b=y.repeat,E=e.util.invertTransform(_),T=this[g+"Vpt"],O=T?e.util.matrixToSVG(E):"";l.push('<rect transform="'+O+" translate(",x/2,",",S/2,')"',' x="',y.offsetX-x/2,'" y="',y.offsetY-S/2,'" ','width="',b==="repeat-y"||b==="no-repeat"?y.source.width:x,'" height="',b==="repeat-x"||b==="no-repeat"?y.source.height:S,'" fill="url(#SVGID_'+y.id+')"',`></rect>
`)}else l.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',y,'"',`></rect>
`)},sendToBack:function(l){if(!l)return this;var g=this._activeObject,y,_,x;if(l===g&&l.type==="activeSelection")for(x=g._objects,y=x.length;y--;)_=x[y],f(this._objects,_),this._objects.unshift(_);else f(this._objects,l),this._objects.unshift(l);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(l){if(!l)return this;var g=this._activeObject,y,_,x;if(l===g&&l.type==="activeSelection")for(x=g._objects,y=0;y<x.length;y++)_=x[y],f(this._objects,_),this._objects.push(_);else f(this._objects,l),this._objects.push(l);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(l,g){if(!l)return this;var y=this._activeObject,_,x,S,b,E,T=0;if(l===y&&l.type==="activeSelection")for(E=y._objects,_=0;_<E.length;_++)x=E[_],S=this._objects.indexOf(x),S>0+T&&(b=S-1,f(this._objects,x),this._objects.splice(b,0,x)),T++;else S=this._objects.indexOf(l),S!==0&&(b=this._findNewLowerIndex(l,S,g),f(this._objects,l),this._objects.splice(b,0,l));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(l,g,y){var _,x;if(y)for(_=g,x=g-1;x>=0;--x){var S=l.intersectsWithObject(this._objects[x])||l.isContainedWithinObject(this._objects[x])||this._objects[x].isContainedWithinObject(l);if(S){_=x;break}}else _=g-1;return _},bringForward:function(l,g){if(!l)return this;var y=this._activeObject,_,x,S,b,E,T=0;if(l===y&&l.type==="activeSelection")for(E=y._objects,_=E.length;_--;)x=E[_],S=this._objects.indexOf(x),S<this._objects.length-1-T&&(b=S+1,f(this._objects,x),this._objects.splice(b,0,x)),T++;else S=this._objects.indexOf(l),S!==this._objects.length-1&&(b=this._findNewUpperIndex(l,S,g),f(this._objects,l),this._objects.splice(b,0,l));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(l,g,y){var _,x,S;if(y)for(_=g,x=g+1,S=this._objects.length;x<S;++x){var b=l.intersectsWithObject(this._objects[x])||l.isContainedWithinObject(this._objects[x])||this._objects[x].isContainedWithinObject(l);if(b){_=x;break}}else _=g+1;return _},moveTo:function(l,g){return f(this._objects,l),this._objects.splice(g,0,l),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(l){l.dispose&&l.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),e.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),e.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),h(e.StaticCanvas.prototype,e.Observable),h(e.StaticCanvas.prototype,e.Collection),h(e.StaticCanvas.prototype,e.DataURLExporter),h(e.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(l){var g=u();if(!g||!g.getContext)return null;var y=g.getContext("2d");if(!y)return null;switch(l){case"setLineDash":return typeof y.setLineDash<"u";default:return null}}}),e.StaticCanvas.prototype.toJSON=e.StaticCanvas.prototype.toObject,e.isLikelyNode&&(e.StaticCanvas.prototype.createPNGStream=function(){var l=s(this.lowerCanvasEl);return l&&l.createPNGStream()},e.StaticCanvas.prototype.createJPEGStream=function(l){var g=s(this.lowerCanvasEl);return g&&g.createJPEGStream(l)})}(),e.BaseBrush=e.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(h){h.strokeStyle=this.color,h.lineWidth=this.width,h.lineCap=this.strokeLineCap,h.miterLimit=this.strokeMiterLimit,h.lineJoin=this.strokeLineJoin,h.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(h){var r=this.canvas.viewportTransform;h.save(),h.transform(r[0],r[1],r[2],r[3],r[4],r[5])},_setShadow:function(){if(this.shadow){var h=this.canvas,r=this.shadow,f=h.contextTop,d=h.getZoom();h&&h._isRetinaScaling()&&(d*=e.devicePixelRatio),f.shadowColor=r.color,f.shadowBlur=r.blur*d,f.shadowOffsetX=r.offsetX*d,f.shadowOffsetY=r.offsetY*d}},needsFullRender:function(){var h=new e.Color(this.color);return h.getAlpha()<1||!!this.shadow},_resetShadow:function(){var h=this.canvas.contextTop;h.shadowColor="",h.shadowBlur=h.shadowOffsetX=h.shadowOffsetY=0},_isOutSideCanvas:function(h){return h.x<0||h.x>this.canvas.getWidth()||h.y<0||h.y>this.canvas.getHeight()}}),function(){e.PencilBrush=e.util.createClass(e.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(h){this.canvas=h,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(h,r,f){var d=r.midPointFrom(f);return h.quadraticCurveTo(r.x,r.y,d.x,d.y),d},onMouseDown:function(h,r){this.canvas._isMainEvent(r.e)&&(this.drawStraightLine=r.e[this.straightLineKey],this._prepareForDrawing(h),this._captureDrawingPath(h),this._render())},onMouseMove:function(h,r){if(this.canvas._isMainEvent(r.e)&&(this.drawStraightLine=r.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(h))&&this._captureDrawingPath(h)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var f=this._points,d=f.length,o=this.canvas.contextTop;this._saveAndTransform(o),this.oldEnd&&(o.beginPath(),o.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(o,f[d-2],f[d-1],!0),o.stroke(),o.restore()}},onMouseUp:function(h){return this.canvas._isMainEvent(h.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(h){var r=new e.Point(h.x,h.y);this._reset(),this._addPoint(r),this.canvas.contextTop.moveTo(r.x,r.y)},_addPoint:function(h){return this._points.length>1&&h.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(h),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(h){var r=new e.Point(h.x,h.y);return this._addPoint(r)},_render:function(h){var r,f,d=this._points[0],o=this._points[1];if(h=h||this.canvas.contextTop,this._saveAndTransform(h),h.beginPath(),this._points.length===2&&d.x===o.x&&d.y===o.y){var a=this.width/1e3;d=new e.Point(d.x,d.y),o=new e.Point(o.x,o.y),d.x-=a,o.x+=a}for(h.moveTo(d.x,d.y),r=1,f=this._points.length;r<f;r++)this._drawSegment(h,d,o),d=this._points[r],o=this._points[r+1];h.lineTo(d.x,d.y),h.stroke(),h.restore()},convertPointsToSVGPath:function(h){var r=this.width/1e3;return e.util.getSmoothPathFromPoints(h,r)},_isEmptySVGPath:function(h){var r=e.util.joinPath(h);return r==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(h){var r=new e.Path(h,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,r.shadow=new e.Shadow(this.shadow)),r},decimatePoints:function(h,r){if(h.length<=2)return h;var f=this.canvas.getZoom(),d=Math.pow(r/f,2),o,a=h.length-1,s=h[0],u=[s],p;for(o=1;o<a-1;o++)p=Math.pow(s.x-h[o].x,2)+Math.pow(s.y-h[o].y,2),p>=d&&(s=h[o],u.push(s));return u.push(h[a]),u},_finalizeAndAddPath:function(){var h=this.canvas.contextTop;h.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var r=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(r)){this.canvas.requestRenderAll();return}var f=this.createPath(r);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:f}),this.canvas.add(f),this.canvas.requestRenderAll(),f.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:f})}})}(),e.CircleBrush=e.util.createClass(e.BaseBrush,{width:10,initialize:function(h){this.canvas=h,this.points=[]},drawDot:function(h){var r=this.addPoint(h),f=this.canvas.contextTop;this._saveAndTransform(f),this.dot(f,r),f.restore()},dot:function(h,r){h.fillStyle=r.fill,h.beginPath(),h.arc(r.x,r.y,r.radius,0,Math.PI*2,!1),h.closePath(),h.fill()},onMouseDown:function(h){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(h)},_render:function(){var h=this.canvas.contextTop,r,f,d=this.points;for(this._saveAndTransform(h),r=0,f=d.length;r<f;r++)this.dot(h,d[r]);h.restore()},onMouseMove:function(h){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(h)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(h),this._render()):this.drawDot(h))},onMouseUp:function(){var h=this.canvas.renderOnAddRemove,r,f;this.canvas.renderOnAddRemove=!1;var d=[];for(r=0,f=this.points.length;r<f;r++){var o=this.points[r],a=new e.Circle({radius:o.radius,left:o.x,top:o.y,originX:"center",originY:"center",fill:o.fill});this.shadow&&(a.shadow=new e.Shadow(this.shadow)),d.push(a)}var s=new e.Group(d);s.canvas=this.canvas,this.canvas.fire("before:path:created",{path:s}),this.canvas.add(s),this.canvas.fire("path:created",{path:s}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=h,this.canvas.requestRenderAll()},addPoint:function(h){var r=new e.Point(h.x,h.y),f=e.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,d=new e.Color(this.color).setAlpha(e.util.getRandomInt(0,100)/100).toRgba();return r.radius=f,r.fill=d,this.points.push(r),r}}),e.SprayBrush=e.util.createClass(e.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(h){this.canvas=h,this.sprayChunks=[]},onMouseDown:function(h){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(h),this.render(this.sprayChunkPoints)},onMouseMove:function(h){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(h)||(this.addSprayChunk(h),this.render(this.sprayChunkPoints))},onMouseUp:function(){var h=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var r=[],f=0,d=this.sprayChunks.length;f<d;f++)for(var o=this.sprayChunks[f],a=0,s=o.length;a<s;a++){var u=new e.Rect({width:o[a].width,height:o[a].width,left:o[a].x+1,top:o[a].y+1,originX:"center",originY:"center",fill:this.color});r.push(u)}this.optimizeOverlapping&&(r=this._getOptimizedRects(r));var p=new e.Group(r);this.shadow&&p.set("shadow",new e.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:p}),this.canvas.add(p),this.canvas.fire("path:created",{path:p}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=h,this.canvas.requestRenderAll()},_getOptimizedRects:function(h){var r={},f,d,o;for(d=0,o=h.length;d<o;d++)f=h[d].left+""+h[d].top,r[f]||(r[f]=h[d]);var a=[];for(f in r)a.push(r[f]);return a},render:function(h){var r=this.canvas.contextTop,f,d;for(r.fillStyle=this.color,this._saveAndTransform(r),f=0,d=h.length;f<d;f++){var o=h[f];typeof o.opacity<"u"&&(r.globalAlpha=o.opacity),r.fillRect(o.x,o.y,o.width,o.width)}r.restore()},_render:function(){var h=this.canvas.contextTop,r,f;for(h.fillStyle=this.color,this._saveAndTransform(h),r=0,f=this.sprayChunks.length;r<f;r++)this.render(this.sprayChunks[r]);h.restore()},addSprayChunk:function(h){this.sprayChunkPoints=[];var r,f,d,o=this.width/2,a;for(a=0;a<this.density;a++){r=e.util.getRandomInt(h.x-o,h.x+o),f=e.util.getRandomInt(h.y-o,h.y+o),this.dotWidthVariance?d=e.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):d=this.dotWidth;var s=new e.Point(r,f);s.width=d,this.randomOpacity&&(s.opacity=e.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(s)}this.sprayChunks.push(this.sprayChunkPoints)}}),e.PatternBrush=e.util.createClass(e.PencilBrush,{getPatternSrc:function(){var h=20,r=5,f=e.util.createCanvasElement(),d=f.getContext("2d");return f.width=f.height=h+r,d.fillStyle=this.color,d.beginPath(),d.arc(h/2,h/2,h/2,0,Math.PI*2,!1),d.closePath(),d.fill(),f},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(h){return h.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(h){this.callSuper("_setBrushStyles",h),h.strokeStyle=this.getPattern(h)},createPath:function(h){var r=this.callSuper("createPath",h),f=r._getLeftTopCoords().scalarAdd(r.strokeWidth/2);return r.stroke=new e.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-f.x,offsetY:-f.y}),r}}),function(){var h=e.util.getPointer,r=e.util.degreesToRadians,f=e.util.isTouchEvent;e.Canvas=e.util.createClass(e.StaticCanvas,{initialize:function(o,a){a||(a={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(o,a),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=e.PencilBrush&&new e.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var o=this.getActiveObjects(),a,s,u;if(o.length>0&&!this.preserveObjectStacking){s=[],u=[];for(var p=0,l=this._objects.length;p<l;p++)a=this._objects[p],o.indexOf(a)===-1?s.push(a):u.push(a);o.length>1&&(this._activeObject._objects=u),s.push.apply(s,u)}else s=this._objects;return s},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var o=this.contextContainer;return this.renderCanvas(o,this._chooseObjectsToRender()),this},renderTopLayer:function(o){o.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(o),this.contextTopDirty=!0),o.restore()},renderTop:function(){var o=this.contextTop;return this.clearContext(o),this.renderTopLayer(o),this.fire("after:render"),this},_normalizePointer:function(o,a){var s=o.calcTransformMatrix(),u=e.util.invertTransform(s),p=this.restorePointerVpt(a);return e.util.transformPoint(p,u)},isTargetTransparent:function(o,a,s){if(o.shouldCache()&&o._cacheCanvas&&o!==this._activeObject){var u=this._normalizePointer(o,{x:a,y:s}),p=Math.max(o.cacheTranslationX+u.x*o.zoomX,0),l=Math.max(o.cacheTranslationY+u.y*o.zoomY,0),x=e.util.isTransparent(o._cacheContext,Math.round(p),Math.round(l),this.targetFindTolerance);return x}var g=this.contextCache,y=o.selectionBackgroundColor,_=this.viewportTransform;o.selectionBackgroundColor="",this.clearContext(g),g.save(),g.transform(_[0],_[1],_[2],_[3],_[4],_[5]),o.render(g),g.restore(),o.selectionBackgroundColor=y;var x=e.util.isTransparent(g,a,s,this.targetFindTolerance);return x},_isSelectionKeyPressed:function(o){var a=!1;return Array.isArray(this.selectionKey)?a=!!this.selectionKey.find(function(s){return o[s]===!0}):a=o[this.selectionKey],a},_shouldClearSelection:function(o,a){var s=this.getActiveObjects(),u=this._activeObject;return!a||a&&u&&s.length>1&&s.indexOf(a)===-1&&u!==a&&!this._isSelectionKeyPressed(o)||a&&!a.evented||a&&!a.selectable&&u&&u!==a},_shouldCenterTransform:function(o,a,s){if(o){var u;return a==="scale"||a==="scaleX"||a==="scaleY"||a==="resizing"?u=this.centeredScaling||o.centeredScaling:a==="rotate"&&(u=this.centeredRotation||o.centeredRotation),u?!s:s}},_getOriginFromCorner:function(o,a){var s={x:o.originX,y:o.originY};return a==="ml"||a==="tl"||a==="bl"?s.x="right":(a==="mr"||a==="tr"||a==="br")&&(s.x="left"),a==="tl"||a==="mt"||a==="tr"?s.y="bottom":(a==="bl"||a==="mb"||a==="br")&&(s.y="top"),s},_getActionFromCorner:function(o,a,s,u){if(!a||!o)return"drag";var p=u.controls[a];return p.getActionName(s,p,u)},_setupCurrentTransform:function(o,a,s){if(a){var u=this.getPointer(o),p=a.__corner,l=a.controls[p],g=s&&p?l.getActionHandler(o,a,l):e.controlsUtils.dragHandler,y=this._getActionFromCorner(s,p,o,a),_=this._getOriginFromCorner(a,p),x=o[this.centeredKey],S={target:a,action:y,actionHandler:g,corner:p,scaleX:a.scaleX,scaleY:a.scaleY,skewX:a.skewX,skewY:a.skewY,offsetX:u.x-a.left,offsetY:u.y-a.top,originX:_.x,originY:_.y,ex:u.x,ey:u.y,lastX:u.x,lastY:u.y,theta:r(a.angle),width:a.width*a.scaleX,shiftKey:o.shiftKey,altKey:x,original:e.util.saveObjectTransform(a)};this._shouldCenterTransform(a,y,x)&&(S.originX="center",S.originY="center"),S.original.originX=_.x,S.original.originY=_.y,this._currentTransform=S,this._beforeTransform(o)}},setCursor:function(o){this.upperCanvasEl.style.cursor=o},_drawSelection:function(o){var a=this._groupSelector,s=new e.Point(a.ex,a.ey),u=e.util.transformPoint(s,this.viewportTransform),p=new e.Point(a.ex+a.left,a.ey+a.top),l=e.util.transformPoint(p,this.viewportTransform),g=Math.min(u.x,l.x),y=Math.min(u.y,l.y),_=Math.max(u.x,l.x),x=Math.max(u.y,l.y),S=this.selectionLineWidth/2;this.selectionColor&&(o.fillStyle=this.selectionColor,o.fillRect(g,y,_-g,x-y)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(o.lineWidth=this.selectionLineWidth,o.strokeStyle=this.selectionBorderColor,g+=S,y+=S,_-=S,x-=S,e.Object.prototype._setLineDash.call(this,o,this.selectionDashArray),o.strokeRect(g,y,_-g,x-y))},findTarget:function(o,a){if(!this.skipTargetFind){var s=!0,u=this.getPointer(o,s),p=this._activeObject,l=this.getActiveObjects(),g,y,_=f(o),x=l.length>1&&!a||l.length===1;if(this.targets=[],x&&p._findTargetCorner(u,_)||l.length>1&&!a&&p===this._searchPossibleTargets([p],u))return p;if(l.length===1&&p===this._searchPossibleTargets([p],u))if(this.preserveObjectStacking)g=p,y=this.targets,this.targets=[];else return p;var S=this._searchPossibleTargets(this._objects,u);return o[this.altSelectionKey]&&S&&g&&S!==g&&(S=g,this.targets=y),S}},_checkTarget:function(o,a,s){if(a&&a.visible&&a.evented&&a.containsPoint(o))if((this.perPixelTargetFind||a.perPixelTargetFind)&&!a.isEditing){var u=this.isTargetTransparent(a,s.x,s.y);if(!u)return!0}else return!0},_searchPossibleTargets:function(o,a){for(var s,u=o.length,p;u--;){var l=o[u],g=l.group?this._normalizePointer(l.group,a):a;if(this._checkTarget(g,l,a)){s=o[u],s.subTargetCheck&&s instanceof e.Group&&(p=this._searchPossibleTargets(s._objects,a),p&&this.targets.push(p));break}}return s},restorePointerVpt:function(o){return e.util.transformPoint(o,e.util.invertTransform(this.viewportTransform))},getPointer:function(o,a){if(this._absolutePointer&&!a)return this._absolutePointer;if(this._pointer&&a)return this._pointer;var s=h(o),u=this.upperCanvasEl,p=u.getBoundingClientRect(),l=p.width||0,g=p.height||0,y;(!l||!g)&&("top"in p&&"bottom"in p&&(g=Math.abs(p.top-p.bottom)),"right"in p&&"left"in p&&(l=Math.abs(p.right-p.left))),this.calcOffset(),s.x=s.x-this._offset.left,s.y=s.y-this._offset.top,a||(s=this.restorePointerVpt(s));var _=this.getRetinaScaling();return _!==1&&(s.x/=_,s.y/=_),l===0||g===0?y={width:1,height:1}:y={width:u.width/l,height:u.height/g},{x:s.x*y.width,y:s.y*y.height}},_createUpperCanvas:function(){var o=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),a=this.lowerCanvasEl,s=this.upperCanvasEl;s?s.className="":(s=this._createCanvasElement(),this.upperCanvasEl=s),e.util.addClass(s,"upper-canvas "+o),this.wrapperEl.appendChild(s),this._copyCanvasStyle(a,s),this._applyCanvasStyle(s),this.contextTop=s.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=e.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),e.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),e.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(o){var a=this.width||o.width,s=this.height||o.height;e.util.setStyle(o,{position:"absolute",width:a+"px",height:s+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),o.width=a,o.height=s,e.util.makeElementUnselectable(o)},_copyCanvasStyle:function(o,a){a.style.cssText=o.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var o=this._activeObject;return o?o.type==="activeSelection"&&o._objects?o._objects.slice(0):[o]:[]},_onObjectRemoved:function(o){o===this._activeObject&&(this.fire("before:selection:cleared",{target:o}),this._discardActiveObject(),this.fire("selection:cleared",{target:o}),o.fire("deselected")),o===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",o)},_fireSelectionEvents:function(o,a){var s=!1,u=this.getActiveObjects(),p=[],l=[];o.forEach(function(g){u.indexOf(g)===-1&&(s=!0,g.fire("deselected",{e:a,target:g}),l.push(g))}),u.forEach(function(g){o.indexOf(g)===-1&&(s=!0,g.fire("selected",{e:a,target:g}),p.push(g))}),o.length>0&&u.length>0?s&&this.fire("selection:updated",{e:a,selected:p,deselected:l}):u.length>0?this.fire("selection:created",{e:a,selected:p}):o.length>0&&this.fire("selection:cleared",{e:a,deselected:l})},setActiveObject:function(o,a){var s=this.getActiveObjects();return this._setActiveObject(o,a),this._fireSelectionEvents(s,a),this},_setActiveObject:function(o,a){return this._activeObject===o||!this._discardActiveObject(a,o)||o.onSelect({e:a})?!1:(this._activeObject=o,!0)},_discardActiveObject:function(o,a){var s=this._activeObject;if(s){if(s.onDeselect({e:o,object:a}))return!1;this._activeObject=null}return!0},discardActiveObject:function(o){var a=this.getActiveObjects(),s=this.getActiveObject();return a.length&&this.fire("before:selection:cleared",{target:s,e:o}),this._discardActiveObject(o),this._fireSelectionEvents(a,o),this},dispose:function(){var o=this.wrapperEl;return this.removeListeners(),o.removeChild(this.upperCanvasEl),o.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(a){e.util.cleanUpJsdomNode(this[a]),this[a]=void 0}).bind(this)),o.parentNode&&o.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,e.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(o){var a=this._activeObject;a&&a._renderControls(o)},_toObject:function(o,a,s){var u=this._realizeGroupTransformOnObject(o),p=this.callSuper("_toObject",o,a,s);return this._unwindGroupTransformOnObject(o,u),p},_realizeGroupTransformOnObject:function(o){if(o.group&&o.group.type==="activeSelection"&&this._activeObject===o.group){var a=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],s={};return a.forEach(function(u){s[u]=o[u]}),e.util.addTransformToObject(o,this._activeObject.calcOwnMatrix()),s}else return null},_unwindGroupTransformOnObject:function(o,a){a&&o.set(a)},_setSVGObject:function(o,a,s){var u=this._realizeGroupTransformOnObject(a);this.callSuper("_setSVGObject",o,a,s),this._unwindGroupTransformOnObject(a,u)},setViewportTransform:function(o){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),e.StaticCanvas.prototype.setViewportTransform.call(this,o)}});for(var d in e.StaticCanvas)d!=="prototype"&&(e.Canvas[d]=e.StaticCanvas[d])}(),function(){var h=e.util.addListener,r=e.util.removeListener,f=3,d=2,o=1,a={passive:!1};function s(u,p){return u.button&&u.button===p-1}e.util.object.extend(e.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(h,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(u,p){var l=this.upperCanvasEl,g=this._getEventPrefix();u(e.window,"resize",this._onResize),u(l,g+"down",this._onMouseDown),u(l,g+"move",this._onMouseMove,a),u(l,g+"out",this._onMouseOut),u(l,g+"enter",this._onMouseEnter),u(l,"wheel",this._onMouseWheel),u(l,"contextmenu",this._onContextMenu),u(l,"dblclick",this._onDoubleClick),u(l,"dragover",this._onDragOver),u(l,"dragenter",this._onDragEnter),u(l,"dragleave",this._onDragLeave),u(l,"drop",this._onDrop),this.enablePointerEvents||u(l,"touchstart",this._onTouchStart,a),typeof eventjs<"u"&&p in eventjs&&(eventjs[p](l,"gesture",this._onGesture),eventjs[p](l,"drag",this._onDrag),eventjs[p](l,"orientation",this._onOrientationChange),eventjs[p](l,"shake",this._onShake),eventjs[p](l,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(r,"remove");var u=this._getEventPrefix();r(e.document,u+"up",this._onMouseUp),r(e.document,"touchend",this._onTouchEnd,a),r(e.document,u+"move",this._onMouseMove,a),r(e.document,"touchmove",this._onMouseMove,a)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(u,p){this.__onTransformGesture&&this.__onTransformGesture(u,p)},_onDrag:function(u,p){this.__onDrag&&this.__onDrag(u,p)},_onMouseWheel:function(u){this.__onMouseWheel(u)},_onMouseOut:function(u){var p=this._hoveredTarget;this.fire("mouse:out",{target:p,e:u}),this._hoveredTarget=null,p&&p.fire("mouseout",{e:u});var l=this;this._hoveredTargets.forEach(function(g){l.fire("mouse:out",{target:g,e:u}),g&&g.fire("mouseout",{e:u})}),this._hoveredTargets=[]},_onMouseEnter:function(u){!this._currentTransform&&!this.findTarget(u)&&(this.fire("mouse:over",{target:null,e:u}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(u,p){this.__onOrientationChange&&this.__onOrientationChange(u,p)},_onShake:function(u,p){this.__onShake&&this.__onShake(u,p)},_onLongPress:function(u,p){this.__onLongPress&&this.__onLongPress(u,p)},_onDragOver:function(u){u.preventDefault();var p=this._simpleEventHandler("dragover",u);this._fireEnterLeaveEvents(p,u)},_onDrop:function(u){return this._simpleEventHandler("drop:before",u),this._simpleEventHandler("drop",u)},_onContextMenu:function(u){return this.stopContextMenu&&(u.stopPropagation(),u.preventDefault()),!1},_onDoubleClick:function(u){this._cacheTransformEventData(u),this._handleEvent(u,"dblclick"),this._resetTransformEventData(u)},getPointerId:function(u){var p=u.changedTouches;return p?p[0]&&p[0].identifier:this.enablePointerEvents?u.pointerId:-1},_isMainEvent:function(u){return u.isPrimary===!0?!0:u.isPrimary===!1?!1:u.type==="touchend"&&u.touches.length===0?!0:u.changedTouches?u.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(u){u.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(u)),this.__onMouseDown(u),this._resetTransformEventData();var p=this.upperCanvasEl,l=this._getEventPrefix();h(e.document,"touchend",this._onTouchEnd,a),h(e.document,"touchmove",this._onMouseMove,a),r(p,l+"down",this._onMouseDown)},_onMouseDown:function(u){this.__onMouseDown(u),this._resetTransformEventData();var p=this.upperCanvasEl,l=this._getEventPrefix();r(p,l+"move",this._onMouseMove,a),h(e.document,l+"up",this._onMouseUp),h(e.document,l+"move",this._onMouseMove,a)},_onTouchEnd:function(u){if(!(u.touches.length>0)){this.__onMouseUp(u),this._resetTransformEventData(),this.mainTouchId=null;var p=this._getEventPrefix();r(e.document,"touchend",this._onTouchEnd,a),r(e.document,"touchmove",this._onMouseMove,a);var l=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){h(l.upperCanvasEl,p+"down",l._onMouseDown),l._willAddMouseDown=0},400)}},_onMouseUp:function(u){this.__onMouseUp(u),this._resetTransformEventData();var p=this.upperCanvasEl,l=this._getEventPrefix();this._isMainEvent(u)&&(r(e.document,l+"up",this._onMouseUp),r(e.document,l+"move",this._onMouseMove,a),h(p,l+"move",this._onMouseMove,a))},_onMouseMove:function(u){!this.allowTouchScrolling&&u.preventDefault&&u.preventDefault(),this.__onMouseMove(u)},_onResize:function(){this.calcOffset()},_shouldRender:function(u){var p=this._activeObject;return!!p!=!!u||p&&u&&p!==u?!0:(p&&p.isEditing,!1)},__onMouseUp:function(u){var p,l=this._currentTransform,g=this._groupSelector,y=!1,_=!g||g.left===0&&g.top===0;if(this._cacheTransformEventData(u),p=this._target,this._handleEvent(u,"up:before"),s(u,f)){this.fireRightClick&&this._handleEvent(u,"up",f,_);return}if(s(u,d)){this.fireMiddleClick&&this._handleEvent(u,"up",d,_),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(u);return}if(this._isMainEvent(u)){if(l&&(this._finalizeCurrentTransform(u),y=l.actionPerformed),!_){var x=p===this._activeObject;this._maybeGroupObjects(u),y||(y=this._shouldRender(p)||!x&&p===this._activeObject)}var S,b;if(p){if(S=p._findTargetCorner(this.getPointer(u,!0),e.util.isTouchEvent(u)),p.selectable&&p!==this._activeObject&&p.activeOn==="up")this.setActiveObject(p,u),y=!0;else{var E=p.controls[S],T=E&&E.getMouseUpHandler(u,p,E);T&&(b=this.getPointer(u),T(u,l,b.x,b.y))}p.isMoving=!1}if(l&&(l.target!==p||l.corner!==S)){var O=l.target&&l.target.controls[l.corner],A=O&&O.getMouseUpHandler(u,p,E);b=b||this.getPointer(u),A&&A(u,l,b.x,b.y)}this._setCursorFromEvent(u,p),this._handleEvent(u,"up",o,_),this._groupSelector=null,this._currentTransform=null,p&&(p.__corner=0),y?this.requestRenderAll():_||this.renderTop()}},_simpleEventHandler:function(u,p){var l=this.findTarget(p),g=this.targets,y={e:p,target:l,subTargets:g};if(this.fire(u,y),l&&l.fire(u,y),!g)return l;for(var _=0;_<g.length;_++)g[_].fire(u,y);return l},_handleEvent:function(u,p,l,g){var y=this._target,_=this.targets||[],x={e:u,target:y,subTargets:_,button:l||o,isClick:g||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};p==="up"&&(x.currentTarget=this.findTarget(u),x.currentSubTargets=this.targets),this.fire("mouse:"+p,x),y&&y.fire("mouse"+p,x);for(var S=0;S<_.length;S++)_[S].fire("mouse"+p,x)},_finalizeCurrentTransform:function(u){var p=this._currentTransform,l=p.target,g={e:u,target:l,transform:p,action:p.action};l._scaling&&(l._scaling=!1),l.setCoords(),(p.actionPerformed||this.stateful&&l.hasStateChanged())&&this._fire("modified",g)},_onMouseDownInDrawingMode:function(u){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(u).requestRenderAll();var p=this.getPointer(u);this.freeDrawingBrush.onMouseDown(p,{e:u,pointer:p}),this._handleEvent(u,"down")},_onMouseMoveInDrawingMode:function(u){if(this._isCurrentlyDrawing){var p=this.getPointer(u);this.freeDrawingBrush.onMouseMove(p,{e:u,pointer:p})}this.setCursor(this.freeDrawingCursor),this._handleEvent(u,"move")},_onMouseUpInDrawingMode:function(u){var p=this.getPointer(u);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:u,pointer:p}),this._handleEvent(u,"up")},__onMouseDown:function(u){this._cacheTransformEventData(u),this._handleEvent(u,"down:before");var p=this._target;if(s(u,f)){this.fireRightClick&&this._handleEvent(u,"down",f);return}if(s(u,d)){this.fireMiddleClick&&this._handleEvent(u,"down",d);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(u);return}if(this._isMainEvent(u)&&!this._currentTransform){var l=this._pointer;this._previousPointer=l;var g=this._shouldRender(p),y=this._shouldGroup(u,p);if(this._shouldClearSelection(u,p)?this.discardActiveObject(u):y&&(this._handleGrouping(u,p),p=this._activeObject),this.selection&&(!p||!p.selectable&&!p.isEditing&&p!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),p){var _=p===this._activeObject;p.selectable&&p.activeOn==="down"&&this.setActiveObject(p,u);var x=p._findTargetCorner(this.getPointer(u,!0),e.util.isTouchEvent(u));if(p.__corner=x,p===this._activeObject&&(x||!y)){this._setupCurrentTransform(u,p,_);var S=p.controls[x],l=this.getPointer(u),b=S&&S.getMouseDownHandler(u,p,S);b&&b(u,this._currentTransform,l.x,l.y)}}this._handleEvent(u,"down"),(g||y)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(u){this._resetTransformEventData(),this._pointer=this.getPointer(u,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(u)||null},_beforeTransform:function(u){var p=this._currentTransform;this.stateful&&p.target.saveState(),this.fire("before:transform",{e:u,transform:p})},__onMouseMove:function(u){this._handleEvent(u,"move:before"),this._cacheTransformEventData(u);var p,l;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(u);return}if(this._isMainEvent(u)){var g=this._groupSelector;g?(l=this._absolutePointer,g.left=l.x-g.ex,g.top=l.y-g.ey,this.renderTop()):this._currentTransform?this._transformObject(u):(p=this.findTarget(u)||null,this._setCursorFromEvent(u,p),this._fireOverOutEvents(p,u)),this._handleEvent(u,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(u,p){var l=this._hoveredTarget,g=this._hoveredTargets,y=this.targets,_=Math.max(g.length,y.length);this.fireSyntheticInOutEvents(u,p,{oldTarget:l,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var x=0;x<_;x++)this.fireSyntheticInOutEvents(y[x],p,{oldTarget:g[x],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=u,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(u,p){var l=this._draggedoverTarget,g=this._hoveredTargets,y=this.targets,_=Math.max(g.length,y.length);this.fireSyntheticInOutEvents(u,p,{oldTarget:l,evtOut:"dragleave",evtIn:"dragenter"});for(var x=0;x<_;x++)this.fireSyntheticInOutEvents(y[x],p,{oldTarget:g[x],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=u},fireSyntheticInOutEvents:function(u,p,l){var g,y,_=l.oldTarget,x,S,b=_!==u,E=l.canvasEvtIn,T=l.canvasEvtOut;b&&(g={e:p,target:u,previousTarget:_},y={e:p,target:_,nextTarget:u}),S=u&&b,x=_&&b,x&&(T&&this.fire(T,y),_.fire(l.evtOut,y)),S&&(E&&this.fire(E,g),u.fire(l.evtIn,g))},__onMouseWheel:function(u){this._cacheTransformEventData(u),this._handleEvent(u,"wheel"),this._resetTransformEventData()},_transformObject:function(u){var p=this.getPointer(u),l=this._currentTransform;l.reset=!1,l.shiftKey=u.shiftKey,l.altKey=u[this.centeredKey],this._performTransformAction(u,l,p),l.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(u,p,l){var g=l.x,y=l.y,_=p.action,x=!1,S=p.actionHandler;S&&(x=S(u,p,g,y)),_==="drag"&&x&&(p.target.isMoving=!0,this.setCursor(p.target.moveCursor||this.moveCursor)),p.actionPerformed=p.actionPerformed||x},_fire:e.controlsUtils.fireEvent,_setCursorFromEvent:function(u,p){if(!p)return this.setCursor(this.defaultCursor),!1;var l=p.hoverCursor||this.hoverCursor,g=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,y=(!g||!g.contains(p))&&p._findTargetCorner(this.getPointer(u,!0));y?this.setCursor(this.getCornerCursor(y,p,u)):(p.subTargetCheck&&this.targets.concat().reverse().map(function(_){l=_.hoverCursor||l}),this.setCursor(l))},getCornerCursor:function(u,p,l){var g=p.controls[u];return g.cursorStyleHandler(l,g,p)}})}(),function(){var h=Math.min,r=Math.max;e.util.object.extend(e.Canvas.prototype,{_shouldGroup:function(f,d){var o=this._activeObject;return o&&this._isSelectionKeyPressed(f)&&d&&d.selectable&&this.selection&&(o!==d||o.type==="activeSelection")&&!d.onSelect({e:f})},_handleGrouping:function(f,d){var o=this._activeObject;o.__corner||d===o&&(d=this.findTarget(f,!0),!d||!d.selectable)||(o&&o.type==="activeSelection"?this._updateActiveSelection(d,f):this._createActiveSelection(d,f))},_updateActiveSelection:function(f,d){var o=this._activeObject,a=o._objects.slice(0);o.contains(f)?(o.removeWithUpdate(f),this._hoveredTarget=f,this._hoveredTargets=this.targets.concat(),o.size()===1&&this._setActiveObject(o.item(0),d)):(o.addWithUpdate(f),this._hoveredTarget=o,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(a,d)},_createActiveSelection:function(f,d){var o=this.getActiveObjects(),a=this._createGroup(f);this._hoveredTarget=a,this._setActiveObject(a,d),this._fireSelectionEvents(o,d)},_createGroup:function(f){var d=this._objects,o=d.indexOf(this._activeObject)<d.indexOf(f),a=o?[this._activeObject,f]:[f,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new e.ActiveSelection(a,{canvas:this})},_groupSelectedObjects:function(f){var d=this._collectObjects(f),o;d.length===1?this.setActiveObject(d[0],f):d.length>1&&(o=new e.ActiveSelection(d.reverse(),{canvas:this}),this.setActiveObject(o,f))},_collectObjects:function(f){for(var d=[],o,a=this._groupSelector.ex,s=this._groupSelector.ey,u=a+this._groupSelector.left,p=s+this._groupSelector.top,l=new e.Point(h(a,u),h(s,p)),g=new e.Point(r(a,u),r(s,p)),y=!this.selectionFullyContained,_=a===u&&s===p,x=this._objects.length;x--&&(o=this._objects[x],!(!(!o||!o.selectable||!o.visible)&&(y&&o.intersectsWithRect(l,g,!0)||o.isContainedWithinRect(l,g,!0)||y&&o.containsPoint(l,null,!0)||y&&o.containsPoint(g,null,!0))&&(d.push(o),_))););return d.length>1&&(d=d.filter(function(S){return!S.onSelect({e:f})})),d},_maybeGroupObjects:function(f){this.selection&&this._groupSelector&&this._groupSelectedObjects(f),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){e.util.object.extend(e.StaticCanvas.prototype,{toDataURL:function(h){h||(h={});var r=h.format||"png",f=h.quality||1,d=(h.multiplier||1)*(h.enableRetinaScaling?this.getRetinaScaling():1),o=this.toCanvasElement(d,h);return e.util.toDataURL(o,r,f)},toCanvasElement:function(h,r){h=h||1,r=r||{};var f=(r.width||this.width)*h,d=(r.height||this.height)*h,o=this.getZoom(),a=this.width,s=this.height,u=o*h,p=this.viewportTransform,l=(p[4]-(r.left||0))*h,g=(p[5]-(r.top||0))*h,y=this.interactive,_=[u,0,0,u,l,g],x=this.enableRetinaScaling,S=e.util.createCanvasElement(),b=this.contextTop;return S.width=f,S.height=d,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=_,this.width=f,this.height=d,this.calcViewportBoundaries(),this.renderCanvas(S.getContext("2d"),this._objects),this.viewportTransform=p,this.width=a,this.height=s,this.calcViewportBoundaries(),this.interactive=y,this.enableRetinaScaling=x,this.contextTop=b,S}})}(),e.util.object.extend(e.StaticCanvas.prototype,{loadFromJSON:function(h,r,f){if(h){var d=typeof h=="string"?JSON.parse(h):e.util.object.clone(h),o=this,a=d.clipPath,s=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete d.clipPath,this._enlivenObjects(d.objects,function(u){o.clear(),o._setBgOverlay(d,function(){a?o._enlivenObjects([a],function(p){o.clipPath=p[0],o.__setupCanvas.call(o,d,u,s,r)}):o.__setupCanvas.call(o,d,u,s,r)})},f),this}},__setupCanvas:function(h,r,f,d){var o=this;r.forEach(function(a,s){o.insertAt(a,s)}),this.renderOnAddRemove=f,delete h.objects,delete h.backgroundImage,delete h.overlayImage,delete h.background,delete h.overlay,this._setOptions(h),this.renderAll(),d&&d()},_setBgOverlay:function(h,r){var f={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!h.backgroundImage&&!h.overlayImage&&!h.background&&!h.overlay){r&&r();return}var d=function(){f.backgroundImage&&f.overlayImage&&f.backgroundColor&&f.overlayColor&&r&&r()};this.__setBgOverlay("backgroundImage",h.backgroundImage,f,d),this.__setBgOverlay("overlayImage",h.overlayImage,f,d),this.__setBgOverlay("backgroundColor",h.background,f,d),this.__setBgOverlay("overlayColor",h.overlay,f,d)},__setBgOverlay:function(h,r,f,d){var o=this;if(!r){f[h]=!0,d&&d();return}h==="backgroundImage"||h==="overlayImage"?e.util.enlivenObjects([r],function(a){o[h]=a[0],f[h]=!0,d&&d()}):this["set"+e.util.string.capitalize(h,!0)](r,function(){f[h]=!0,d&&d()})},_enlivenObjects:function(h,r,f){if(!h||h.length===0){r&&r([]);return}e.util.enlivenObjects(h,function(d){r&&r(d)},null,f)},_toDataURL:function(h,r){this.clone(function(f){r(f.toDataURL(h))})},_toDataURLWithMultiplier:function(h,r,f){this.clone(function(d){f(d.toDataURLWithMultiplier(h,r))})},clone:function(h,r){var f=JSON.stringify(this.toJSON(r));this.cloneWithoutData(function(d){d.loadFromJSON(f,function(){h&&h(d)})})},cloneWithoutData:function(h){var r=e.util.createCanvasElement();r.width=this.width,r.height=this.height;var f=new e.Canvas(r);this.backgroundImage?(f.setBackgroundImage(this.backgroundImage.src,function(){f.renderAll(),h&&h(f)}),f.backgroundImageOpacity=this.backgroundImageOpacity,f.backgroundImageStretch=this.backgroundImageStretch):h&&h(f)}}),function(h){var r=h.fabric||(h.fabric={}),f=r.util.object.extend,d=r.util.object.clone,o=r.util.toFixed,a=r.util.string.capitalize,s=r.util.degreesToRadians,u=!r.isLikelyNode,p=2;r.Object||(r.Object=r.util.createClass(r.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:u,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(l){l&&this.setOptions(l)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=r.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(l){var g=r.perfLimitSizeTotal,y=l.width,_=l.height,x=r.maxCacheSideLimit,S=r.minCacheSideLimit;if(y<=x&&_<=x&&y*_<=g)return y<S&&(l.width=S),_<S&&(l.height=S),l;var b=y/_,E=r.util.limitDimsByArea(b,g),T=r.util.capValue,O=T(S,E.x,x),A=T(S,E.y,x);return y>O&&(l.zoomX/=y/O,l.width=O,l.capped=!0),_>A&&(l.zoomY/=_/A,l.height=A,l.capped=!0),l},_getCacheCanvasDimensions:function(){var l=this.getTotalObjectScaling(),g=this._getTransformedDimensions(0,0),y=g.x*l.scaleX/this.scaleX,_=g.y*l.scaleY/this.scaleY;return{width:Math.ceil(y+p),height:Math.ceil(_+p),zoomX:l.scaleX,zoomY:l.scaleY,x:y,y:_}},_updateCacheCanvas:function(){var l=this.canvas;if(this.noScaleCache&&l&&l._currentTransform){var g=l._currentTransform.target,y=l._currentTransform.action;if(this===g&&y.slice&&y.slice(0,5)==="scale")return!1}var _=this._cacheCanvas,x=this._limitCacheSize(this._getCacheCanvasDimensions()),S=x.width,b=x.height,E,T,O=x.zoomX,A=x.zoomY,j=S!==this.cacheWidth||b!==this.cacheHeight,U=this.zoomX!==O||this.zoomY!==A,M=j||U;return M?(j?(_.width=S,_.height=b):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,_.width,_.height)),E=x.x/2,T=x.y/2,this.cacheTranslationX=Math.round(_.width/2-E)+E,this.cacheTranslationY=Math.round(_.height/2-T)+T,this.cacheWidth=S,this.cacheHeight=b,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(O,A),this.zoomX=O,this.zoomY=A,!0):!1},setOptions:function(l){this._setOptions(l),this._initGradient(l.fill,"fill"),this._initGradient(l.stroke,"stroke"),this._initPattern(l.fill,"fill"),this._initPattern(l.stroke,"stroke")},transform:function(l){var g=this.group&&!this.group._transformDone||this.group&&this.canvas&&l===this.canvas.contextTop,y=this.calcTransformMatrix(!g);l.transform(y[0],y[1],y[2],y[3],y[4],y[5])},toObject:function(l){var g=r.Object.NUM_FRACTION_DIGITS,y={type:this.type,version:r.version,originX:this.originX,originY:this.originY,left:o(this.left,g),top:o(this.top,g),width:o(this.width,g),height:o(this.height,g),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:o(this.strokeWidth,g),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:o(this.strokeMiterLimit,g),scaleX:o(this.scaleX,g),scaleY:o(this.scaleY,g),angle:o(this.angle,g),flipX:this.flipX,flipY:this.flipY,opacity:o(this.opacity,g),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:o(this.skewX,g),skewY:o(this.skewY,g)};return this.clipPath&&!this.clipPath.excludeFromExport&&(y.clipPath=this.clipPath.toObject(l),y.clipPath.inverted=this.clipPath.inverted,y.clipPath.absolutePositioned=this.clipPath.absolutePositioned),r.util.populateWithProperties(this,y,l),this.includeDefaultValues||(y=this._removeDefaultValues(y)),y},toDatalessObject:function(l){return this.toObject(l)},_removeDefaultValues:function(l){var g=r.util.getKlass(l.type).prototype,y=g.stateProperties;return y.forEach(function(_){_==="left"||_==="top"||(l[_]===g[_]&&delete l[_],Array.isArray(l[_])&&Array.isArray(g[_])&&l[_].length===0&&g[_].length===0&&delete l[_])}),l},toString:function(){return"#<fabric."+a(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var l=r.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(l.scaleX),scaleY:Math.abs(l.scaleY)}},getTotalObjectScaling:function(){var l=this.getObjectScaling(),g=l.scaleX,y=l.scaleY;if(this.canvas){var _=this.canvas.getZoom(),x=this.canvas.getRetinaScaling();g*=_*x,y*=_*x}return{scaleX:g,scaleY:y}},getObjectOpacity:function(){var l=this.opacity;return this.group&&(l*=this.group.getObjectOpacity()),l},_set:function(l,g){var y=l==="scaleX"||l==="scaleY",_=this[l]!==g,x=!1;return y&&(g=this._constrainScale(g)),l==="scaleX"&&g<0?(this.flipX=!this.flipX,g*=-1):l==="scaleY"&&g<0?(this.flipY=!this.flipY,g*=-1):l==="shadow"&&g&&!(g instanceof r.Shadow)?g=new r.Shadow(g):l==="dirty"&&this.group&&this.group.set("dirty",g),this[l]=g,_&&(x=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(l)>-1?(this.dirty=!0,x&&this.group.set("dirty",!0)):x&&this.stateProperties.indexOf(l)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:r.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(l){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(l.save(),this._setupCompositeOperation(l),this.drawSelectionBackground(l),this.transform(l),this._setOpacity(l),this._setShadow(l,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(l)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(l),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),l.restore())},renderCache:function(l){l=l||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,l.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(l,g){if(l.save(),g.inverted?l.globalCompositeOperation="destination-out":l.globalCompositeOperation="destination-in",g.absolutePositioned){var y=r.util.invertTransform(this.calcTransformMatrix());l.transform(y[0],y[1],y[2],y[3],y[4],y[5])}g.transform(l),l.scale(1/g.zoomX,1/g.zoomY),l.drawImage(g._cacheCanvas,-g.cacheTranslationX,-g.cacheTranslationY),l.restore()},drawObject:function(l,g){var y=this.fill,_=this.stroke;g?(this.fill="black",this.stroke="",this._setClippingProperties(l)):this._renderBackground(l),this._render(l),this._drawClipPath(l,this.clipPath),this.fill=y,this.stroke=_},_drawClipPath:function(l,g){g&&(g.canvas=this.canvas,g.shouldCache(),g._transformDone=!0,g.renderCache({forClipping:!0}),this.drawClipPathOnCache(l,g))},drawCacheOnCanvas:function(l){l.scale(1/this.zoomX,1/this.zoomY),l.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(l){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!l&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!l){var g=this.cacheWidth/this.zoomX,y=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-g/2,-y/2,g,y)}return!0}return!1},_renderBackground:function(l){if(this.backgroundColor){var g=this._getNonTransformedDimensions();l.fillStyle=this.backgroundColor,l.fillRect(-g.x/2,-g.y/2,g.x,g.y),this._removeShadow(l)}},_setOpacity:function(l){this.group&&!this.group._transformDone?l.globalAlpha=this.getObjectOpacity():l.globalAlpha*=this.opacity},_setStrokeStyles:function(l,g){var y=g.stroke;y&&(l.lineWidth=g.strokeWidth,l.lineCap=g.strokeLineCap,l.lineDashOffset=g.strokeDashOffset,l.lineJoin=g.strokeLineJoin,l.miterLimit=g.strokeMiterLimit,y.toLive?y.gradientUnits==="percentage"||y.gradientTransform||y.patternTransform?this._applyPatternForTransformedGradient(l,y):(l.strokeStyle=y.toLive(l,this),this._applyPatternGradientTransform(l,y)):l.strokeStyle=g.stroke)},_setFillStyles:function(l,g){var y=g.fill;y&&(y.toLive?(l.fillStyle=y.toLive(l,this),this._applyPatternGradientTransform(l,g.fill)):l.fillStyle=y)},_setClippingProperties:function(l){l.globalAlpha=1,l.strokeStyle="transparent",l.fillStyle="#000000"},_setLineDash:function(l,g){!g||g.length===0||(1&g.length&&g.push.apply(g,g),l.setLineDash(g))},_renderControls:function(l,g){var y=this.getViewportTransform(),_=this.calcTransformMatrix(),x,S,b;g=g||{},S=typeof g.hasBorders<"u"?g.hasBorders:this.hasBorders,b=typeof g.hasControls<"u"?g.hasControls:this.hasControls,_=r.util.multiplyTransformMatrices(y,_),x=r.util.qrDecompose(_),l.save(),l.translate(x.translateX,x.translateY),l.lineWidth=1*this.borderScaleFactor,this.group||(l.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(x.angle-=180),l.rotate(s(this.group?x.angle:this.angle)),g.forActiveSelection||this.group?S&&this.drawBordersInGroup(l,x,g):S&&this.drawBorders(l,g),b&&this.drawControls(l,g),l.restore()},_setShadow:function(l){if(this.shadow){var g=this.shadow,y=this.canvas,_,x=y&&y.viewportTransform[0]||1,S=y&&y.viewportTransform[3]||1;g.nonScaling?_={scaleX:1,scaleY:1}:_=this.getObjectScaling(),y&&y._isRetinaScaling()&&(x*=r.devicePixelRatio,S*=r.devicePixelRatio),l.shadowColor=g.color,l.shadowBlur=g.blur*r.browserShadowBlurConstant*(x+S)*(_.scaleX+_.scaleY)/4,l.shadowOffsetX=g.offsetX*x*_.scaleX,l.shadowOffsetY=g.offsetY*S*_.scaleY}},_removeShadow:function(l){this.shadow&&(l.shadowColor="",l.shadowBlur=l.shadowOffsetX=l.shadowOffsetY=0)},_applyPatternGradientTransform:function(l,g){if(!g||!g.toLive)return{offsetX:0,offsetY:0};var y=g.gradientTransform||g.patternTransform,_=-this.width/2+g.offsetX||0,x=-this.height/2+g.offsetY||0;return g.gradientUnits==="percentage"?l.transform(this.width,0,0,this.height,_,x):l.transform(1,0,0,1,_,x),y&&l.transform(y[0],y[1],y[2],y[3],y[4],y[5]),{offsetX:_,offsetY:x}},_renderPaintInOrder:function(l){this.paintFirst==="stroke"?(this._renderStroke(l),this._renderFill(l)):(this._renderFill(l),this._renderStroke(l))},_render:function(){},_renderFill:function(l){this.fill&&(l.save(),this._setFillStyles(l,this),this.fillRule==="evenodd"?l.fill("evenodd"):l.fill(),l.restore())},_renderStroke:function(l){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(l),l.save(),this.strokeUniform&&this.group){var g=this.getObjectScaling();l.scale(1/g.scaleX,1/g.scaleY)}else this.strokeUniform&&l.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(l,this.strokeDashArray),this._setStrokeStyles(l,this),l.stroke(),l.restore()}},_applyPatternForTransformedGradient:function(l,g){var y=this._limitCacheSize(this._getCacheCanvasDimensions()),_=r.util.createCanvasElement(),x,S=this.canvas.getRetinaScaling(),b=y.x/this.scaleX/S,E=y.y/this.scaleY/S;_.width=Math.ceil(b),_.height=Math.ceil(E),x=_.getContext("2d"),x.beginPath(),x.moveTo(0,0),x.lineTo(b,0),x.lineTo(b,E),x.lineTo(0,E),x.closePath(),x.translate(b/2,E/2),x.scale(y.zoomX/this.scaleX/S,y.zoomY/this.scaleY/S),this._applyPatternGradientTransform(x,g),x.fillStyle=g.toLive(l),x.fill(),l.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),l.scale(S*this.scaleX/y.zoomX,S*this.scaleY/y.zoomY),l.strokeStyle=x.createPattern(_,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var l=r.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",l.scaleX),this.set("scaleY",l.scaleY),this.angle=l.angle,this.skewX=l.skewX,this.skewY=0}},_removeTransformMatrix:function(l){var g=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),g=r.util.transformPoint(g,this.transformMatrix)),this.transformMatrix=null,l&&(this.scaleX*=l.scaleX,this.scaleY*=l.scaleY,this.cropX=l.cropX,this.cropY=l.cropY,g.x+=l.offsetLeft,g.y+=l.offsetTop,this.width=l.width,this.height=l.height),this.setPositionByOrigin(g,"center","center")},clone:function(l,g){var y=this.toObject(g);this.constructor.fromObject?this.constructor.fromObject(y,l):r.Object._fromObject("Object",y,l)},cloneAsImage:function(l,g){var y=this.toCanvasElement(g);return l&&l(new r.Image(y)),this},toCanvasElement:function(l){l||(l={});var g=r.util,y=g.saveObjectTransform(this),_=this.group,x=this.shadow,S=Math.abs,b=(l.multiplier||1)*(l.enableRetinaScaling?r.devicePixelRatio:1);delete this.group,l.withoutTransform&&g.resetObjectTransform(this),l.withoutShadow&&(this.shadow=null);var E=r.util.createCanvasElement(),T=this.getBoundingRect(!0,!0),O=this.shadow,A,j={x:0,y:0},U,M,re;O&&(U=O.blur,O.nonScaling?A={scaleX:1,scaleY:1}:A=this.getObjectScaling(),j.x=2*Math.round(S(O.offsetX)+U)*S(A.scaleX),j.y=2*Math.round(S(O.offsetY)+U)*S(A.scaleY)),M=T.width+j.x,re=T.height+j.y,E.width=Math.ceil(M),E.height=Math.ceil(re);var oe=new r.StaticCanvas(E,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});l.format==="jpeg"&&(oe.backgroundColor="#fff"),this.setPositionByOrigin(new r.Point(oe.width/2,oe.height/2),"center","center");var fe=this.canvas;oe.add(this);var de=oe.toCanvasElement(b||1,l);return this.shadow=x,this.set("canvas",fe),_&&(this.group=_),this.set(y).setCoords(),oe._objects=[],oe.dispose(),oe=null,de},toDataURL:function(l){return l||(l={}),r.util.toDataURL(this.toCanvasElement(l),l.format||"png",l.quality||1)},isType:function(l){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===l},complexity:function(){return 1},toJSON:function(l){return this.toObject(l)},rotate:function(l){var g=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return g&&this._setOriginToCenter(),this.set("angle",l),g&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(l,g){g=g||this.canvas.getPointer(l);var y=new r.Point(g.x,g.y),_=this._getLeftTopCoords();return this.angle&&(y=r.util.rotatePoint(y,_,s(-this.angle))),{x:y.x-_.x,y:y.y-_.y}},_setupCompositeOperation:function(l){this.globalCompositeOperation&&(l.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){r.runningAnimations&&r.runningAnimations.cancelByTarget(this)}}),r.util.createAccessors&&r.util.createAccessors(r.Object),f(r.Object.prototype,r.Observable),r.Object.NUM_FRACTION_DIGITS=2,r.Object.ENLIVEN_PROPS=["clipPath"],r.Object._fromObject=function(l,g,y,_){var x=r[l];g=d(g,!0),r.util.enlivenPatterns([g.fill,g.stroke],function(S){typeof S[0]<"u"&&(g.fill=S[0]),typeof S[1]<"u"&&(g.stroke=S[1]),r.util.enlivenObjectEnlivables(g,g,function(){var b=_?new x(g[_],g):new x(g);y&&y(b)})})},r.Object.__uid=0)}(t),function(){var h=e.util.degreesToRadians,r={left:-.5,center:0,right:.5},f={top:-.5,center:0,bottom:.5};e.util.object.extend(e.Object.prototype,{translateToGivenOrigin:function(d,o,a,s,u){var p=d.x,l=d.y,g,y,_;return typeof o=="string"?o=r[o]:o-=.5,typeof s=="string"?s=r[s]:s-=.5,g=s-o,typeof a=="string"?a=f[a]:a-=.5,typeof u=="string"?u=f[u]:u-=.5,y=u-a,(g||y)&&(_=this._getTransformedDimensions(),p=d.x+g*_.x,l=d.y+y*_.y),new e.Point(p,l)},translateToCenterPoint:function(d,o,a){var s=this.translateToGivenOrigin(d,o,a,"center","center");return this.angle?e.util.rotatePoint(s,d,h(this.angle)):s},translateToOriginPoint:function(d,o,a){var s=this.translateToGivenOrigin(d,"center","center",o,a);return this.angle?e.util.rotatePoint(s,d,h(this.angle)):s},getCenterPoint:function(){var d=new e.Point(this.left,this.top);return this.translateToCenterPoint(d,this.originX,this.originY)},getPointByOrigin:function(d,o){var a=this.getCenterPoint();return this.translateToOriginPoint(a,d,o)},toLocalPoint:function(d,o,a){var s=this.getCenterPoint(),u,p;return typeof o<"u"&&typeof a<"u"?u=this.translateToGivenOrigin(s,"center","center",o,a):u=new e.Point(this.left,this.top),p=new e.Point(d.x,d.y),this.angle&&(p=e.util.rotatePoint(p,s,-h(this.angle))),p.subtractEquals(u)},setPositionByOrigin:function(d,o,a){var s=this.translateToCenterPoint(d,o,a),u=this.translateToOriginPoint(s,this.originX,this.originY);this.set("left",u.x),this.set("top",u.y)},adjustPosition:function(d){var o=h(this.angle),a=this.getScaledWidth(),s=e.util.cos(o)*a,u=e.util.sin(o)*a,p,l;typeof this.originX=="string"?p=r[this.originX]:p=this.originX-.5,typeof d=="string"?l=r[d]:l=d-.5,this.left+=s*(l-p),this.top+=u*(l-p),this.setCoords(),this.originX=d},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var d=this.getCenterPoint();this.originX="center",this.originY="center",this.left=d.x,this.top=d.y},_resetOrigin:function(){var d=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=d.x,this.top=d.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function h(a){return[new e.Point(a.tl.x,a.tl.y),new e.Point(a.tr.x,a.tr.y),new e.Point(a.br.x,a.br.y),new e.Point(a.bl.x,a.bl.y)]}var r=e.util,f=r.degreesToRadians,d=r.multiplyTransformMatrices,o=r.transformPoint;r.object.extend(e.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(a,s){return s?a?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),a?this.aCoords:this.lineCoords)},getCoords:function(a,s){return h(this._getCoords(a,s))},intersectsWithRect:function(a,s,u,p){var l=this.getCoords(u,p),g=e.Intersection.intersectPolygonRectangle(l,a,s);return g.status==="Intersection"},intersectsWithObject:function(a,s,u){var p=e.Intersection.intersectPolygonPolygon(this.getCoords(s,u),a.getCoords(s,u));return p.status==="Intersection"||a.isContainedWithinObject(this,s,u)||this.isContainedWithinObject(a,s,u)},isContainedWithinObject:function(a,s,u){for(var p=this.getCoords(s,u),l=s?a.aCoords:a.lineCoords,g=0,y=a._getImageLines(l);g<4;g++)if(!a.containsPoint(p[g],y))return!1;return!0},isContainedWithinRect:function(a,s,u,p){var l=this.getBoundingRect(u,p);return l.left>=a.x&&l.left+l.width<=s.x&&l.top>=a.y&&l.top+l.height<=s.y},containsPoint:function(a,g,u,p){var l=this._getCoords(u,p),g=g||this._getImageLines(l),y=this._findCrossPoints(a,g);return y!==0&&y%2===1},isOnScreen:function(a){if(!this.canvas)return!1;var s=this.canvas.vptCoords.tl,u=this.canvas.vptCoords.br,p=this.getCoords(!0,a);return p.some(function(l){return l.x<=u.x&&l.x>=s.x&&l.y<=u.y&&l.y>=s.y})||this.intersectsWithRect(s,u,!0,a)?!0:this._containsCenterOfCanvas(s,u,a)},_containsCenterOfCanvas:function(a,s,u){var p={x:(a.x+s.x)/2,y:(a.y+s.y)/2};return!!this.containsPoint(p,null,!0,u)},isPartiallyOnScreen:function(a){if(!this.canvas)return!1;var s=this.canvas.vptCoords.tl,u=this.canvas.vptCoords.br;if(this.intersectsWithRect(s,u,!0,a))return!0;var p=this.getCoords(!0,a).every(function(l){return(l.x>=u.x||l.x<=s.x)&&(l.y>=u.y||l.y<=s.y)});return p&&this._containsCenterOfCanvas(s,u,a)},_getImageLines:function(a){var s={topline:{o:a.tl,d:a.tr},rightline:{o:a.tr,d:a.br},bottomline:{o:a.br,d:a.bl},leftline:{o:a.bl,d:a.tl}};return s},_findCrossPoints:function(a,s){var u,p,l,g,y,_=0,x;for(var S in s)if(x=s[S],!(x.o.y<a.y&&x.d.y<a.y)&&!(x.o.y>=a.y&&x.d.y>=a.y)&&(x.o.x===x.d.x&&x.o.x>=a.x?y=x.o.x:(u=0,p=(x.d.y-x.o.y)/(x.d.x-x.o.x),l=a.y-u*a.x,g=x.o.y-p*x.o.x,y=-(l-g)/(u-p)),y>=a.x&&(_+=1),_===2))break;return _},getBoundingRect:function(a,s){var u=this.getCoords(a,s);return r.makeBoundingBoxFromPoints(u)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(a){return Math.abs(a)<this.minScaleLimit?a<0?-this.minScaleLimit:this.minScaleLimit:a===0?1e-4:a},scale:function(a){return this._set("scaleX",a),this._set("scaleY",a),this.setCoords()},scaleToWidth:function(a,s){var u=this.getBoundingRect(s).width/this.getScaledWidth();return this.scale(a/this.width/u)},scaleToHeight:function(a,s){var u=this.getBoundingRect(s).height/this.getScaledHeight();return this.scale(a/this.height/u)},calcLineCoords:function(){var a=this.getViewportTransform(),s=this.padding,u=f(this.angle),p=r.cos(u),l=r.sin(u),g=p*s,y=l*s,_=g+y,x=g-y,S=this.calcACoords(),b={tl:o(S.tl,a),tr:o(S.tr,a),bl:o(S.bl,a),br:o(S.br,a)};return s&&(b.tl.x-=x,b.tl.y-=_,b.tr.x+=_,b.tr.y-=x,b.bl.x-=_,b.bl.y+=x,b.br.x+=x,b.br.y+=_),b},calcOCoords:function(){var a=this._calcRotateMatrix(),s=this._calcTranslateMatrix(),u=this.getViewportTransform(),p=d(u,s),l=d(p,a),l=d(l,[1/u[0],0,0,1/u[3],0,0]),g=this._calculateCurrentDimensions(),y={};return this.forEachControl(function(_,x,S){y[x]=_.positionHandler(g,l,S)}),y},calcACoords:function(){var a=this._calcRotateMatrix(),s=this._calcTranslateMatrix(),u=d(s,a),p=this._getTransformedDimensions(),l=p.x/2,g=p.y/2;return{tl:o({x:-l,y:-g},u),tr:o({x:l,y:-g},u),bl:o({x:-l,y:g},u),br:o({x:l,y:g},u)}},setCoords:function(a){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),a?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return r.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var a=this.getCenterPoint();return[1,0,0,1,a.x,a.y]},transformMatrixKey:function(a){var s="_",u="";return!a&&this.group&&(u=this.group.transformMatrixKey(a)+s),u+this.top+s+this.left+s+this.scaleX+s+this.scaleY+s+this.skewX+s+this.skewY+s+this.angle+s+this.originX+s+this.originY+s+this.width+s+this.height+s+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(a){var s=this.calcOwnMatrix();if(a||!this.group)return s;var u=this.transformMatrixKey(a),p=this.matrixCache||(this.matrixCache={});return p.key===u?p.value:(this.group&&(s=d(this.group.calcTransformMatrix(!1),s)),p.key=u,p.value=s,s)},calcOwnMatrix:function(){var a=this.transformMatrixKey(!0),s=this.ownMatrixCache||(this.ownMatrixCache={});if(s.key===a)return s.value;var u=this._calcTranslateMatrix(),p={angle:this.angle,translateX:u[4],translateY:u[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return s.key=a,s.value=r.composeMatrix(p),s.value},_getNonTransformedDimensions:function(){var a=this.strokeWidth,s=this.width+a,u=this.height+a;return{x:s,y:u}},_getTransformedDimensions:function(a,s){typeof a>"u"&&(a=this.skewX),typeof s>"u"&&(s=this.skewY);var u,p,l,g=a===0&&s===0;if(this.strokeUniform?(p=this.width,l=this.height):(u=this._getNonTransformedDimensions(),p=u.x,l=u.y),g)return this._finalizeDimensions(p*this.scaleX,l*this.scaleY);var y=r.sizeAfterTransform(p,l,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:a,skewY:s});return this._finalizeDimensions(y.x,y.y)},_finalizeDimensions:function(a,s){return this.strokeUniform?{x:a+this.strokeWidth,y:s+this.strokeWidth}:{x:a,y:s}},_calculateCurrentDimensions:function(){var a=this.getViewportTransform(),s=this._getTransformedDimensions(),u=o(s,a,!0);return u.scalarAdd(2*this.padding)}})}(),e.util.object.extend(e.Object.prototype,{sendToBack:function(){return this.group?e.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?e.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(h){return this.group?e.StaticCanvas.prototype.sendBackwards.call(this.group,this,h):this.canvas&&this.canvas.sendBackwards(this,h),this},bringForward:function(h){return this.group?e.StaticCanvas.prototype.bringForward.call(this.group,this,h):this.canvas&&this.canvas.bringForward(this,h),this},moveTo:function(h){return this.group&&this.group.type!=="activeSelection"?e.StaticCanvas.prototype.moveTo.call(this.group,this,h):this.canvas&&this.canvas.moveTo(this,h),this}}),function(){function h(f,d){if(d){if(d.toLive)return f+": url(#SVGID_"+d.id+"); ";var o=new e.Color(d),a=f+": "+o.toRgb()+"; ",s=o.getAlpha();return s!==1&&(a+=f+"-opacity: "+s.toString()+"; "),a}else return f+": none; "}var r=e.util.toFixed;e.util.object.extend(e.Object.prototype,{getSvgStyles:function(f){var d=this.fillRule?this.fillRule:"nonzero",o=this.strokeWidth?this.strokeWidth:"0",a=this.strokeDashArray?this.strokeDashArray.join(" "):"none",s=this.strokeDashOffset?this.strokeDashOffset:"0",u=this.strokeLineCap?this.strokeLineCap:"butt",p=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",g=typeof this.opacity<"u"?this.opacity:"1",y=this.visible?"":" visibility: hidden;",_=f?"":this.getSvgFilter(),x=h("fill",this.fill),S=h("stroke",this.stroke);return[S,"stroke-width: ",o,"; ","stroke-dasharray: ",a,"; ","stroke-linecap: ",u,"; ","stroke-dashoffset: ",s,"; ","stroke-linejoin: ",p,"; ","stroke-miterlimit: ",l,"; ",x,"fill-rule: ",d,"; ","opacity: ",g,";",_,y].join("")},getSvgSpanStyles:function(f,d){var o="; ",s=f.fontFamily?"font-family: "+(f.fontFamily.indexOf("'")===-1&&f.fontFamily.indexOf('"')===-1?"'"+f.fontFamily+"'":f.fontFamily)+o:"",a=f.strokeWidth?"stroke-width: "+f.strokeWidth+o:"",s=s,u=f.fontSize?"font-size: "+f.fontSize+"px"+o:"",p=f.fontStyle?"font-style: "+f.fontStyle+o:"",l=f.fontWeight?"font-weight: "+f.fontWeight+o:"",g=f.fill?h("fill",f.fill):"",y=f.stroke?h("stroke",f.stroke):"",_=this.getSvgTextDecoration(f),x=f.deltaY?"baseline-shift: "+-f.deltaY+"; ":"";return _&&(_="text-decoration: "+_+o),[y,a,s,u,p,l,_,g,x,d?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(f){return["overline","underline","line-through"].filter(function(d){return f[d.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(f,d){var o=f?this.calcTransformMatrix():this.calcOwnMatrix(),a='transform="'+e.util.matrixToSVG(o);return a+(d||"")+'" '},_setSVGBg:function(f){if(this.backgroundColor){var d=e.Object.NUM_FRACTION_DIGITS;f.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',r(-this.width/2,d),'" y="',r(-this.height/2,d),'" width="',r(this.width,d),'" height="',r(this.height,d),`"></rect>
`)}},toSVG:function(f){return this._createBaseSVGMarkup(this._toSVG(f),{reviver:f})},toClipPathSVG:function(f){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(f),{reviver:f})},_createBaseClipPathSVGMarkup:function(f,d){d=d||{};var o=d.reviver,a=d.additionalTransform||"",s=[this.getSvgTransform(!0,a),this.getSvgCommons()].join(""),u=f.indexOf("COMMON_PARTS");return f[u]=s,o?o(f.join("")):f.join("")},_createBaseSVGMarkup:function(f,d){d=d||{};var o=d.noStyle,a=d.reviver,s=o?"":'style="'+this.getSvgStyles()+'" ',u=d.withShadow?'style="'+this.getSvgFilter()+'" ':"",p=this.clipPath,l=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",g=p&&p.absolutePositioned,y=this.stroke,_=this.fill,x=this.shadow,S,b=[],E,T=f.indexOf("COMMON_PARTS"),O=d.additionalTransform;return p&&(p.clipPathId="CLIPPATH_"+e.Object.__uid++,E='<clipPath id="'+p.clipPathId+`" >
`+p.toClipPathSVG(a)+`</clipPath>
`),g&&b.push("<g ",u,this.getSvgCommons(),` >
`),b.push("<g ",this.getSvgTransform(!1),g?"":u+this.getSvgCommons(),` >
`),S=[s,l,o?"":this.addPaintOrder()," ",O?'transform="'+O+'" ':""].join(""),f[T]=S,_&&_.toLive&&b.push(_.toSVG(this)),y&&y.toLive&&b.push(y.toSVG(this)),x&&b.push(x.toSVG(this)),p&&b.push(E),b.push(f.join("")),b.push(`</g>
`),g&&b.push(`</g>
`),a?a(b.join("")):b.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var h=e.util.object.extend,r="stateProperties";function f(o,a,s){var u={},p=!0;s.forEach(function(l){u[l]=o[l]}),h(o[a],u,p)}function d(o,a,s){if(o===a)return!0;if(Array.isArray(o)){if(!Array.isArray(a)||o.length!==a.length)return!1;for(var u=0,p=o.length;u<p;u++)if(!d(o[u],a[u]))return!1;return!0}else if(o&&typeof o=="object"){var l=Object.keys(o),g;if(!a||typeof a!="object"||!s&&l.length!==Object.keys(a).length)return!1;for(var u=0,p=l.length;u<p;u++)if(g=l[u],!(g==="canvas"||g==="group")&&!d(o[g],a[g]))return!1;return!0}}e.util.object.extend(e.Object.prototype,{hasStateChanged:function(o){o=o||r;var a="_"+o;return Object.keys(this[a]).length<this[o].length?!0:!d(this[a],this,!0)},saveState:function(o){var a=o&&o.propertySet||r,s="_"+a;return this[s]?(f(this,s,this[a]),o&&o.stateProperties&&f(this,s,o.stateProperties),this):this.setupState(o)},setupState:function(o){o=o||{};var a=o.propertySet||r;return o.propertySet=a,this["_"+a]={},this.saveState(o),this}})}(),function(){var h=e.util.degreesToRadians;e.util.object.extend(e.Object.prototype,{_findTargetCorner:function(r,f){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var d=r.x,o=r.y,a,s,u=Object.keys(this.oCoords),p=u.length-1,l;for(this.__corner=0;p>=0;p--)if(l=u[p],!!this.isControlVisible(l)&&(s=this._getImageLines(f?this.oCoords[l].touchCorner:this.oCoords[l].corner),a=this._findCrossPoints({x:d,y:o},s),a!==0&&a%2===1))return this.__corner=l,l;return!1},forEachControl:function(r){for(var f in this.controls)r(this.controls[f],f,this)},_setCornerCoords:function(){var r=this.oCoords;for(var f in r){var d=this.controls[f];r[f].corner=d.calcCornerCoords(this.angle,this.cornerSize,r[f].x,r[f].y,!1),r[f].touchCorner=d.calcCornerCoords(this.angle,this.touchCornerSize,r[f].x,r[f].y,!0)}},drawSelectionBackground:function(r){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;r.save();var f=this.getCenterPoint(),d=this._calculateCurrentDimensions(),o=this.canvas.viewportTransform;return r.translate(f.x,f.y),r.scale(1/o[0],1/o[3]),r.rotate(h(this.angle)),r.fillStyle=this.selectionBackgroundColor,r.fillRect(-d.x/2,-d.y/2,d.x,d.y),r.restore(),this},drawBorders:function(r,f){f=f||{};var d=this._calculateCurrentDimensions(),o=this.borderScaleFactor,a=d.x+o,s=d.y+o,u=typeof f.hasControls<"u"?f.hasControls:this.hasControls,p=!1;return r.save(),r.strokeStyle=f.borderColor||this.borderColor,this._setLineDash(r,f.borderDashArray||this.borderDashArray),r.strokeRect(-a/2,-s/2,a,s),u&&(r.beginPath(),this.forEachControl(function(l,g,y){l.withConnection&&l.getVisibility(y,g)&&(p=!0,r.moveTo(l.x*a,l.y*s),r.lineTo(l.x*a+l.offsetX,l.y*s+l.offsetY))}),p&&r.stroke()),r.restore(),this},drawBordersInGroup:function(r,f,d){d=d||{};var o=e.util.sizeAfterTransform(this.width,this.height,f),a=this.strokeWidth,s=this.strokeUniform,u=this.borderScaleFactor,p=o.x+a*(s?this.canvas.getZoom():f.scaleX)+u,l=o.y+a*(s?this.canvas.getZoom():f.scaleY)+u;return r.save(),this._setLineDash(r,d.borderDashArray||this.borderDashArray),r.strokeStyle=d.borderColor||this.borderColor,r.strokeRect(-p/2,-l/2,p,l),r.restore(),this},drawControls:function(r,f){f=f||{},r.save();var d=1,o,a;return this.canvas&&(d=this.canvas.getRetinaScaling()),r.setTransform(d,0,0,d,0,0),r.strokeStyle=r.fillStyle=f.cornerColor||this.cornerColor,this.transparentCorners||(r.strokeStyle=f.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(r,f.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(o=this.group.calcTransformMatrix()),this.forEachControl(function(s,u,p){a=p.oCoords[u],s.getVisibility(p,u)&&(o&&(a=e.util.transformPoint(a,o)),s.render(r,a.x,a.y,f,p))}),r.restore(),this},isControlVisible:function(r){return this.controls[r]&&this.controls[r].getVisibility(this,r)},setControlVisible:function(r,f){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[r]=f,this},setControlsVisibility:function(r){r||(r={});for(var f in r)this.setControlVisible(f,r[f]);return this},onDeselect:function(){},onSelect:function(){}})}(),e.util.object.extend(e.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(h,r){r=r||{};var f=function(){},d=r.onComplete||f,o=r.onChange||f,a=this;return e.util.animate({target:this,startValue:h.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(s){h.set("left",s),a.requestRenderAll(),o()},onComplete:function(){h.setCoords(),d()}})},fxCenterObjectV:function(h,r){r=r||{};var f=function(){},d=r.onComplete||f,o=r.onChange||f,a=this;return e.util.animate({target:this,startValue:h.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(s){h.set("top",s),a.requestRenderAll(),o()},onComplete:function(){h.setCoords(),d()}})},fxRemove:function(h,r){r=r||{};var f=function(){},d=r.onComplete||f,o=r.onChange||f,a=this;return e.util.animate({target:this,startValue:h.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(s){h.set("opacity",s),a.requestRenderAll(),o()},onComplete:function(){a.remove(h),d()}})}}),e.util.object.extend(e.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var h=[],r,f,d=[];for(r in arguments[0])h.push(r);for(var o=0,a=h.length;o<a;o++)r=h[o],f=o!==a-1,d.push(this._animate(r,arguments[0][r],arguments[1],f));return d}else return this._animate.apply(this,arguments)},_animate:function(h,r,f,d){var o=this,a;r=r.toString(),f?f=e.util.object.clone(f):f={},~h.indexOf(".")&&(a=h.split("."));var s=o.colorProperties.indexOf(h)>-1||a&&o.colorProperties.indexOf(a[1])>-1,u=a?this.get(a[0])[a[1]]:this.get(h);"from"in f||(f.from=u),s||(~r.indexOf("=")?r=u+parseFloat(r.replace("=","")):r=parseFloat(r));var p={target:this,startValue:f.from,endValue:r,byValue:f.by,easing:f.easing,duration:f.duration,abort:f.abort&&function(l,g,y){return f.abort.call(o,l,g,y)},onChange:function(l,g,y){a?o[a[0]][a[1]]=l:o.set(h,l),!d&&f.onChange&&f.onChange(l,g,y)},onComplete:function(l,g,y){d||(o.setCoords(),f.onComplete&&f.onComplete(l,g,y))}};return s?e.util.animateColor(p.startValue,p.endValue,p.duration,p):e.util.animate(p)}}),function(h){var r=h.fabric||(h.fabric={}),f=r.util.object.extend,d=r.util.object.clone,o={x1:1,x2:1,y1:1,y2:1};if(r.Line){r.warn("fabric.Line is already defined");return}r.Line=r.util.createClass(r.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:r.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(s,u){s||(s=[0,0,0,0]),this.callSuper("initialize",u),this.set("x1",s[0]),this.set("y1",s[1]),this.set("x2",s[2]),this.set("y2",s[3]),this._setWidthHeight(u)},_setWidthHeight:function(s){s||(s={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in s?s.left:this._getLeftToOriginX(),this.top="top"in s?s.top:this._getTopToOriginY()},_set:function(s,u){return this.callSuper("_set",s,u),typeof o[s]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:a({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:a({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(s){s.beginPath();var u=this.calcLinePoints();s.moveTo(u.x1,u.y1),s.lineTo(u.x2,u.y2),s.lineWidth=this.strokeWidth;var p=s.strokeStyle;s.strokeStyle=this.stroke||s.fillStyle,this.stroke&&this._renderStroke(s),s.strokeStyle=p},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(s){return f(this.callSuper("toObject",s),this.calcLinePoints())},_getNonTransformedDimensions:function(){var s=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(s.y-=this.strokeWidth),this.height===0&&(s.x-=this.strokeWidth)),s},calcLinePoints:function(){var s=this.x1<=this.x2?-1:1,u=this.y1<=this.y2?-1:1,p=s*this.width*.5,l=u*this.height*.5,g=s*this.width*-.5,y=u*this.height*-.5;return{x1:p,x2:g,y1:l,y2:y}},_toSVG:function(){var s=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',s.x1,'" y1="',s.y1,'" x2="',s.x2,'" y2="',s.y2,`" />
`]}}),r.Line.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),r.Line.fromElement=function(s,u,p){p=p||{};var l=r.parseAttributes(s,r.Line.ATTRIBUTE_NAMES),g=[l.x1||0,l.y1||0,l.x2||0,l.y2||0];u(new r.Line(g,f(l,p)))},r.Line.fromObject=function(s,u){function p(g){delete g.points,u&&u(g)}var l=d(s,!0);l.points=[s.x1,s.y1,s.x2,s.y2],r.Object._fromObject("Line",l,p,"points")};function a(s,u){var p=s.origin,l=s.axis1,g=s.axis2,y=s.dimension,_=u.nearest,x=u.center,S=u.farthest;return function(){switch(this.get(p)){case _:return Math.min(this.get(l),this.get(g));case x:return Math.min(this.get(l),this.get(g))+.5*this.get(y);case S:return Math.max(this.get(l),this.get(g))}}}}(t),function(h){var r=h.fabric||(h.fabric={}),f=r.util.degreesToRadians;if(r.Circle){r.warn("fabric.Circle is already defined.");return}r.Circle=r.util.createClass(r.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:r.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(o,a){return this.callSuper("_set",o,a),o==="radius"&&this.setRadius(a),this},toObject:function(o){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(o))},_toSVG:function(){var o,a=0,s=0,u=(this.endAngle-this.startAngle)%360;if(u===0)o=["<circle ","COMMON_PARTS",'cx="'+a+'" cy="'+s+'" ','r="',this.radius,`" />
`];else{var p=f(this.startAngle),l=f(this.endAngle),g=this.radius,y=r.util.cos(p)*g,_=r.util.sin(p)*g,x=r.util.cos(l)*g,S=r.util.sin(l)*g,b=u>180?"1":"0";o=['<path d="M '+y+" "+_," A "+g+" "+g," 0 ",+b+" 1"," "+x+" "+S,'" ',"COMMON_PARTS",` />
`]}return o},_render:function(o){o.beginPath(),o.arc(0,0,this.radius,f(this.startAngle),f(this.endAngle),!1),this._renderPaintInOrder(o)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(o){return this.radius=o,this.set("width",o*2).set("height",o*2)}}),r.Circle.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),r.Circle.fromElement=function(o,a){var s=r.parseAttributes(o,r.Circle.ATTRIBUTE_NAMES);if(!d(s))throw new Error("value of `r` attribute is required and can not be negative");s.left=(s.left||0)-s.radius,s.top=(s.top||0)-s.radius,a(new r.Circle(s))};function d(o){return"radius"in o&&o.radius>=0}r.Circle.fromObject=function(o,a){r.Object._fromObject("Circle",o,a)}}(t),function(h){var r=h.fabric||(h.fabric={});if(r.Triangle){r.warn("fabric.Triangle is already defined");return}r.Triangle=r.util.createClass(r.Object,{type:"triangle",width:100,height:100,_render:function(f){var d=this.width/2,o=this.height/2;f.beginPath(),f.moveTo(-d,o),f.lineTo(0,-o),f.lineTo(d,o),f.closePath(),this._renderPaintInOrder(f)},_toSVG:function(){var f=this.width/2,d=this.height/2,o=[-f+" "+d,"0 "+-d,f+" "+d].join(",");return["<polygon ","COMMON_PARTS",'points="',o,'" />']}}),r.Triangle.fromObject=function(f,d){return r.Object._fromObject("Triangle",f,d)}}(t),function(h){var r=h.fabric||(h.fabric={}),f=Math.PI*2;if(r.Ellipse){r.warn("fabric.Ellipse is already defined.");return}r.Ellipse=r.util.createClass(r.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:r.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(d){this.callSuper("initialize",d),this.set("rx",d&&d.rx||0),this.set("ry",d&&d.ry||0)},_set:function(d,o){switch(this.callSuper("_set",d,o),d){case"rx":this.rx=o,this.set("width",o*2);break;case"ry":this.ry=o,this.set("height",o*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(d){return this.callSuper("toObject",["rx","ry"].concat(d))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(d){d.beginPath(),d.save(),d.transform(1,0,0,this.ry/this.rx,0,0),d.arc(0,0,this.rx,0,f,!1),d.restore(),this._renderPaintInOrder(d)}}),r.Ellipse.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),r.Ellipse.fromElement=function(d,o){var a=r.parseAttributes(d,r.Ellipse.ATTRIBUTE_NAMES);a.left=(a.left||0)-a.rx,a.top=(a.top||0)-a.ry,o(new r.Ellipse(a))},r.Ellipse.fromObject=function(d,o){r.Object._fromObject("Ellipse",d,o)}}(t),function(h){var r=h.fabric||(h.fabric={}),f=r.util.object.extend;if(r.Rect){r.warn("fabric.Rect is already defined");return}r.Rect=r.util.createClass(r.Object,{stateProperties:r.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:r.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(d){this.callSuper("initialize",d),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(d){var o=this.rx?Math.min(this.rx,this.width/2):0,a=this.ry?Math.min(this.ry,this.height/2):0,s=this.width,u=this.height,p=-this.width/2,l=-this.height/2,g=o!==0||a!==0,y=1-.5522847498;d.beginPath(),d.moveTo(p+o,l),d.lineTo(p+s-o,l),g&&d.bezierCurveTo(p+s-y*o,l,p+s,l+y*a,p+s,l+a),d.lineTo(p+s,l+u-a),g&&d.bezierCurveTo(p+s,l+u-y*a,p+s-y*o,l+u,p+s-o,l+u),d.lineTo(p+o,l+u),g&&d.bezierCurveTo(p+y*o,l+u,p,l+u-y*a,p,l+u-a),d.lineTo(p,l+a),g&&d.bezierCurveTo(p,l+y*a,p+y*o,l,p+o,l),d.closePath(),this._renderPaintInOrder(d)},toObject:function(d){return this.callSuper("toObject",["rx","ry"].concat(d))},_toSVG:function(){var d=-this.width/2,o=-this.height/2;return["<rect ","COMMON_PARTS",'x="',d,'" y="',o,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),r.Rect.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),r.Rect.fromElement=function(d,o,a){if(!d)return o(null);a=a||{};var s=r.parseAttributes(d,r.Rect.ATTRIBUTE_NAMES);s.left=s.left||0,s.top=s.top||0,s.height=s.height||0,s.width=s.width||0;var u=new r.Rect(f(a?r.util.object.clone(a):{},s));u.visible=u.visible&&u.width>0&&u.height>0,o(u)},r.Rect.fromObject=function(d,o){return r.Object._fromObject("Rect",d,o)}}(t),function(h){var r=h.fabric||(h.fabric={}),f=r.util.object.extend,d=r.util.array.min,o=r.util.array.max,a=r.util.toFixed,s=r.util.projectStrokeOnPoints;if(r.Polyline){r.warn("fabric.Polyline is already defined");return}r.Polyline=r.util.createClass(r.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:r.Object.prototype.cacheProperties.concat("points"),initialize:function(u,p){p=p||{},this.points=u||[],this.callSuper("initialize",p),this._setPositionDimensions(p)},_projectStrokeOnPoints:function(){return s(this.points,this,!0)},_setPositionDimensions:function(u){var p=this._calcDimensions(u),l,g=this.exactBoundingBox?this.strokeWidth:0;this.width=p.width-g,this.height=p.height-g,u.fromSVG||(l=this.translateToGivenOrigin({x:p.left-this.strokeWidth/2+g/2,y:p.top-this.strokeWidth/2+g/2},"left","top",this.originX,this.originY)),typeof u.left>"u"&&(this.left=u.fromSVG?p.left:l.x),typeof u.top>"u"&&(this.top=u.fromSVG?p.top:l.y),this.pathOffset={x:p.left+this.width/2+g/2,y:p.top+this.height/2+g/2}},_calcDimensions:function(){var u=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,p=d(u,"x")||0,l=d(u,"y")||0,g=o(u,"x")||0,y=o(u,"y")||0,_=g-p,x=y-l;return{left:p,top:l,width:_,height:x}},toObject:function(u){return f(this.callSuper("toObject",u),{points:this.points.concat()})},_toSVG:function(){for(var u=[],p=this.pathOffset.x,l=this.pathOffset.y,g=r.Object.NUM_FRACTION_DIGITS,y=0,_=this.points.length;y<_;y++)u.push(a(this.points[y].x-p,g),",",a(this.points[y].y-l,g)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',u.join(""),`" />
`]},commonRender:function(u){var p,l=this.points.length,g=this.pathOffset.x,y=this.pathOffset.y;if(!l||isNaN(this.points[l-1].y))return!1;u.beginPath(),u.moveTo(this.points[0].x-g,this.points[0].y-y);for(var _=0;_<l;_++)p=this.points[_],u.lineTo(p.x-g,p.y-y);return!0},_render:function(u){this.commonRender(u)&&this._renderPaintInOrder(u)},complexity:function(){return this.get("points").length}}),r.Polyline.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(),r.Polyline.fromElementGenerator=function(u){return function(p,l,g){if(!p)return l(null);g||(g={});var y=r.parsePointsAttribute(p.getAttribute("points")),_=r.parseAttributes(p,r[u].ATTRIBUTE_NAMES);_.fromSVG=!0,l(new r[u](y,f(_,g)))}},r.Polyline.fromElement=r.Polyline.fromElementGenerator("Polyline"),r.Polyline.fromObject=function(u,p){return r.Object._fromObject("Polyline",u,p,"points")}}(t),function(h){var r=h.fabric||(h.fabric={}),f=r.util.projectStrokeOnPoints;if(r.Polygon){r.warn("fabric.Polygon is already defined");return}r.Polygon=r.util.createClass(r.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return f(this.points,this)},_render:function(d){this.commonRender(d)&&(d.closePath(),this._renderPaintInOrder(d))}}),r.Polygon.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(),r.Polygon.fromElement=r.Polyline.fromElementGenerator("Polygon"),r.Polygon.fromObject=function(d,o){r.Object._fromObject("Polygon",d,o,"points")}}(t),function(h){var r=h.fabric||(h.fabric={}),f=r.util.array.min,d=r.util.array.max,o=r.util.object.extend,a=r.util.object.clone,s=r.util.toFixed;if(r.Path){r.warn("fabric.Path is already defined");return}r.Path=r.util.createClass(r.Object,{type:"path",path:null,cacheProperties:r.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:r.Object.prototype.stateProperties.concat("path"),initialize:function(u,p){p=a(p||{}),delete p.path,this.callSuper("initialize",p),this._setPath(u||[],p)},_setPath:function(u,p){this.path=r.util.makePathSimpler(Array.isArray(u)?u:r.util.parsePath(u)),r.Polyline.prototype._setPositionDimensions.call(this,p||{})},_renderPathCommands:function(u){var p,l=0,g=0,y=0,_=0,x=0,S=0,b=-this.pathOffset.x,E=-this.pathOffset.y;u.beginPath();for(var T=0,O=this.path.length;T<O;++T)switch(p=this.path[T],p[0]){case"L":y=p[1],_=p[2],u.lineTo(y+b,_+E);break;case"M":y=p[1],_=p[2],l=y,g=_,u.moveTo(y+b,_+E);break;case"C":y=p[5],_=p[6],x=p[3],S=p[4],u.bezierCurveTo(p[1]+b,p[2]+E,x+b,S+E,y+b,_+E);break;case"Q":u.quadraticCurveTo(p[1]+b,p[2]+E,p[3]+b,p[4]+E),y=p[3],_=p[4],x=p[1],S=p[2];break;case"z":case"Z":y=l,_=g,u.closePath();break}},_render:function(u){this._renderPathCommands(u),this._renderPaintInOrder(u)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(u){return o(this.callSuper("toObject",u),{path:this.path.map(function(p){return p.slice()})})},toDatalessObject:function(u){var p=this.toObject(["sourcePath"].concat(u));return p.sourcePath&&delete p.path,p},_toSVG:function(){var u=r.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',u,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var u=r.Object.NUM_FRACTION_DIGITS;return" translate("+s(-this.pathOffset.x,u)+", "+s(-this.pathOffset.y,u)+")"},toClipPathSVG:function(u){var p=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:u,additionalTransform:p})},toSVG:function(u){var p=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:u,additionalTransform:p})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var u=[],p=[],l,g=0,y=0,_=0,x=0,S,b=0,E=this.path.length;b<E;++b){switch(l=this.path[b],l[0]){case"L":_=l[1],x=l[2],S=[];break;case"M":_=l[1],x=l[2],g=_,y=x,S=[];break;case"C":S=r.util.getBoundsOfCurve(_,x,l[1],l[2],l[3],l[4],l[5],l[6]),_=l[5],x=l[6];break;case"Q":S=r.util.getBoundsOfCurve(_,x,l[1],l[2],l[1],l[2],l[3],l[4]),_=l[3],x=l[4];break;case"z":case"Z":_=g,x=y;break}S.forEach(function(re){u.push(re.x),p.push(re.y)}),u.push(_),p.push(x)}var T=f(u)||0,O=f(p)||0,A=d(u)||0,j=d(p)||0,U=A-T,M=j-O;return{left:T,top:O,width:U,height:M}}}),r.Path.fromObject=function(u,p){if(typeof u.sourcePath=="string"){var l=u.sourcePath;r.loadSVGFromURL(l,function(g){var y=g[0];y.setOptions(u),u.clipPath?r.util.enlivenObjects([u.clipPath],function(_){y.clipPath=_[0],p&&p(y)}):p&&p(y)})}else r.Object._fromObject("Path",u,p,"path")},r.Path.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(["d"]),r.Path.fromElement=function(u,p,l){var g=r.parseAttributes(u,r.Path.ATTRIBUTE_NAMES);g.fromSVG=!0,p(new r.Path(g.d,o(g,l)))}}(t),function(h){var r=h.fabric||(h.fabric={}),f=r.util.array.min,d=r.util.array.max;r.Group||(r.Group=r.util.createClass(r.Object,r.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(o,a,s){a=a||{},this._objects=[],s&&this.callSuper("initialize",a),this._objects=o||[];for(var u=this._objects.length;u--;)this._objects[u].group=this;if(s)this._updateObjectsACoords();else{var p=a&&a.centerPoint;a.originX!==void 0&&(this.originX=a.originX),a.originY!==void 0&&(this.originY=a.originY),p||this._calcBounds(),this._updateObjectsCoords(p),delete a.centerPoint,this.callSuper("initialize",a)}this.setCoords()},_updateObjectsACoords:function(){for(var o=!0,a=this._objects.length;a--;)this._objects[a].setCoords(o)},_updateObjectsCoords:function(a){for(var a=a||this.getCenterPoint(),s=this._objects.length;s--;)this._updateObjectCoords(this._objects[s],a)},_updateObjectCoords:function(o,a){var s=o.left,u=o.top,p=!0;o.set({left:s-a.x,top:u-a.y}),o.group=this,o.setCoords(p)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(o){var a=!!this.group;return this._restoreObjectsState(),r.util.resetObjectTransform(this),o&&(a&&r.util.removeTransformFromObject(o,this.group.calcTransformMatrix()),this._objects.push(o),o.group=this,o._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,a?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(o){return this._restoreObjectsState(),r.util.resetObjectTransform(this),this.remove(o),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(o){this.dirty=!0,o.group=this,o._set("canvas",this.canvas)},_onObjectRemoved:function(o){this.dirty=!0,delete o.group},_set:function(o,a){var s=this._objects.length;if(this.useSetOnGroup)for(;s--;)this._objects[s].setOnGroup(o,a);if(o==="canvas")for(;s--;)this._objects[s]._set(o,a);r.Object.prototype._set.call(this,o,a)},toObject:function(o){var a=this.includeDefaultValues,s=this._objects.filter(function(p){return!p.excludeFromExport}).map(function(p){var l=p.includeDefaultValues;p.includeDefaultValues=a;var g=p.toObject(o);return p.includeDefaultValues=l,g}),u=r.Object.prototype.toObject.call(this,o);return u.objects=s,u},toDatalessObject:function(o){var a,s=this.sourcePath;if(s)a=s;else{var u=this.includeDefaultValues;a=this._objects.map(function(l){var g=l.includeDefaultValues;l.includeDefaultValues=u;var y=l.toDatalessObject(o);return l.includeDefaultValues=g,y})}var p=r.Object.prototype.toDatalessObject.call(this,o);return p.objects=a,p},render:function(o){this._transformDone=!0,this.callSuper("render",o),this._transformDone=!1},shouldCache:function(){var o=r.Object.prototype.shouldCache.call(this);if(o){for(var a=0,s=this._objects.length;a<s;a++)if(this._objects[a].willDrawShadow())return this.ownCaching=!1,!1}return o},willDrawShadow:function(){if(r.Object.prototype.willDrawShadow.call(this))return!0;for(var o=0,a=this._objects.length;o<a;o++)if(this._objects[o].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(o){for(var a=0,s=this._objects.length;a<s;a++)this._objects[a].render(o);this._drawClipPath(o,this.clipPath)},isCacheDirty:function(o){if(this.callSuper("isCacheDirty",o))return!0;if(!this.statefullCache)return!1;for(var a=0,s=this._objects.length;a<s;a++)if(this._objects[a].isCacheDirty(!0)){if(this._cacheCanvas){var u=this.cacheWidth/this.zoomX,p=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-u/2,-p/2,u,p)}return!0}return!1},_restoreObjectsState:function(){var o=this.calcOwnMatrix();return this._objects.forEach(function(a){r.util.addTransformToObject(a,o),delete a.group,a.setCoords()}),this},destroy:function(){return this._objects.forEach(function(o){o.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(o){o.dispose&&o.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var o=this._objects,a=this.canvas;this._objects=[];var s=this.toObject();delete s.objects;var u=new r.ActiveSelection([]);return u.set(s),u.type="activeSelection",a.remove(this),o.forEach(function(p){p.group=u,p.dirty=!0,a.add(p)}),u.canvas=a,u._objects=o,a._activeObject=u,u.setCoords(),u}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var o=!0;return this.forEachObject(function(a){a.setCoords(o)}),this},_calcBounds:function(o){for(var a=[],s=[],u,p,l,g=["tr","br","bl","tl"],y=0,_=this._objects.length,x,S=g.length;y<_;++y){for(u=this._objects[y],l=u.calcACoords(),x=0;x<S;x++)p=g[x],a.push(l[p].x),s.push(l[p].y);u.aCoords=l}this._getBounds(a,s,o)},_getBounds:function(o,a,s){var u=new r.Point(f(o),f(a)),p=new r.Point(d(o),d(a)),l=u.y||0,g=u.x||0,y=p.x-u.x||0,_=p.y-u.y||0;this.width=y,this.height=_,s||this.setPositionByOrigin({x:g,y:l},"left","top")},_toSVG:function(o){for(var a=["<g ","COMMON_PARTS",` >
`],s=0,u=this._objects.length;s<u;s++)a.push("		",this._objects[s].toSVG(o));return a.push(`</g>
`),a},getSvgStyles:function(){var o=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",a=this.visible?"":" visibility: hidden;";return[o,this.getSvgFilter(),a].join("")},toClipPathSVG:function(o){for(var a=[],s=0,u=this._objects.length;s<u;s++)a.push("	",this._objects[s].toClipPathSVG(o));return this._createBaseClipPathSVGMarkup(a,{reviver:o})}}),r.Group.fromObject=function(o,a){var s=o.objects,u=r.util.object.clone(o,!0);if(delete u.objects,typeof s=="string"){r.loadSVGFromURL(s,function(p){var l=r.util.groupSVGElements(p,o,s),g=u.clipPath;delete u.clipPath,l.set(u),g?r.util.enlivenObjects([g],function(y){l.clipPath=y[0],a&&a(l)}):a&&a(l)});return}r.util.enlivenObjects(s,function(p){r.util.enlivenObjectEnlivables(o,u,function(){a&&a(new r.Group(p,u,!0))})})})}(t),function(h){var r=h.fabric||(h.fabric={});r.ActiveSelection||(r.ActiveSelection=r.util.createClass(r.Group,{type:"activeSelection",initialize:function(f,d){d=d||{},this._objects=f||[];for(var o=this._objects.length;o--;)this._objects[o].group=this;d.originX&&(this.originX=d.originX),d.originY&&(this.originY=d.originY),this._calcBounds(),this._updateObjectsCoords(),r.Object.prototype.initialize.call(this,d),this.setCoords()},toGroup:function(){var f=this._objects.concat();this._objects=[];var d=r.Object.prototype.toObject.call(this),o=new r.Group([]);if(delete d.type,o.set(d),f.forEach(function(s){s.canvas.remove(s),s.group=o}),o._objects=f,!this.canvas)return o;var a=this.canvas;return a.add(o),a._activeObject=o,o.setCoords(),o},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(f,d,o){f.save(),f.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,o=o||{},typeof o.hasControls>"u"&&(o.hasControls=!1),o.forActiveSelection=!0;for(var a=0,s=this._objects.length;a<s;a++)this._objects[a]._renderControls(f,o);this.callSuper("_renderControls",f,d),f.restore()}}),r.ActiveSelection.fromObject=function(f,d){r.util.enlivenObjects(f.objects,function(o){delete f.objects,d&&d(new r.ActiveSelection(o,f,!0))})})}(t),function(h){var r=e.util.object.extend;if(h.fabric||(h.fabric={}),h.fabric.Image){e.warn("fabric.Image is already defined.");return}e.Image=e.util.createClass(e.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:e.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:e.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(f,d){d||(d={}),this.filters=[],this.cacheKey="texture"+e.Object.__uid++,this.callSuper("initialize",d),this._initElement(f,d)},getElement:function(){return this._element||{}},setElement:function(f,d){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=f,this._originalElement=f,this._initConfig(d),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(f){var d=e.filterBackend;d&&d.evictCachesForKey&&d.evictCachesForKey(f)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(f){e.util.cleanUpJsdomNode(this[f]),this[f]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var f=this.getElement();return{width:f.naturalWidth||f.width,height:f.naturalHeight||f.height}},_stroke:function(f){if(!(!this.stroke||this.strokeWidth===0)){var d=this.width/2,o=this.height/2;f.beginPath(),f.moveTo(-d,-o),f.lineTo(d,-o),f.lineTo(d,o),f.lineTo(-d,o),f.lineTo(-d,-o),f.closePath()}},toObject:function(f){var d=[];this.filters.forEach(function(a){a&&d.push(a.toObject())});var o=r(this.callSuper("toObject",["cropX","cropY"].concat(f)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:d});return this.resizeFilter&&(o.resizeFilter=this.resizeFilter.toObject()),o},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var f=[],d=[],o,a=this._element,s=-this.width/2,u=-this.height/2,p="",l="";if(!a)return[];if(this.hasCrop()){var g=e.Object.__uid++;f.push('<clipPath id="imageCrop_'+g+`">
`,'	<rect x="'+s+'" y="'+u+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),p=' clip-path="url(#imageCrop_'+g+')" '}if(this.imageSmoothing||(l='" image-rendering="optimizeSpeed'),d.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',s-this.cropX,'" y="',u-this.cropY,'" width="',a.width||a.naturalWidth,'" height="',a.height||a.height,l,'"',p,`></image>
`),this.stroke||this.strokeDashArray){var y=this.fill;this.fill=null,o=["	<rect ",'x="',s,'" y="',u,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=y}return this.paintFirst!=="fill"?f=f.concat(o,d):f=f.concat(d,o),f},getSrc:function(f){var d=f?this._element:this._originalElement;return d?d.toDataURL?d.toDataURL():this.srcFromAttribute?d.getAttribute("src"):d.src:this.src||""},setSrc:function(f,d,o){return e.util.loadImage(f,function(a,s){this.setElement(a,o),this._setWidthHeight(),d&&d(this,s)},this,o&&o.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var f=this.resizeFilter,d=this.minimumScaleTrigger,o=this.getTotalObjectScaling(),a=o.scaleX,s=o.scaleY,u=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!f||a>d&&s>d){this._element=u,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=a,this._lastScaleY=s;return}e.filterBackend||(e.filterBackend=e.initFilterBackend());var p=e.util.createCanvasElement(),l=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,g=u.width,y=u.height;p.width=g,p.height=y,this._element=p,this._lastScaleX=f.scaleX=a,this._lastScaleY=f.scaleY=s,e.filterBackend.applyFilters([f],u,g,y,this._element,l),this._filterScalingX=p.width/this._originalElement.width,this._filterScalingY=p.height/this._originalElement.height},applyFilters:function(f){if(f=f||this.filters||[],f=f.filter(function(u){return u&&!u.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),f.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var d=this._originalElement,o=d.naturalWidth||d.width,a=d.naturalHeight||d.height;if(this._element===this._originalElement){var s=e.util.createCanvasElement();s.width=o,s.height=a,this._element=s,this._filteredEl=s}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,o,a),this._lastScaleX=1,this._lastScaleY=1;return e.filterBackend||(e.filterBackend=e.initFilterBackend()),e.filterBackend.applyFilters(f,this._originalElement,o,a,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(f){e.util.setImageSmoothing(f,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(f),this._renderPaintInOrder(f)},drawCacheOnCanvas:function(f){e.util.setImageSmoothing(f,this.imageSmoothing),e.Object.prototype.drawCacheOnCanvas.call(this,f)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(f){var d=this._element;if(d){var o=this._filterScalingX,a=this._filterScalingY,s=this.width,u=this.height,p=Math.min,l=Math.max,g=l(this.cropX,0),y=l(this.cropY,0),_=d.naturalWidth||d.width,x=d.naturalHeight||d.height,S=g*o,b=y*a,E=p(s*o,_-S),T=p(u*a,x-b),O=-s/2,A=-u/2,j=p(s,_/o-g),U=p(u,x/a-y);d&&f.drawImage(d,S,b,E,T,O,A,j,U)}},_needsResize:function(){var f=this.getTotalObjectScaling();return f.scaleX!==this._lastScaleX||f.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(f,d){this.setElement(e.util.getById(f),d),e.util.addClass(this.getElement(),e.Image.CSS_CANVAS)},_initConfig:function(f){f||(f={}),this.setOptions(f),this._setWidthHeight(f)},_initFilters:function(f,d){f&&f.length?e.util.enlivenObjects(f,function(o){d&&d(o)},"fabric.Image.filters"):d&&d()},_setWidthHeight:function(f){f||(f={});var d=this.getElement();this.width=f.width||d.naturalWidth||d.width||0,this.height=f.height||d.naturalHeight||d.height||0},parsePreserveAspectRatioAttribute:function(){var f=e.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),d=this._element.width,o=this._element.height,a=1,s=1,u=0,p=0,l=0,g=0,y,_=this.width,x=this.height,S={width:_,height:x};return f&&(f.alignX!=="none"||f.alignY!=="none")?(f.meetOrSlice==="meet"&&(a=s=e.util.findScaleToFit(this._element,S),y=(_-d*a)/2,f.alignX==="Min"&&(u=-y),f.alignX==="Max"&&(u=y),y=(x-o*s)/2,f.alignY==="Min"&&(p=-y),f.alignY==="Max"&&(p=y)),f.meetOrSlice==="slice"&&(a=s=e.util.findScaleToCover(this._element,S),y=d-_/a,f.alignX==="Mid"&&(l=y/2),f.alignX==="Max"&&(l=y),y=o-x/s,f.alignY==="Mid"&&(g=y/2),f.alignY==="Max"&&(g=y),d=_/a,o=x/s)):(a=_/d,s=x/o),{width:d,height:o,scaleX:a,scaleY:s,offsetLeft:u,offsetTop:p,cropX:l,cropY:g}}}),e.Image.CSS_CANVAS="canvas-img",e.Image.prototype.getSvgSrc=e.Image.prototype.getSrc,e.Image.fromObject=function(f,d){var o=e.util.object.clone(f);e.util.loadImage(o.src,function(a,s){if(s){d&&d(null,!0);return}e.Image.prototype._initFilters.call(o,o.filters,function(u){o.filters=u||[],e.Image.prototype._initFilters.call(o,[o.resizeFilter],function(p){o.resizeFilter=p[0],e.util.enlivenObjectEnlivables(o,o,function(){var l=new e.Image(a,o);d(l,!1)})})})},null,o.crossOrigin)},e.Image.fromURL=function(f,d,o){e.util.loadImage(f,function(a,s){d&&d(new e.Image(a,o),s)},null,o&&o.crossOrigin)},e.Image.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),e.Image.fromElement=function(f,d,o){var a=e.parseAttributes(f,e.Image.ATTRIBUTE_NAMES);e.Image.fromURL(a["xlink:href"],d,r(o?e.util.object.clone(o):{},a))}}(t),e.util.object.extend(e.Object.prototype,{_getAngleValueForStraighten:function(){var h=this.angle%360;return h>0?Math.round((h-1)/90)*90:Math.round(h/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(h){h=h||{};var r=function(){},f=h.onComplete||r,d=h.onChange||r,o=this;return e.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(a){o.rotate(a),d()},onComplete:function(){o.setCoords(),f()}})}}),e.util.object.extend(e.StaticCanvas.prototype,{straightenObject:function(h){return h.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(h){return h.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function h(f,d){var o="precision "+d+` float;
void main(){}`,a=f.createShader(f.FRAGMENT_SHADER);return f.shaderSource(a,o),f.compileShader(a),!!f.getShaderParameter(a,f.COMPILE_STATUS)}e.isWebglSupported=function(f){if(e.isLikelyNode)return!1;f=f||e.WebglFilterBackend.prototype.tileSize;var d=document.createElement("canvas"),o=d.getContext("webgl")||d.getContext("experimental-webgl"),a=!1;if(o){e.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE),a=e.maxTextureSize>=f;for(var s=["highp","mediump","lowp"],u=0;u<3;u++)if(h(o,s[u])){e.webGlPrecision=s[u];break}}return this.isSupported=a,a},e.WebglFilterBackend=r;function r(f){f&&f.tileSize&&(this.tileSize=f.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}r.prototype={tileSize:2048,resources:{},setupGLContext:function(f,d){this.dispose(),this.createWebGLCanvas(f,d),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(f,d)},chooseFastestCopyGLTo2DMethod:function(f,d){var o=typeof window.performance<"u",a;try{new ImageData(1,1),a=!0}catch{a=!1}var s=typeof ArrayBuffer<"u",u=typeof Uint8ClampedArray<"u";if(o&&a&&s&&u){var p=e.util.createCanvasElement(),l=new ArrayBuffer(f*d*4);if(e.forceGLPutImageData){this.imageBuffer=l,this.copyGLTo2D=w;return}var g={imageBuffer:l,destinationWidth:f,destinationHeight:d,targetCanvas:p},y,_,x;p.width=f,p.height=d,y=window.performance.now(),v.call(g,this.gl,g),_=window.performance.now()-y,y=window.performance.now(),w.call(g,this.gl,g),x=window.performance.now()-y,_>x?(this.imageBuffer=l,this.copyGLTo2D=w):this.copyGLTo2D=v}},createWebGLCanvas:function(f,d){var o=e.util.createCanvasElement();o.width=f,o.height=d;var a={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},s=o.getContext("webgl",a);s||(s=o.getContext("experimental-webgl",a)),s&&(s.clearColor(0,0,0,0),this.canvas=o,this.gl=s)},applyFilters:function(f,d,o,a,s,u){var p=this.gl,l;u&&(l=this.getCachedTexture(u,d));var g={originalWidth:d.width||d.originalWidth,originalHeight:d.height||d.originalHeight,sourceWidth:o,sourceHeight:a,destinationWidth:o,destinationHeight:a,context:p,sourceTexture:this.createTexture(p,o,a,!l&&d),targetTexture:this.createTexture(p,o,a),originalTexture:l||this.createTexture(p,o,a,!l&&d),passes:f.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:s},y=p.createFramebuffer();return p.bindFramebuffer(p.FRAMEBUFFER,y),f.forEach(function(_){_&&_.applyTo(g)}),c(g),this.copyGLTo2D(p,g),p.bindTexture(p.TEXTURE_2D,null),p.deleteTexture(g.sourceTexture),p.deleteTexture(g.targetTexture),p.deleteFramebuffer(y),s.getContext("2d").setTransform(1,0,0,1,0,0),g},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(f,d,o,a,s){var u=f.createTexture();return f.bindTexture(f.TEXTURE_2D,u),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,s||f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,s||f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),a?f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,a):f.texImage2D(f.TEXTURE_2D,0,f.RGBA,d,o,0,f.RGBA,f.UNSIGNED_BYTE,null),u},getCachedTexture:function(f,d){if(this.textureCache[f])return this.textureCache[f];var o=this.createTexture(this.gl,d.width,d.height,d);return this.textureCache[f]=o,o},evictCachesForKey:function(f){this.textureCache[f]&&(this.gl.deleteTexture(this.textureCache[f]),delete this.textureCache[f])},copyGLTo2D:v,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var f=this.gl,d={renderer:"",vendor:""};if(!f)return d;var o=f.getExtension("WEBGL_debug_renderer_info");if(o){var a=f.getParameter(o.UNMASKED_RENDERER_WEBGL),s=f.getParameter(o.UNMASKED_VENDOR_WEBGL);a&&(d.renderer=a.toLowerCase()),s&&(d.vendor=s.toLowerCase())}return this.gpuInfo=d,d}}}();function c(h){var r=h.targetCanvas,f=r.width,d=r.height,o=h.destinationWidth,a=h.destinationHeight;(f!==o||d!==a)&&(r.width=o,r.height=a)}function v(h,r){var f=h.canvas,d=r.targetCanvas,o=d.getContext("2d");o.translate(0,d.height),o.scale(1,-1);var a=f.height-d.height;o.drawImage(f,0,a,d.width,d.height,0,0,d.width,d.height)}function w(h,r){var f=r.targetCanvas,d=f.getContext("2d"),o=r.destinationWidth,a=r.destinationHeight,s=o*a*4,u=new Uint8Array(this.imageBuffer,0,s),p=new Uint8ClampedArray(this.imageBuffer,0,s);h.readPixels(0,0,o,a,h.RGBA,h.UNSIGNED_BYTE,u);var l=new ImageData(p,o,a);d.putImageData(l,0,0)}(function(){var h=function(){};e.Canvas2dFilterBackend=r;function r(){}r.prototype={evictCachesForKey:h,dispose:h,clearWebGLCaches:h,resources:{},applyFilters:function(f,d,o,a,s){var u=s.getContext("2d");u.drawImage(d,0,0,o,a);var p=u.getImageData(0,0,o,a),l=u.getImageData(0,0,o,a),g={sourceWidth:o,sourceHeight:a,imageData:p,originalEl:d,originalImageData:l,canvasEl:s,ctx:u,filterBackend:this};return f.forEach(function(y){y.applyTo(g)}),(g.imageData.width!==o||g.imageData.height!==a)&&(s.width=g.imageData.width,s.height=g.imageData.height),u.putImageData(g.imageData,0,0),g}}})(),e.Image=e.Image||{},e.Image.filters=e.Image.filters||{},e.Image.filters.BaseFilter=e.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(h){h&&this.setOptions(h)},setOptions:function(h){for(var r in h)this[r]=h[r]},createProgram:function(h,r,f){r=r||this.fragmentSource,f=f||this.vertexSource,e.webGlPrecision!=="highp"&&(r=r.replace(/precision highp float/g,"precision "+e.webGlPrecision+" float"));var d=h.createShader(h.VERTEX_SHADER);if(h.shaderSource(d,f),h.compileShader(d),!h.getShaderParameter(d,h.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+h.getShaderInfoLog(d));var o=h.createShader(h.FRAGMENT_SHADER);if(h.shaderSource(o,r),h.compileShader(o),!h.getShaderParameter(o,h.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+h.getShaderInfoLog(o));var a=h.createProgram();if(h.attachShader(a,d),h.attachShader(a,o),h.linkProgram(a),!h.getProgramParameter(a,h.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+h.getProgramInfoLog(a));var s=this.getAttributeLocations(h,a),u=this.getUniformLocations(h,a)||{};return u.uStepW=h.getUniformLocation(a,"uStepW"),u.uStepH=h.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:s,uniformLocations:u}},getAttributeLocations:function(h,r){return{aPosition:h.getAttribLocation(r,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(h,r,f){var d=r.aPosition,o=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,o),h.enableVertexAttribArray(d),h.vertexAttribPointer(d,2,h.FLOAT,!1,0,0),h.bufferData(h.ARRAY_BUFFER,f,h.STATIC_DRAW)},_setupFrameBuffer:function(h){var r=h.context,f,d;h.passes>1?(f=h.destinationWidth,d=h.destinationHeight,(h.sourceWidth!==f||h.sourceHeight!==d)&&(r.deleteTexture(h.targetTexture),h.targetTexture=h.filterBackend.createTexture(r,f,d)),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,h.targetTexture,0)):(r.bindFramebuffer(r.FRAMEBUFFER,null),r.finish())},_swapTextures:function(h){h.passes--,h.pass++;var r=h.targetTexture;h.targetTexture=h.sourceTexture,h.sourceTexture=r},isNeutralState:function(){var h=this.mainParameter,r=e.Image.filters[this.type].prototype;if(h)if(Array.isArray(r[h])){for(var f=r[h].length;f--;)if(this[h][f]!==r[h][f])return!1;return!0}else return r[h]===this[h];else return!1},applyTo:function(h){h.webgl?(this._setupFrameBuffer(h),this.applyToWebGL(h),this._swapTextures(h)):this.applyTo2d(h)},retrieveShader:function(h){return h.programCache.hasOwnProperty(this.type)||(h.programCache[this.type]=this.createProgram(h.context)),h.programCache[this.type]},applyToWebGL:function(h){var r=h.context,f=this.retrieveShader(h);h.pass===0&&h.originalTexture?r.bindTexture(r.TEXTURE_2D,h.originalTexture):r.bindTexture(r.TEXTURE_2D,h.sourceTexture),r.useProgram(f.program),this.sendAttributeData(r,f.attributeLocations,h.aPosition),r.uniform1f(f.uniformLocations.uStepW,1/h.sourceWidth),r.uniform1f(f.uniformLocations.uStepH,1/h.sourceHeight),this.sendUniformData(r,f.uniformLocations),r.viewport(0,0,h.destinationWidth,h.destinationHeight),r.drawArrays(r.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(h,r,f){h.activeTexture(f),h.bindTexture(h.TEXTURE_2D,r),h.activeTexture(h.TEXTURE0)},unbindAdditionalTexture:function(h,r){h.activeTexture(r),h.bindTexture(h.TEXTURE_2D,null),h.activeTexture(h.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(h){this[this.mainParameter]=h},sendUniformData:function(){},createHelpLayer:function(h){if(!h.helpLayer){var r=document.createElement("canvas");r.width=h.sourceWidth,r.height=h.sourceHeight,h.helpLayer=r}},toObject:function(){var h={type:this.type},r=this.mainParameter;return r&&(h[r]=this[r]),h},toJSON:function(){return this.toObject()}}),e.Image.filters.BaseFilter.fromObject=function(h,r){var f=new e.Image.filters[h.type](h);return r&&r(f),f},function(h){var r=h.fabric||(h.fabric={}),f=r.Image.filters,d=r.util.createClass;f.ColorMatrix=d(f.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(o){this.callSuper("initialize",o),this.matrix=this.matrix.slice(0)},applyTo2d:function(o){var a=o.imageData,s=a.data,u=s.length,p=this.matrix,l,g,y,_,x,S=this.colorsOnly;for(x=0;x<u;x+=4)l=s[x],g=s[x+1],y=s[x+2],S?(s[x]=l*p[0]+g*p[1]+y*p[2]+p[4]*255,s[x+1]=l*p[5]+g*p[6]+y*p[7]+p[9]*255,s[x+2]=l*p[10]+g*p[11]+y*p[12]+p[14]*255):(_=s[x+3],s[x]=l*p[0]+g*p[1]+y*p[2]+_*p[3]+p[4]*255,s[x+1]=l*p[5]+g*p[6]+y*p[7]+_*p[8]+p[9]*255,s[x+2]=l*p[10]+g*p[11]+y*p[12]+_*p[13]+p[14]*255,s[x+3]=l*p[15]+g*p[16]+y*p[17]+_*p[18]+p[19]*255)},getUniformLocations:function(o,a){return{uColorMatrix:o.getUniformLocation(a,"uColorMatrix"),uConstants:o.getUniformLocation(a,"uConstants")}},sendUniformData:function(o,a){var s=this.matrix,u=[s[0],s[1],s[2],s[3],s[5],s[6],s[7],s[8],s[10],s[11],s[12],s[13],s[15],s[16],s[17],s[18]],p=[s[4],s[9],s[14],s[19]];o.uniformMatrix4fv(a.uColorMatrix,!1,u),o.uniform4fv(a.uConstants,p)}}),r.Image.filters.ColorMatrix.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(h){var r=h.fabric||(h.fabric={}),f=r.Image.filters,d=r.util.createClass;f.Brightness=d(f.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(o){if(this.brightness!==0){var a=o.imageData,s=a.data,u,p=s.length,l=Math.round(this.brightness*255);for(u=0;u<p;u+=4)s[u]=s[u]+l,s[u+1]=s[u+1]+l,s[u+2]=s[u+2]+l}},getUniformLocations:function(o,a){return{uBrightness:o.getUniformLocation(a,"uBrightness")}},sendUniformData:function(o,a){o.uniform1f(a.uBrightness,this.brightness)}}),r.Image.filters.Brightness.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(h){var r=h.fabric||(h.fabric={}),f=r.util.object.extend,d=r.Image.filters,o=r.util.createClass;d.Convolute=o(d.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(a){var s=Math.sqrt(this.matrix.length),u=this.type+"_"+s+"_"+(this.opaque?1:0),p=this.fragmentSource[u];return a.programCache.hasOwnProperty(u)||(a.programCache[u]=this.createProgram(a.context,p)),a.programCache[u]},applyTo2d:function(a){var s=a.imageData,u=s.data,p=this.matrix,l=Math.round(Math.sqrt(p.length)),g=Math.floor(l/2),y=s.width,_=s.height,x=a.ctx.createImageData(y,_),S=x.data,b=this.opaque?1:0,E,T,O,A,j,U,M,re,oe,fe,de,q,I;for(de=0;de<_;de++)for(fe=0;fe<y;fe++){for(j=(de*y+fe)*4,E=0,T=0,O=0,A=0,I=0;I<l;I++)for(q=0;q<l;q++)M=de+I-g,U=fe+q-g,!(M<0||M>=_||U<0||U>=y)&&(re=(M*y+U)*4,oe=p[I*l+q],E+=u[re]*oe,T+=u[re+1]*oe,O+=u[re+2]*oe,b||(A+=u[re+3]*oe));S[j]=E,S[j+1]=T,S[j+2]=O,b?S[j+3]=u[j+3]:S[j+3]=A}a.imageData=x},getUniformLocations:function(a,s){return{uMatrix:a.getUniformLocation(s,"uMatrix"),uOpaque:a.getUniformLocation(s,"uOpaque"),uHalfSize:a.getUniformLocation(s,"uHalfSize"),uSize:a.getUniformLocation(s,"uSize")}},sendUniformData:function(a,s){a.uniform1fv(s.uMatrix,this.matrix)},toObject:function(){return f(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),r.Image.filters.Convolute.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(h){var r=h.fabric||(h.fabric={}),f=r.Image.filters,d=r.util.createClass;f.Grayscale=d(f.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(o){var a=o.imageData,s=a.data,u,p=s.length,l,g=this.mode;for(u=0;u<p;u+=4)g==="average"?l=(s[u]+s[u+1]+s[u+2])/3:g==="lightness"?l=(Math.min(s[u],s[u+1],s[u+2])+Math.max(s[u],s[u+1],s[u+2]))/2:g==="luminosity"&&(l=.21*s[u]+.72*s[u+1]+.07*s[u+2]),s[u]=l,s[u+1]=l,s[u+2]=l},retrieveShader:function(o){var a=this.type+"_"+this.mode;if(!o.programCache.hasOwnProperty(a)){var s=this.fragmentSource[this.mode];o.programCache[a]=this.createProgram(o.context,s)}return o.programCache[a]},getUniformLocations:function(o,a){return{uMode:o.getUniformLocation(a,"uMode")}},sendUniformData:function(o,a){var s=1;o.uniform1i(a.uMode,s)},isNeutralState:function(){return!1}}),r.Image.filters.Grayscale.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(h){var r=h.fabric||(h.fabric={}),f=r.Image.filters,d=r.util.createClass;f.Invert=d(f.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(o){var a=o.imageData,s=a.data,u,p=s.length;for(u=0;u<p;u+=4)s[u]=255-s[u],s[u+1]=255-s[u+1],s[u+2]=255-s[u+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(o,a){return{uInvert:o.getUniformLocation(a,"uInvert")}},sendUniformData:function(o,a){o.uniform1i(a.uInvert,this.invert)}}),r.Image.filters.Invert.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(h){var r=h.fabric||(h.fabric={}),f=r.util.object.extend,d=r.Image.filters,o=r.util.createClass;d.Noise=o(d.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(a){if(this.noise!==0){var s=a.imageData,u=s.data,p,l=u.length,g=this.noise,y;for(p=0,l=u.length;p<l;p+=4)y=(.5-Math.random())*g,u[p]+=y,u[p+1]+=y,u[p+2]+=y}},getUniformLocations:function(a,s){return{uNoise:a.getUniformLocation(s,"uNoise"),uSeed:a.getUniformLocation(s,"uSeed")}},sendUniformData:function(a,s){a.uniform1f(s.uNoise,this.noise/255),a.uniform1f(s.uSeed,Math.random())},toObject:function(){return f(this.callSuper("toObject"),{noise:this.noise})}}),r.Image.filters.Noise.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(h){var r=h.fabric||(h.fabric={}),f=r.Image.filters,d=r.util.createClass;f.Pixelate=d(f.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(o){var a=o.imageData,s=a.data,u=a.height,p=a.width,l,g,y,_,x,S,b,E,T,O,A;for(g=0;g<u;g+=this.blocksize)for(y=0;y<p;y+=this.blocksize)for(l=g*4*p+y*4,_=s[l],x=s[l+1],S=s[l+2],b=s[l+3],O=Math.min(g+this.blocksize,u),A=Math.min(y+this.blocksize,p),E=g;E<O;E++)for(T=y;T<A;T++)l=E*4*p+T*4,s[l]=_,s[l+1]=x,s[l+2]=S,s[l+3]=b},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(o,a){return{uBlocksize:o.getUniformLocation(a,"uBlocksize"),uStepW:o.getUniformLocation(a,"uStepW"),uStepH:o.getUniformLocation(a,"uStepH")}},sendUniformData:function(o,a){o.uniform1f(a.uBlocksize,this.blocksize)}}),r.Image.filters.Pixelate.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(h){var r=h.fabric||(h.fabric={}),f=r.util.object.extend,d=r.Image.filters,o=r.util.createClass;d.RemoveColor=o(d.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(a){var s=a.imageData,u=s.data,p,l=this.distance*255,g,y,_,x=new r.Color(this.color).getSource(),S=[x[0]-l,x[1]-l,x[2]-l],b=[x[0]+l,x[1]+l,x[2]+l];for(p=0;p<u.length;p+=4)g=u[p],y=u[p+1],_=u[p+2],g>S[0]&&y>S[1]&&_>S[2]&&g<b[0]&&y<b[1]&&_<b[2]&&(u[p+3]=0)},getUniformLocations:function(a,s){return{uLow:a.getUniformLocation(s,"uLow"),uHigh:a.getUniformLocation(s,"uHigh")}},sendUniformData:function(a,s){var u=new r.Color(this.color).getSource(),p=parseFloat(this.distance),l=[0+u[0]/255-p,0+u[1]/255-p,0+u[2]/255-p,1],g=[u[0]/255+p,u[1]/255+p,u[2]/255+p,1];a.uniform4fv(s.uLow,l),a.uniform4fv(s.uHigh,g)},toObject:function(){return f(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),r.Image.filters.RemoveColor.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(h){var r=h.fabric||(h.fabric={}),f=r.Image.filters,d=r.util.createClass,o={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var a in o)f[a]=d(f.ColorMatrix,{type:a,matrix:o[a],mainParameter:!1,colorsOnly:!0}),r.Image.filters[a].fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(h){var r=h.fabric,f=r.Image.filters,d=r.util.createClass;f.BlendColor=d(f.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(o){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[o]+`}
}`},retrieveShader:function(o){var a=this.type+"_"+this.mode,s;return o.programCache.hasOwnProperty(a)||(s=this.buildSource(this.mode),o.programCache[a]=this.createProgram(o.context,s)),o.programCache[a]},applyTo2d:function(o){var a=o.imageData,s=a.data,u=s.length,p,l,g,y,_,x,S,b=1-this.alpha;S=new r.Color(this.color).getSource(),p=S[0]*this.alpha,l=S[1]*this.alpha,g=S[2]*this.alpha;for(var E=0;E<u;E+=4)switch(y=s[E],_=s[E+1],x=s[E+2],this.mode){case"multiply":s[E]=y*p/255,s[E+1]=_*l/255,s[E+2]=x*g/255;break;case"screen":s[E]=255-(255-y)*(255-p)/255,s[E+1]=255-(255-_)*(255-l)/255,s[E+2]=255-(255-x)*(255-g)/255;break;case"add":s[E]=y+p,s[E+1]=_+l,s[E+2]=x+g;break;case"diff":case"difference":s[E]=Math.abs(y-p),s[E+1]=Math.abs(_-l),s[E+2]=Math.abs(x-g);break;case"subtract":s[E]=y-p,s[E+1]=_-l,s[E+2]=x-g;break;case"darken":s[E]=Math.min(y,p),s[E+1]=Math.min(_,l),s[E+2]=Math.min(x,g);break;case"lighten":s[E]=Math.max(y,p),s[E+1]=Math.max(_,l),s[E+2]=Math.max(x,g);break;case"overlay":s[E]=p<128?2*y*p/255:255-2*(255-y)*(255-p)/255,s[E+1]=l<128?2*_*l/255:255-2*(255-_)*(255-l)/255,s[E+2]=g<128?2*x*g/255:255-2*(255-x)*(255-g)/255;break;case"exclusion":s[E]=p+y-2*p*y/255,s[E+1]=l+_-2*l*_/255,s[E+2]=g+x-2*g*x/255;break;case"tint":s[E]=p+y*b,s[E+1]=l+_*b,s[E+2]=g+x*b}},getUniformLocations:function(o,a){return{uColor:o.getUniformLocation(a,"uColor")}},sendUniformData:function(o,a){var s=new r.Color(this.color).getSource();s[0]=this.alpha*s[0]/255,s[1]=this.alpha*s[1]/255,s[2]=this.alpha*s[2]/255,s[3]=this.alpha,o.uniform4fv(a.uColor,s)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),r.Image.filters.BlendColor.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(h){var r=h.fabric,f=r.Image.filters,d=r.util.createClass;f.BlendImage=d(f.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(o){var a=this.type+"_"+this.mode,s=this.fragmentSource[this.mode];return o.programCache.hasOwnProperty(a)||(o.programCache[a]=this.createProgram(o.context,s)),o.programCache[a]},applyToWebGL:function(o){var a=o.context,s=this.createTexture(o.filterBackend,this.image);this.bindAdditionalTexture(a,s,a.TEXTURE1),this.callSuper("applyToWebGL",o),this.unbindAdditionalTexture(a,a.TEXTURE1)},createTexture:function(o,a){return o.getCachedTexture(a.cacheKey,a._element)},calculateMatrix:function(){var o=this.image,a=o._element.width,s=o._element.height;return[1/o.scaleX,0,0,0,1/o.scaleY,0,-o.left/a,-o.top/s,1]},applyTo2d:function(o){var a=o.imageData,s=o.filterBackend.resources,u=a.data,p=u.length,l=a.width,g=a.height,y,_,x,S,b,E,T,O,A,j,U=this.image,M;s.blendImage||(s.blendImage=r.util.createCanvasElement()),A=s.blendImage,j=A.getContext("2d"),A.width!==l||A.height!==g?(A.width=l,A.height=g):j.clearRect(0,0,l,g),j.setTransform(U.scaleX,0,0,U.scaleY,U.left,U.top),j.drawImage(U._element,0,0,l,g),M=j.getImageData(0,0,l,g).data;for(var re=0;re<p;re+=4)switch(b=u[re],E=u[re+1],T=u[re+2],O=u[re+3],y=M[re],_=M[re+1],x=M[re+2],S=M[re+3],this.mode){case"multiply":u[re]=b*y/255,u[re+1]=E*_/255,u[re+2]=T*x/255,u[re+3]=O*S/255;break;case"mask":u[re+3]=S;break}},getUniformLocations:function(o,a){return{uTransformMatrix:o.getUniformLocation(a,"uTransformMatrix"),uImage:o.getUniformLocation(a,"uImage")}},sendUniformData:function(o,a){var s=this.calculateMatrix();o.uniform1i(a.uImage,1),o.uniformMatrix3fv(a.uTransformMatrix,!1,s)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),r.Image.filters.BlendImage.fromObject=function(o,a){r.Image.fromObject(o.image,function(s){var u=r.util.object.clone(o);u.image=s,a(new r.Image.filters.BlendImage(u))})}}(t),function(h){var r=h.fabric||(h.fabric={}),f=Math.pow,d=Math.floor,o=Math.sqrt,a=Math.abs,s=Math.round,u=Math.sin,p=Math.ceil,l=r.Image.filters,g=r.util.createClass;l.Resize=g(l.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(y,_){return{uDelta:y.getUniformLocation(_,"uDelta"),uTaps:y.getUniformLocation(_,"uTaps")}},sendUniformData:function(y,_){y.uniform2fv(_.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),y.uniform1fv(_.uTaps,this.taps)},retrieveShader:function(y){var _=this.getFilterWindow(),x=this.type+"_"+_;if(!y.programCache.hasOwnProperty(x)){var S=this.generateShader(_);y.programCache[x]=this.createProgram(y.context,S)}return y.programCache[x]},getFilterWindow:function(){var y=this.tempScale;return Math.ceil(this.lanczosLobes/y)},getTaps:function(){for(var y=this.lanczosCreate(this.lanczosLobes),_=this.tempScale,x=this.getFilterWindow(),S=new Array(x),b=1;b<=x;b++)S[b-1]=y(b*_);return S},generateShader:function(S){for(var _=new Array(S),x=this.fragmentSourceTOP,S,b=1;b<=S;b++)_[b-1]=b+".0 * uDelta";return x+="uniform float uTaps["+S+`];
`,x+=`void main() {
`,x+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,x+=`  float sum = 1.0;
`,_.forEach(function(E,T){x+="  color += texture2D(uTexture, vTexCoord + "+E+") * uTaps["+T+`];
`,x+="  color += texture2D(uTexture, vTexCoord - "+E+") * uTaps["+T+`];
`,x+="  sum += 2.0 * uTaps["+T+`];
`}),x+=`  gl_FragColor = color / sum;
`,x+="}",x},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(y){y.webgl?(y.passes++,this.width=y.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=y.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),y.destinationWidth=this.dW,this._setupFrameBuffer(y),this.applyToWebGL(y),this._swapTextures(y),y.sourceWidth=y.destinationWidth,this.height=y.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),y.destinationHeight=this.dH,this._setupFrameBuffer(y),this.applyToWebGL(y),this._swapTextures(y),y.sourceHeight=y.destinationHeight):this.applyTo2d(y)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(y){return function(_){if(_>=y||_<=-y)return 0;if(_<11920929e-14&&_>-11920929e-14)return 1;_*=Math.PI;var x=_/y;return u(_)/_*u(x)/x}},applyTo2d:function(y){var _=y.imageData,x=this.scaleX,S=this.scaleY;this.rcpScaleX=1/x,this.rcpScaleY=1/S;var b=_.width,E=_.height,T=s(b*x),O=s(E*S),A;this.resizeType==="sliceHack"?A=this.sliceByTwo(y,b,E,T,O):this.resizeType==="hermite"?A=this.hermiteFastResize(y,b,E,T,O):this.resizeType==="bilinear"?A=this.bilinearFiltering(y,b,E,T,O):this.resizeType==="lanczos"&&(A=this.lanczosResize(y,b,E,T,O)),y.imageData=A},sliceByTwo:function(y,_,x,S,b){var E=y.imageData,T=.5,O=!1,A=!1,j=_*T,U=x*T,M=r.filterBackend.resources,re,oe,fe=0,de=0,q=_,I=0;for(M.sliceByTwo||(M.sliceByTwo=document.createElement("canvas")),re=M.sliceByTwo,(re.width<_*1.5||re.height<x)&&(re.width=_*1.5,re.height=x),oe=re.getContext("2d"),oe.clearRect(0,0,_*1.5,x),oe.putImageData(E,0,0),S=d(S),b=d(b);!O||!A;)_=j,x=U,S<d(j*T)?j=d(j*T):(j=S,O=!0),b<d(U*T)?U=d(U*T):(U=b,A=!0),oe.drawImage(re,fe,de,_,x,q,I,j,U),fe=q,de=I,I+=U;return oe.getImageData(fe,de,S,b)},lanczosResize:function(y,_,x,S,b){function E(B){var F,X,N,D,z,H,J,Y,te,ie,le;for(I.x=(B+.5)*U,L.x=d(I.x),F=0;F<b;F++){for(I.y=(F+.5)*M,L.y=d(I.y),z=0,H=0,J=0,Y=0,te=0,X=L.x-fe;X<=L.x+fe;X++)if(!(X<0||X>=_)){ie=d(1e3*a(X-I.x)),q[ie]||(q[ie]={});for(var G=L.y-de;G<=L.y+de;G++)G<0||G>=x||(le=d(1e3*a(G-I.y)),q[ie][le]||(q[ie][le]=j(o(f(ie*re,2)+f(le*oe,2))/1e3)),N=q[ie][le],N>0&&(D=(G*_+X)*4,z+=N,H+=N*T[D],J+=N*T[D+1],Y+=N*T[D+2],te+=N*T[D+3]))}D=(F*S+B)*4,A[D]=H/z,A[D+1]=J/z,A[D+2]=Y/z,A[D+3]=te/z}return++B<S?E(B):O}var T=y.imageData.data,O=y.ctx.createImageData(S,b),A=O.data,j=this.lanczosCreate(this.lanczosLobes),U=this.rcpScaleX,M=this.rcpScaleY,re=2/this.rcpScaleX,oe=2/this.rcpScaleY,fe=p(U*this.lanczosLobes/2),de=p(M*this.lanczosLobes/2),q={},I={},L={};return E(0)},bilinearFiltering:function(y,_,x,S,b){var E,T,O,A,j,U,M,re,oe,fe,de,q,I=0,L,B=this.rcpScaleX,F=this.rcpScaleY,X=4*(_-1),N=y.imageData,D=N.data,z=y.ctx.createImageData(S,b),H=z.data;for(M=0;M<b;M++)for(re=0;re<S;re++)for(j=d(B*re),U=d(F*M),oe=B*re-j,fe=F*M-U,L=4*(U*_+j),de=0;de<4;de++)E=D[L+de],T=D[L+4+de],O=D[L+X+de],A=D[L+X+4+de],q=E*(1-oe)*(1-fe)+T*oe*(1-fe)+O*fe*(1-oe)+A*oe*fe,H[I++]=q;return z},hermiteFastResize:function(y,_,x,S,b){for(var E=this.rcpScaleX,T=this.rcpScaleY,O=p(E/2),A=p(T/2),j=y.imageData,U=j.data,M=y.ctx.createImageData(S,b),re=M.data,oe=0;oe<b;oe++)for(var fe=0;fe<S;fe++){for(var de=(fe+oe*S)*4,q=0,I=0,L=0,B=0,F=0,X=0,N=0,D=(oe+.5)*T,z=d(oe*T);z<(oe+1)*T;z++)for(var H=a(D-(z+.5))/A,J=(fe+.5)*E,Y=H*H,te=d(fe*E);te<(fe+1)*E;te++){var ie=a(J-(te+.5))/O,le=o(Y+ie*ie);le>1&&le<-1||(q=2*le*le*le-3*le*le+1,q>0&&(ie=4*(te+z*_),N+=q*U[ie+3],L+=q,U[ie+3]<255&&(q=q*U[ie+3]/250),B+=q*U[ie],F+=q*U[ie+1],X+=q*U[ie+2],I+=q))}re[de]=B/I,re[de+1]=F/I,re[de+2]=X/I,re[de+3]=N/L}return M},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),r.Image.filters.Resize.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(h){var r=h.fabric||(h.fabric={}),f=r.Image.filters,d=r.util.createClass;f.Contrast=d(f.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(o){if(this.contrast!==0){var a=o.imageData,s,p,u=a.data,p=u.length,l=Math.floor(this.contrast*255),g=259*(l+255)/(255*(259-l));for(s=0;s<p;s+=4)u[s]=g*(u[s]-128)+128,u[s+1]=g*(u[s+1]-128)+128,u[s+2]=g*(u[s+2]-128)+128}},getUniformLocations:function(o,a){return{uContrast:o.getUniformLocation(a,"uContrast")}},sendUniformData:function(o,a){o.uniform1f(a.uContrast,this.contrast)}}),r.Image.filters.Contrast.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(h){var r=h.fabric||(h.fabric={}),f=r.Image.filters,d=r.util.createClass;f.Saturation=d(f.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(o){if(this.saturation!==0){var a=o.imageData,s=a.data,u=s.length,p=-this.saturation,l,g;for(l=0;l<u;l+=4)g=Math.max(s[l],s[l+1],s[l+2]),s[l]+=g!==s[l]?(g-s[l])*p:0,s[l+1]+=g!==s[l+1]?(g-s[l+1])*p:0,s[l+2]+=g!==s[l+2]?(g-s[l+2])*p:0}},getUniformLocations:function(o,a){return{uSaturation:o.getUniformLocation(a,"uSaturation")}},sendUniformData:function(o,a){o.uniform1f(a.uSaturation,-this.saturation)}}),r.Image.filters.Saturation.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(h){var r=h.fabric||(h.fabric={}),f=r.Image.filters,d=r.util.createClass;f.Vibrance=d(f.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(o){if(this.vibrance!==0){var a=o.imageData,s=a.data,u=s.length,p=-this.vibrance,l,g,y,_;for(l=0;l<u;l+=4)g=Math.max(s[l],s[l+1],s[l+2]),y=(s[l]+s[l+1]+s[l+2])/3,_=Math.abs(g-y)*2/255*p,s[l]+=g!==s[l]?(g-s[l])*_:0,s[l+1]+=g!==s[l+1]?(g-s[l+1])*_:0,s[l+2]+=g!==s[l+2]?(g-s[l+2])*_:0}},getUniformLocations:function(o,a){return{uVibrance:o.getUniformLocation(a,"uVibrance")}},sendUniformData:function(o,a){o.uniform1f(a.uVibrance,-this.vibrance)}}),r.Image.filters.Vibrance.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(h){var r=h.fabric||(h.fabric={}),f=r.Image.filters,d=r.util.createClass;f.Blur=d(f.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(o){o.webgl?(this.aspectRatio=o.sourceWidth/o.sourceHeight,o.passes++,this._setupFrameBuffer(o),this.horizontal=!0,this.applyToWebGL(o),this._swapTextures(o),this._setupFrameBuffer(o),this.horizontal=!1,this.applyToWebGL(o),this._swapTextures(o)):this.applyTo2d(o)},applyTo2d:function(o){o.imageData=this.simpleBlur(o)},simpleBlur:function(o){var a=o.filterBackend.resources,s,u,p=o.imageData.width,l=o.imageData.height;a.blurLayer1||(a.blurLayer1=r.util.createCanvasElement(),a.blurLayer2=r.util.createCanvasElement()),s=a.blurLayer1,u=a.blurLayer2,(s.width!==p||s.height!==l)&&(u.width=s.width=p,u.height=s.height=l);var g=s.getContext("2d"),y=u.getContext("2d"),_=15,x,S,b,E,T=this.blur*.06*.5;for(g.putImageData(o.imageData,0,0),y.clearRect(0,0,p,l),E=-_;E<=_;E++)x=(Math.random()-.5)/4,S=E/_,b=T*S*p+x,y.globalAlpha=1-Math.abs(S),y.drawImage(s,b,x),g.drawImage(u,0,0),y.globalAlpha=1,y.clearRect(0,0,u.width,u.height);for(E=-_;E<=_;E++)x=(Math.random()-.5)/4,S=E/_,b=T*S*l+x,y.globalAlpha=1-Math.abs(S),y.drawImage(s,x,b),g.drawImage(u,0,0),y.globalAlpha=1,y.clearRect(0,0,u.width,u.height);o.ctx.drawImage(s,0,0);var O=o.ctx.getImageData(0,0,s.width,s.height);return g.globalAlpha=1,g.clearRect(0,0,s.width,s.height),O},getUniformLocations:function(o,a){return{delta:o.getUniformLocation(a,"uDelta")}},sendUniformData:function(o,a){var s=this.chooseRightDelta();o.uniform2fv(a.delta,s)},chooseRightDelta:function(){var o=1,a=[0,0],s;return this.horizontal?this.aspectRatio>1&&(o=1/this.aspectRatio):this.aspectRatio<1&&(o=this.aspectRatio),s=o*this.blur*.12,this.horizontal?a[0]=s:a[1]=s,a}}),f.Blur.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(h){var r=h.fabric||(h.fabric={}),f=r.Image.filters,d=r.util.createClass;f.Gamma=d(f.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(o){this.gamma=[1,1,1],f.BaseFilter.prototype.initialize.call(this,o)},applyTo2d:function(o){var a=o.imageData,s=a.data,u=this.gamma,p=s.length,l=1/u[0],g=1/u[1],y=1/u[2],_;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),_=0,p=256;_<p;_++)this.rVals[_]=Math.pow(_/255,l)*255,this.gVals[_]=Math.pow(_/255,g)*255,this.bVals[_]=Math.pow(_/255,y)*255;for(_=0,p=s.length;_<p;_+=4)s[_]=this.rVals[s[_]],s[_+1]=this.gVals[s[_+1]],s[_+2]=this.bVals[s[_+2]]},getUniformLocations:function(o,a){return{uGamma:o.getUniformLocation(a,"uGamma")}},sendUniformData:function(o,a){o.uniform3fv(a.uGamma,this.gamma)}}),r.Image.filters.Gamma.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(h){var r=h.fabric||(h.fabric={}),f=r.Image.filters,d=r.util.createClass;f.Composed=d(f.BaseFilter,{type:"Composed",subFilters:[],initialize:function(o){this.callSuper("initialize",o),this.subFilters=this.subFilters.slice(0)},applyTo:function(o){o.passes+=this.subFilters.length-1,this.subFilters.forEach(function(a){a.applyTo(o)})},toObject:function(){return r.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(o){return o.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(o){return!o.isNeutralState()})}}),r.Image.filters.Composed.fromObject=function(o,a){var s=o.subFilters||[],u=s.map(function(l){return new r.Image.filters[l.type](l)}),p=new r.Image.filters.Composed({subFilters:u});return a&&a(p),p}}(t),function(h){var r=h.fabric||(h.fabric={}),f=r.Image.filters,d=r.util.createClass;f.HueRotation=d(f.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var o=this.rotation*Math.PI,a=r.util.cos(o),s=r.util.sin(o),u=1/3,p=Math.sqrt(u)*s,l=1-a;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=a+l/3,this.matrix[1]=u*l-p,this.matrix[2]=u*l+p,this.matrix[5]=u*l+p,this.matrix[6]=a+u*l,this.matrix[7]=u*l-p,this.matrix[10]=u*l-p,this.matrix[11]=u*l+p,this.matrix[12]=a+u*l},isNeutralState:function(o){return this.calculateMatrix(),f.BaseFilter.prototype.isNeutralState.call(this,o)},applyTo:function(o){this.calculateMatrix(),f.BaseFilter.prototype.applyTo.call(this,o)}}),r.Image.filters.HueRotation.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(h){var r=h.fabric||(h.fabric={}),f=r.util.object.clone;if(r.Text){r.warn("fabric.Text is already defined");return}var d="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");r.Text=r.util.createClass(r.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:r.Object.prototype.stateProperties.concat(d),cacheProperties:r.Object.prototype.cacheProperties.concat(d),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(o,a){this.styles=a?a.styles||{}:{},this.text=o,this.__skipDimension=!0,this.callSuper("initialize",a),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var o=this.path;o&&(o.segmentsInfo=r.util.getPathSegmentsInfo(o.path))},getMeasuringContext:function(){return r._measuringContext||(r._measuringContext=this.canvas&&this.canvas.contextCache||r.util.createCanvasElement().getContext("2d")),r._measuringContext},_splitText:function(){var o=this._splitTextIntoLines(this.text);return this.textLines=o.lines,this._textLines=o.graphemeLines,this._unwrappedTextLines=o._unwrappedLines,this._text=o.graphemeText,o},initDimensions:function(){if(!this.__skipDimension){if(this._splitText(),this._clearCache(),this.path){var o=this.getHeightOfLine(0)*1.1;this.width=this.path.width+o,this.height=this.path.height+o}else this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight();this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"})}},enlargeSpaces:function(){for(var o,a,s,u,p,l,g,y=0,_=this._textLines.length;y<_;y++)if(!(this.textAlign!=="justify"&&(y===_-1||this.isEndOfWrapping(y)))&&(u=0,p=this._textLines[y],a=this.getLineWidth(y),a<this.width&&(g=this.textLines[y].match(this._reSpacesAndTabs)))){s=g.length,o=(this.width-a)/s;for(var x=0,S=p.length;x<=S;x++)l=this.__charBounds[y][x],this._reSpaceAndTab.test(p[x])?(l.width+=o,l.kernedWidth+=o,l.left+=u,u+=o):l.left+=u}},isEndOfWrapping:function(o){return o===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var o=this.callSuper("_getCacheCanvasDimensions"),a=this.fontSize;return o.width+=a*o.zoomX,o.height+=a*o.zoomY,o},_render:function(o){var a=this.path;a&&!a.isNotVisible()&&a._render(o),this._setTextStyles(o),this._renderTextLinesBackground(o),this._renderTextDecoration(o,"underline"),this._renderText(o),this._renderTextDecoration(o,"overline"),this._renderTextDecoration(o,"linethrough")},_renderText:function(o){this.paintFirst==="stroke"?(this._renderTextStroke(o),this._renderTextFill(o)):(this._renderTextFill(o),this._renderTextStroke(o))},_setTextStyles:function(o,a,s){if(o.textBaseline="alphabetic",this.path)switch(this.pathAlign){case"center":o.textBaseline="middle";break;case"ascender":o.textBaseline="top";break;case"descender":o.textBaseline="bottom";break}o.font=this._getFontDeclaration(a,s)},calcTextWidth:function(){for(var o=this.getLineWidth(0),a=1,s=this._textLines.length;a<s;a++){var u=this.getLineWidth(a);u>o&&(o=u)}return o},_renderTextLine:function(o,a,s,u,p,l){this._renderChars(o,a,s,u,p,l)},_renderTextLinesBackground:function(o){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var a,s,u=o.fillStyle,p,l,g=this._getLeftOffset(),y=this._getTopOffset(),_=0,x=0,S,b,E=this.path,T,O=0,A=this._textLines.length;O<A;O++){if(a=this.getHeightOfLine(O),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",O)){y+=a;continue}p=this._textLines[O],s=this._getLineLeftOffset(O),x=0,_=0,l=this.getValueOfPropertyAt(O,0,"textBackgroundColor");for(var j=0,U=p.length;j<U;j++)S=this.__charBounds[O][j],b=this.getValueOfPropertyAt(O,j,"textBackgroundColor"),E?(o.save(),o.translate(S.renderLeft,S.renderTop),o.rotate(S.angle),o.fillStyle=b,b&&o.fillRect(-S.width/2,-a/this.lineHeight*(1-this._fontSizeFraction),S.width,a/this.lineHeight),o.restore()):b!==l?(T=g+s+_,this.direction==="rtl"&&(T=this.width-T-x),o.fillStyle=l,l&&o.fillRect(T,y,x,a/this.lineHeight),_=S.left,x=S.width,l=b):x+=S.kernedWidth;b&&!E&&(T=g+s+_,this.direction==="rtl"&&(T=this.width-T-x),o.fillStyle=b,o.fillRect(T,y,x,a/this.lineHeight)),y+=a}o.fillStyle=u,this._removeShadow(o)}},getFontCache:function(o){var a=o.fontFamily.toLowerCase();r.charWidthsCache[a]||(r.charWidthsCache[a]={});var s=r.charWidthsCache[a],u=o.fontStyle.toLowerCase()+"_"+(o.fontWeight+"").toLowerCase();return s[u]||(s[u]={}),s[u]},_measureChar:function(o,a,s,u){var p=this.getFontCache(a),l=this._getFontDeclaration(a),g=this._getFontDeclaration(u),y=s+o,_=l===g,x,S,b,E=a.fontSize/this.CACHE_FONT_SIZE,T;if(s&&p[s]!==void 0&&(b=p[s]),p[o]!==void 0&&(T=x=p[o]),_&&p[y]!==void 0&&(S=p[y],T=S-b),x===void 0||b===void 0||S===void 0){var O=this.getMeasuringContext();this._setTextStyles(O,a,!0)}return x===void 0&&(T=x=O.measureText(o).width,p[o]=x),b===void 0&&_&&s&&(b=O.measureText(s).width,p[s]=b),_&&S===void 0&&(S=O.measureText(y).width,p[y]=S,T=S-b),{width:x*E,kernedWidth:T*E}},getHeightOfChar:function(o,a){return this.getValueOfPropertyAt(o,a,"fontSize")},measureLine:function(o){var a=this._measureLine(o);return this.charSpacing!==0&&(a.width-=this._getWidthOfCharSpacing()),a.width<0&&(a.width=0),a},_measureLine:function(o){var a=0,s,u,p=this._textLines[o],l,g,y=0,_=new Array(p.length),x=0,S,b,E=this.path,T=this.pathSide==="right";for(this.__charBounds[o]=_,s=0;s<p.length;s++)u=p[s],g=this._getGraphemeBox(u,o,s,l),_[s]=g,a+=g.kernedWidth,l=u;if(_[s]={left:g?g.left+g.width:0,width:0,kernedWidth:0,height:this.fontSize},E){switch(b=E.segmentsInfo[E.segmentsInfo.length-1].length,S=r.util.getPointOnPath(E.path,0,E.segmentsInfo),S.x+=E.pathOffset.x,S.y+=E.pathOffset.y,this.textAlign){case"left":x=T?b-a:0;break;case"center":x=(b-a)/2;break;case"right":x=T?0:b-a;break}for(x+=this.pathStartOffset*(T?-1:1),s=T?p.length-1:0;T?s>=0:s<p.length;T?s--:s++)g=_[s],x>b?x%=b:x<0&&(x+=b),this._setGraphemeOnPath(x,g,S),x+=g.kernedWidth}return{width:a,numOfSpaces:y}},_setGraphemeOnPath:function(o,a,s){var u=o+a.kernedWidth/2,p=this.path,l=r.util.getPointOnPath(p.path,u,p.segmentsInfo);a.renderLeft=l.x-s.x,a.renderTop=l.y-s.y,a.angle=l.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(o,a,s,u,p){var l=this.getCompleteStyleDeclaration(a,s),g=u?this.getCompleteStyleDeclaration(a,s-1):{},y=this._measureChar(o,l,u,g),_=y.kernedWidth,x=y.width,S;this.charSpacing!==0&&(S=this._getWidthOfCharSpacing(),x+=S,_+=S);var b={width:x,left:0,height:l.fontSize,kernedWidth:_,deltaY:l.deltaY};if(s>0&&!p){var E=this.__charBounds[a][s-1];b.left=E.left+E.width+y.kernedWidth-y.width}return b},getHeightOfLine:function(o){if(this.__lineHeights[o])return this.__lineHeights[o];for(var a=this._textLines[o],s=this.getHeightOfChar(o,0),u=1,p=a.length;u<p;u++)s=Math.max(this.getHeightOfChar(o,u),s);return this.__lineHeights[o]=s*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var o,a=0,s=0,u=this._textLines.length;s<u;s++)o=this.getHeightOfLine(s),a+=s===u-1?o/this.lineHeight:o;return a},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(o,a){o.save();for(var s=0,u=this._getLeftOffset(),p=this._getTopOffset(),l=0,g=this._textLines.length;l<g;l++){var y=this.getHeightOfLine(l),_=y/this.lineHeight,x=this._getLineLeftOffset(l);this._renderTextLine(a,o,this._textLines[l],u+x,p+s+_,l),s+=y}o.restore()},_renderTextFill:function(o){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(o,"fillText")},_renderTextStroke:function(o){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(o),o.save(),this._setLineDash(o,this.strokeDashArray),o.beginPath(),this._renderTextCommon(o,"strokeText"),o.closePath(),o.restore())},_renderChars:function(o,a,s,u,p,l){var g=this.getHeightOfLine(l),y=this.textAlign.indexOf("justify")!==-1,_,x,S="",b,E=0,T,O=this.path,A=!y&&this.charSpacing===0&&this.isEmptyStyles(l)&&!O,j=this.direction==="ltr",U=this.direction==="ltr"?1:-1,M,re=a.canvas.getAttribute("dir");if(a.save(),re!==this.direction&&(a.canvas.setAttribute("dir",j?"ltr":"rtl"),a.direction=j?"ltr":"rtl",a.textAlign=j?"left":"right"),p-=g*this._fontSizeFraction/this.lineHeight,A){this._renderChar(o,a,l,0,s.join(""),u,p,g),a.restore();return}for(var oe=0,fe=s.length-1;oe<=fe;oe++)T=oe===fe||this.charSpacing||O,S+=s[oe],b=this.__charBounds[l][oe],E===0?(u+=U*(b.kernedWidth-b.width),E+=b.width):E+=b.kernedWidth,y&&!T&&this._reSpaceAndTab.test(s[oe])&&(T=!0),T||(_=_||this.getCompleteStyleDeclaration(l,oe),x=this.getCompleteStyleDeclaration(l,oe+1),T=r.util.hasStyleChanged(_,x,!1)),T&&(O?(a.save(),a.translate(b.renderLeft,b.renderTop),a.rotate(b.angle),this._renderChar(o,a,l,oe,S,-E/2,0,g),a.restore()):(M=u,this._renderChar(o,a,l,oe,S,M,p,g)),S="",_=x,u+=U*E,E=0);a.restore()},_applyPatternGradientTransformText:function(o){var a=r.util.createCanvasElement(),s,u=this.width+this.strokeWidth,p=this.height+this.strokeWidth;return a.width=u,a.height=p,s=a.getContext("2d"),s.beginPath(),s.moveTo(0,0),s.lineTo(u,0),s.lineTo(u,p),s.lineTo(0,p),s.closePath(),s.translate(u/2,p/2),s.fillStyle=o.toLive(s),this._applyPatternGradientTransform(s,o),s.fill(),s.createPattern(a,"no-repeat")},handleFiller:function(o,a,s){var u,p;return s.toLive?s.gradientUnits==="percentage"||s.gradientTransform||s.patternTransform?(u=-this.width/2,p=-this.height/2,o.translate(u,p),o[a]=this._applyPatternGradientTransformText(s),{offsetX:u,offsetY:p}):(o[a]=s.toLive(o,this),this._applyPatternGradientTransform(o,s)):(o[a]=s,{offsetX:0,offsetY:0})},_setStrokeStyles:function(o,a){return o.lineWidth=a.strokeWidth,o.lineCap=this.strokeLineCap,o.lineDashOffset=this.strokeDashOffset,o.lineJoin=this.strokeLineJoin,o.miterLimit=this.strokeMiterLimit,this.handleFiller(o,"strokeStyle",a.stroke)},_setFillStyles:function(o,a){return this.handleFiller(o,"fillStyle",a.fill)},_renderChar:function(o,a,s,u,p,l,g){var y=this._getStyleDeclaration(s,u),_=this.getCompleteStyleDeclaration(s,u),x=o==="fillText"&&_.fill,S=o==="strokeText"&&_.stroke&&_.strokeWidth,b,E;!S&&!x||(a.save(),x&&(b=this._setFillStyles(a,_)),S&&(E=this._setStrokeStyles(a,_)),a.font=this._getFontDeclaration(_),y&&y.textBackgroundColor&&this._removeShadow(a),y&&y.deltaY&&(g+=y.deltaY),x&&a.fillText(p,l-b.offsetX,g-b.offsetY),S&&a.strokeText(p,l-E.offsetX,g-E.offsetY),a.restore())},setSuperscript:function(o,a){return this._setScript(o,a,this.superscript)},setSubscript:function(o,a){return this._setScript(o,a,this.subscript)},_setScript:function(o,a,s){var u=this.get2DCursorLocation(o,!0),p=this.getValueOfPropertyAt(u.lineIndex,u.charIndex,"fontSize"),l=this.getValueOfPropertyAt(u.lineIndex,u.charIndex,"deltaY"),g={fontSize:p*s.size,deltaY:l+p*s.baseline};return this.setSelectionStyles(g,o,a),this},_getLineLeftOffset:function(o){var a=this.getLineWidth(o),s=this.width-a,u=this.textAlign,p=this.direction,g,l=0,g=this.isEndOfWrapping(o);return u==="justify"||u==="justify-center"&&!g||u==="justify-right"&&!g||u==="justify-left"&&!g?0:(u==="center"&&(l=s/2),u==="right"&&(l=s),u==="justify-center"&&(l=s/2),u==="justify-right"&&(l=s),p==="rtl"&&(l-=s),l)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var o=this._forceClearCache;return o||(o=this.hasStateChanged("_dimensionAffectingProps")),o&&(this.dirty=!0,this._forceClearCache=!1),o},getLineWidth:function(o){if(this.__lineWidths[o]!==void 0)return this.__lineWidths[o];var a=this.measureLine(o),s=a.width;return this.__lineWidths[o]=s,s},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(o,a,s){var u=this._getStyleDeclaration(o,a);return u&&typeof u[s]<"u"?u[s]:this[s]},_renderTextDecoration:function(o,a){if(!(!this[a]&&!this.styleHas(a))){o.save(),(a==="overline"||a==="linethrough")&&this._removeShadow(o);for(var s,u,p,l,g,y,_,x,S=this._getLeftOffset(),b=this._getTopOffset(),E,T,O,A,j,U,M,re,oe=this.path,fe=this._getWidthOfCharSpacing(),de=this.offsets[a],q=0,I=this._textLines.length;q<I;q++){if(s=this.getHeightOfLine(q),!this[a]&&!this.styleHas(a,q)){b+=s;continue}_=this._textLines[q],U=s/this.lineHeight,l=this._getLineLeftOffset(q),T=0,O=0,x=this.getValueOfPropertyAt(q,0,a),re=this.getValueOfPropertyAt(q,0,"fill"),E=b+U*(1-this._fontSizeFraction),u=this.getHeightOfChar(q,0),g=this.getValueOfPropertyAt(q,0,"deltaY");for(var L=0,B=_.length;L<B;L++)if(A=this.__charBounds[q][L],j=this.getValueOfPropertyAt(q,L,a),M=this.getValueOfPropertyAt(q,L,"fill"),p=this.getHeightOfChar(q,L),y=this.getValueOfPropertyAt(q,L,"deltaY"),oe&&j&&M)o.save(),o.fillStyle=re,o.translate(A.renderLeft,A.renderTop),o.rotate(A.angle),o.fillRect(-A.kernedWidth/2,de*p+y,A.kernedWidth,this.fontSize/15),o.restore();else if((j!==x||M!==re||p!==u||y!==g)&&O>0){var F=S+l+T;this.direction==="rtl"&&(F=this.width-F-O),x&&re&&(o.fillStyle=re,o.fillRect(F,E+de*u+g,O,this.fontSize/15)),T=A.left,O=A.width,x=j,re=M,u=p,g=y}else O+=A.kernedWidth;var F=S+l+T;this.direction==="rtl"&&(F=this.width-F-O),o.fillStyle=M,j&&M&&o.fillRect(F,E+de*u+g,O-fe,this.fontSize/15),b+=s}o.restore()}},_getFontDeclaration:function(o,a){var s=o||this,u=this.fontFamily,p=r.Text.genericFonts.indexOf(u.toLowerCase())>-1,l=u===void 0||u.indexOf("'")>-1||u.indexOf(",")>-1||u.indexOf('"')>-1||p?s.fontFamily:'"'+s.fontFamily+'"';return[r.isLikelyNode?s.fontWeight:s.fontStyle,r.isLikelyNode?s.fontStyle:s.fontWeight,a?this.CACHE_FONT_SIZE+"px":s.fontSize+"px",l].join(" ")},render:function(o){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",o)))},_splitTextIntoLines:function(o){for(var a=o.split(this._reNewline),s=new Array(a.length),u=[`
`],p=[],l=0;l<a.length;l++)s[l]=r.util.string.graphemeSplit(a[l]),p=p.concat(s[l],u);return p.pop(),{_unwrappedLines:s,lines:a,graphemeText:p,graphemeLines:s}},toObject:function(o){var a=d.concat(o),s=this.callSuper("toObject",a);return s.styles=r.util.stylesToArray(this.styles,this.text),s.path&&(s.path=this.path.toObject()),s},set:function(o,a){this.callSuper("set",o,a);var s=!1,u=!1;if(typeof o=="object")for(var p in o)p==="path"&&this.setPathInfo(),s=s||this._dimensionAffectingProps.indexOf(p)!==-1,u=u||p==="path";else s=this._dimensionAffectingProps.indexOf(o)!==-1,u=o==="path";return u&&this.setPathInfo(),s&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),r.Text.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),r.Text.DEFAULT_SVG_FONT_SIZE=16,r.Text.fromElement=function(o,a,s){if(!o)return a(null);var u=r.parseAttributes(o,r.Text.ATTRIBUTE_NAMES),p=u.textAnchor||"left";if(s=r.util.object.extend(s?f(s):{},u),s.top=s.top||0,s.left=s.left||0,u.textDecoration){var l=u.textDecoration;l.indexOf("underline")!==-1&&(s.underline=!0),l.indexOf("overline")!==-1&&(s.overline=!0),l.indexOf("line-through")!==-1&&(s.linethrough=!0),delete s.textDecoration}"dx"in u&&(s.left+=u.dx),"dy"in u&&(s.top+=u.dy),"fontSize"in s||(s.fontSize=r.Text.DEFAULT_SVG_FONT_SIZE);var g="";"textContent"in o?g=o.textContent:"firstChild"in o&&o.firstChild!==null&&"data"in o.firstChild&&o.firstChild.data!==null&&(g=o.firstChild.data),g=g.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var y=s.strokeWidth;s.strokeWidth=0;var _=new r.Text(g,s),x=_.getScaledHeight()/_.height,S=(_.height+_.strokeWidth)*_.lineHeight-_.height,b=S*x,E=_.getScaledHeight()+b,T=0;p==="center"&&(T=_.getScaledWidth()/2),p==="right"&&(T=_.getScaledWidth()),_.set({left:_.left-T,top:_.top-(E-_.fontSize*(.07+_._fontSizeFraction))/_.lineHeight,strokeWidth:typeof y<"u"?y:1}),a(_)},r.Text.fromObject=function(o,a){var s=f(o),u=o.path;return delete s.path,r.Object._fromObject("Text",s,function(p){p.styles=r.util.stylesFromArray(o.styles,o.text),u?r.Object._fromObject("Path",u,function(l){p.set("path",l),a(p)},"path"):a(p)},"text")},r.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],r.util.createAccessors&&r.util.createAccessors(r.Text)}(t),function(){e.util.object.extend(e.Text.prototype,{isEmptyStyles:function(h){if(!this.styles||typeof h<"u"&&!this.styles[h])return!0;var r=typeof h>"u"?this.styles:{line:this.styles[h]};for(var f in r)for(var d in r[f])for(var o in r[f][d])return!1;return!0},styleHas:function(h,r){if(!this.styles||!h||h===""||typeof r<"u"&&!this.styles[r])return!1;var f=typeof r>"u"?this.styles:{0:this.styles[r]};for(var d in f)for(var o in f[d])if(typeof f[d][o][h]<"u")return!0;return!1},cleanStyle:function(h){if(!this.styles||!h||h==="")return!1;var r=this.styles,f=0,d,o,a=!0,s=0,u;for(var p in r){d=0;for(var l in r[p]){var u=r[p][l],g=u.hasOwnProperty(h);f++,g?(o?u[h]!==o&&(a=!1):o=u[h],u[h]===this[h]&&delete u[h]):a=!1,Object.keys(u).length!==0?d++:delete r[p][l]}d===0&&delete r[p]}for(var y=0;y<this._textLines.length;y++)s+=this._textLines[y].length;a&&f===s&&(this[h]=o,this.removeStyle(h))},removeStyle:function(h){if(!(!this.styles||!h||h==="")){var r=this.styles,f,d,o;for(d in r){f=r[d];for(o in f)delete f[o][h],Object.keys(f[o]).length===0&&delete f[o];Object.keys(f).length===0&&delete r[d]}}},_extendStyles:function(h,r){var f=this.get2DCursorLocation(h);this._getLineStyle(f.lineIndex)||this._setLineStyle(f.lineIndex),this._getStyleDeclaration(f.lineIndex,f.charIndex)||this._setStyleDeclaration(f.lineIndex,f.charIndex,{}),e.util.object.extend(this._getStyleDeclaration(f.lineIndex,f.charIndex),r)},get2DCursorLocation:function(h,r){typeof h>"u"&&(h=this.selectionStart);for(var f=r?this._unwrappedTextLines:this._textLines,d=f.length,o=0;o<d;o++){if(h<=f[o].length)return{lineIndex:o,charIndex:h};h-=f[o].length+this.missingNewlineOffset(o,r)}return{lineIndex:o-1,charIndex:f[o-1].length<h?f[o-1].length:h}},getSelectionStyles:function(h,r,f){typeof h>"u"&&(h=this.selectionStart||0),typeof r>"u"&&(r=this.selectionEnd||h);for(var d=[],o=h;o<r;o++)d.push(this.getStyleAtPosition(o,f));return d},getStyleAtPosition:function(h,r){var f=this.get2DCursorLocation(h),d=r?this.getCompleteStyleDeclaration(f.lineIndex,f.charIndex):this._getStyleDeclaration(f.lineIndex,f.charIndex);return d||{}},setSelectionStyles:function(h,r,f){typeof r>"u"&&(r=this.selectionStart||0),typeof f>"u"&&(f=this.selectionEnd||r);for(var d=r;d<f;d++)this._extendStyles(d,h);return this._forceClearCache=!0,this},_getStyleDeclaration:function(h,r){var f=this.styles&&this.styles[h];return f?f[r]:null},getCompleteStyleDeclaration:function(h,r){for(var f=this._getStyleDeclaration(h,r)||{},d={},o,a=0;a<this._styleProperties.length;a++)o=this._styleProperties[a],d[o]=typeof f[o]>"u"?this[o]:f[o];return d},_setStyleDeclaration:function(h,r,f){this.styles[h][r]=f},_deleteStyleDeclaration:function(h,r){delete this.styles[h][r]},_getLineStyle:function(h){return!!this.styles[h]},_setLineStyle:function(h){this.styles[h]={}},_deleteLineStyle:function(h){delete this.styles[h]}})}(),function(){function h(r){r.textDecoration&&(r.textDecoration.indexOf("underline")>-1&&(r.underline=!0),r.textDecoration.indexOf("line-through")>-1&&(r.linethrough=!0),r.textDecoration.indexOf("overline")>-1&&(r.overline=!0),delete r.textDecoration)}e.IText=e.util.createClass(e.Text,e.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(r,f){this.callSuper("initialize",r,f),this.initBehavior()},setSelectionStart:function(r){r=Math.max(r,0),this._updateAndFire("selectionStart",r)},setSelectionEnd:function(r){r=Math.min(r,this.text.length),this._updateAndFire("selectionEnd",r)},_updateAndFire:function(r,f){this[r]!==f&&(this._fireSelectionChanged(),this[r]=f),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(r){this.clearContextTop(),this.callSuper("render",r),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(r){this.callSuper("_render",r)},clearContextTop:function(r){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var f=this.canvas.contextTop,d=this.canvas.viewportTransform;f.save(),f.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this.transform(f),this._clearTextArea(f),r||f.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var r=this._getCursorBoundaries(),f=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(r,f):this.renderSelection(r,f),f.restore()}},_clearTextArea:function(r){var f=this.width+4,d=this.height+4;r.clearRect(-f/2,-d/2,f,d)},_getCursorBoundaries:function(r){typeof r>"u"&&(r=this.selectionStart);var f=this._getLeftOffset(),d=this._getTopOffset(),o=this._getCursorBoundariesOffsets(r);return{left:f,top:d,leftOffset:o.left,topOffset:o.top}},_getCursorBoundariesOffsets:function(r){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var f,d,o,a=0,s=0,u,p=this.get2DCursorLocation(r);o=p.charIndex,d=p.lineIndex;for(var l=0;l<d;l++)a+=this.getHeightOfLine(l);f=this._getLineLeftOffset(d);var g=this.__charBounds[d][o];return g&&(s=g.left),this.charSpacing!==0&&o===this._textLines[d].length&&(s-=this._getWidthOfCharSpacing()),u={top:a,left:f+(s>0?s:0)},this.direction==="rtl"&&(u.left*=-1),this.cursorOffsetCache=u,this.cursorOffsetCache},renderCursor:function(r,f){var d=this.get2DCursorLocation(),o=d.lineIndex,a=d.charIndex>0?d.charIndex-1:0,s=this.getValueOfPropertyAt(o,a,"fontSize"),u=this.scaleX*this.canvas.getZoom(),p=this.cursorWidth/u,l=r.topOffset,g=this.getValueOfPropertyAt(o,a,"deltaY");l+=(1-this._fontSizeFraction)*this.getHeightOfLine(o)/this.lineHeight-s*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(r,f),f.fillStyle=this.cursorColor||this.getValueOfPropertyAt(o,a,"fill"),f.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,f.fillRect(r.left+r.leftOffset-p/2,l+r.top+g,p,s)},renderSelection:function(r,f){for(var d=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,o=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,a=this.textAlign.indexOf("justify")!==-1,s=this.get2DCursorLocation(d),u=this.get2DCursorLocation(o),p=s.lineIndex,l=u.lineIndex,g=s.charIndex<0?0:s.charIndex,y=u.charIndex<0?0:u.charIndex,_=p;_<=l;_++){var x=this._getLineLeftOffset(_)||0,S=this.getHeightOfLine(_),b=0,E=0,T=0;if(_===p&&(E=this.__charBounds[p][g].left),_>=p&&_<l)T=a&&!this.isEndOfWrapping(_)?this.width:this.getLineWidth(_)||5;else if(_===l)if(y===0)T=this.__charBounds[l][y].left;else{var O=this._getWidthOfCharSpacing();T=this.__charBounds[l][y-1].left+this.__charBounds[l][y-1].width-O}b=S,(this.lineHeight<1||_===l&&this.lineHeight>1)&&(S/=this.lineHeight);var A=r.left+x+E,j=T-E,U=S,M=0;this.inCompositionMode?(f.fillStyle=this.compositionColor||"black",U=1,M=S):f.fillStyle=this.selectionColor,this.direction==="rtl"&&(A=this.width-A-j),f.fillRect(A,r.top+r.topOffset+M,j,U),r.topOffset+=b}},getCurrentCharFontSize:function(){var r=this._getCurrentCharIndex();return this.getValueOfPropertyAt(r.l,r.c,"fontSize")},getCurrentCharColor:function(){var r=this._getCurrentCharIndex();return this.getValueOfPropertyAt(r.l,r.c,"fill")},_getCurrentCharIndex:function(){var r=this.get2DCursorLocation(this.selectionStart,!0),f=r.charIndex>0?r.charIndex-1:0;return{l:r.lineIndex,c:f}}}),e.IText.fromObject=function(r,f){var d=e.util.stylesFromArray(r.styles,r.text),o=Object.assign({},r,{styles:d});if(delete o.path,h(o),o.styles)for(var a in o.styles)for(var s in o.styles[a])h(o.styles[a][s]);e.Object._fromObject("IText",o,function(u){r.path?e.Object._fromObject("Path",r.path,function(p){u.set("path",p),f(u)},"path"):f(u)},"text")}}(),function(){var h=e.util.object.clone;e.util.object.extend(e.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var r=this;this.on("added",function(){var f=r.canvas;f&&(f._hasITextHandlers||(f._hasITextHandlers=!0,r._initCanvasHandlers(f)),f._iTextInstances=f._iTextInstances||[],f._iTextInstances.push(r))})},initRemovedHandler:function(){var r=this;this.on("removed",function(){var f=r.canvas;f&&(f._iTextInstances=f._iTextInstances||[],e.util.removeFromArray(f._iTextInstances,r),f._iTextInstances.length===0&&(f._hasITextHandlers=!1,r._removeCanvasHandlers(f)))})},_initCanvasHandlers:function(r){r._mouseUpITextHandler=function(){r._iTextInstances&&r._iTextInstances.forEach(function(f){f.__isMousedown=!1})},r.on("mouse:up",r._mouseUpITextHandler)},_removeCanvasHandlers:function(r){r.off("mouse:up",r._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(r,f,d,o){var a;return a={isAborted:!1,abort:function(){this.isAborted=!0}},r.animate("_currentCursorOpacity",f,{duration:d,onComplete:function(){a.isAborted||r[o]()},onChange:function(){r.canvas&&r.selectionStart===r.selectionEnd&&r.renderCursorOrSelection()},abort:function(){return a.isAborted}}),a},_onTickComplete:function(){var r=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){r._currentTickCompleteState=r._animateCursor(r,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(r){var f=this,d=r?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){f._tick()},d)},abortCursorAnimation:function(){var r=this._currentTickState||this._currentTickCompleteState,f=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,r&&f&&f.clearContext(f.contextTop||f.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(r){var f=0,d=r-1;if(this._reSpace.test(this._text[d]))for(;this._reSpace.test(this._text[d]);)f++,d--;for(;/\S/.test(this._text[d])&&d>-1;)f++,d--;return r-f},findWordBoundaryRight:function(r){var f=0,d=r;if(this._reSpace.test(this._text[d]))for(;this._reSpace.test(this._text[d]);)f++,d++;for(;/\S/.test(this._text[d])&&d<this._text.length;)f++,d++;return r+f},findLineBoundaryLeft:function(r){for(var f=0,d=r-1;!/\n/.test(this._text[d])&&d>-1;)f++,d--;return r-f},findLineBoundaryRight:function(r){for(var f=0,d=r;!/\n/.test(this._text[d])&&d<this._text.length;)f++,d++;return r+f},searchWordBoundary:function(r,f){for(var d=this._text,o=this._reSpace.test(d[r])?r-1:r,a=d[o],s=e.reNonWord;!s.test(a)&&o>0&&o<d.length;)o+=f,a=d[o];return s.test(a)&&(o+=f===1?0:1),o},selectWord:function(r){r=r||this.selectionStart;var f=this.searchWordBoundary(r,-1),d=this.searchWordBoundary(r,1);this.selectionStart=f,this.selectionEnd=d,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(r){r=r||this.selectionStart;var f=this.findLineBoundaryLeft(r),d=this.findLineBoundaryRight(r);return this.selectionStart=f,this.selectionEnd=d,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(r){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(r),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(r){r._iTextInstances&&r._iTextInstances.forEach(function(f){f.selected=!1,f.isEditing&&f.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(r){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var f=this.getSelectionStartFromPointer(r.e),d=this.selectionStart,o=this.selectionEnd;(f!==this.__selectionStartOnMouseDown||d===o)&&(d===f||o===f)||(f>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=f):(this.selectionStart=f,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==d||this.selectionEnd!==o)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(r,f,d){var o=d.slice(0,r),a=e.util.string.graphemeSplit(o).length;if(r===f)return{selectionStart:a,selectionEnd:a};var s=d.slice(r,f),u=e.util.string.graphemeSplit(s).length;return{selectionStart:a,selectionEnd:a+u}},fromGraphemeToStringSelection:function(r,f,d){var o=d.slice(0,r),a=o.join("").length;if(r===f)return{selectionStart:a,selectionEnd:a};var s=d.slice(r,f),u=s.join("").length;return{selectionStart:a,selectionEnd:a+u}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var r=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=r.selectionStart,this.hiddenTextarea.selectionEnd=r.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var r=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=r.selectionEnd,this.inCompositionMode||(this.selectionStart=r.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var r=this._calcTextareaPosition();this.hiddenTextarea.style.left=r.left,this.hiddenTextarea.style.top=r.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var r=this.inCompositionMode?this.compositionStart:this.selectionStart,f=this._getCursorBoundaries(r),d=this.get2DCursorLocation(r),o=d.lineIndex,a=d.charIndex,s=this.getValueOfPropertyAt(o,a,"fontSize")*this.lineHeight,u=f.leftOffset,p=this.calcTransformMatrix(),l={x:f.left+u,y:f.top+f.topOffset+s},g=this.canvas.getRetinaScaling(),y=this.canvas.upperCanvasEl,_=y.width/g,x=y.height/g,S=_-s,b=x-s,E=y.clientWidth/_,T=y.clientHeight/x;return l=e.util.transformPoint(l,p),l=e.util.transformPoint(l,this.canvas.viewportTransform),l.x*=E,l.y*=T,l.x<0&&(l.x=0),l.x>S&&(l.x=S),l.y<0&&(l.y=0),l.y>b&&(l.y=b),l.x+=this.canvas._offset.left,l.y+=this.canvas._offset.top,{left:l.x+"px",top:l.y+"px",fontSize:s+"px",charHeight:s}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var r=this._textBeforeEdit!==this.text,f=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,f&&(f.blur&&f.blur(),f.parentNode&&f.parentNode.removeChild(f)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),r&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),r&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var r in this.styles)this._textLines[r]||delete this.styles[r]},removeStyleFromTo:function(r,f){var d=this.get2DCursorLocation(r,!0),o=this.get2DCursorLocation(f,!0),a=d.lineIndex,s=d.charIndex,u=o.lineIndex,p=o.charIndex,l,g;if(a!==u){if(this.styles[a])for(l=s;l<this._unwrappedTextLines[a].length;l++)delete this.styles[a][l];if(this.styles[u])for(l=p;l<this._unwrappedTextLines[u].length;l++)g=this.styles[u][l],g&&(this.styles[a]||(this.styles[a]={}),this.styles[a][s+l-p]=g);for(l=a+1;l<=u;l++)delete this.styles[l];this.shiftLineStyles(u,a-u)}else if(this.styles[a]){g=this.styles[a];var y=p-s,_,x;for(l=s;l<p;l++)delete g[l];for(x in this.styles[a])_=parseInt(x,10),_>=p&&(g[_-y]=g[x],delete g[x])}},shiftLineStyles:function(r,f){var d=h(this.styles);for(var o in this.styles){var a=parseInt(o,10);a>r&&(this.styles[a+f]=d[a],d[a-f]||delete this.styles[a])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(r,f,d,o){var a,s={},u=!1,p=this._unwrappedTextLines[r].length,l=p===f;d||(d=1),this.shiftLineStyles(r,d),this.styles[r]&&(a=this.styles[r][f===0?f:f-1]);for(var g in this.styles[r]){var y=parseInt(g,10);y>=f&&(u=!0,s[y-f]=this.styles[r][g],l&&f===0||delete this.styles[r][g])}var _=!1;for(u&&!l&&(this.styles[r+d]=s,_=!0),(_||p>f)&&d--;d>0;)o&&o[d-1]?this.styles[r+d]={0:h(o[d-1])}:a?this.styles[r+d]={0:h(a)}:delete this.styles[r+d],d--;this._forceClearCache=!0},insertCharStyleObject:function(r,f,d,o){this.styles||(this.styles={});var a=this.styles[r],s=a?h(a):{};d||(d=1);for(var u in s){var p=parseInt(u,10);p>=f&&(a[p+d]=s[p],s[p-d]||delete a[p])}if(this._forceClearCache=!0,o){for(;d--;)Object.keys(o[d]).length&&(this.styles[r]||(this.styles[r]={}),this.styles[r][f+d]=h(o[d]));return}if(a)for(var l=a[f?f-1:1];l&&d--;)this.styles[r][f+d]=h(l)},insertNewStyleBlock:function(r,f,d){for(var o=this.get2DCursorLocation(f,!0),a=[0],s=0,u=0;u<r.length;u++)r[u]===`
`?(s++,a[s]=0):a[s]++;a[0]>0&&(this.insertCharStyleObject(o.lineIndex,o.charIndex,a[0],d),d=d&&d.slice(a[0]+1)),s&&this.insertNewlineStyleObject(o.lineIndex,o.charIndex+a[0],s);for(var u=1;u<s;u++)a[u]>0?this.insertCharStyleObject(o.lineIndex+u,0,a[u],d):d&&this.styles[o.lineIndex+u]&&d[0]&&(this.styles[o.lineIndex+u][0]=d[0]),d=d&&d.slice(a[u]+1);a[u]>0&&this.insertCharStyleObject(o.lineIndex+u,0,a[u],d)},setSelectionStartEndWithShift:function(r,f,d){d<=r?(f===r?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=r),this.selectionStart=d):d>r&&d<f?this._selectionDirection==="right"?this.selectionEnd=d:this.selectionStart=d:(f===r?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=f),this.selectionEnd=d)},setSelectionInBoundaries:function(){var r=this.text.length;this.selectionStart>r?this.selectionStart=r:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>r?this.selectionEnd=r:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),e.util.object.extend(e.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(h){if(this.canvas){this.__newClickTime=+new Date;var r=h.pointer;this.isTripleClick(r)&&(this.fire("tripleclick",h),this._stopEvent(h.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=r,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(h){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===h.x&&this.__lastPointer.y===h.y},_stopEvent:function(h){h.preventDefault&&h.preventDefault(),h.stopPropagation&&h.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(h){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(h.e))},tripleClickHandler:function(h){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(h.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(h){!this.canvas||!this.editable||h.e.button&&h.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(h.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(h){!this.canvas||!this.editable||h.e.button&&h.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(h){if(this.__isMousedown=!1,!(!this.editable||this.group||h.transform&&h.transform.actionPerformed||h.e.button&&h.e.button!==1)){if(this.canvas){var r=this.canvas._activeObject;if(r&&r!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(h.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(h){var r=this.getSelectionStartFromPointer(h),f=this.selectionStart,d=this.selectionEnd;h.shiftKey?this.setSelectionStartEndWithShift(f,d,r):(this.selectionStart=r,this.selectionEnd=r),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(h){for(var r=this.getLocalPointer(h),f=0,d=0,o=0,a=0,s=0,u,p,l=0,g=this._textLines.length;l<g&&o<=r.y;l++)o+=this.getHeightOfLine(l)*this.scaleY,s=l,l>0&&(a+=this._textLines[l-1].length+this.missingNewlineOffset(l-1));u=this._getLineLeftOffset(s),d=u*this.scaleX,p=this._textLines[s],this.direction==="rtl"&&(r.x=this.width*this.scaleX-r.x+d);for(var y=0,_=p.length;y<_&&(f=d,d+=this.__charBounds[s][y].kernedWidth*this.scaleX,d<=r.x);y++)a++;return this._getNewSelectionStartFromOffset(r,f,d,a,_)},_getNewSelectionStartFromOffset:function(h,r,f,d,o){var a=h.x-r,s=f-h.x,u=s>a||s<0?0:1,p=d+u;return this.flipX&&(p=o-p),p>this._text.length&&(p=this._text.length),p}}),e.util.object.extend(e.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=e.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var h=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+h.top+"; left: "+h.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+h.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):e.document.body.appendChild(this.hiddenTextarea),e.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),e.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),e.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),e.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(e.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(h){if(this.isEditing){var r=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(h.keyCode in r)this[r[h.keyCode]](h);else if(h.keyCode in this.ctrlKeysMapDown&&(h.ctrlKey||h.metaKey))this[this.ctrlKeysMapDown[h.keyCode]](h);else return;h.stopImmediatePropagation(),h.preventDefault(),h.keyCode>=33&&h.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(h){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(h.keyCode in this.ctrlKeysMapUp&&(h.ctrlKey||h.metaKey))this[this.ctrlKeysMapUp[h.keyCode]](h);else return;h.stopImmediatePropagation(),h.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(h){var r=this.fromPaste;if(this.fromPaste=!1,h&&h.stopPropagation(),!!this.isEditing){var f=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,d=this._text.length,o=f.length,a,s,u=o-d,p=this.selectionStart,l=this.selectionEnd,g=p!==l,y,_,x;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var S=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),b=p>S.selectionStart;g?(a=this._text.slice(p,l),u+=l-p):o<d&&(b?a=this._text.slice(l+u,l):a=this._text.slice(p,p-u)),s=f.slice(S.selectionEnd-u,S.selectionEnd),a&&a.length&&(s.length&&(y=this.getSelectionStyles(p,p+1,!1),y=s.map(function(){return y[0]})),g?(_=p,x=l):b?(_=l-a.length,x=l):(_=l,x=l+a.length),this.removeStyleFromTo(_,x)),s.length&&(r&&s.join("")===e.copiedText&&!e.disableStyleCopyPaste&&(y=e.copiedTextStyle),this.insertNewStyleBlock(s,p,y)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(h){this.compositionStart=h.target.selectionStart,this.compositionEnd=h.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(e.copiedText=this.getSelectedText(),e.disableStyleCopyPaste?e.copiedTextStyle=null:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(h){return h&&h.clipboardData||e.window.clipboardData},_getWidthBeforeCursor:function(h,r){var f=this._getLineLeftOffset(h),d;return r>0&&(d=this.__charBounds[h][r-1],f+=d.left+d.width),f},getDownCursorOffset:function(h,r){var f=this._getSelectionForOffset(h,r),d=this.get2DCursorLocation(f),o=d.lineIndex;if(o===this._textLines.length-1||h.metaKey||h.keyCode===34)return this._text.length-f;var a=d.charIndex,s=this._getWidthBeforeCursor(o,a),u=this._getIndexOnLine(o+1,s),p=this._textLines[o].slice(a);return p.length+u+1+this.missingNewlineOffset(o)},_getSelectionForOffset:function(h,r){return h.shiftKey&&this.selectionStart!==this.selectionEnd&&r?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(h,r){var f=this._getSelectionForOffset(h,r),d=this.get2DCursorLocation(f),o=d.lineIndex;if(o===0||h.metaKey||h.keyCode===33)return-f;var a=d.charIndex,s=this._getWidthBeforeCursor(o,a),u=this._getIndexOnLine(o-1,s),p=this._textLines[o].slice(0,a),l=this.missingNewlineOffset(o-1);return-this._textLines[o-1].length+u-p.length+(1-l)},_getIndexOnLine:function(h,r){for(var f=this._textLines[h],d=this._getLineLeftOffset(h),o=d,a=0,s,u,p=0,l=f.length;p<l;p++)if(s=this.__charBounds[h][p].width,o+=s,o>r){u=!0;var g=o-s,y=o,_=Math.abs(g-r),x=Math.abs(y-r);a=x<_?p:p-1;break}return u||(a=f.length-1),a},moveCursorDown:function(h){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",h)},moveCursorUp:function(h){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",h)},_moveCursorUpOrDown:function(h,r){var f="get"+h+"CursorOffset",d=this[f](r,this._selectionDirection==="right");r.shiftKey?this.moveCursorWithShift(d):this.moveCursorWithoutShift(d),d!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(h){var r=this._selectionDirection==="left"?this.selectionStart+h:this.selectionEnd+h;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,r),h!==0},moveCursorWithoutShift:function(h){return h<0?(this.selectionStart+=h,this.selectionEnd=this.selectionStart):(this.selectionEnd+=h,this.selectionStart=this.selectionEnd),h!==0},moveCursorLeft:function(h){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",h)},_move:function(h,r,f){var d;if(h.altKey)d=this["findWordBoundary"+f](this[r]);else if(h.metaKey||h.keyCode===35||h.keyCode===36)d=this["findLineBoundary"+f](this[r]);else return this[r]+=f==="Left"?-1:1,!0;if(typeof d<"u"&&this[r]!==d)return this[r]=d,!0},_moveLeft:function(h,r){return this._move(h,r,"Left")},_moveRight:function(h,r){return this._move(h,r,"Right")},moveCursorLeftWithoutShift:function(h){var r=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(r=this._moveLeft(h,"selectionStart")),this.selectionEnd=this.selectionStart,r},moveCursorLeftWithShift:function(h){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(h,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(h,"selectionStart")},moveCursorRight:function(h){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",h)},_moveCursorLeftOrRight:function(h,r){var f="moveCursor"+h+"With";this._currentCursorOpacity=1,r.shiftKey?f+="Shift":f+="outShift",this[f](r)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(h){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(h,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(h,"selectionEnd")},moveCursorRightWithoutShift:function(h){var r=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(r=this._moveRight(h,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,r},removeChars:function(h,r){typeof r>"u"&&(r=h+1),this.removeStyleFromTo(h,r),this._text.splice(h,r-h),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(h,r,f,d){typeof d>"u"&&(d=f),d>f&&this.removeStyleFromTo(f,d);var o=e.util.string.graphemeSplit(h);this.insertNewStyleBlock(o,f,r),this._text=[].concat(this._text.slice(0,f),o,this._text.slice(d)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var h=e.util.toFixed,r=e.util.radiansToDegrees,f=e.util.calcRotateMatrix,d=e.util.transformPoint,o=/  +/g;e.util.object.extend(e.Text.prototype,{_toSVG:function(){var a=this._getSVGLeftTopOffsets(),s=this._getSVGTextAndBg(a.textTop,a.textLeft);return this._wrapSVGTextAndBg(s)},toSVG:function(a){var s=this._createBaseSVGMarkup(this._toSVG(),{reviver:a,noStyle:!0,withShadow:!0}),u=this.path;return u?s+u._createBaseSVGMarkup(u._toSVG(),{reviver:a,withShadow:!0}):s},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(a){var s=!0,u=this.getSvgTextDecoration(this);return[a.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",u?'text-decoration="'+u+'" ':"",'style="',this.getSvgStyles(s),'"',this.addPaintOrder()," >",a.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(a,s){var u=[],p=[],l=a,g;this._setSVGBg(p);for(var y=0,_=this._textLines.length;y<_;y++)g=this._getLineLeftOffset(y),(this.textBackgroundColor||this.styleHas("textBackgroundColor",y))&&this._setSVGTextLineBg(p,y,s+g,l),this._setSVGTextLineText(u,y,s+g,l),l+=this.getHeightOfLine(y);return{textSpans:u,textBgRects:p}},_createTextCharSpan:function(a,s,u,p,l){var g=a!==a.trim()||a.match(o),y=this.getSvgSpanStyles(s,g),_=y?'style="'+y+'"':"",x=s.deltaY,S="",b=e.Object.NUM_FRACTION_DIGITS,E="";if(x&&(S=' dy="'+h(x,b)+'" '),l.renderLeft!==void 0){var T=l.angle;E=' rotate="'+h(r(T),e.Object.NUM_FRACTION_DIGITS)+'" ';var O=l.width/2,A=f({angle:r(T)});A[4]=l.renderLeft,A[5]=l.renderTop;var j=d({x:-O,y:0},A);u=j.x,p=j.y}return['<tspan x="',h(u,b),'" y="',h(p,b),'" ',S,_,E,">",e.util.string.escapeXml(a),"</tspan>"].join("")},_setSVGTextLineText:function(a,s,u,p){var l=this.getHeightOfLine(s),g=this.textAlign.indexOf("justify")!==-1,y,_,x="",S,b,E=0,T=this._textLines[s],O;p+=l*(1-this._fontSizeFraction)/this.lineHeight;for(var A=0,j=T.length-1;A<=j;A++)O=A===j||this.charSpacing||this.path,x+=T[A],S=this.__charBounds[s][A],E===0?(u+=S.kernedWidth-S.width,E+=S.width):E+=S.kernedWidth,g&&!O&&this._reSpaceAndTab.test(T[A])&&(O=!0),O||(y=y||this.getCompleteStyleDeclaration(s,A),_=this.getCompleteStyleDeclaration(s,A+1),O=e.util.hasStyleChanged(y,_,!0)),O&&(b=this._getStyleDeclaration(s,A)||{},a.push(this._createTextCharSpan(x,b,u,p,S)),x="",y=_,u+=E,E=0)},_pushTextBgRect:function(a,s,u,p,l,g){var y=e.Object.NUM_FRACTION_DIGITS;a.push("		<rect ",this._getFillAttributes(s),' x="',h(u,y),'" y="',h(p,y),'" width="',h(l,y),'" height="',h(g,y),`"></rect>
`)},_setSVGTextLineBg:function(a,s,u,p){for(var l=this._textLines[s],g=this.getHeightOfLine(s)/this.lineHeight,y=0,_=0,x,S,b=this.getValueOfPropertyAt(s,0,"textBackgroundColor"),E=0,T=l.length;E<T;E++)x=this.__charBounds[s][E],S=this.getValueOfPropertyAt(s,E,"textBackgroundColor"),S!==b?(b&&this._pushTextBgRect(a,b,u+_,p,y,g),_=x.left,y=x.width,b=S):y+=x.kernedWidth;S&&this._pushTextBgRect(a,S,u+_,p,y,g)},_getFillAttributes:function(a){var s=a&&typeof a=="string"?new e.Color(a):"";return!s||!s.getSource()||s.getAlpha()===1?'fill="'+a+'"':'opacity="'+s.getAlpha()+'" fill="'+s.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(a){for(var s=0,u=0,p=0;p<a;p++)s+=this.getHeightOfLine(p);return u=this.getHeightOfLine(p),{lineTop:s,offset:(this._fontSizeMult-this._fontSizeFraction)*u/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(a){var s=e.Object.prototype.getSvgStyles.call(this,a);return s+" white-space: pre;"}})}(),function(h){var r=h.fabric||(h.fabric={});r.Textbox=r.util.createClass(r.IText,r.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:r.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(f){for(var d=0,o=0,a=0,s={},u=0;u<f.graphemeLines.length;u++)f.graphemeText[a]===`
`&&u>0?(o=0,a++,d++):!this.splitByGrapheme&&this._reSpaceAndTab.test(f.graphemeText[a])&&u>0&&(o++,a++),s[u]={line:d,offset:o},a+=f.graphemeLines[u].length,o+=f.graphemeLines[u].length;return s},styleHas:function(f,d){if(this._styleMap&&!this.isWrapping){var o=this._styleMap[d];o&&(d=o.line)}return r.Text.prototype.styleHas.call(this,f,d)},isEmptyStyles:function(f){if(!this.styles)return!0;var d=0,o=f+1,a,s,u=!1,p=this._styleMap[f],l=this._styleMap[f+1];p&&(f=p.line,d=p.offset),l&&(o=l.line,u=o===f,a=l.offset),s=typeof f>"u"?this.styles:{line:this.styles[f]};for(var g in s)for(var y in s[g])if(y>=d&&(!u||y<a))for(var _ in s[g][y])return!1;return!0},_getStyleDeclaration:function(f,d){if(this._styleMap&&!this.isWrapping){var o=this._styleMap[f];if(!o)return null;f=o.line,d=o.offset+d}return this.callSuper("_getStyleDeclaration",f,d)},_setStyleDeclaration:function(f,d,o){var a=this._styleMap[f];f=a.line,d=a.offset+d,this.styles[f][d]=o},_deleteStyleDeclaration:function(f,d){var o=this._styleMap[f];f=o.line,d=o.offset+d,delete this.styles[f][d]},_getLineStyle:function(f){var d=this._styleMap[f];return!!this.styles[d.line]},_setLineStyle:function(f){var d=this._styleMap[f];this.styles[d.line]={}},_wrapText:function(f,d){var o=[],a;for(this.isWrapping=!0,a=0;a<f.length;a++)o=o.concat(this._wrapLine(f[a],a,d));return this.isWrapping=!1,o},_measureWord:function(f,d,o){var a=0,s,u=!0;o=o||0;for(var p=0,l=f.length;p<l;p++){var g=this._getGraphemeBox(f[p],d,p+o,s,u);a+=g.kernedWidth,s=f[p]}return a},_wrapLine:function(f,d,o,A){var s=0,u=this.splitByGrapheme,p=[],l=[],g=u?r.util.string.graphemeSplit(f):f.split(this._wordJoiners),y="",_=0,x=u?"":" ",S=0,b=0,E=0,T=!0,O=this._getWidthOfCharSpacing(),A=A||0;g.length===0&&g.push([]),o-=A;for(var j=0;j<g.length;j++)y=u?g[j]:r.util.string.graphemeSplit(g[j]),S=this._measureWord(y,d,_),_+=y.length,s+=b+S-O,s>o&&!T?(p.push(l),l=[],s=S,T=!0):s+=O,!T&&!u&&l.push(x),l=l.concat(y),b=u?0:this._measureWord([x],d,_),_++,T=!1,S>E&&(E=S);return j&&p.push(l),E+A>this.dynamicMinWidth&&(this.dynamicMinWidth=E-O+A),p},isEndOfWrapping:function(f){return!this._styleMap[f+1]||this._styleMap[f+1].line!==this._styleMap[f].line},missingNewlineOffset:function(f,d){return this.splitByGrapheme&&!d?this.isEndOfWrapping(f)?1:0:1},_splitTextIntoLines:function(f){for(var d=r.Text.prototype._splitTextIntoLines.call(this,f),o=this._wrapText(d.lines,this.width),a=new Array(o.length),s=0;s<o.length;s++)a[s]=o[s].join("");return d.lines=a,d.graphemeLines=o,d},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var f={};for(var d in this._styleMap)this._textLines[d]&&(f[this._styleMap[d].line]=1);for(var d in this.styles)f[d]||delete this.styles[d]},toObject:function(f){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(f))}}),r.Textbox.fromObject=function(f,d){var o=r.util.stylesFromArray(f.styles,f.text),a=Object.assign({},f,{styles:o});return delete a.path,r.Object._fromObject("Textbox",a,function(s){f.path?r.Object._fromObject("Path",f.path,function(u){s.set("path",u),d(s)},"path"):d(s)},"text")}}(t),function(){var h=e.controlsUtils,r=h.scaleSkewCursorStyleHandler,f=h.scaleCursorStyleHandler,d=h.scalingEqually,o=h.scalingYOrSkewingX,a=h.scalingXOrSkewingY,s=h.scaleOrSkewActionName,u=e.Object.prototype.controls;if(u.ml=new e.Control({x:-.5,y:0,cursorStyleHandler:r,actionHandler:a,getActionName:s}),u.mr=new e.Control({x:.5,y:0,cursorStyleHandler:r,actionHandler:a,getActionName:s}),u.mb=new e.Control({x:0,y:.5,cursorStyleHandler:r,actionHandler:o,getActionName:s}),u.mt=new e.Control({x:0,y:-.5,cursorStyleHandler:r,actionHandler:o,getActionName:s}),u.tl=new e.Control({x:-.5,y:-.5,cursorStyleHandler:f,actionHandler:d}),u.tr=new e.Control({x:.5,y:-.5,cursorStyleHandler:f,actionHandler:d}),u.bl=new e.Control({x:-.5,y:.5,cursorStyleHandler:f,actionHandler:d}),u.br=new e.Control({x:.5,y:.5,cursorStyleHandler:f,actionHandler:d}),u.mtr=new e.Control({x:0,y:-.5,actionHandler:h.rotationWithSnapping,cursorStyleHandler:h.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),e.Textbox){var p=e.Textbox.prototype.controls={};p.mtr=u.mtr,p.tr=u.tr,p.br=u.br,p.tl=u.tl,p.bl=u.bl,p.mt=u.mt,p.mb=u.mb,p.mr=new e.Control({x:.5,y:0,actionHandler:h.changeWidth,cursorStyleHandler:r,actionName:"resizing"}),p.ml=new e.Control({x:-.5,y:0,actionHandler:h.changeWidth,cursorStyleHandler:r,actionName:"resizing"})}}()})(_v);function Z1(){const t=ae.useRef(null),e=ae.useRef(null),n=Fc(),[i,c]=ae.useState(!1);ae.useEffect(()=>{if(t.current){const d=new _v.fabric.Canvas(t.current,{width:800,height:600,backgroundColor:"#ffffff",isDrawingMode:!0});return e.current=d,d.freeDrawingBrush.width=5,d.freeDrawingBrush.color="#000000",()=>{d.dispose()}}},[]);const v=()=>{e.current&&(e.current.clear(),e.current.backgroundColor="#ffffff",e.current.renderAll())},w=()=>{if(e.current){const d=e.current.toDataURL({format:"png",quality:1});console.log("Sketch saved:",d),n("/design/demo-123")}},h=()=>{e.current&&(c(!0),setTimeout(()=>{c(!1),n("/design/demo-123")},2e3))},r=d=>{e.current&&(e.current.freeDrawingBrush.color=d)},f=d=>{e.current&&(e.current.freeDrawingBrush.width=d)};return P.jsxs("div",{className:"max-w-6xl mx-auto",children:[P.jsxs("div",{className:"text-center mb-8",children:[P.jsx("h1",{className:"text-3xl font-bold text-meesho-dark mb-2",children:"Design Your Outfit"}),P.jsx("p",{className:"text-gray-600",children:"Sketch your ideas and let AI bring them to life!"})]}),P.jsxs("div",{className:"grid lg:grid-cols-4 gap-6",children:[P.jsx("div",{className:"lg:col-span-1",children:P.jsxs("div",{className:"card",children:[P.jsxs("h3",{className:"text-lg font-semibold text-meesho-dark mb-4 flex items-center",children:[P.jsx(cr,{className:"w-5 h-5 mr-2"}),"Drawing Tools"]}),P.jsxs("div",{className:"mb-6",children:[P.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Colors"}),P.jsx("div",{className:"grid grid-cols-4 gap-2",children:["#000000","#FF6B6B","#4ECDC4","#45B7D1","#FFE66D","#A8E6CF","#FF8B94","#FFA07A"].map(d=>P.jsx("button",{onClick:()=>r(d),className:"w-8 h-8 rounded-full border-2 border-gray-300 hover:border-meesho-primary transition-colors",style:{backgroundColor:d}},d))})]}),P.jsxs("div",{className:"mb-6",children:[P.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Brush Size"}),P.jsx("div",{className:"space-y-2",children:[2,5,10,15].map(d=>P.jsx("button",{onClick:()=>f(d),className:"w-full py-2 px-3 text-left text-sm rounded-md hover:bg-gray-50 transition-colors",children:P.jsxs("div",{className:"flex items-center",children:[P.jsx("div",{className:"bg-black rounded-full mr-3",style:{width:d,height:d}}),d,"px"]})},d))})]}),P.jsxs("div",{className:"space-y-3",children:[P.jsxs("button",{onClick:v,className:"w-full flex items-center justify-center space-x-2 py-2 px-4 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:[P.jsx(Y1,{className:"w-4 h-4"}),P.jsx("span",{children:"Clear Canvas"})]}),P.jsxs("button",{onClick:w,className:"w-full flex items-center justify-center space-x-2 py-2 px-4 bg-meesho-secondary hover:bg-meesho-secondary/90 text-white rounded-lg transition-colors",children:[P.jsx(V1,{className:"w-4 h-4"}),P.jsx("span",{children:"Save Sketch"})]}),P.jsx("button",{onClick:h,disabled:i,className:"w-full flex items-center justify-center space-x-2 py-2 px-4 btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:i?P.jsxs(P.Fragment,{children:[P.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),P.jsx("span",{children:"Generating..."})]}):P.jsxs(P.Fragment,{children:[P.jsx(zu,{className:"w-4 h-4"}),P.jsx("span",{children:"Generate AI Design"})]})})]})]})}),P.jsx("div",{className:"lg:col-span-3",children:P.jsx("div",{className:"card",children:P.jsx("div",{className:"flex justify-center",children:P.jsx("canvas",{ref:t,className:"border border-gray-200 rounded-lg shadow-sm"})})})})]}),P.jsxs("div",{className:"mt-8 card",children:[P.jsx("h3",{className:"text-lg font-semibold text-meesho-dark mb-3",children:"How to Use"}),P.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-sm text-gray-600",children:[P.jsxs("div",{children:[P.jsx("strong",{className:"text-meesho-dark",children:"1. Sketch Your Idea"}),P.jsx("p",{children:"Use the drawing tools to sketch your outfit design on the canvas."})]}),P.jsxs("div",{children:[P.jsx("strong",{className:"text-meesho-dark",children:"2. Customize"}),P.jsx("p",{children:"Choose different colors and brush sizes to create your perfect design."})]}),P.jsxs("div",{children:[P.jsx("strong",{className:"text-meesho-dark",children:"3. Generate AI Design"}),P.jsx("p",{children:'Click "Generate AI Design" to transform your sketch into a stunning dress.'})]})]})]})]})}function eT(){const[t,e]=ae.useState(!1),[n,i]=ae.useState(42),[c,v]=ae.useState(!1),[w,h]=ae.useState(""),[r,f]=ae.useState([{id:"1",user:"Sarah Designer",text:"This is absolutely stunning! Love the color combination.",timestamp:"2 hours ago"},{id:"2",user:"Mike Creative",text:"The AI really captured the essence of your sketch perfectly!",timestamp:"1 hour ago"}]),d=()=>{e(!t),i(t?n-1:n+1)},o=()=>{if(w.trim()){const s={id:Date.now().toString(),user:"You",text:w,timestamp:"Just now"};f([s,...r]),h("")}};return P.jsxs("div",{className:"max-w-4xl mx-auto",children:[P.jsxs("div",{className:"text-center mb-8",children:[P.jsx("h1",{className:"text-3xl font-bold text-meesho-dark mb-2",children:"Your AI-Generated Design"}),P.jsx("p",{className:"text-gray-600",children:"Share your creation with the community!"})]}),P.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[P.jsxs("div",{className:"card",children:[P.jsxs("div",{className:"relative",children:[P.jsx("img",{src:"https://images.unsplash.com/photo-1595777457583-95e059d581b8?w=600&h=800&fit=crop",alt:"AI Generated Dress Design",className:"w-full h-auto rounded-lg shadow-lg"}),P.jsx("div",{className:"absolute top-4 right-4",children:P.jsx("button",{className:"bg-white/90 hover:bg-white p-2 rounded-full shadow-lg transition-colors",children:P.jsx(F1,{className:"w-5 h-5 text-meesho-dark"})})})]}),P.jsxs("div",{className:"flex justify-center space-x-4 mt-6",children:[P.jsxs("button",{onClick:d,className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ${t?"bg-meesho-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[P.jsx(vv,{className:`w-4 h-4 ${t?"fill-current":""}`}),P.jsx("span",{children:n})]}),P.jsxs("button",{onClick:()=>v(!c),className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 text-gray-700 hover:bg-gray-200 rounded-lg transition-colors",children:[P.jsx(yv,{className:"w-4 h-4"}),P.jsx("span",{children:r.length})]}),P.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 text-gray-700 hover:bg-gray-200 rounded-lg transition-colors",children:[P.jsx(X1,{className:"w-4 h-4"}),P.jsx("span",{children:"Share"})]})]})]}),P.jsxs("div",{className:"space-y-6",children:[P.jsxs("div",{className:"card",children:[P.jsx("h3",{className:"text-lg font-semibold text-meesho-dark mb-4",children:"Design Details"}),P.jsxs("div",{className:"space-y-3 text-sm",children:[P.jsxs("div",{className:"flex justify-between",children:[P.jsx("span",{className:"text-gray-600",children:"Style:"}),P.jsx("span",{className:"font-medium",children:"Elegant Evening Dress"})]}),P.jsxs("div",{className:"flex justify-between",children:[P.jsx("span",{className:"text-gray-600",children:"Color Palette:"}),P.jsx("span",{className:"font-medium",children:"Rose Gold & Navy"})]}),P.jsxs("div",{className:"flex justify-between",children:[P.jsx("span",{className:"text-gray-600",children:"Fabric:"}),P.jsx("span",{className:"font-medium",children:"Silk & Lace"})]}),P.jsxs("div",{className:"flex justify-between",children:[P.jsx("span",{className:"text-gray-600",children:"Generated:"}),P.jsx("span",{className:"font-medium",children:"2 hours ago"})]})]})]}),c&&P.jsxs("div",{className:"card",children:[P.jsx("h3",{className:"text-lg font-semibold text-meesho-dark mb-4",children:"Comments"}),P.jsxs("div",{className:"mb-4",children:[P.jsx("textarea",{value:w,onChange:s=>h(s.target.value),placeholder:"Add a comment...",className:"w-full p-3 border border-gray-200 rounded-lg resize-none focus:ring-2 focus:ring-meesho-primary focus:border-transparent",rows:3}),P.jsx("button",{onClick:o,disabled:!w.trim(),className:"mt-2 btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:"Post Comment"})]}),P.jsx("div",{className:"space-y-4",children:r.map(s=>P.jsxs("div",{className:"border-b border-gray-100 pb-4 last:border-b-0",children:[P.jsxs("div",{className:"flex justify-between items-start mb-2",children:[P.jsx("span",{className:"font-medium text-meesho-dark",children:s.user}),P.jsx("span",{className:"text-xs text-gray-500",children:s.timestamp})]}),P.jsx("p",{className:"text-gray-700",children:s.text})]},s.id))})]})]})]}),P.jsxs("div",{className:"mt-12",children:[P.jsx("h2",{className:"text-2xl font-bold text-meesho-dark mb-6",children:"More Designs You'll Love"}),P.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:[1,2,3].map(s=>P.jsxs("div",{className:"card p-0 overflow-hidden",children:[P.jsx("img",{src:`https://images.unsplash.com/photo-${1595777457583+s}?w=300&h=400&fit=crop`,alt:`Design ${s}`,className:"w-full h-48 object-cover"}),P.jsxs("div",{className:"p-4",children:[P.jsxs("h3",{className:"font-medium text-meesho-dark mb-2",children:["Elegant Design ",s]}),P.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[P.jsxs("span",{children:["By Designer ",s]}),P.jsxs("span",{children:[" ",Math.floor(Math.random()*50)+10]})]})]})]},s))})]})]})}function tT(){var i,c;const{currentUser:t}=ih(),e={totalDesigns:15,totalLikes:234,totalComments:45,points:1250,rank:3},n=[{id:"1",title:"Elegant Evening Dress",likes:42,comments:8,image:"https://images.unsplash.com/photo-1595777457583-95e059d581b8?w=300&h=400&fit=crop"},{id:"2",title:"Summer Floral Dress",likes:38,comments:5,image:"https://images.unsplash.com/photo-1595777457584-95e059d581b9?w=300&h=400&fit=crop"},{id:"3",title:"Casual Boho Style",likes:29,comments:3,image:"https://images.unsplash.com/photo-1595777457585-95e059d581c0?w=300&h=400&fit=crop"}];return P.jsxs("div",{className:"max-w-6xl mx-auto",children:[P.jsxs("div",{className:"text-center mb-8",children:[P.jsx("h1",{className:"text-3xl font-bold text-meesho-dark mb-2",children:"Your Profile"}),P.jsx("p",{className:"text-gray-600",children:"Track your designs and achievements"})]}),P.jsxs("div",{className:"grid lg:grid-cols-3 gap-6 mb-8",children:[P.jsxs("div",{className:"card text-center",children:[P.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-meesho-primary to-meesho-secondary rounded-full mx-auto mb-4 flex items-center justify-center",children:P.jsx("span",{className:"text-2xl font-bold text-white",children:((i=t==null?void 0:t.email)==null?void 0:i.charAt(0).toUpperCase())||"U"})}),P.jsx("h2",{className:"text-xl font-semibold text-meesho-dark mb-2",children:((c=t==null?void 0:t.email)==null?void 0:c.split("@")[0])||"User"}),P.jsx("p",{className:"text-gray-600 mb-4",children:t==null?void 0:t.email}),P.jsxs("div",{className:"flex items-center justify-center space-x-2 text-meesho-yellow",children:[P.jsx(ks,{className:"w-5 h-5"}),P.jsxs("span",{className:"font-semibold",children:["Rank #",e.rank]})]})]}),P.jsx("div",{className:"lg:col-span-2",children:P.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[P.jsxs("div",{className:"card text-center",children:[P.jsx("div",{className:"text-2xl font-bold text-meesho-primary",children:e.totalDesigns}),P.jsx("div",{className:"text-sm text-gray-600",children:"Designs"})]}),P.jsxs("div",{className:"card text-center",children:[P.jsx("div",{className:"text-2xl font-bold text-meesho-secondary",children:e.totalLikes}),P.jsx("div",{className:"text-sm text-gray-600",children:"Likes"})]}),P.jsxs("div",{className:"card text-center",children:[P.jsx("div",{className:"text-2xl font-bold text-meesho-accent",children:e.totalComments}),P.jsx("div",{className:"text-sm text-gray-600",children:"Comments"})]}),P.jsxs("div",{className:"card text-center",children:[P.jsx("div",{className:"text-2xl font-bold text-meesho-yellow",children:e.points}),P.jsx("div",{className:"text-sm text-gray-600",children:"Points"})]})]})})]}),P.jsxs("div",{className:"card",children:[P.jsx("h3",{className:"text-xl font-semibold text-meesho-dark mb-6",children:"Your Recent Designs"}),P.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:n.map(v=>P.jsxs("div",{className:"group cursor-pointer",children:[P.jsxs("div",{className:"relative overflow-hidden rounded-lg",children:[P.jsx("img",{src:v.image,alt:v.title,className:"w-full h-48 object-cover transition-transform group-hover:scale-105"}),P.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors"})]}),P.jsxs("div",{className:"mt-3",children:[P.jsx("h4",{className:"font-medium text-meesho-dark mb-2",children:v.title}),P.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[P.jsxs("div",{className:"flex items-center space-x-4",children:[P.jsxs("div",{className:"flex items-center space-x-1",children:[P.jsx(vv,{className:"w-4 h-4"}),P.jsx("span",{children:v.likes})]}),P.jsxs("div",{className:"flex items-center space-x-1",children:[P.jsx(yv,{className:"w-4 h-4"}),P.jsx("span",{children:v.comments})]})]}),P.jsxs("div",{className:"flex items-center space-x-1",children:[P.jsx(N1,{className:"w-4 h-4"}),P.jsx("span",{children:"2d ago"})]})]})]})]},v.id))})]}),P.jsxs("div",{className:"mt-8 card",children:[P.jsx("h3",{className:"text-xl font-semibold text-meesho-dark mb-6",children:"Achievements"}),P.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:[{title:"First Design",description:"Created your first design",earned:!0},{title:"Popular Creator",description:"Reached 100 likes",earned:!0},{title:"Top Designer",description:"Reached top 10 leaderboard",earned:!1}].map((v,w)=>P.jsx("div",{className:`p-4 rounded-lg border-2 ${v.earned?"border-meesho-yellow bg-meesho-yellow/10":"border-gray-200 bg-gray-50"}`,children:P.jsxs("div",{className:"flex items-center space-x-3",children:[P.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${v.earned?"bg-meesho-yellow":"bg-gray-300"}`,children:v.earned?"":"?"}),P.jsxs("div",{children:[P.jsx("h4",{className:"font-medium text-meesho-dark",children:v.title}),P.jsx("p",{className:"text-sm text-gray-600",children:v.description})]})]})},w))})]})]})}function nT(){const t=[{id:"1",name:"Sarah Designer",points:1250,designs:25,likes:450,rank:1,avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face"},{id:"2",name:"Mike Creative",points:980,designs:18,likes:320,rank:2,avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop&crop=face"},{id:"3",name:"Emma Style",points:756,designs:15,likes:280,rank:3,avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=100&h=100&fit=crop&crop=face"},{id:"4",name:"Alex Fashion",points:654,designs:12,likes:245,rank:4,avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face"},{id:"5",name:"Lisa Trend",points:543,designs:10,likes:210,rank:5,avatar:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=100&h=100&fit=crop&crop=face"},{id:"6",name:"David Art",points:432,designs:8,likes:180,rank:6,avatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=100&h=100&fit=crop&crop=face"},{id:"7",name:"Anna Design",points:398,designs:7,likes:165,rank:7,avatar:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=100&h=100&fit=crop&crop=face"},{id:"8",name:"Tom Creative",points:365,designs:6,likes:145,rank:8,avatar:"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=100&h=100&fit=crop&crop=face"},{id:"9",name:"Maria Style",points:334,designs:5,likes:130,rank:9,avatar:"https://images.unsplash.com/photo-1487412720507-e7ab37603c6f?w=100&h=100&fit=crop&crop=face"},{id:"10",name:"John Fashion",points:298,designs:4,likes:115,rank:10,avatar:"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=100&h=100&fit=crop&crop=face"}],e=i=>{switch(i){case 1:return P.jsx(ks,{className:"w-6 h-6 text-meesho-yellow"});case 2:return P.jsx(W1,{className:"w-6 h-6 text-gray-400"});case 3:return P.jsx(L1,{className:"w-6 h-6 text-meesho-orange"});default:return P.jsx("span",{className:"text-lg font-bold text-gray-500",children:i})}},n=i=>{switch(i){case 1:return"bg-gradient-to-r from-meesho-yellow to-yellow-400";case 2:return"bg-gradient-to-r from-gray-300 to-gray-400";case 3:return"bg-gradient-to-r from-meesho-orange to-orange-400";default:return"bg-gray-100"}};return P.jsxs("div",{className:"max-w-4xl mx-auto",children:[P.jsxs("div",{className:"text-center mb-8",children:[P.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[P.jsx(ks,{className:"w-8 h-8 text-meesho-yellow"}),P.jsx("h1",{className:"text-3xl font-bold text-meesho-dark",children:"Leaderboard"})]}),P.jsx("p",{className:"text-gray-600",children:"Top designers based on community engagement and points"})]}),P.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mb-8",children:[P.jsxs("div",{className:"card text-center",children:[P.jsx("div",{className:"text-2xl font-bold text-meesho-primary",children:"1,234"}),P.jsx("div",{className:"text-sm text-gray-600",children:"Total Designers"})]}),P.jsxs("div",{className:"card text-center",children:[P.jsx("div",{className:"text-2xl font-bold text-meesho-secondary",children:"5,678"}),P.jsx("div",{className:"text-sm text-gray-600",children:"Total Designs"})]}),P.jsxs("div",{className:"card text-center",children:[P.jsx("div",{className:"text-2xl font-bold text-meesho-accent",children:"12,345"}),P.jsx("div",{className:"text-sm text-gray-600",children:"Total Likes"})]}),P.jsxs("div",{className:"card text-center",children:[P.jsx("div",{className:"text-2xl font-bold text-meesho-yellow",children:"890"}),P.jsx("div",{className:"text-sm text-gray-600",children:"Total Comments"})]})]}),P.jsxs("div",{className:"card",children:[P.jsxs("div",{className:"flex items-center justify-between mb-6",children:[P.jsx("h2",{className:"text-xl font-semibold text-meesho-dark",children:"Top Designers"}),P.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[P.jsx(G1,{className:"w-4 h-4"}),P.jsx("span",{children:"Updated daily"})]})]}),P.jsx("div",{className:"space-y-4",children:t.map(i=>P.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border-2 transition-all hover:shadow-md ${i.rank<=3?"border-meesho-yellow/20 bg-meesho-yellow/5":"border-gray-100"}`,children:[P.jsxs("div",{className:"flex items-center space-x-4",children:[P.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${n(i.rank)}`,children:e(i.rank)}),P.jsxs("div",{className:"flex items-center space-x-3",children:[P.jsx("img",{src:i.avatar,alt:i.name,className:"w-10 h-10 rounded-full object-cover"}),P.jsxs("div",{children:[P.jsx("h3",{className:"font-medium text-meesho-dark",children:i.name}),P.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[P.jsxs("span",{children:[i.designs," designs"]}),P.jsx("span",{children:""}),P.jsxs("span",{children:[i.likes," likes"]})]})]})]})]}),P.jsxs("div",{className:"text-right",children:[P.jsx("div",{className:"text-xl font-bold text-meesho-primary",children:i.points}),P.jsx("div",{className:"text-sm text-gray-600",children:"points"})]})]},i.id))})]}),P.jsxs("div",{className:"mt-8 card",children:[P.jsx("h3",{className:"text-lg font-semibold text-meesho-dark mb-4",children:"How to Earn Points"}),P.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-sm",children:[P.jsxs("div",{className:"flex items-start space-x-3",children:[P.jsx("div",{className:"w-6 h-6 bg-meesho-primary text-white rounded-full flex items-center justify-center text-xs font-bold",children:"1"}),P.jsxs("div",{children:[P.jsx("strong",{className:"text-meesho-dark",children:"Create Designs"}),P.jsx("p",{className:"text-gray-600",children:"Earn 10 points for each design you create"})]})]}),P.jsxs("div",{className:"flex items-start space-x-3",children:[P.jsx("div",{className:"w-6 h-6 bg-meesho-secondary text-white rounded-full flex items-center justify-center text-xs font-bold",children:"2"}),P.jsxs("div",{children:[P.jsx("strong",{className:"text-meesho-dark",children:"Get Likes"}),P.jsx("p",{className:"text-gray-600",children:"Earn 2 points for each like on your designs"})]})]}),P.jsxs("div",{className:"flex items-start space-x-3",children:[P.jsx("div",{className:"w-6 h-6 bg-meesho-accent text-white rounded-full flex items-center justify-center text-xs font-bold",children:"3"}),P.jsxs("div",{children:[P.jsx("strong",{className:"text-meesho-dark",children:"Engage"}),P.jsx("p",{className:"text-gray-600",children:"Earn 1 point for each comment you make"})]})]})]})]})]})}function iT(){const[t,e]=ae.useState(""),[n,i]=ae.useState(""),[c,v]=ae.useState(!1),[w,h]=ae.useState(!1),[r,f]=ae.useState(""),{login:d,signup:o,signInWithGoogle:a}=ih(),s=Fc(),u=async l=>{l.preventDefault(),f(""),h(!0);try{c?await o(t,n):await d(t,n),s("/")}catch(g){f("Failed to "+(c?"sign up":"log in")),console.error(g)}h(!1)},p=async()=>{try{await a(),s("/")}catch(l){f("Failed to sign in with Google"),console.error(l)}};return P.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-meesho-light to-white py-12 px-4 sm:px-6 lg:px-8",children:P.jsxs("div",{className:"max-w-md w-full space-y-8",children:[P.jsxs("div",{className:"text-center",children:[P.jsx("div",{className:"mx-auto h-12 w-12 bg-gradient-to-r from-meesho-primary to-meesho-secondary rounded-lg flex items-center justify-center",children:P.jsx(cr,{className:"h-8 w-8 text-white"})}),P.jsx("h2",{className:"mt-6 text-3xl font-bold text-meesho-dark",children:c?"Create Account":"Sign In"}),P.jsx("p",{className:"mt-2 text-sm text-gray-600",children:c?"Join the Meesho Design Studio community":"Welcome back to Meesho Design Studio"})]}),P.jsxs("form",{className:"mt-8 space-y-6",onSubmit:u,children:[r&&P.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:r}),P.jsxs("div",{className:"space-y-4",children:[P.jsxs("div",{children:[P.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),P.jsxs("div",{className:"mt-1 relative",children:[P.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:P.jsx(H1,{className:"h-5 w-5 text-gray-400"})}),P.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:l=>e(l.target.value),className:"appearance-none relative block w-full pl-10 pr-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-meesho-primary focus:border-meesho-primary focus:z-10 sm:text-sm",placeholder:"Enter your email"})]})]}),P.jsxs("div",{children:[P.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),P.jsxs("div",{className:"mt-1 relative",children:[P.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:P.jsx(U1,{className:"h-5 w-5 text-gray-400"})}),P.jsx("input",{id:"password",name:"password",type:"password",autoComplete:c?"new-password":"current-password",required:!0,value:n,onChange:l=>i(l.target.value),className:"appearance-none relative block w-full pl-10 pr-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-meesho-primary focus:border-meesho-primary focus:z-10 sm:text-sm",placeholder:"Enter your password"})]})]})]}),P.jsx("div",{children:P.jsx("button",{type:"submit",disabled:w,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-meesho-primary hover:bg-meesho-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-meesho-primary disabled:opacity-50 disabled:cursor-not-allowed",children:w?P.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):P.jsx("span",{children:c?"Create Account":"Sign In"})})}),P.jsxs("div",{className:"relative",children:[P.jsx("div",{className:"absolute inset-0 flex items-center",children:P.jsx("div",{className:"w-full border-t border-gray-300"})}),P.jsx("div",{className:"relative flex justify-center text-sm",children:P.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),P.jsx("div",{children:P.jsxs("button",{type:"button",onClick:p,className:"group relative w-full flex justify-center py-3 px-4 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-meesho-primary",children:[P.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[P.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),P.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),P.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),P.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google"]})}),P.jsx("div",{className:"text-center",children:P.jsx("button",{type:"button",onClick:()=>v(!c),className:"text-meesho-primary hover:text-meesho-primary/80 font-medium",children:c?"Already have an account? Sign in":"Don't have an account? Sign up"})})]}),P.jsx("div",{className:"text-center",children:P.jsx(Ji,{to:"/",className:"text-gray-600 hover:text-meesho-primary",children:" Back to Home"})})]})})}function rT({children:t}){var w;const{currentUser:e,logout:n}=ih(),i=Rs(),c=[{name:"Home",href:"/",icon:B1},{name:"Design",href:"/sketch",icon:cr},{name:"Leaderboard",href:"/leaderboard",icon:ks},{name:"Profile",href:"/profile",icon:$1}],v=async()=>{try{await n()}catch(h){console.error("Failed to log out:",h)}};return P.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-meesho-light to-white",children:[P.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:P.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:P.jsxs("div",{className:"flex justify-between items-center h-16",children:[P.jsxs(Ji,{to:"/",className:"flex items-center space-x-2",children:[P.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-meesho-primary to-meesho-secondary rounded-lg flex items-center justify-center",children:P.jsx(cr,{className:"w-5 h-5 text-white"})}),P.jsx("span",{className:"text-xl font-bold text-meesho-dark",children:"Meesho Design Studio"})]}),P.jsx("nav",{className:"hidden md:flex space-x-8",children:c.map(h=>{const r=h.icon,f=i.pathname===h.href;return P.jsxs(Ji,{to:h.href,className:`flex items-center space-x-1 px-3 py-2 rounded-md text-sm font-medium transition-colors ${f?"text-meesho-primary bg-meesho-primary/10":"text-gray-600 hover:text-meesho-primary hover:bg-gray-50"}`,children:[P.jsx(r,{className:"w-4 h-4"}),P.jsx("span",{children:h.name})]},h.name)})}),P.jsx("div",{className:"flex items-center space-x-4",children:e?P.jsxs(P.Fragment,{children:[P.jsxs("span",{className:"text-sm text-gray-600",children:["Hi, ",(w=e.email)==null?void 0:w.split("@")[0]]}),P.jsxs("button",{onClick:v,className:"flex items-center space-x-1 text-gray-600 hover:text-meesho-primary transition-colors",children:[P.jsx(z1,{className:"w-4 h-4"}),P.jsx("span",{className:"text-sm",children:"Logout"})]})]}):P.jsx(Ji,{to:"/login",className:"btn-primary",children:"Sign In"})})]})})}),P.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t})]})}function sT(){return P.jsx(R1,{children:P.jsx(yw,{children:P.jsxs(ld,{children:[P.jsx(En,{path:"/login",element:P.jsx(iT,{})}),P.jsx(En,{path:"/*",element:P.jsx(rT,{children:P.jsxs(ld,{children:[P.jsx(En,{path:"/",element:P.jsx(q1,{})}),P.jsx(En,{path:"/sketch",element:P.jsx(Z1,{})}),P.jsx(En,{path:"/design/:id",element:P.jsx(eT,{})}),P.jsx(En,{path:"/profile",element:P.jsx(tT,{})}),P.jsx(En,{path:"/leaderboard",element:P.jsx(nT,{})})]})})})]})})})}Ll.createRoot(document.getElementById("root")).render(P.jsx(sp.StrictMode,{children:P.jsx(sT,{})}));
